<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="LuxeStay - Premium Apartment Rentals with luxury amenities and prime locations" />
    <meta
      name="keywords"
      content="luxury apartments, rental properties, premium living, real estate" />
    <meta name="author" content="LuxeStay" />
    <title>LuxeStay | Premium Apartment Rentals</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://images.unsplash.com" />
    <!-- Existing styles remain unchanged -->
    <style>
      /* SaaS Variables System */
      :root {
        /* Color System */
        --primary-color: #2a2a72;
        --primary-light: #3a3a92;
        --secondary-color: #009ffd;
        --secondary-light: #33b1ff;
        --accent-color: #ff6b6b;
        --text-color: #333;
        --text-light: #777;
        --text-white: #fff;
        --bg-light: #f8f9fa;
        --bg-white: #ffffff;
        --bg-dark: #1a1a2e;

        /* Animation System */
        --transition-slow: 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --transition-medium: 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --transition-fast: 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --transition-elastic: 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);

        /* Layout System */
        --container-width: 1200px;
        --spacing-xs: 0.5rem;
        --spacing-sm: 1rem;
        --spacing-md: 2rem;
        --spacing-lg: 4rem;
        --spacing-xl: 8rem;

        /* Border System */
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 16px;
        --radius-xl: 24px;

        /* Shadow System */
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
        --shadow-inset: inset 0 2px 5px rgba(0, 0, 0, 0.05);

        /* 3D System */
        --perspective: 1000px;
        --rotate-sm: 5deg;
        --rotate-md: 10deg;
        --rotate-lg: 20deg;
        --skew-sm: 2deg;
        --skew-md: 5deg;
        --skew-lg: 10deg;
      }

      /* Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        scroll-behavior: smooth;
      }

      body {
        font-family: "Segoe UI", "Arial", sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        overflow-x: hidden;
        background-color: var(--bg-light);
      }

      /* Layout Components */
      .container {
        width: 90%;
        max-width: var(--container-width);
        margin: 0 auto;
      }

      section {
        padding: var(--spacing-lg) 0;
        position: relative;
      }

      /* Header & Navigation */
      .header {
        position: fixed;
        top: 0;
        width: 100%;
        padding: var(--spacing-sm) 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        z-index: 1000;
        transition: var(--transition-medium);
        box-shadow: var(--shadow-sm);
      }

      .header.scrolled {
        padding: var(--spacing-xs) 0;
        box-shadow: var(--shadow-md);
      }

      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .nav__logo {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
        transform: rotate(-3deg);
        transition: var(--transition-fast);
      }

      .nav__logo:hover {
        transform: rotate(0deg) scale(1.05);
        color: var(--secondary-color);
      }

      .nav__list {
        display: flex;
        gap: var(--spacing-md);
        list-style: none;
      }

      .nav__link {
        text-decoration: none;
        color: var(--text-color);
        font-weight: 500;
        position: relative;
        padding: var(--spacing-xs) var(--spacing-sm);
        transition: var(--transition-medium);
        overflow: hidden;
      }

      .nav__link::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--secondary-color);
        transform: translateX(-100%);
        transition: var(--transition-medium);
      }

      .nav__link:hover {
        color: var(--secondary-color);
      }

      .nav__link:hover::after {
        transform: translateX(0);
      }

      .nav__toggle {
        display: none;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--primary-color);
        cursor: pointer;
        transition: var(--transition-fast);
      }

      .nav__toggle:hover {
        transform: rotate(90deg);
        color: var(--secondary-color);
      }

      /* Hero Section */
      .hero {
        height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .hero__background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            45deg,
            rgba(42, 42, 114, 0.9),
            rgba(0, 159, 253, 0.8)
          ),
          url("https://images.unsplash.com/photo-1564013799919-ab600027ffc6")
            center/cover;
        background-blend-mode: multiply;
        filter: blur(5px);
        transform: scale(1.1);
        transition: var(--transition-slow);
      }

      .hero:hover .hero__background {
        filter: blur(0);
        transform: scale(1);
      }

      .hero__content {
        position: relative;
        z-index: 1;
        color: var(--text-white);
        max-width: 600px;
        opacity: 0;
        transform: translateY(30px);
        animation: fadeInUp 1.2s var(--transition-elastic) forwards 0.5s;
      }

      .hero__title {
        font-size: 3.5rem;
        margin-bottom: var(--spacing-sm);
        line-height: 1.2;
        transform: perspective(var(--perspective)) rotateX(var(--rotate-sm));
        transition: var(--transition-medium);
      }

      .hero:hover .hero__title {
        transform: perspective(var(--perspective)) rotateX(0);
      }

      .hero__subtitle {
        font-size: 1.5rem;
        margin-bottom: var(--spacing-md);
        opacity: 0.9;
      }

      .hero__cta {
        display: inline-block;
        padding: var(--spacing-sm) var(--spacing-md);
        background: var(--secondary-color);
        color: var(--text-white);
        border: none;
        border-radius: var(--radius-md);
        font-size: 1.1rem;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: var(--transition-medium);
        transform: translateZ(0);
        box-shadow: var(--shadow-md);
      }

      .hero__cta:hover {
        background: var(--secondary-light);
        transform: translateY(-5px) scale(1.05);
        box-shadow: var(--shadow-lg);
      }

      /* Properties Section */
      .section-title {
        font-size: 2.5rem;
        margin-bottom: var(--spacing-md);
        text-align: center;
        color: var(--primary-color);
        position: relative;
        opacity: 0;
        transform: translateY(20px);
        transition: var(--transition-medium);
      }

      .section-title.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .section-title::after {
        content: "";
        display: block;
        width: 80px;
        height: 4px;
        background: var(--secondary-color);
        margin: var(--spacing-xs) auto;
        border-radius: var(--radius-sm);
      }

      .properties__grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: var(--spacing-md);
        margin-top: var(--spacing-md);
      }

      .property-card {
        background: var(--bg-white);
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-md);
        transition: var(--transition-medium);
        transform-style: preserve-3d;
        perspective: var(--perspective);
        transform: perspective(var(--perspective)) rotateY(var(--rotate-sm))
          skewX(calc(-1 * var(--skew-sm)));
        opacity: 0;
      }

      .property-card.visible {
        opacity: 1;
      }

      .property-card:hover {
        transform: perspective(var(--perspective)) rotateY(0) skewX(0);
        box-shadow: var(--shadow-lg);
      }

      .property-card__image-container {
        position: relative;
        overflow: hidden;
        height: 220px;
      }

      .property-card__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: blur(2px) brightness(0.9);
        transition: var(--transition-medium);
        transform: scale(1.1);
      }

      .property-card:hover .property-card__image {
        filter: blur(0) brightness(1);
        transform: scale(1);
      }

      .property-card__tag {
        position: absolute;
        top: var(--spacing-sm);
        right: var(--spacing-sm);
        background: var(--accent-color);
        color: var(--text-white);
        padding: 0.25rem 0.75rem;
        border-radius: var(--radius-sm);
        font-size: 0.8rem;
        font-weight: 600;
        z-index: 1;
        transform: translateY(-10px);
        opacity: 0;
        transition: var(--transition-medium);
      }

      .property-card:hover .property-card__tag {
        transform: translateY(0);
        opacity: 1;
      }

      .property-card__info {
        padding: var(--spacing-md);
      }

      .property-card__title {
        font-size: 1.5rem;
        margin-bottom: var(--spacing-xs);
        color: var(--primary-color);
        transition: var(--transition-fast);
      }

      .property-card:hover .property-card__title {
        color: var(--secondary-color);
      }

      .property-card__location {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-light);
        margin-bottom: var(--spacing-sm);
        font-size: 0.9rem;
      }

      .property-card__price {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--secondary-color);
        margin-bottom: var(--spacing-sm);
      }

      .property-card__details {
        display: flex;
        justify-content: space-between;
        padding-top: var(--spacing-sm);
        border-top: 1px solid rgba(0, 0, 0, 0.1);
      }

      .property-card__detail {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
      }

      /* Services Section */
      .services {
        background-color: var(--bg-white);
      }

      .services__grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--spacing-md);
      }

      .service-card {
        text-align: center;
        padding: var(--spacing-md);
        border-radius: var(--radius-lg);
        background: var(--bg-light);
        transition: var(--transition-medium);
        transform: translateZ(0);
        opacity: 0;
      }

      .service-card.visible {
        opacity: 1;
      }

      .service-card:hover {
        transform: translateY(-10px);
        box-shadow: var(--shadow-md);
      }

      .service-card__icon {
        font-size: 3rem;
        color: var(--secondary-color);
        margin-bottom: var(--spacing-sm);
      }

      .service-card__title {
        font-size: 1.5rem;
        margin-bottom: var(--spacing-xs);
        color: var(--primary-color);
      }

      /* Testimonials */
      .testimonials {
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: var(--text-white);
      }

      .testimonials .section-title {
        color: var(--text-white);
      }

      .testimonials__container {
        position: relative;
        overflow: hidden;
        padding: var(--spacing-md) 0;
      }

      .testimonial {
        text-align: center;
        padding: var(--spacing-md);
        opacity: 0;
        transform: translateX(50px);
        transition: var(--transition-medium);
      }

      .testimonial.visible {
        opacity: 1;
        transform: translateX(0);
      }

      .testimonial__text {
        font-size: 1.2rem;
        font-style: italic;
        margin-bottom: var(--spacing-md);
        position: relative;
      }

      .testimonial__text::before,
      .testimonial__text::after {
        content: '"';
        font-size: 2rem;
        opacity: 0.5;
      }

      .testimonial__author {
        font-weight: 600;
        font-size: 1.1rem;
      }

      /* Contact Section */
      .contact {
        background-color: var(--bg-white);
      }

      .contact__container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--spacing-lg);
      }

      .contact__info {
        opacity: 0;
        transform: translateX(-30px);
        transition: var(--transition-medium);
      }

      .contact__info.visible {
        opacity: 1;
        transform: translateX(0);
      }

      .contact__form {
        opacity: 0;
        transform: translateX(30px);
        transition: var(--transition-medium);
      }

      .contact__form.visible {
        opacity: 1;
        transform: translateX(0);
      }

      .form-group {
        margin-bottom: var(--spacing-sm);
      }

      .form-label {
        display: block;
        margin-bottom: var(--spacing-xs);
        font-weight: 500;
      }

      .form-input,
      .form-textarea {
        width: 100%;
        padding: var(--spacing-sm);
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: var(--radius-md);
        font-family: inherit;
        transition: var(--transition-fast);
      }

      .form-input:focus,
      .form-textarea:focus {
        outline: none;
        border-color: var(--secondary-color);
        box-shadow: var(--shadow-inset);
      }

      .form-textarea {
        resize: vertical;
        min-height: 150px;
      }

      .form-button {
        padding: var(--spacing-sm) var(--spacing-md);
        background: var(--primary-color);
        color: var(--text-white);
        border: none;
        border-radius: var(--radius-md);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-fast);
      }

      .form-button:hover {
        background: var(--primary-light);
        transform: translateY(-3px);
      }

      /* Footer */
      .footer {
        background: var(--bg-dark);
        color: var(--text-white);
        padding: var(--spacing-lg) 0;
        text-align: center;
      }

      .footer__logo {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: var(--spacing-md);
        color: var(--text-white);
      }

      .footer__links {
        display: flex;
        justify-content: center;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-md);
      }

      .footer__link {
        color: var(--text-white);
        text-decoration: none;
        transition: var(--transition-fast);
      }

      .footer__link:hover {
        color: var(--secondary-color);
      }

      .footer__copyright {
        opacity: 0.7;
        font-size: 0.9rem;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-50px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(50px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Modal */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: var(--transition-medium);
        backdrop-filter: blur(5px);
      }

      .modal.active {
        opacity: 1;
        visibility: visible;
      }

      .modal__content {
        background: var(--bg-white);
        border-radius: var(--radius-lg);
        width: 90%;
        max-width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        padding: var(--spacing-md);
        transform: scale(0.9) translateY(30px);
        transition: var(--transition-medium);
      }

      .modal.active .modal__content {
        transform: scale(1) translateY(0);
      }

      .modal__close {
        position: absolute;
        top: var(--spacing-sm);
        right: var(--spacing-sm);
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-color);
        cursor: pointer;
        transition: var(--transition-fast);
      }

      .modal__close:hover {
        color: var(--accent-color);
        transform: rotate(90deg);
      }

      /* Responsive Adjustments */
      @media (max-width: 992px) {
        .hero__title {
          font-size: 2.8rem;
        }
      }

      @media (max-width: 768px) {
        .nav__list {
          position: fixed;
          top: 70px;
          right: -100%;
          flex-direction: column;
          background: var(--bg-white);
          width: 80%;
          height: calc(100vh - 70px);
          padding: var(--spacing-md);
          transition: var(--transition-medium);
          box-shadow: var(--shadow-lg);
        }

        .nav__list.active {
          right: 0;
        }

        .nav__toggle {
          display: block;
        }

        .hero__title {
          font-size: 2.2rem;
        }

        .hero__content {
          text-align: center;
          padding: 0 var(--spacing-md);
        }

        .property-card {
          transform: none;
        }

        .section-title {
          font-size: 2rem;
        }
      }

      @media (max-width: 576px) {
        :root {
          --spacing-lg: 3rem;
          --spacing-md: 1.5rem;
        }

        .hero__title {
          font-size: 1.8rem;
        }

        .hero__subtitle {
          font-size: 1.2rem;
        }

        .property-card__image {
          height: 180px;
        }
      }
    </style>
  </head>
  <body>
    <header class="header" id="header">
      <div class="container">
        <nav class="nav">
          <a href="#" class="nav__logo">LuxeStay</a>
          <ul class="nav__list" id="navList">
            <li><a href="#home" class="nav__link">Home</a></li>
            <li><a href="#properties" class="nav__link">Properties</a></li>
            <li><a href="#services" class="nav__link">Services</a></li>
            <li><a href="#testimonials" class="nav__link">Testimonials</a></li>
            <li><a href="#contact" class="nav__link">Contact</a></li>
          </ul>
          <button
            class="nav__toggle"
            id="navToggle"
            aria-label="Toggle navigation">
            ☰
          </button>
        </nav>
      </div>
    </header>

    <main>
      <section id="home" class="hero">
        <div class="hero__background"></div>
        <div class="container">
          <div class="hero__content">
            <h1 class="hero__title">Find Your Perfect Luxury Apartment</h1>
            <p class="hero__subtitle">
              Premium living spaces in the most desirable locations
            </p>
            <a href="#properties" class="hero__cta">Explore Properties</a>
          </div>
        </div>
      </section>

      <section id="properties" class="properties">
        <div class="container">
          <h2 class="section-title">Featured Properties</h2>
          <div class="properties__grid" id="propertiesGrid">
            <!-- Property cards will be dynamically loaded here -->
          </div>
        </div>
      </section>

      <section id="services" class="services">
        <div class="container">
          <h2 class="section-title">Our Services</h2>
          <div class="services__grid" id="servicesGrid">
            <!-- Service cards will be dynamically loaded here -->
          </div>
        </div>
      </section>

      <section id="testimonials" class="testimonials">
        <div class="container">
          <h2 class="section-title">What Our Clients Say</h2>
          <div class="testimonials__container" id="testimonialsContainer">
            <!-- Testimonials will be dynamically loaded here -->
          </div>
        </div>
      </section>

      <section id="contact" class="contact">
        <div class="container">
          <h2 class="section-title">Get In Touch</h2>
          <div class="contact__container">
            <div class="contact__info">
              <h3>Contact Information</h3>
              <p>
                Feel free to reach out to us for any inquiries about our premium
                apartments.
              </p>
              <div class="contact__details">
                <p><strong>Address:</strong> 123 Luxury Avenue, Downtown</p>
                <p><strong>Phone:</strong> (123) 456-7890</p>
                <p><strong>Email:</strong> info@luxestay.com</p>
                <p><strong>Hours:</strong> Mon-Fri: 9AM - 6PM</p>
              </div>
            </div>
            <form class="contact__form" id="contactForm">
              <div class="form-group">
                <label for="name" class="form-label">Name</label>
                <input type="text" id="name" class="form-input" required />
              </div>
              <div class="form-group">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" class="form-input" required />
              </div>
              <div class="form-group">
                <label for="message" class="form-label">Message</label>
                <textarea
                  id="message"
                  class="form-textarea"
                  required></textarea>
              </div>
              <button type="submit" class="form-button">Send Message</button>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer__logo">LuxeStay</div>
        <div class="footer__links">
          <a href="#" class="footer__link">Privacy Policy</a>
          <a href="#" class="footer__link">Terms of Service</a>
          <a href="#" class="footer__link">FAQ</a>
          <a href="#" class="footer__link">Careers</a>
        </div>
        <p class="footer__copyright">
          &copy; 2023 LuxeStay. All rights reserved.
        </p>
      </div>
    </footer>

    <div class="modal" id="propertyModal">
      <div class="modal__content">
        <button class="modal__close" id="modalClose">&times;</button>
        <div id="modalBody"></div>
      </div>
    </div>

    <script>
      class LuxeStayApp {
        constructor() {
          this.initializeElements();
          this.initializeData();
          this.init();
        }

        initializeElements() {
          // DOM Elements
          this.header = document.getElementById("header");
          this.navToggle = document.getElementById("navToggle");
          this.navList = document.getElementById("navList");
          this.propertiesGrid = document.getElementById("propertiesGrid");
          this.servicesGrid = document.getElementById("servicesGrid");
          this.testimonialsContainer = document.getElementById(
            "testimonialsContainer"
          );
          this.contactForm = document.getElementById("contactForm");
          this.propertyModal = document.getElementById("propertyModal");
          this.modalClose = document.getElementById("modalClose");
          this.modalBody = document.getElementById("modalBody");

          // Additional elements for enhanced functionality
          this.searchInput = document.getElementById("searchInput");
          this.filterButtons = document.querySelectorAll(".filter-button");
          this.sortSelect = document.getElementById("sortSelect");
        }

        initializeData() {
          // Extended property data
          this.properties = [
            {
              id: 1,
              title: "Modern Downtown Loft",
              location: "Downtown, City Center",
              price: 2500,
              priceDisplay: "$2,500/month",
              image:
                "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267",
              tag: "Premium",
              beds: 2,
              baths: 2,
              area: "1,200 sqft",
              amenities: ["Gym", "Pool", "Parking", "Security"],
              description:
                "Luxurious downtown loft with modern amenities and stunning city views.",
              available: true,
              featured: true,
              type: "apartment",
            },
            {
              id: 2,
              title: "Luxury Penthouse Suite",
              location: "Riverside, East End",
              price: 4200,
              priceDisplay: "$4,200/month",
              image:
                "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688",
              tag: "Exclusive",
              beds: 3,
              baths: 3,
              area: "2,100 sqft",
              amenities: ["Rooftop", "Concierge", "Spa", "Wine Cellar"],
              description:
                "Stunning penthouse with panoramic views and luxury finishes.",
              available: true,
              featured: true,
              type: "penthouse",
            },
            // Add more properties here...
          ];

          // Extended services data
          this.services = [
            {
              id: 1,
              icon: "🏠",
              title: "Property Management",
              description:
                "Comprehensive management services for rental properties.",
              features: ["24/7 Support", "Maintenance", "Tenant Screening"],
            },
            {
              id: 2,
              icon: "🔍",
              title: "Property Search",
              description:
                "Advanced search tools for finding perfect apartments.",
              features: ["Custom Filters", "Virtual Tours", "Instant Booking"],
            },
            // Add more services here...
          ];

          // Extended testimonials data
          this.testimonials = [
            {
              id: 1,
              text: "LuxeStay made finding my dream apartment a breeze.",
              author: "John Doe",
              rating: 5,
              date: "2023-08-15",
            },
            // Add more testimonials here...
          ];
        }

        init() {
          this.renderProperties();
          this.renderServices();
          this.renderTestimonials();
          this.initEventListeners();
          this.initScrollAnimations();
          this.initSearchAndFilter();
          this.initializeAnalytics();
        }

        // Enhanced rendering methods
        renderProperties(filteredProperties = this.properties) {
          this.propertiesGrid.innerHTML = filteredProperties
            .map((property) => this.createPropertyCard(property))
            .join("");
          this.initializePropertyImages();
        }

        createPropertyCard(property) {
          return `
            <div class="property-card" data-id="${property.id}" data-type="${
            property.type
          }">
              <div class="property-card__image-container">
                <img 
                  data-src="${property.image}" 
                  alt="${property.title}" 
                  class="property-card__image"
                  loading="lazy"
                >
                <span class="property-card__tag">${property.tag}</span>
                ${
                  property.featured
                    ? '<span class="property-card__featured">Featured</span>'
                    : ""
                }
              </div>
              <div class="property-card__info">
                <h3 class="property-card__title">${property.title}</h3>
                <p class="property-card__location">📍 ${property.location}</p>
                <p class="property-card__price">${property.priceDisplay}</p>
                <div class="property-card__details">
                  <span class="property-card__detail">🛏️ ${
                    property.beds
                  } Beds</span>
                  <span class="property-card__detail">🚿 ${
                    property.baths
                  } Baths</span>
                  <span class="property-card__detail">📏 ${property.area}</span>
                </div>
                <div class="property-card__amenities">
                  ${property.amenities
                    .map(
                      (amenity) => `<span class="amenity-tag">${amenity}</span>`
                    )
                    .join("")}
                </div>
                <button class="property-card__cta" onclick="app.openPropertyModal(${
                  property.id
                })">
                  View Details
                </button>
              </div>
            </div>
          `;
        }

        // Enhanced event listeners
        initEventListeners() {
          // Existing event listeners
          this.initializeNavigationEvents();
          this.initializeModalEvents();
          this.initializeFormEvents();
          this.initializeScrollEvents();

          // New event listeners
          this.initializeSearchEvents();
          this.initializeFilterEvents();
          this.initializeSortEvents();
        }

        // Enhanced modal functionality
        openPropertyModal(propertyId) {
          const property = this.properties.find((p) => p.id === propertyId);
          if (!property) return;

          this.modalBody.innerHTML = this.createModalContent(property);
          this.propertyModal.classList.add("active");
          this.trackPropertyView(property);
        }

        createModalContent(property) {
          return `
            <div class="modal-content">
              <div class="modal-header">
                <h2>${property.title}</h2>
                <span class="modal-price">${property.priceDisplay}</span>
              </div>
              <div class="modal-gallery">
                <img src="${property.image}" alt="${
            property.title
          }" class="modal-image">
              </div>
              <div class="modal-details">
                <div class="modal-info">
                  <h3>Property Details</h3>
                  <p>${property.description}</p>
                  <div class="modal-specs">
                    <div class="spec-item">
                      <span class="spec-label">Location</span>
                      <span class="spec-value">${property.location}</span>
                    </div>
                    <div class="spec-item">
                      <span class="spec-label">Bedrooms</span>
                      <span class="spec-value">${property.beds}</span>
                      </div>
                    <div class="spec-item">
                      <span class="spec-label">Bathrooms</span>
                      <span class="spec-value">${property.baths}</span>
                    </div>
                    <div class="spec-item">
                      <span class="spec-label">Area</span>
                      <span class="spec-value">${property.area}</span>
                    </div>
                  </div>
                </div>
                <div class="modal-amenities">
                  <h3>Amenities</h3>
                  <div class="amenities-grid">
                    ${property.amenities
                      .map(
                        (amenity) => `
                      <div class="amenity-item">
                        <span class="amenity-icon">✓</span>
                        <span class="amenity-name">${amenity}</span>
                      </div>
                    `
                      )
                      .join("")}
                  </div>
                </div>
                <div class="modal-actions">
                  <button class="modal-button primary" onclick="app.scheduleViewing(${
                    property.id
                  })">
                    Schedule Viewing
                  </button>
                  <button class="modal-button secondary" onclick="app.contactAgent(${
                    property.id
                  })">
                    Contact Agent
                  </button>
                </div>
              </div>
            </div>
          `;
        }

        // Analytics and tracking
        initializeAnalytics() {
          this.pageViews = {};
          this.propertyViews = {};
          this.trackPageView();
        }

        trackPageView() {
          const page = window.location.pathname;
          this.pageViews[page] = (this.pageViews[page] || 0) + 1;
        }

        trackPropertyView(property) {
          this.propertyViews[property.id] =
            (this.propertyViews[property.id] || 0) + 1;
        }

        // Utility methods
        formatCurrency(amount) {
          return new Intl.NumberFormat("en-US", {
            style: "currency",
            currency: "USD",
          }).format(amount);
        }

        debounce(func, wait) {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        }
      }

      // Initialize the application
      let app;
      document.addEventListener("DOMContentLoaded", () => {
        app = new LuxeStayApp();
      });
    </script>
  </body>
</html>
