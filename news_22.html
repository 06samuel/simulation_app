<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Valley Properties - Temukan Properti Impian Anda</title>
    <meta name="description"
        content="Jelajahi daftar properti terbaik di Green Valley. Temukan rumah, apartemen, villa impian Anda bersama kami.">
    <meta name="keywords" content="properti, real estate, rumah dijual, apartemen, villa, green valley">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè°</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Font Dasar dan Transisi Warna */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Latar Belakang Hero dengan Efek Parallax Sederhana (jika diinginkan) */
        .hero-bg {
            background-image: url('https://picsum.photos/1920/1080?grayscale&blur=2&random=1');
            /* background-attachment: fixed; /* Uncomment untuk efek parallax sederhana */
        }

        /* Rasio Aspek dan Object Fit untuk Gambar Kartu Properti */
        .property-card img {
            aspect-ratio: 16 / 10;
            object-fit: cover;
        }

        /* Gaya Global Minimal; Utamakan Tailwind. Mode Gelap ditangani oleh prefix dark: dari Tailwind */
        .dark .dark\:bg-gray-850 {
            background-color: #161e2d;
            /* Warna gelap sedikit berbeda untuk section */
        }

        .dark .dark\:bg-gray-750 {
            background-color: #2d3748;
            /* Warna gelap sedikit berbeda untuk filter lanjutan */
        }

        /* Kustomisasi Scrollbar untuk Browser Webkit */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .dark ::-webkit-scrollbar-track {
            background: #2d3748;
            /* Track lebih gelap untuk mode gelap */
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #555;
            /* Thumb lebih gelap untuk mode gelap */
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }

        /* Tambahan untuk Prose agar bekerja baik dengan dark mode jika digunakan untuk markdown */
        .prose {
            color: inherit;
            /* Mewarisi warna teks dari parent */
        }

        .dark .prose strong,
        .dark .prose h1,
        .dark .prose h2,
        .dark .prose h3,
        .dark .prose h4,
        .dark .prose a {
            color: inherit;
            /* Mewarisi warna teks untuk elemen di dalam prose */
        }

        .dark .prose code {
            color: #e5e7eb;
            /* Warna spesifik untuk kode di dark mode jika perlu */
        }

        .prose a {
            color: #059669;
            /* Emerald-600 */
            text-decoration: none;
        }

        .prose a:hover {
            text-decoration: underline;
        }

        .dark .prose a {
            color: #34d399;
            /* Emerald-400 */
        }

        /* Animasi untuk memanjakan pengguna */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.5s ease-in-out forwards;
        }

        .animate-fadeInUp-delay-1 {
            animation: fadeInUp 0.5s ease-in-out 0.1s forwards;
        }

        .animate-fadeInUp-delay-2 {
            animation: fadeInUp 0.5s ease-in-out 0.2s forwards;
        }

        .animate-fadeInUp-delay-3 {
            animation: fadeInUp 0.5s ease-in-out 0.3s forwards;
        }


        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .animate-slideInLeft {
            animation: slideInLeft 0.5s ease-in-out;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300">
    <div id="root">
        <!-- Aplikasi akan dirender di sini -->
        <div class="min-h-screen flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900">
            <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-emerald-500"></div>
            <p class="mt-4 text-lg text-gray-600 dark:text-gray-400">Memuat Green Valley Properties...</p>
        </div>
    </div>

    <script type="module">
        // --- Polyfill/Stub untuk process.env.API_KEY ---
        // PENTING: Dalam aplikasi nyata, kunci API JANGAN PERNAH di-hardcode atau diekspos di kode sisi klien.
        // Ini hanyalah placeholder untuk tujuan demonstrasi.
        // Untuk aplikasi produksi, gunakan backend proxy untuk menangani panggilan API dengan aman.
        const process = { env: { API_KEY: "YOUR_GEMINI_API_KEY_HERE" } }; // GANTI DENGAN KUNCI API GEMINI ANDA JIKA ADA

        // --- Layanan Gemini (Ilustratif, panggilan aktual mungkin terbatas dalam pengaturan ini) ---
        class MockGoogleGenAI {
            constructor(config) {
                this.apiKey = config.apiKey;
                this.models = {
                    generateContent: async ({ model, contents, config: modelConfig }) => {
                        console.log("Mock Gemini: generateContent dipanggil", { model, contents, modelConfig });
                        if (!this.apiKey || this.apiKey === "YOUR_GEMINI_API_KEY_HERE") {
                            return { text: () => "Kunci API Gemini tidak dikonfigurasi. Ini adalah respons tiruan." };
                        }
                        // Simulasi penundaan jaringan
                        await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 500));

                        let responseText = `Respons AI tiruan untuk: ${String(contents).substring(0, 70)}...`;
                        if (typeof contents === 'string') {
                            if (contents.toLowerCase().includes("story") || contents.toLowerCase().includes("cerita")) {
                                responseText = "Di sebuah lembah hijau subur, terselip di antara perbukitan yang landai, terdapat sebuah pondok menawan yang menunggu kisah barunya dimulai...";
                            } else if (contents.toLowerCase().includes("greeting") || contents.toLowerCase().includes("salam")) {
                                responseText = "Selamat datang di Green Valley! Rumah impian Anda menanti.";
                            } else if (contents.toLowerCase().includes("real estate listing description") || contents.toLowerCase().includes("deskripsi listing real estate")) {
                                const prop = modelConfig?.property;
                                responseText = `\n**Temukan Surga Anda!**\n\nTerletak di jantung ${prop?.location || 'lokasi prima'}, ${prop?.type || 'properti'} menakjubkan ini menawarkan pengalaman hidup yang tak tertandingi. Dengan ${prop?.beds || 'kamar tidur luas'} dan ${prop?.baths || 'kamar mandi modern'}, rumah ini sempurna untuk keluarga atau mereka yang mencari peristirahatan mewah.\n\nTata letak seluas ${prop?.area || ''} m¬≤ ini memiliki [sebutkan fitur utama seperti 'ruang tamu terbuka', 'dapur gourmet', atau 'pemandangan menakjubkan']. Melangkah keluar untuk menikmati [sebutkan fitur luar ruangan seperti 'taman pribadi', 'balkon yang disinari matahari', atau 'akses ke fasilitas komunitas'].\n\nDengan fasilitas seperti ${prop?.amenities?.join(', ') || 'fasilitas kelas atas'} dan harga $${(prop?.price || 0).toLocaleString()}, permata ini tidak akan bertahan lama. Jadwalkan kunjungan Anda hari ini dan jadikan rumah impian ini milik Anda!`;
                            }
                        }
                        return { text: () => responseText }; // Kembalikan fungsi yang mengembalikan teks
                    }
                };
            }
        }
        const GoogleGenAI = MockGoogleGenAI; // Gunakan Mock secara default

        const geminiService = {
            ai: null,
            initialize: () => {
                // Inisialisasi layanan AI (Gemini)
                // Dalam aplikasi nyata, Anda akan menginisialisasi SDK Gemini yang sebenarnya di sini.
                // Untuk demo ini, kita menggunakan mock.
                if (process.env.API_KEY && process.env.API_KEY !== "YOUR_GEMINI_API_KEY_HERE") {
                    try {
                        // Coba inisialisasi Gemini AI yang sebenarnya jika SDK tersedia dan API Key ada
                        // Contoh: geminiService.ai = new GoogleGenerativeAI(process.env.API_KEY);
                        // Karena kita tidak menyertakan SDK, kita tetap pakai mock tapi dengan "konfirmasi"
                        geminiService.ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                        console.log("Layanan Gemini Diinisialisasi (menggunakan kunci yang dikonfigurasi - tiruan untuk browser)");
                    } catch (e) {
                        console.warn("SDK GoogleGenerativeAI tidak ditemukan, menggunakan mock sepenuhnya.", e);
                        geminiService.ai = new MockGoogleGenAI({ apiKey: process.env.API_KEY });
                    }
                } else {
                    console.warn("Kunci API Gemini tidak disediakan atau merupakan placeholder. GeminiService akan menggunakan respons tiruan.");
                    geminiService.ai = new MockGoogleGenAI({ apiKey: "YOUR_GEMINI_API_KEY_HERE" });
                }
            },
            generateText: async (prompt, propertyDetailsForContext = null) => {
                // Fungsi untuk menghasilkan teks menggunakan Gemini AI
                if (!geminiService.ai) geminiService.initialize();
                try {
                    const model = geminiService.ai.models; // Sesuaikan dengan API SDK yang sebenarnya
                    const result = await model.generateContent({
                        model: 'gemini-pro', // Atau model lain yang sesuai
                        contents: prompt,
                        config: { property: propertyDetailsForContext } // Untuk konteks tiruan
                    });
                    return result.text(); // Pastikan memanggil text() jika itu fungsi
                } catch (error) {
                    console.error("Kesalahan menghasilkan teks dengan Gemini:", error);
                    return "Kesalahan menghasilkan konten.";
                }
            }
        };
        geminiService.initialize(); // Panggil inisialisasi di awal

        // --- Logika Virtual DOM Sederhana & Komponen ---
        // Variabel global untuk manajemen state dan effect, khas untuk implementasi hook kustom sederhana.
        let _state = []; // Menyimpan semua state
        let _stateIndex = 0; // Indeks untuk melacak state saat ini
        let _effects = []; // Menyimpan semua effect
        let _effectIndex = 0; // Indeks untuk melacak effect saat ini
        let _rootComponent = null; // Komponen root aplikasi
        let _rootElement = null; // Elemen DOM tempat aplikasi dirender

        // Utility: Debounce - Menunda eksekusi fungsi hingga jeda waktu tertentu setelah pemanggilan terakhir.
        // Berguna untuk optimasi event seperti resize, scroll, atau input agar tidak terlalu sering dijalankan.
        const debounce = (func, delay) => {
            let timeout;
            return (...args) => {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        };

        // Fungsi untuk merender ulang aplikasi. Didebounce untuk performa.
        const renderApp = debounce(() => {
            if (!_rootComponent || !_rootElement) return;

            // Reset indeks state dan effect untuk siklus render baru
            _stateIndex = 0;

            const prevEffects = [..._effects]; // Salin efek dari siklus render sebelumnya
            _effectIndex = 0;
            _effects = []; // Kosongkan array efek untuk diisi ulang oleh siklus render saat ini

            _rootElement.innerHTML = ''; // Cara sederhana untuk membersihkan DOM, bisa dioptimalkan dengan diffing VDOM
            const newVDom = _rootComponent(); // Panggil komponen root untuk mendapatkan VDOM baru
            _rootElement.appendChild(newVDom); // Tambahkan VDOM baru ke elemen root

            // Jalankan cleanup untuk efek yang dependensinya berubah atau tidak lagi ada
            prevEffects.forEach((prevEffect) => {
                const currentEffect = _effects.find(e => e.id === prevEffect.id); // Asumsi ada ID unik per efek (untuk sistem lebih robust)
                // Atau jika urutan stabil, bisa pakai index
                if (prevEffect.cleanup && (!currentEffect || !areDepsEqual(prevEffect.deps, currentEffect.deps))) {
                    prevEffect.cleanup();
                }
            });

            // Jalankan callback efek yang dikumpulkan selama proses render ini
            _effects.forEach((effect, index) => {
                // Untuk sistem sederhana ini, kita asumsikan urutan efek stabil
                // Jika tidak ada dependensi (deps undefined), selalu jalankan.
                // Jika ada dependensi, jalankan jika dependensi berubah atau ini adalah run pertama.
                if (!effect.deps || !effect.hasRun || (effect.deps && !areDepsEqual(effect.deps, effect.prevDeps))) {
                    if (effect.hasRun && effect.cleanup) { // Jalankan cleanup dari run sebelumnya untuk efek INI jika dependensi berubah
                        effect.cleanup();
                    }
                    effect.cleanup = effect.callback(); // Jalankan callback effect dan simpan fungsi cleanup-nya
                    effect.hasRun = true; // Tandai bahwa efek ini sudah pernah dijalankan
                    effect.prevDeps = effect.deps ? [...effect.deps] : null; // Simpan dependensi saat ini untuk perbandingan di run berikutnya
                }
                effect.id = index; // Beri ID sederhana berdasarkan urutan (bisa ditingkatkan)
            });
        }, 16); // Debounce sekitar 60fps

        // Hook Kustom: useState - Mirip dengan React.useState
        // Mengelola state dalam komponen fungsional.
        function useState(initialValue) {
            const currentIndex = _stateIndex++; // Dapatkan indeks saat ini dan naikkan untuk panggilan berikutnya

            // Inisialisasi state jika belum ada pada indeks ini
            if (_state[currentIndex] === undefined) {
                _state[currentIndex] = typeof initialValue === 'function' ? initialValue() : initialValue;
            }

            const value = _state[currentIndex];
            const setValue = (newValue) => {
                const actualNewValue = typeof newValue === 'function' ? newValue(_state[currentIndex]) : newValue;
                if (!Object.is(_state[currentIndex], actualNewValue)) { // Gunakan Object.is untuk perbandingan yang lebih akurat
                    _state[currentIndex] = actualNewValue;
                    renderApp(); // Jadwalkan render ulang jika state berubah
                }
            };
            return [value, setValue];
        }

        // Utility: areDepsEqual - Membandingkan dua array dependensi.
        function areDepsEqual(depsA, depsB) {
            if (depsA === undefined && depsB === undefined) return true; // Keduanya undefined (misal, useEffect tanpa deps)
            if (!depsA || !depsB || depsA.length !== depsB.length) return false; // Salah satu null/undefined atau panjang berbeda
            for (let i = 0; i < depsA.length; i++) {
                if (!Object.is(depsA[i], depsB[i])) return false; // Bandingkan tiap elemen dengan Object.is
            }
            return true;
        }

        // Hook Kustom: useEffect - Mirip dengan React.useEffect
        // Menjalankan side effects setelah render.
        function useEffect(callback, deps) {
            const currentIndex = _effectIndex++; // Dapatkan indeks saat ini untuk effect

            // Simpan detail effect untuk diproses setelah render pass selesai
            // `prevDeps` dan `hasRun` akan diisi oleh `renderApp` setelah effect dijalankan.
            // Ini adalah versi sederhana, `_effects` akan diisi ulang setiap render.
            _effects[currentIndex] = {
                callback, // Fungsi yang akan dijalankan
                deps,     // Array dependensi
                hasRun: _effects[currentIndex]?.hasRun || false, // Pertahankan status run sebelumnya jika ada (untuk logika di renderApp)
                cleanup: _effects[currentIndex]?.cleanup || null, // Pertahankan fungsi cleanup sebelumnya
                prevDeps: _effects[currentIndex]?.prevDeps || null // Pertahankan deps sebelumnya
            };
        }

        // Utility: createElement - Membuat elemen DOM dari tag, props, dan children. Mirip JSX.
        function createElement(tag, props = {}, ...children) {
            const element = document.createElement(tag);

            // Atur atribut dan event listener
            Object.entries(props || {}).forEach(([key, value]) => {
                if (key.startsWith('on') && typeof value === 'function') {
                    element.addEventListener(key.substring(2).toLowerCase(), value);
                } else if (key === 'className') {
                    element.setAttribute('class', value);
                } else if (key === 'style' && typeof value === 'object') {
                    Object.assign(element.style, value);
                } else if (key === 'dangerouslySetInnerHTML' && value && typeof value.__html === 'string') {
                    element.innerHTML = value.__html; // Untuk memasukkan HTML mentah (gunakan dengan hati-hati)
                } else if (key === 'value' && (tag === 'input' || tag === 'select' || tag === 'textarea')) {
                    element.value = value; // Atur properti value untuk elemen form
                } else if (key === 'checked' && tag === 'input' && (props.type === 'checkbox' || props.type === 'radio')) {
                    element.checked = !!value; // Atur properti checked
                } else if (key === 'disabled' && typeof value === 'boolean') {
                    if (value) element.setAttribute('disabled', ''); else element.removeAttribute('disabled');
                } else if (key === 'selected' && tag === 'option' && typeof value === 'boolean') {
                    if (value) element.setAttribute('selected', ''); else element.removeAttribute('selected');
                }
                else if (typeof value === 'boolean' && value) { // Untuk atribut boolean seperti 'required', 'autoplay'
                    element.setAttribute(key, '');
                } else if (value !== null && value !== undefined && typeof value !== 'object' && typeof value !== 'function') {
                    element.setAttribute(key, value);
                }
            });

            // Tambahkan children
            children.flat().forEach(child => { // flat() untuk menangani array bersarang dari children (hasil map)
                if (child instanceof Node) {
                    element.appendChild(child);
                } else if (child !== null && child !== undefined) { // Jangan render null atau undefined
                    element.appendChild(document.createTextNode(String(child)));
                }
            });
            return element;
        }

        // --- Data Tiruan (Mock Data) ---
        // Data properti yang akan digunakan dalam aplikasi.
        // Dalam aplikasi nyata, ini akan diambil dari API.
        const mockProperties = [
            { id: 1, name: 'Villa Modern dengan Pemandangan Laut', type: 'Villa', location: 'Tebing Sunset', price: 1200000, beds: 4, baths: 3, area: 320, image: 'https://picsum.photos/seed/prop1/600/400', featured: true, amenities: ['Kolam Renang', 'Garasi', 'Pemandangan Laut', 'Rumah Pintar', 'AC'] },
            { id: 2, name: 'Apartemen Nyaman di Pusat Kota', type: 'Apartemen', location: 'Pusat Kota', price: 450000, beds: 2, baths: 1, area: 90, image: 'https://picsum.photos/seed/prop2/600/400', featured: true, amenities: ['Gym', 'Concierge', 'Balkon', 'Pemandangan Kota'] },
            { id: 3, name: 'Rumah Suburban Luas', type: 'Rumah', location: 'Green Meadows', price: 750000, beds: 5, baths: 3.5, area: 400, image: 'https://picsum.photos/seed/prop3/600/400', featured: true, amenities: ['Taman', 'Perapian', 'Ramah Hewan Peliharaan', 'Garasi', 'Teras'] },
            { id: 4, name: 'Suite Penthouse Mewah', type: 'Penthouse', location: 'Skyline Towers', price: 2500000, beds: 3, baths: 4, area: 300, image: 'https://picsum.photos/seed/prop4/600/400', featured: false, amenities: ['Teras Atap', 'Jacuzzi', 'Pemandangan Kota', 'Lift Pribadi', 'Gym'] },
            { id: 5, name: 'Pondok Pedesaan Menawan', type: 'Pondok', location: 'Willow Creek', price: 320000, beds: 2, baths: 1, area: 120, image: 'https://picsum.photos/seed/prop5/600/400', featured: true, amenities: ['Taman Luas', 'Area Tenang', 'Bersejarah', 'Perapian'] },
            { id: 6, name: 'Loft Urban dengan Desain Industrial', type: 'Loft', location: 'Distrik Seni', price: 680000, beds: 1, baths: 1.5, area: 150, image: 'https://picsum.photos/seed/prop6/600/400', featured: false, amenities: ['Konsep Terbuka', 'Langit-langit Tinggi', 'Bata Ekspos', 'Balkon'] },
            { id: 7, name: 'Rumah Keluarga Idaman di Pinggiran', type: 'Rumah', location: 'Maple Drive', price: 620000, beds: 4, baths: 2.5, area: 280, image: 'https://picsum.photos/seed/prop7/600/400', featured: false, amenities: ['Halaman Belakang', 'Area Bermain Anak', 'Dekat Sekolah', 'Garasi Dua Mobil'] },
            { id: 8, name: 'Studio Minimalis dengan Pemandangan Sungai', type: 'Apartemen', location: 'Riverfront District', price: 380000, beds: 1, baths: 1, area: 70, image: 'https://picsum.photos/seed/prop8/600/400', featured: true, amenities: ['Pemandangan Sungai', 'Keamanan 24 Jam', 'Dapur Modern', 'Akses Transportasi Umum'] }
        ];

        // --- Komponen ---
        // Komponen UI reusable yang membangun aplikasi.

        // Komponen Ikon: Menampilkan ikon SVG.
        function Icon({ path, size = '6', className = '', viewBox = '0 0 24 24', strokeWidth = null, fill = 'currentColor' }) {
            const svgProps = {
                className: `w-${size} h-${size} ${className}`,
                viewBox: viewBox,
                xmlns: 'http://www.w3.org/2000/svg'
            };
            if (fill !== 'none') svgProps.fill = fill;
            else svgProps.fill = 'none'; // explicitly set fill to none if requested

            const pathProps = { 'd': path };
            if (fill === 'none' && strokeWidth) { // Jika fill='none', kita mungkin ingin mengatur stroke
                pathProps.stroke = 'currentColor'; // Atau bisa diambil dari props jika lebih fleksibel
                pathProps.strokeWidth = strokeWidth;
                pathProps.strokeLinecap = "round";
                pathProps.strokeLinejoin = "round";
            } else {
                pathProps['fill-rule'] = 'evenodd';
                pathProps['clip-rule'] = 'evenodd';
            }

            return createElement('svg', svgProps, createElement('path', pathProps));
        }

        // Koleksi path data untuk SVG Ikon
        const ICONS = {
            search: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z", // Stroke based
            location: "M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z",
            home: "M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z",
            dollar: "M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.59 3.48 3.58 3.99 2.01.51 3.11 1.11 3.11 2.35 0 1.21-1.04 2.02-2.82 2.02-1.92 0-2.94-1.06-3.03-2.33H5.1c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.62 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",
            menu: "M4 6h16M4 12h16M4 18h16", // Stroke based
            moon: "M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z",
            sun: "M12 3v1m0 16v1m8.66-15.66l-.707.707M4.049 19.95l-.707.707M21 12h-1M4 12H3m15.66 8.66l-.707-.707M4.049 4.049l-.707-.707M12 6a6 6 0 100 12 6 6 0 000-12z", // Hybrid, some parts stroke based
            user: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",
            testimonial: "M4.583 17.417C2.689 17.417.917 15.645.917 13.75S2.689 10.083 4.583 10.083c1.207 0 2.28.67 2.804 1.674.05.09.11.17.19.24.14.14.36.17.53.06.2-.11.28-.38.17-.59C7.521 10.197 6.158 9.25 4.583 9.25c-2.393 0-4.333 1.94-4.333 4.333s1.94 4.334 4.333 4.334c.511 0 .997-.088 1.448-.252.237-.087.385-.324.338-.568a.498.498 0 00-.558-.396c-.33.12-.684.183-1.045.183zm10 0C12.689 17.417 10.917 15.645 10.917 13.75s1.772-3.667 3.666-3.667c1.207 0 2.28.67 2.804 1.674.05.09.11.17.19.24.14.14.36.17.53.06.2-.11.28-.38.17-.59C17.521 10.197 16.158 9.25 14.583 9.25c-2.393 0-4.333 1.94-4.333 4.333s1.94 4.334 4.333 4.334c.511 0 .997-.088 1.448-.252.237-.087.385-.324.338-.568a.498.498 0 00-.558-.396c-.33.12-.684.183-1.045.183z",
            filter: "M3 4h18M7 12h10M10 20h4", // Stroke based
            bath: "M4 4h16v3h-2V5H6v2H4V4zm2 5h12v10H6V9zm-2 0H2v10h2V9zm16 0h2v10h-2V9zM8 11v6h8v-6H8z", // Custom simplified bath icon (fill)
            area: "M3 3v18h18V3H3zm16 2v14H5V5h14zM7 7h4v4H7V7zm6 0h4v4h-4V7zm-6 6h4v4H7v-4zm6 0h4v4h-4v-4z", // Custom simplified area icon (fill)
            gemini: "M10.5 5a4.5 4.5 0 100 9 4.5 4.5 0 000-9zM2 10.5a8.5 8.5 0 1117 0 8.5 8.5 0 01-17 0zM14 10.5a.5.5 0 00-.5-.5h-2.5a.5.5 0 000 1h2.5a.5.5 0 00.5-.5zM10 14a.5.5 0 00.5.5v2.5a.5.5 0 001 0V14.5A.5.5 0 0011 14h-1zm-4.5-.5a.5.5 0 000 1H8a.5.5 0 000-1H5.5zM10 2a.5.5 0 00-.5.5V5a.5.5 0 001 0V2.5A.5.5 0 0010 2z",
            arrowLeft: "M15.75 19.5L8.25 12l7.5-7.5", // Stroke based
            check: "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z", // Checkmark for amenities
            twitter: 'M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z',
            facebook: 'M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05h2.03v-2.217c0-2.003 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z',
            instagram: 'M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.149-3.227 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163m0-1.623C8.726.54 8.316.527 7.062.478 4.42.331 2.653 1.153.999 2.808.333 4.461.151 6.228.042 8.87C-.011 10.123-.024 10.533-.024 12s.013 1.877.066 3.132c.109 2.641.291 4.408 1.946 6.063 1.654 1.654 3.421 1.836 6.062 1.946 1.254.054 1.665.066 3.93.066s2.675-.012 3.93-.066c2.641-.11 4.407-.292 6.062-1.946 1.655-1.655 1.837-3.422 1.946-6.063.054-1.254.066-1.664.066-3.93s-.012-2.676-.066-3.93c-.109-2.641-.291-4.408-1.946-6.063C21.347 1.153 19.579.331 16.938.042 15.687-.011 15.276-.024 12-.024zM12 6.865A5.135 5.135 0 1012 17.135 5.135 5.135 0 0012 6.865zm0 8.405a3.27 3.27 0 110-6.54 3.27 3.27 0 010 6.54zm5.491-8.88a1.227 1.227 0 100-2.454 1.227 1.227 0 000 2.454z',
        };

        // Komponen Navbar: Navigasi utama aplikasi.
        function Navbar({ currentPath, onNavigate, isDarkMode, toggleDarkMode }) {
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            const navItems = [
                { path: '/', label: 'Beranda' },
                { path: '/search', label: 'Properti' },
                { path: '/about', label: 'Tentang Kami' }
            ];

            return createElement('header', { className: 'bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50 transition-colors duration-300' },
                createElement('nav', { className: 'container mx-auto px-4 sm:px-6 lg:px-8', 'aria-label': 'Navigasi Utama' },
                    createElement('div', { className: 'flex items-center justify-between h-16' },
                        createElement('div', { className: 'flex items-center' },
                            createElement('a', {
                                href: '#/',
                                onClick: (e) => { e.preventDefault(); onNavigate('/'); setMobileMenuOpen(false); },
                                className: 'flex-shrink-0 text-2xl font-bold text-emerald-600 dark:text-emerald-400 flex items-center',
                                title: 'Ke Halaman Beranda Green Valley Properties'
                            },
                                Icon({ path: ICONS.home, size: '7', className: 'mr-2' }), // Menambahkan ikon rumah
                                'Green Valley'
                            ),
                            createElement('div', { className: 'hidden md:block' },
                                createElement('div', { className: 'ml-10 flex items-baseline space-x-4' },
                                    ...navItems.map(item => createElement('a', {
                                        href: `#${item.path}`,
                                        onClick: (e) => { e.preventDefault(); onNavigate(item.path); },
                                        className: `px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150 ${currentPath === item.path || (item.path === '/search' && currentPath.startsWith('/property/')) ? 'bg-emerald-500 text-white dark:bg-emerald-600' : 'text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'}`
                                    }, item.label))
                                )
                            )
                        ),
                        createElement('div', { className: 'flex items-center' },
                            createElement('button', {
                                onClick: toggleDarkMode,
                                className: 'p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 mr-3 transition-colors duration-150',
                                title: isDarkMode ? 'Ganti ke Mode Terang' : 'Ganti ke Mode Gelap',
                                'aria-label': isDarkMode ? 'Aktifkan Mode Terang' : 'Aktifkan Mode Gelap'
                            }, isDarkMode ? Icon({ path: ICONS.sun, size: '5', fill: 'none', strokeWidth: '2' }) : Icon({ path: ICONS.moon, size: '5' })
                            ),
                            createElement('button', {
                                onClick: () => { alert('Fungsi masuk belum diimplementasikan.'); },
                                className: 'hidden md:block bg-emerald-500 hover:bg-emerald-600 text-white dark:bg-emerald-600 dark:hover:bg-emerald-700 px-4 py-2 rounded-md text-sm font-medium transition duration-150 ease-in-out transform hover:scale-105'
                            }, 'Masuk'),
                            createElement('div', { className: 'md:hidden ml-2' },
                                createElement('button', {
                                    onClick: () => setMobileMenuOpen(!mobileMenuOpen),
                                    className: 'inline-flex items-center justify-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-emerald-500 transition-colors duration-150',
                                    'aria-expanded': mobileMenuOpen,
                                    'aria-controls': 'mobile-menu',
                                    'aria-label': 'Buka menu navigasi'
                                },
                                    Icon({ path: ICONS.menu, size: '6', fill: 'none', strokeWidth: '2' })
                                )
                            )
                        )
                    ),
                    // Mobile Menu
                    createElement('div', {
                        id: 'mobile-menu',
                        className: `transition-all duration-300 ease-in-out md:hidden overflow-hidden ${mobileMenuOpen ? 'max-h-96 opacity-100 visible py-2' : 'max-h-0 opacity-0 invisible py-0'}`,
                        role: 'navigation'
                    },
                        createElement('div', { className: 'px-2 pt-2 pb-3 space-y-1 sm:px-3' },
                            ...navItems.map(item => createElement('a', {
                                href: `#${item.path}`,
                                onClick: (e) => { e.preventDefault(); onNavigate(item.path); setMobileMenuOpen(false); },
                                className: `block px-3 py-2 rounded-md text-base font-medium transition-colors duration-150 ${currentPath === item.path || (item.path === '/search' && currentPath.startsWith('/property/')) ? 'bg-emerald-500 text-white dark:bg-emerald-600' : 'text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'}`
                            }, item.label)),
                            createElement('button', {
                                onClick: () => { alert('Fungsi masuk belum diimplementasikan.'); setMobileMenuOpen(false); },
                                className: 'w-full mt-3 bg-emerald-500 hover:bg-emerald-600 text-white dark:bg-emerald-600 dark:hover:bg-emerald-700 px-4 py-2 rounded-md text-base font-medium transition duration-150 ease-in-out'
                            }, 'Masuk')
                        )
                    )
                )
            );
        }

        // Komponen HeroSection: Bagian utama di halaman depan dengan pencarian.
        function HeroSection({ onSearch }) {
            const [location, setLocation] = useState('');
            const [type, setType] = useState('');
            const [isFocused, setIsFocused] = useState(false); // Untuk animasi pada form

            const handleSearch = (e) => {
                e.preventDefault();
                onSearch({ location, type }); // Kirim filter ke fungsi navigasi
            };

            return createElement('section', { className: 'hero-bg bg-cover bg-center relative h-[calc(100vh-4rem)] min-h-[500px] flex items-center justify-center text-white' },
                createElement('div', { className: 'absolute inset-0 bg-black opacity-60' }), // Overlay gelap
                createElement('div', { className: 'relative z-10 text-center p-6 animate-fadeIn' },
                    createElement('h1', { className: 'text-4xl sm:text-5xl md:text-6xl font-bold mb-6 animate-fadeInUp' },
                        'Temukan Rumah Impian Anda di ',
                        createElement('span', { className: 'text-emerald-400' }, 'Green Valley')
                    ),
                    createElement('p', { className: 'text-lg sm:text-xl text-gray-200 mb-10 animate-fadeInUp-delay-1' }, 'Jelajahi tempat tinggal yang akan Anda sukai, lihat daftar properti pilihan kami.'),
                    createElement('form', {
                        onSubmit: handleSearch,
                        onFocusCapture: () => setIsFocused(true),
                        onBlurCapture: (e) => {
                            // Hanya set isFocused ke false jika fokus tidak pindah ke elemen anak dari form
                            if (!e.currentTarget.contains(e.relatedTarget)) {
                                setIsFocused(false);
                            }
                        },
                        className: `bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-xl w-full max-w-3xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-4 items-end transition-all duration-300 transform ${isFocused ? 'scale-105 shadow-2xl' : 'scale-100'} animate-fadeInUp-delay-2`
                    },
                        createElement('div', { className: 'md:col-span-1' },
                            createElement('label', { htmlFor: 'hero-location', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Lokasi'),
                            createElement('div', { className: 'relative' },
                                createElement('div', { className: 'absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none' }, Icon({ path: ICONS.location, size: '5', className: 'text-gray-400' })),
                                createElement('input', { type: 'text', id: 'hero-location', value: location, onInput: (e) => setLocation(e.target.value), placeholder: 'cth., Pusat Kota', className: 'w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 dark:bg-gray-700 dark:text-white transition-shadow' })
                            )
                        ),
                        createElement('div', {},
                            createElement('label', { htmlFor: 'hero-type', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Tipe Properti'),
                            createElement('div', { className: 'relative' },
                                createElement('div', { className: 'absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none' }, Icon({ path: ICONS.home, size: '5', className: 'text-gray-400' })),
                                createElement('select', { id: 'hero-type', value: type, onChange: (e) => setType(e.target.value), className: 'w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 dark:bg-gray-700 dark:text-white transition-shadow appearance-none' }, // appearance-none untuk styling custom dropdown arrow jika diperlukan
                                    createElement('option', { value: '' }, 'Semua Tipe'),
                                    createElement('option', { value: 'Rumah' }, 'Rumah'),
                                    createElement('option', { value: 'Apartemen' }, 'Apartemen'),
                                    createElement('option', { value: 'Villa' }, 'Villa'),
                                    createElement('option', { value: 'Pondok' }, 'Pondok'),
                                    createElement('option', { value: 'Penthouse' }, 'Penthouse'),
                                    createElement('option', { value: 'Loft' }, 'Loft')
                                )
                                // Optional: custom dropdown arrow
                            )
                        ),
                        createElement('button', { type: 'submit', className: 'md:col-span-1 w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2.5 px-4 rounded-md shadow-md flex items-center justify-center space-x-2 transition duration-150 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800' },
                            Icon({ path: ICONS.search, size: '5', fill: 'none', strokeWidth: '2' }),
                            createElement('span', {}, 'Cari')
                        )
                    )
                )
            );
        }

        // Komponen PropertyCard: Menampilkan satu item properti dalam bentuk kartu.
        function PropertyCard({ property, onDetails, index }) {
            return createElement('article', {
                className: 'property-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 transform hover:shadow-xl hover:-translate-y-1 cursor-pointer flex flex-col animate-fadeInUp',
                style: { animationDelay: `${index * 0.05}s` }, // Animasi staggered
                onClick: () => onDetails(property.id),
                'aria-labelledby': `property-title-${property.id}`
            },
                createElement('div', { className: 'relative' },
                    createElement('img', { src: property.image, alt: `Foto ${property.name}`, className: 'w-full h-48 object-cover' }),
                    property.featured && createElement('div', { className: `absolute top-2 right-2 bg-emerald-500 text-white text-xs font-semibold px-2 py-1 rounded` }, 'Unggulan')
                ),
                createElement('div', { className: 'p-4 sm:p-6 flex flex-col flex-grow' },
                    createElement('h3', { id: `property-title-${property.id}`, className: 'text-xl font-semibold text-gray-800 dark:text-white mb-1 truncate', title: property.name }, property.name),
                    createElement('p', { className: 'text-emerald-600 dark:text-emerald-400 text-lg font-bold mb-2' }, `Rp ${property.price.toLocaleString('id-ID')}`),
                    createElement('div', { className: 'flex items-center text-sm text-gray-600 dark:text-gray-400 mb-1 truncate' },
                        Icon({ path: ICONS.location, size: '4', className: 'mr-2 text-emerald-500 flex-shrink-0' }),
                        createElement('span', { className: 'truncate', title: property.location }, property.location)
                    ),
                    createElement('div', { className: 'flex items-center text-sm text-gray-600 dark:text-gray-400 mb-3' },
                        Icon({ path: ICONS.home, size: '4', className: 'mr-2 text-emerald-500 flex-shrink-0' }),
                        `${property.beds} KT ‚Ä¢ ${property.baths} KM ‚Ä¢ ${property.area} m¬≤`
                    ),
                    createElement('div', { className: 'mt-auto pt-3' },
                        createElement('button', {
                            onClick: (e) => { e.stopPropagation(); onDetails(property.id); }, // Hentikan propagasi agar onClick kartu utama tidak terpicu dua kali
                            className: 'w-full bg-emerald-500 hover:bg-emerald-600 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out text-sm transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800',
                            'aria-label': `Lihat detail untuk ${property.name}`
                        }, 'Lihat Detail')
                    )
                )
            );
        }

        // Komponen FeaturedProperties: Menampilkan daftar properti unggulan.
        function FeaturedProperties({ properties, onDetails, onSearch }) {
            const featured = properties.filter(p => p.featured).slice(0, 3);
            return createElement('section', { id: 'featured-properties', className: 'py-12 md:py-20 bg-gray-50 dark:bg-gray-850 transition-colors duration-300' },
                createElement('div', { className: 'container mx-auto px-4 sm:px-6 lg:px-8' },
                    createElement('div', { className: 'text-center mb-10 md:mb-16 animate-fadeInUp' },
                        createElement('h2', { className: 'text-3xl sm:text-4xl font-bold text-gray-800 dark:text-white mb-3' }, 'Properti Unggulan'),
                        createElement('p', { className: 'text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto' }, 'Jelajahi pilihan properti terbaik kami yang dipilih khusus untuk Anda.')
                    ),
                    featured.length > 0
                        ? createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8' },
                            ...featured.map((prop, idx) => PropertyCard({ property: prop, onDetails, index: idx }))
                        )
                        : createElement('p', { className: 'text-center text-gray-500 dark:text-gray-400 text-lg animate-fadeInUp' }, 'Saat ini tidak ada properti unggulan yang tersedia.'),
                    createElement('div', { className: 'text-center mt-12 animate-fadeInUp-delay-3' },
                        createElement('button', {
                            onClick: () => onSearch({}), // Navigasi ke halaman search tanpa filter awal
                            className: 'bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 text-lg focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 dark:focus:ring-offset-gray-850'
                        }, 'Lihat Semua Properti')
                    )
                )
            );
        }

        // Komponen TestimonialCard: Menampilkan satu testimoni.
        function TestimonialCard({ testimonial, index }) {
            return createElement('div', { className: 'bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg h-full flex flex-col transition-all duration-300 hover:shadow-xl animate-fadeInUp', style: { animationDelay: `${index * 0.1}s` } },
                createElement('div', { className: 'flex-shrink-0 mb-4' }, Icon({ path: ICONS.testimonial, size: '8', className: 'text-emerald-500 dark:text-emerald-400' })),
                createElement('blockquote', { className: 'text-gray-600 dark:text-gray-300 italic mb-4 flex-grow text-sm sm:text-base' }, `"${testimonial.quote}"`),
                createElement('figcaption', { className: 'flex items-center mt-auto' },
                    createElement('img', { src: testimonial.avatar, alt: `Foto ${testimonial.name}`, className: 'w-12 h-12 rounded-full mr-4 object-cover flex-shrink-0' }),
                    createElement('div', {},
                        createElement('p', { className: 'font-semibold text-gray-800 dark:text-white' }, testimonial.name),
                        createElement('p', { className: 'text-sm text-gray-500 dark:text-gray-400' }, testimonial.title)
                    )
                )
            );
        }

        // Komponen TestimonialsSection: Menampilkan beberapa testimoni.
        function TestimonialsSection() {
            const testimonials = [
                { name: 'Jane Doe', title: 'Pemilik Rumah Bahagia', quote: 'Green Valley membantu saya menemukan rumah impian! Prosesnya lancar dan agennya sangat profesional. Perhatian terhadap detail sangat mengesankan.', avatar: 'https://picsum.photos/seed/user1/100/100' },
                { name: 'John Smith', title: 'Penjual Puas', quote: 'Menjual properti saya melalui Green Valley sangat mudah. Mereka menemukan pembeli dengan cepat dan dengan harga bagus. Saya sangat puas dengan hasilnya.', avatar: 'https://picsum.photos/seed/user2/100/100' },
                { name: 'Alice Brown', title: 'Pembeli Pertama Kali', quote: 'Sebagai pembeli pertama kali, saya gugup, tetapi Green Valley membimbing saya di setiap langkah. Tim mereka berpengetahuan luas dan sabar. Sangat direkomendasikan!', avatar: 'https://picsum.photos/seed/user3/100/100' }
            ];

            return createElement('section', { className: 'py-12 md:py-20 bg-white dark:bg-gray-900 transition-colors duration-300' },
                createElement('div', { className: 'container mx-auto px-4 sm:px-6 lg:px-8' },
                    createElement('div', { className: 'text-center mb-10 md:mb-16 animate-fadeInUp' },
                        createElement('h2', { className: 'text-3xl sm:text-4xl font-bold text-gray-800 dark:text-white mb-3' }, 'Apa Kata Mereka?'),
                        createElement('p', { className: 'text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto' }, 'Dengarkan dari klien kami yang puas tentang pengalaman mereka dengan Green Valley.')
                    ),
                    createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8' },
                        ...testimonials.map((testimonial, idx) => TestimonialCard({ testimonial, index: idx }))
                    )
                )
            );
        }

        // Komponen Footer: Bagian bawah halaman.
        function Footer() {
            const currentYear = new Date().getFullYear();
            return createElement('footer', { className: 'bg-gray-800 dark:bg-black text-gray-300 dark:text-gray-400 py-12 transition-colors duration-300' },
                createElement('div', { className: 'container mx-auto px-4 sm:px-6 lg:px-8' },
                    createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8' },
                        createElement('div', { className: 'md:col-span-2 lg:col-span-1' },
                            createElement('h5', { className: 'text-xl font-semibold text-white mb-4' }, 'Green Valley Properties'),
                            createElement('p', { className: 'text-sm mb-4' }, 'Mitra terpercaya Anda dalam menemukan properti sempurna. Kami berkomitmen untuk memberikan layanan dan keahlian luar biasa di pasar real estat.'),
                        ),
                        createElement('div', {},
                            createElement('h5', { className: 'text-lg font-semibold text-white mb-4' }, 'Tautan Cepat'),
                            createElement('ul', { className: 'space-y-2 text-sm' },
                                createElement('li', {}, createElement('a', { href: '#/search', onClick: (e) => { e.preventDefault(); router.navigateTo('/search'); }, className: 'hover:text-emerald-400 transition-colors' }, 'Cari Properti')),
                                createElement('li', {}, createElement('a', { href: '#/about', onClick: (e) => { e.preventDefault(); router.navigateTo('/about'); }, className: 'hover:text-emerald-400 transition-colors' }, 'Tentang Kami')),
                                createElement('li', {}, createElement('a', { href: '#/contact', onClick: (e) => { e.preventDefault(); router.navigateTo('/contact'); }, className: 'hover:text-emerald-400 transition-colors' }, 'Hubungi Kami')),
                                createElement('li', {}, createElement('a', { href: '#/terms', onClick: (e) => { e.preventDefault(); router.navigateTo('/terms'); }, className: 'hover:text-emerald-400 transition-colors' }, 'Ketentuan Layanan'))
                            )
                        ),
                        createElement('div', {},
                            createElement('h5', { className: 'text-lg font-semibold text-white mb-4' }, 'Hubungi Kami'),
                            createElement('address', { className: 'space-y-2 text-sm not-italic' }, // Gunakan <address>
                                createElement('p', {}, 'Jl. Lembah Hijau No. 123, Meadowville, PV 12345'),
                                createElement('p', {}, 'Email: ', createElement('a', { href: 'mailto:info@greenvalley.example.com', className: 'hover:text-emerald-400 transition-colors' }, 'info@greenvalley.example.com')),
                                createElement('p', {}, 'Telepon: ', createElement('a', { href: 'tel:+1234567890', className: 'hover:text-emerald-400 transition-colors' }, '(123) 456-7890'))
                            )
                        ),
                        createElement('div', {},
                            createElement('h5', { className: 'text-lg font-semibold text-white mb-4' }, 'Ikuti Kami'),
                            createElement('div', { className: 'flex space-x-4' },
                                createElement('a', { href: '#', title: "Twitter / X", className: 'text-gray-400 hover:text-emerald-400 transition-colors', 'aria-label': 'Green Valley di Twitter' }, Icon({ path: ICONS.twitter, size: '5', viewBox: '0 0 24 24' })),
                                createElement('a', { href: '#', title: "Facebook", className: 'text-gray-400 hover:text-emerald-400 transition-colors', 'aria-label': 'Green Valley di Facebook' }, Icon({ path: ICONS.facebook, size: '5' })),
                                createElement('a', { href: '#', title: "Instagram", className: 'text-gray-400 hover:text-emerald-400 transition-colors', 'aria-label': 'Green Valley di Instagram' }, Icon({ path: ICONS.instagram, size: '5' }))
                            )
                        )
                    ),
                    createElement('div', { className: 'border-t border-gray-700 pt-8 text-center text-sm' },
                        createElement('p', {}, `Hak Cipta ¬© ${currentYear} Green Valley Properties. Semua hak dilindungi undang-undang.`)
                    )
                )
            );
        }

        // Halaman Beranda (HomePage): Menggabungkan beberapa komponen untuk halaman utama.
        function HomePage({ onSearch, onDetails, properties }) {
            return createElement('div', { className: 'animate-fadeIn' }, // Animasi fade-in untuk seluruh halaman
                HeroSection({ onSearch }),
                FeaturedProperties({ properties, onDetails, onSearch }),
                TestimonialsSection()
            );
        }

        // Halaman Pencarian (SearchPage): Menampilkan filter dan hasil pencarian properti.
        function SearchPage({ initialFilters, properties, onDetails }) {
            const [filters, setFilters] = useState(() => ({
                location: initialFilters?.location || '', // Ambil dari initialFilters jika ada
                type: initialFilters?.type || '',       // Ambil dari initialFilters jika ada
                sort: 'featured',
                beds: '',
                baths: '',
                minArea: '',
                amenities: []
            }));
            const [searchResults, setSearchResults] = useState([]);
            const [isLoading, setIsLoading] = useState(true);
            const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);

            const allUniqueAmenities = [...new Set(properties.flatMap(p => p.amenities || []))].sort();

            const handleFilterChange = (filterName, value) => {
                setFilters(prev => ({ ...prev, [filterName]: value }));
            };

            const handleAmenityChange = (amenity) => {
                setFilters(prev => ({
                    ...prev,
                    amenities: prev.amenities.includes(amenity)
                        ? prev.amenities.filter(a => a !== amenity)
                        : [...prev.amenities, amenity]
                }));
            };

            // Efek untuk melakukan filter dan sorting ketika filter atau properti berubah
            useEffect(() => {
                setIsLoading(true);
                const filterTimeout = setTimeout(() => { // Simulasi delay API
                    let filtered = [...properties]; // Salin array properti

                    // Filter berdasarkan keyword/lokasi
                    if (filters.location) {
                        const term = filters.location.toLowerCase();
                        filtered = filtered.filter(p =>
                            p.name.toLowerCase().includes(term) ||
                            p.location.toLowerCase().includes(term)
                        );
                    }
                    // Filter berdasarkan tipe
                    if (filters.type) {
                        filtered = filtered.filter(p => p.type.toLowerCase() === filters.type.toLowerCase());
                    }
                    // Filter berdasarkan jumlah kamar tidur
                    if (filters.beds) {
                        filtered = filtered.filter(p => p.beds >= parseInt(filters.beds));
                    }
                    // Filter berdasarkan jumlah kamar mandi
                    if (filters.baths) {
                        filtered = filtered.filter(p => p.baths >= parseFloat(filters.baths));
                    }
                    // Filter berdasarkan luas minimum
                    if (filters.minArea) {
                        filtered = filtered.filter(p => p.area >= parseInt(filters.minArea));
                    }
                    // Filter berdasarkan fasilitas
                    if (filters.amenities.length > 0) {
                        filtered = filtered.filter(p =>
                            filters.amenities.every(am => p.amenities && p.amenities.includes(am))
                        );
                    }

                    // Sorting hasil
                    if (filters.sort === 'price_asc') {
                        filtered.sort((a, b) => a.price - b.price);
                    } else if (filters.sort === 'price_desc') {
                        filtered.sort((a, b) => b.price - a.price);
                    } else if (filters.sort === 'newest') {
                        filtered.sort((a, b) => b.id - a.id); // Asumsi ID lebih tinggi = lebih baru
                    } else { // Default: featured (unggulan)
                        filtered.sort((a, b) => (b.featured ? 1 : 0) - (a.featured ? 1 : 0) || b.id - a.id);
                    }

                    setSearchResults(filtered);
                    setIsLoading(false);
                }, 300 + Math.random() * 200);

                return () => clearTimeout(filterTimeout); // Cleanup timeout saat komponen unmount atau dependensi berubah
            }, [filters, properties]); // Jalankan efek jika filter atau daftar properti (props) berubah


            // Efek untuk update filter jika initialFilters berubah (misalnya dari Hero search)
            useEffect(() => {
                // Hanya update location dan type dari initialFilters, pertahankan filter lanjutan lainnya
                if (initialFilters?.location !== undefined || initialFilters?.type !== undefined) {
                    setFilters(prev => ({
                        ...prev,
                        location: initialFilters?.location || prev.location,
                        type: initialFilters?.type || prev.type,
                    }));
                }
            }, [initialFilters?.location, initialFilters?.type]);


            return createElement('main', { className: 'container mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[calc(100vh-12rem)] animate-fadeIn' }, // min-h untuk footer tetap di bawah
                createElement('div', { className: 'bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md mb-8 transition-colors duration-300' },
                    createElement('h1', { className: 'text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white mb-6' }, 'Cari Properti'),
                    // Filter Utama
                    createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 items-end' },
                        createElement('div', {},
                            createElement('label', { htmlFor: 'search-term', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Kata Kunci / Lokasi'),
                            createElement('input', { type: 'text', id: 'search-term', value: filters.location, onInput: (e) => handleFilterChange('location', e.target.value), placeholder: 'Cari nama, lokasi...', className: 'w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-shadow' })
                        ),
                        createElement('div', {},
                            createElement('label', { htmlFor: 'search-type', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Tipe Properti'),
                            createElement('select', { id: 'search-type', value: filters.type, onChange: (e) => handleFilterChange('type', e.target.value), className: 'w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-shadow appearance-none' },
                                createElement('option', { value: '' }, 'Semua Tipe'),
                                ...[...new Set(properties.map(p => p.type))].sort().map(type => createElement('option', { value: type }, type))
                            )
                        ),
                        createElement('div', {},
                            createElement('label', { htmlFor: 'search-sort', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Urutkan Berdasarkan'),
                            createElement('select', { id: 'search-sort', value: filters.sort, onChange: (e) => handleFilterChange('sort', e.target.value), className: 'w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-shadow appearance-none' },
                                createElement('option', { value: 'featured' }, 'Unggulan'),
                                createElement('option', { value: 'price_asc' }, 'Harga: Rendah ke Tinggi'),
                                createElement('option', { value: 'price_desc' }, 'Harga: Tinggi ke Rendah'),
                                createElement('option', { value: 'newest' }, 'Terbaru')
                            )
                        )
                    ),
                    // Tombol Filter Lanjutan
                    createElement('button', {
                        onClick: () => setShowAdvancedFilters(prev => !prev),
                        className: 'text-emerald-600 dark:text-emerald-400 hover:underline mb-4 inline-flex items-center text-sm font-medium focus:outline-none focus:ring-1 focus:ring-emerald-500 rounded',
                        'aria-expanded': showAdvancedFilters,
                        'aria-controls': 'advanced-filters-panel'
                    },
                        Icon({ path: ICONS.filter, size: '5', className: 'mr-2', fill: 'none', strokeWidth: '2' }),
                        showAdvancedFilters ? 'Sembunyikan Filter Lanjutan' : 'Tampilkan Filter Lanjutan'
                    ),
                    // Panel Filter Lanjutan
                    createElement('div', {
                        id: 'advanced-filters-panel',
                        className: `transition-all duration-500 ease-in-out overflow-hidden ${showAdvancedFilters ? 'max-h-[1000px] opacity-100 mt-4' : 'max-h-0 opacity-0'}`
                    },
                        createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-50 dark:bg-gray-750 transition-colors duration-300' },
                            createElement('div', {},
                                createElement('label', { htmlFor: 'search-beds', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Min. Kamar Tidur'),
                                createElement('input', { type: 'number', id: 'search-beds', min: "0", value: filters.beds, onInput: (e) => handleFilterChange('beds', e.target.value), placeholder: 'Semua', className: 'w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-shadow' })
                            ),
                            createElement('div', {},
                                createElement('label', { htmlFor: 'search-baths', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Min. Kamar Mandi'),
                                createElement('input', { type: 'number', id: 'search-baths', min: "0", step: "0.5", value: filters.baths, onInput: (e) => handleFilterChange('baths', e.target.value), placeholder: 'Semua', className: 'w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-shadow' })
                            ),
                            createElement('div', {},
                                createElement('label', { htmlFor: 'search-area', className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1' }, 'Min. Luas (m¬≤)'),
                                createElement('input', { type: 'number', id: 'search-area', min: "0", value: filters.minArea, onInput: (e) => handleFilterChange('minArea', e.target.value), placeholder: 'Semua', className: 'w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-shadow' })
                            ),
                            createElement('div', { className: 'md:col-span-2 lg:col-span-3' },
                                createElement('label', { className: 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2' }, 'Fasilitas'),
                                createElement('div', { className: 'grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-x-4 gap-y-2' },
                                    ...allUniqueAmenities.map(amenity =>
                                        createElement('label', { key: amenity, className: 'flex items-center space-x-2 p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer select-none transition-colors duration-150' },
                                            createElement('input', {
                                                type: 'checkbox',
                                                checked: filters.amenities.includes(amenity),
                                                onChange: () => handleAmenityChange(amenity),
                                                className: 'h-4 w-4 rounded text-emerald-500 border-gray-300 dark:border-gray-500 focus:ring-emerald-400 dark:bg-gray-600 dark:checked:bg-emerald-500 appearance-none checked:bg-emerald-500 checked:border-transparent relative before:content-[""] before:absolute before:w-full before:h-full before:bg-no-repeat before:bg-center checked:before:bg-[url(\'data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22white%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M12.207%204.793a1%201%200%20010%201.414l-5%205a1%201%200%2001-1.414%200l-2-2a1%201%200%20011.414-1.414L6.5%209.086l4.293-4.293a1%201%200%20011.414%200z%22/%3E%3C/svg%3E\')]'
                                            }),
                                            createElement('span', { className: 'text-sm text-gray-700 dark:text-gray-300' }, amenity)
                                        )
                                    )
                                )
                            )
                        )
                    )
                ),
                // Hasil Pencarian
                isLoading
                    ? createElement('div', { className: 'text-center py-10' },
                        createElement('div', { className: 'animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto' }),
                        createElement('p', { className: 'mt-4 text-gray-600 dark:text-gray-400' }, 'Memuat properti...')
                    )
                    : searchResults.length > 0
                        ? createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8' },
                            ...searchResults.map((prop, idx) => PropertyCard({ property: prop, onDetails, index: idx }))
                        )
                        : createElement('div', { className: 'text-center py-10' },
                            createElement('p', { className: 'text-xl text-gray-500 dark:text-gray-400' }, 'Tidak ada properti yang sesuai dengan kriteria Anda.'),
                            createElement('p', { className: 'mt-2 text-gray-500 dark:text-gray-400' }, 'Coba sesuaikan filter Anda atau cari lokasi yang berbeda.')
                        )
            );
        }

        // Halaman Detail Properti (PropertyDetailPage): Menampilkan informasi lengkap satu properti.
        function PropertyDetailPage({ propertyId, properties, onBack }) {
            const [property, setProperty] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [error, setError] = useState('');
            const [geminiDescription, setGeminiDescription] = useState('');
            const [isGeminiLoading, setIsGeminiLoading] = useState(false);

            // Efek untuk mengambil detail properti berdasarkan ID
            useEffect(() => {
                setIsLoading(true);
                setError('');
                setGeminiDescription(''); // Reset deskripsi Gemini saat properti baru dimuat

                const detailTimeout = setTimeout(() => {
                    const foundProperty = properties.find(p => p.id === parseInt(propertyId));
                    if (foundProperty) {
                        setProperty(foundProperty);
                    } else {
                        setError('Properti tidak ditemukan.');
                    }
                    setIsLoading(false);
                }, 300); // Simulasi delay API

                return () => clearTimeout(detailTimeout);
            }, [propertyId, properties]); // Jalankan jika ID properti atau daftar properti berubah

            // Fungsi untuk mengambil deskripsi dari Gemini AI
            const fetchGeminiDescription = async () => {
                if (!property || !geminiService.ai) {
                    setGeminiDescription("Detail properti dibutuhkan atau layanan Gemini belum siap.");
                    return;
                }
                // Peringatan jika API Key adalah placeholder (Hanya untuk demo)
                if (process.env.API_KEY === "YOUR_GEMINI_API_KEY_HERE") {
                    setGeminiDescription("Deskripsi AI memerlukan Kunci API Gemini yang valid. Saat ini menggunakan placeholder.");
                    // Tidak perlu return, biarkan tombol tetap bisa diklik untuk menunjukkan mock response.
                }

                setIsGeminiLoading(true);
                setGeminiDescription('');
                const prompt = `Tulis deskripsi listing real estate yang menarik dan kreatif untuk properti berikut. Tonjolkan fitur utama dan nilai jual uniknya. Buatlah persuasif dan gambarkan suasana bagi calon pembeli. Gunakan markdown untuk format jika sesuai (bold, list). Properti: ${property.name}. Lokasi: ${property.location}. Tipe: ${property.type}. Fitur: ${property.beds} kamar tidur, ${property.baths} kamar mandi, luas ${property.area} m2. Fasilitas: ${property.amenities?.join(', ') || 'Tidak ada data fasilitas'}.`;

                try {
                    const desc = await geminiService.generateText(prompt, property); // Kirim detail properti untuk konteks mock
                    setGeminiDescription(desc);
                } catch (e) {
                    console.error("Kesalahan pengambilan Gemini:", e);
                    setGeminiDescription("Tidak dapat menghasilkan deskripsi AI saat ini.");
                } finally {
                    setIsGeminiLoading(false);
                }
            };

            // Tampilan loading
            if (isLoading) return createElement('div', { className: 'text-center py-20 min-h-[calc(100vh-12rem)] flex flex-col justify-center items-center animate-fadeIn' },
                createElement('div', { className: 'animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto' }),
                createElement('p', { className: 'mt-4 text-gray-600 dark:text-gray-400 text-lg' }, 'Memuat detail properti...')
            );
            // Tampilan error
            if (error) return createElement('div', { className: 'text-center py-20 min-h-[calc(100vh-12rem)] flex flex-col justify-center items-center animate-fadeIn' },
                createElement('p', { className: 'text-2xl text-red-500' }, error),
                createElement('button', { onClick: onBack, className: 'mt-4 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900' }, 'Kembali ke Daftar')
            );
            // Jika properti tidak ditemukan (setelah loading selesai)
            if (!property) return null;

            // Fungsi untuk merender markdown sederhana
            const renderMarkdown = (markdownText) => {
                if (!markdownText) return [];
                return markdownText.split('\n').map(line => {
                    line = line.trim();
                    if (line.startsWith('**') && line.endsWith('**')) {
                        return createElement('p', { className: 'font-bold my-2' }, line.substring(2, line.length - 2));
                    }
                    if (line.startsWith('* ') || line.startsWith('- ')) {
                        // Ini adalah item list, kita akan membungkusnya dengan <ul> di luar jika diperlukan
                        return createElement('li', { className: 'ml-4 list-disc' }, line.substring(2));
                    }
                    // Ganti **text** menjadi <strong>text</strong> dan *text* menjadi <em>text</em>
                    let htmlLine = line.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\*(.*?)\*/g, '<em>$1</em>');
                    return createElement('p', { dangerouslySetInnerHTML: { __html: htmlLine }, className: 'my-1' });
                });
            };


            return createElement('main', { className: 'container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fadeIn' },
                createElement('button', {
                    onClick: onBack,
                    className: 'mb-6 inline-flex items-center text-emerald-600 dark:text-emerald-400 hover:underline font-medium focus:outline-none focus:ring-1 focus:ring-emerald-500 rounded p-1',
                    title: 'Kembali ke halaman sebelumnya'
                },
                    Icon({ path: ICONS.arrowLeft, strokeWidth: 2, className: 'mr-2 stroke-current', fill: 'none', size: '5' }),
                    'Kembali ke Daftar'
                ),
                createElement('article', { className: 'bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden transition-colors duration-300', 'aria-labelledby': 'property-detail-title' },
                    createElement('img', { src: property.image.replace('/600/400', '/1200/600') + `&v=${property.id}`, alt: `Foto close-up ${property.name}`, className: 'w-full h-64 md:h-96 object-cover' }),
                    createElement('div', { className: 'p-6 md:p-10' },
                        createElement('h1', { id: 'property-detail-title', className: 'text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2' }, property.name),
                        createElement('p', { className: 'text-xl text-gray-600 dark:text-gray-400 mb-4 flex items-center' },
                            Icon({ path: ICONS.location, size: '5', className: 'mr-2 text-emerald-500 flex-shrink-0' }),
                            property.location
                        ),
                        createElement('p', { className: 'text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-6' }, `Rp ${property.price.toLocaleString('id-ID')}`),

                        createElement('div', { className: 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6 text-gray-700 dark:text-gray-300' },
                            createElement('div', { className: 'flex items-center space-x-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg transition-colors duration-300' }, Icon({ path: ICONS.home, size: '6', className: 'text-emerald-500 flex-shrink-0' }), createElement('span', {}, `${property.beds} Kamar Tidur`)),
                            createElement('div', { className: 'flex items-center space-x-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg transition-colors duration-300' }, Icon({ path: ICONS.bath, size: '6', className: 'text-emerald-500 flex-shrink-0' }), createElement('span', {}, `${property.baths} Kamar Mandi`)),
                            createElement('div', { className: 'flex items-center space-x-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg transition-colors duration-300' }, Icon({ path: ICONS.area, size: '6', className: 'text-emerald-500 flex-shrink-0' }), createElement('span', {}, `${property.area} m¬≤ Luas`))
                        ),

                        property.amenities && property.amenities.length > 0 && createElement('div', { className: 'mb-6' },
                            createElement('h3', { className: 'text-xl font-semibold text-gray-800 dark:text-white mb-3' }, 'Fasilitas'),
                            createElement('ul', { className: 'list-none grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 text-gray-700 dark:text-gray-300' },
                                ...property.amenities.map(amenity => createElement('li', { key: amenity, className: 'flex items-center' },
                                    Icon({ path: ICONS.check, size: '4', className: 'mr-2 text-emerald-500 flex-shrink-0' }),
                                    amenity
                                ))
                            )
                        ),

                        // Bagian Deskripsi AI Gemini
                        createElement('div', { className: 'mt-8 pt-6 border-t border-gray-200 dark:border-gray-700' },
                            createElement('h3', { className: 'text-xl font-semibold text-gray-800 dark:text-white mb-3 flex items-center' },
                                Icon({ path: ICONS.gemini, size: '6', className: 'mr-2 text-blue-500', viewBox: '0 0 20 20' }), // Menggunakan viewBox yang sesuai
                                'Deskripsi Buatan AI'
                            ),
                            isGeminiLoading && createElement('div', { className: 'flex items-center space-x-2 text-gray-600 dark:text-gray-400 animate-pulse' }, // animasi pulse
                                createElement('div', { className: 'animate-spin rounded-full h-5 w-5 border-b-2 border-emerald-500' }),
                                createElement('span', {}, 'Menghasilkan deskripsi dengan Gemini AI...')
                            ),
                            !isGeminiLoading && geminiDescription && createElement('div', { className: 'prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 whitespace-pre-line leading-relaxed' },
                                ...renderMarkdown(geminiDescription) // Gunakan fungsi renderMarkdown
                            ),
                            !isGeminiLoading && !geminiDescription && createElement('button', {
                                onClick: fetchGeminiDescription,
                                className: `bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded inline-flex items-center space-x-2 transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${process.env.API_KEY === "YOUR_GEMINI_API_KEY_HERE_DEMO_ONLY" ? "opacity-70 cursor-help" : ""}`, // opacity-50 cursor-not-allowed jika ingin disable
                                title: process.env.API_KEY === "YOUR_GEMINI_API_KEY_HERE" ? "Fitur AI memerlukan konfigurasi kunci API" : "Hasilkan deskripsi properti menggunakan AI"
                                // disabled: process.env.API_KEY === "YOUR_GEMINI_API_KEY_HERE" // Uncomment jika ingin disable
                            },
                                Icon({ path: ICONS.gemini, size: '5', className: 'mr-1', viewBox: '0 0 20 20' }),
                                createElement('span', {}, process.env.API_KEY === "YOUR_GEMINI_API_KEY_HERE" ? "Konfigurasi API Key untuk AI" : "Hasilkan dengan Gemini AI")
                            ),
                            process.env.API_KEY === "YOUR_GEMINI_API_KEY_HERE" && !geminiDescription && !isGeminiLoading &&
                            createElement('p', { className: 'text-sm text-gray-500 dark:text-gray-400 mt-2' }, 'Catatan: Fitur Gemini AI adalah demo dan mungkin memerlukan kunci API yang valid untuk fungsionalitas penuh. Respons saat ini mungkin disimulasikan.')
                        ),

                        createElement('div', { className: 'mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 text-center' },
                            createElement('button', {
                                onClick: () => alert('Fungsi hubungi agen belum diimplementasikan.'),
                                className: 'bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-150 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800'
                            }, 'Hubungi Agen')
                        )
                    )
                )
            );
        }

        // Halaman Placeholder: Untuk halaman yang belum memiliki konten spesifik (mis. Tentang Kami, Kontak).
        function PlaceholderPage({ title, message }) {
            return createElement('main', { className: 'container mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center min-h-[calc(100vh-12rem)] flex flex-col justify-center items-center animate-fadeIn' },
                createElement('h1', { className: 'text-4xl font-bold text-gray-800 dark:text-white mb-4 animate-fadeInUp' }, title),
                createElement('p', { className: 'text-xl text-gray-600 dark:text-gray-400 animate-fadeInUp-delay-1' }, message || 'Halaman ini sedang dalam tahap pengembangan.'),
                createElement('button', {
                    onClick: () => router.navigateTo('/'),
                    className: 'mt-8 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900 animate-fadeInUp-delay-2'
                }, 'Kembali ke Beranda')
            );
        }

        // --- Router Sederhana ---
        // Mengelola navigasi antar halaman dalam SPA.
        const router = {
            routes: {}, // Objek untuk menyimpan definisi rute
            currentPath: '', // Path yang aktif saat ini
            currentParams: {}, // Parameter dari path yang aktif (mis. :id)
            lastNavigatedPath: '/', // Path terakhir sebelum navigasi saat ini, untuk tombol kembali

            // Menambahkan rute ke sistem routing
            addRoute: (path, component) => {
                router.routes[path] = component;
            },

            // Mencocokkan path URL saat ini dengan rute yang terdaftar
            resolveRoute: (rawPath) => {
                let path = rawPath || window.location.hash.slice(1) || '/'; // Ambil path dari hash URL atau default ke '/'
                let params = {};

                // Coba cocokkan dengan rute yang memiliki parameter dinamis (mis. /property/:id)
                for (const routePath in router.routes) {
                    const routeParts = routePath.split('/');
                    const pathParts = path.split('/');

                    if (routeParts.length === pathParts.length) {
                        let match = true;
                        let currentParams = {};
                        for (let i = 0; i < routeParts.length; i++) {
                            if (routeParts[i].startsWith(':')) { // Jika bagian rute adalah parameter
                                currentParams[routeParts[i].substring(1)] = pathParts[i];
                            } else if (routeParts[i] !== pathParts[i]) { // Jika bagian rute tidak cocok
                                match = false;
                                break;
                            }
                        }
                        if (match) { // Jika semua bagian cocok
                            router.currentPath = routePath; // Simpan path rute asli (dengan parameter)
                            router.currentParams = currentParams; // Simpan parameter yang diekstrak
                            return router.routes[routePath]; // Kembalikan komponen yang sesuai
                        }
                    }
                }
                // Jika tidak ada rute dinamis yang cocok, coba cocokkan dengan rute statis
                router.currentPath = path;
                router.currentParams = {};
                return router.routes[path] || router.routes['/404']; // Kembalikan komponen atau halaman 404
            },

            // Fungsi untuk navigasi ke path baru
            navigateTo: (path, params = {}) => {
                let targetPath = path;
                // Ganti placeholder parameter di path dengan nilai aktual dari params
                if (path.includes(':')) {
                    for (const key in params) {
                        targetPath = targetPath.replace(`:${key}`, params[key]);
                    }
                }
                router.lastNavigatedPath = window.location.hash.slice(1) || '/'; // Simpan path saat ini sebelum navigasi
                window.location.hash = targetPath; // Ubah hash URL, ini akan memicu event 'hashchange'
                // Event 'hashchange' akan memanggil renderApp melalui handler di App component
            }
        };

        // --- Komponen Aplikasi Utama (App) ---
        // Komponen root yang mengatur state global, routing, dan layout utama.
        function App() {
            // State untuk informasi rute saat ini (komponen, path, params)
            const [currentRouteInfo, setCurrentRouteInfo] = useState(() => {
                const initialPath = window.location.hash.slice(1) || '/';
                return { Component: router.resolveRoute(initialPath), path: router.currentPath, params: router.currentParams };
            });

            // State untuk menyimpan filter pencarian dari HeroSection, agar bisa diteruskan ke SearchPage
            const [searchFiltersForPage, setSearchFiltersForPage] = useState({});

            // State untuk mode gelap/terang
            const [isDarkMode, setIsDarkMode] = useState(() => {
                // Cek preferensi dari localStorage atau preferensi sistem
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    return true;
                }
                return false;
            });

            // Handler untuk navigasi
            const handleNavigation = (path, params = {}) => {
                router.navigateTo(path, params);
            };

            // Handler untuk pencarian dari HeroSection
            const handleSearchFromHero = (filters) => {
                setSearchFiltersForPage(filters); // Simpan filter untuk SearchPage
                router.navigateTo('/search'); // Navigasi ke halaman pencarian
            };

            // Handler untuk melihat detail properti
            const handleViewDetails = (propertyId) => {
                router.navigateTo(`/property/:id`, { id: propertyId });
            };

            // Fungsi untuk toggle mode gelap/terang
            const toggleDarkMode = () => {
                setIsDarkMode(prevMode => {
                    const newMode = !prevMode;
                    if (newMode) {
                        document.documentElement.classList.add('dark');
                        localStorage.theme = 'dark';
                    } else {
                        document.documentElement.classList.remove('dark');
                        localStorage.theme = 'light';
                    }
                    return newMode;
                });
            };

            // Efek untuk inisialisasi mode gelap & sapaan AI (jika ada)
            useEffect(() => {
                // Terapkan kelas 'dark' ke <html> berdasarkan state isDarkMode
                if (isDarkMode) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');

                // Contoh sapaan AI (hanya sekali per sesi)
                const GREETING_KEY = 'greenValleyGreetingShown';
                if (!sessionStorage.getItem(GREETING_KEY) && geminiService.ai && process.env.API_KEY !== "YOUR_GEMINI_API_KEY_HERE") {
                    geminiService.generateText("Tuliskan salam selamat datang yang singkat, ramah, dan hangat untuk pengguna yang pertama kali mengunjungi situs web real estat 'Green Valley'. Maksimal 1 kalimat ringkas.")
                        .then(greeting => {
                            if (greeting && !greeting.toLowerCase().includes("error") && !greeting.toLowerCase().includes("mock")) {
                                // Untuk UX yang lebih baik, pertimbangkan notifikasi toast kecil yang bisa ditutup.
                                // Untuk demo, kita log ke console.
                                console.info("Sapaan AI Green Valley:", greeting);
                                // Anda bisa menampilkan ini dalam sebuah modal atau toast kecil.
                                // alert(`Selamat Datang dari AI Green Valley:\n${greeting}`); 
                                sessionStorage.setItem(GREETING_KEY, 'true');
                            }
                        }).catch(err => console.error("Kesalahan Sapaan AI:", err));
                }
            }, [isDarkMode]); // Jalankan efek ini jika isDarkMode berubah (untuk sinkronisasi kelas HTML)

            // Efek untuk menangani perubahan hash URL (navigasi)
            useEffect(() => {
                const handleHashChange = () => {
                    const newPath = window.location.hash.slice(1) || '/';
                    setCurrentRouteInfo({ Component: router.resolveRoute(newPath), path: router.currentPath, params: router.currentParams });
                    window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll ke atas halaman dengan smooth
                };
                window.addEventListener('hashchange', handleHashChange);
                handleHashChange(); // Panggil sekali di awal untuk setup rute awal

                return () => window.removeEventListener('hashchange', handleHashChange); // Cleanup listener
            }, []); // Hanya jalankan sekali saat komponen App dimuat

            // Render konten halaman berdasarkan rute saat ini
            let pageContent;
            const { Component, path: currentDisplayPath, params: currentDisplayParams } = currentRouteInfo;

            if (currentDisplayPath === '/') {
                pageContent = HomePage({ onSearch: handleSearchFromHero, onDetails: handleViewDetails, properties: mockProperties });
            } else if (currentDisplayPath === '/search') {
                pageContent = SearchPage({ initialFilters: searchFiltersForPage, properties: mockProperties, onDetails: handleViewDetails });
            } else if (currentDisplayPath === '/property/:id') {
                pageContent = PropertyDetailPage({
                    propertyId: currentDisplayParams.id,
                    properties: mockProperties,
                    onBack: () => router.navigateTo(router.lastNavigatedPath.startsWith('/search') ? router.lastNavigatedPath : '/search') // Kembali ke search atau search dengan filter terakhir
                });
            } else if (Component === router.routes['/about']) { // Gunakan perbandingan referensi komponen jika itu fungsi langsung
                pageContent = Component(); // Panggil fungsi komponen
            } else if (Component === router.routes['/contact']) {
                pageContent = Component();
            } else if (Component === router.routes['/terms']) {
                pageContent = Component();
            } else { // Halaman 404
                pageContent = router.routes['/404'] ? router.routes['/404']() : PlaceholderPage({ title: '404 - Halaman Tidak Ditemukan', message: 'Ups! Halaman yang Anda cari tidak ada atau mungkin telah dipindahkan.' });
            }

            // Struktur utama aplikasi dengan Navbar, konten halaman, dan Footer
            return createElement('div', { className: 'flex flex-col min-h-screen bg-gray-100 dark:bg-gray-900' },
                Navbar({ currentPath: currentDisplayPath, onNavigate: handleNavigation, isDarkMode, toggleDarkMode }),
                createElement('main', { id: 'main-content', role: 'main', className: 'flex-grow relative' }, // role="main" untuk aksesibilitas
                    pageContent
                ),
                Footer()
            );
        }

        // --- Inisialisasi Aplikasi ---
        // Definisikan rute-rute aplikasi
        router.addRoute('/', HomePage);
        router.addRoute('/search', SearchPage);
        router.addRoute('/property/:id', PropertyDetailPage);
        router.addRoute('/about', () => PlaceholderPage({ title: 'Tentang Green Valley', message: 'Kami berdedikasi untuk membantu Anda menemukan rumah idaman dengan transparansi dan keahlian di area Green Valley yang dinamis.' }));
        router.addRoute('/contact', () => PlaceholderPage({ title: 'Hubungi Kami', message: 'Hubungi tim kami untuk pertanyaan apa pun atau untuk menjadwalkan kunjungan. Kami siap membantu Anda!' }));
        router.addRoute('/terms', () => PlaceholderPage({ title: 'Ketentuan Layanan', message: 'Harap baca syarat dan ketentuan kami dengan saksama sebelum menggunakan layanan kami.' }));
        router.addRoute('/404', () => PlaceholderPage({ title: '404 - Halaman Tidak Ditemukan', message: 'Ups! Halaman yang Anda cari tidak ada atau mungkin telah dipindahkan.' }));

        // Tetapkan komponen root dan elemen DOM root
        _rootComponent = App;
        _rootElement = document.getElementById('root');

        renderApp(); // Panggil renderApp untuk pertama kali untuk merender aplikasi

        // Gaya dinamis untuk animasi CSS (opsional, bisa juga di <style>)
        const dynamicKeyframeStyles = `
            @keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-20px); } 100% { opacity: 1; transform: translateY(0); } }
            .animate-fade-in-down { animation: fade-in-down 0.6s ease-out forwards; }

            @keyframes fade-in-up { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }
            .animate-fade-in-up { animation: fade-in-up 0.6s ease-out 0.2s forwards; }

            @keyframes zoom-in { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }
            .animate-zoom-in { animation: zoom-in 0.5s ease-out 0.4s forwards; }
        `;
        // Jika ingin menambahkan style secara dinamis, uncomment ini.
        // Namun, lebih baik didefinisikan di tag <style> di <head> untuk performa dan predictability.
        // const styleSheet = document.createElement("style");
        // styleSheet.innerText = dynamicKeyframeStyles;
        // document.head.appendChild(styleSheet);
    </script>
</body>

</html>