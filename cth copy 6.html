<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="PropertiKu - Temukan dan sewa apartemen, rumah, atau studio impian Anda dengan mudah. Pilihan terbaik dengan harga bersaing untuk gaya hidup modern.">
    <meta name="keywords"
        content="sewa apartemen, jual properti, properti, apartemen mewah, rumah modern, studio minimalis, real estate, PropertiKu, cari properti, investasi properti">
    <meta name="author" content="PropertiKu Profesional">
    <meta name="theme-color" content="#0052cc">
    <title>PropertiKu - Temukan Properti Impian Anda</title>

    <!-- Favicon PNG Base64 (Tidak ada SVG) -->
    <link rel="icon"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACwElEQVR4Ae1XA7btQBC9EBTNe6SoFxB3iSnKCaQ5QZQT1Bsg7gQUESUuIN4BRAUX5A4pEiV5f2fn27fHx3u3sZkX+/ZmvZkZ702GQuyyLcsEQRAMAZwvzDMMs4P/w9w6jGP792xHM7w7Gj52gT8RkZlEEQBCECS9y6IYiBAgDGMcKkphHo/Hj5V9/Y8+f7H3/8LwHD7P7TdDEUAwDEMghsMZyqUi/+5v7e5dABhgvuXf29tb795b7N/Z7N8DcOAOwA3gXoJvr7/ff/+fL5+31/9rDMMwmwAmgJ6D4dM8xjGEoJfr93d3N/Z3t3cPD/bAQAXfXj7/87N1fI6Xzw/gSuAXQC/aX+0vX78A7gE0AmgCWPV89/v7+9vrm0wAmj/Pg/OvY8rX4c5/ZgzA0yJz4A+Pj9gGkAEsARwCXgdsAMuAacBpyHx7BZwFHHJ+ApSbkMCgLnBAn4B7gJdArz8h6e7q7vfj66sPN3gB0ELzDAZ88vP3/fXTtwE4AFwF/AZ4A9gFXD28fLg7v80DwCzAEuAMsAO8BTYBFwFXgX8AmwAzgEPAVeA0YBqwB3AO+AVQAwwAlgHHgKPADKAfMAU4A8wBz4CvAHOAO8A54BPgNvAt8DvgDvAY8BqwBxwCfgNuAv8BdwEfgFfAacAXYBNwB3AGuAA8ArwA3AEeAF4CfgNeAA8BbwCfgDfAG+AN4GvgDeAOcAc4A3wBvAl8AbwCfAG8CnwDvAG8C/wDvAv8A7wGPAa8AXwBfAF8DXwBfAE8AXwGfAG8BXwFvAL8AvgL+AN4CvgTeAR4BHwBPAI8ARwBHgCuAQ8AdwDHgCeAI8BNwB3gfuAx8CfwGfAQ+Ax8DPwGfgMeAz8BnwLwABgNnwPAAAAAElFTkSuQmCC"
        type="image/png">

    <!-- Google Fonts: Inter dan Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@600;700;800&display=swap"
        rel="stylesheet">

    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /* === Variabel Global === */
        :root {
            --primary-color: #0052cc;
            /* Biru korporat yang kuat */
            --primary-color-rgb: 0, 82, 204;
            /* Untuk RGBA */
            --primary-color-hover: #003c99;
            --secondary-color: #f0f4f8;
            /* Abu-abu muda untuk latar belakang sekunder */
            --accent-color: #ffc107;
            /* Kuning untuk aksen dan CTA */
            --accent-color-hover: #e0a800;
            --text-color-dark: #212529;
            --text-color-light: #f8f9fa;
            --text-color-muted: #6c757d;
            --background-color-light: #ffffff;
            --background-color-dark: #121828;
            /* Biru tua gelap lebih modern */
            --border-color: #dee2e6;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #0dcaf0;
            --overlay-color: rgba(18, 24, 40, 0.75);
            /* Overlay lebih gelap untuk kontras teks */

            --font-family-main: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-family-heading: 'Montserrat', sans-serif;

            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --border-radius-lg: 16px;

            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.15);
            --shadow-xl: 0 12px 32px rgba(0, 0, 0, 0.2);


            --transition-fast: all 0.2s ease-in-out;
            --transition-normal: all 0.3s ease-in-out;

            --container-max-width: 1280px;
            --section-padding-y: clamp(3rem, 6vw, 5rem);
            /* Padding vertikal responsif */
        }

        /* === Reset & Normalisasi Dasar === */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 100%;
            -webkit-text-size-adjust: 100%;
        }
li{
    list-style: none;
}
a{
    text-decoration: none;
    
}
        body {
            font-family: var(--font-family-main);
            color: var(--text-color-dark);
            background-color: var(--background-color-light);
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex-grow: 1;
        }

        /* === Kontainer Global === */
        .container {
            width: 90%;
            max-width: var(--container-max-width);
            margin-left: auto;
            margin-right: auto;
            padding-left: 15px;
            padding-right: 15px;
        }

        /* === Utilitas Umum === */
        .d-none {
            display: none !important;
        }

        .d-block {
            display: block !important;
        }

        .d-inline-block {
            display: inline-block !important;
        }

        .d-flex {
            display: flex !important;
        }

        .d-inline-flex {
            display: inline-flex !important;
        }

        .flex-column {
            flex-direction: column !important;
        }

        .align-items-center {
            align-items: center !important;
        }

        .align-items-start {
            align-items: flex-start !important;
        }

        .align-items-end {
            align-items: flex-end !important;
        }

        .justify-content-center {
            justify-content: center !important;
        }

        .justify-content-between {
            justify-content: space-between !important;
        }

        .justify-content-around {
            justify-content: space-around !important;
        }

        .justify-content-start {
            justify-content: flex-start !important;
        }

        .justify-content-end {
            justify-content: flex-end !important;
        }

        .flex-wrap {
            flex-wrap: wrap !important;
        }

        .flex-grow-1 {
            flex-grow: 1 !important;
        }

        .gap-1 {
            gap: 0.5rem !important;
        }

        .gap-2 {
            gap: 1rem !important;
        }

        .gap-3 {
            gap: 1.5rem !important;
        }

        .gap-4 {
            gap: 2rem !important;
        }

        .text-center {
            text-align: center !important;
        }

        .text-left {
            text-align: left !important;
        }

        .text-right {
            text-align: right !important;
        }

        .text-primary {
            color: var(--primary-color) !important;
        }

        .text-accent {
            color: var(--accent-color) !important;
        }

        .text-muted {
            color: var(--text-color-muted) !important;
        }

        .text-light {
            color: var(--text-color-light) !important;
        }

        .text-dark {
            color: var(--text-color-dark) !important;
        }

        .text-success {
            color: var(--success-color) !important;
        }

        .text-danger {
            color: var(--danger-color) !important;
        }

        .fw-bold {
            font-weight: 700 !important;
        }

        .fw-semibold {
            font-weight: 600 !important;
        }

        .fw-medium {
            font-weight: 500 !important;
        }

        .fw-normal {
            font-weight: 400 !important;
        }

        .m-0 {
            margin: 0 !important;
        }

        .mt-0 {
            margin-top: 0 !important;
        }

        .mb-0 {
            margin-bottom: 0 !important;
        }

        .mt-1 {
            margin-top: 0.5rem !important;
        }

        .mt-2 {
            margin-top: 1rem !important;
        }

        .mt-3 {
            margin-top: 1.5rem !important;
        }

        .mt-4 {
            margin-top: 2rem !important;
        }

        .mt-5 {
            margin-top: 3rem !important;
        }

        .mb-1 {
            margin-bottom: 0.5rem !important;
        }

        .mb-2 {
            margin-bottom: 1rem !important;
        }

        .mb-3 {
            margin-bottom: 1.5rem !important;
        }

        .mb-4 {
            margin-bottom: 2rem !important;
        }

        .mb-5 {
            margin-bottom: 3rem !important;
        }

        .ms-auto {
            margin-left: auto !important;
        }

        .me-auto {
            margin-right: auto !important;
        }

        .p-0 {
            padding: 0 !important;
        }

        .py-1 {
            padding-top: 0.5rem !important;
            padding-bottom: 0.5rem !important;
        }

        .py-2 {
            padding-top: 1rem !important;
            padding-bottom: 1rem !important;
        }

        .py-3 {
            padding-top: 1.5rem !important;
            padding-bottom: 1.5rem !important;
        }

        .py-4 {
            padding-top: 2rem !important;
            padding-bottom: 2rem !important;
        }

        .py-5 {
            padding-top: 3rem !important;
            padding-bottom: 3rem !important;
        }

        .p-1 {
            padding: 0.5rem !important;
        }

        .p-2 {
            padding: 1rem !important;
        }

        .p-3 {
            padding: 1.5rem !important;
        }

        .w-100 {
            width: 100% !important;
        }

        .bg-light {
            background-color: var(--secondary-color) !important;
        }

        .bg-white {
            background-color: var(--background-color-light) !important;
        }

        .bg-dark {
            background-color: var(--background-color-dark) !important;
        }

        .rounded {
            border-radius: var(--border-radius-md) !important;
        }

        .rounded-sm {
            border-radius: var(--border-radius-sm) !important;
        }

        .rounded-lg {
            border-radius: var(--border-radius-lg) !important;
        }

        .rounded-pill {
            border-radius: 50rem !important;
        }

        .rounded-circle {
            border-radius: 50% !important;
        }

        .shadow-sm {
            box-shadow: var(--shadow-sm) !important;
        }

        .shadow {
            box-shadow: var(--shadow-md) !important;
        }

        .shadow-lg {
            box-shadow: var(--shadow-lg) !important;
        }

        .section-padding {
            padding-top: var(--section-padding-y);
            padding-bottom: var(--section-padding-y);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* === Tipografi === */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-family-heading);
            color: var(--text-color-dark);
            line-height: 1.3;
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        h1 {
            font-size: clamp(2.2rem, 5vw, 3.2rem);
        }

        h2 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
        }

        h3 {
            font-size: clamp(1.5rem, 3.5vw, 2rem);
        }

        h4 {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-color-muted);
            font-size: 1rem;
            line-height: 1.8;
            /* Peningkatan keterbacaan */
        }

        strong,
        b {
            font-weight: 600;
            color: var(--text-color-dark);
        }

        /* Konsistensi bold */

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: var(--transition-fast);
        }

        a:hover,
        a:focus {
            color: var(--primary-color-hover);
            text-decoration: underline;
        }

        a:focus-visible {
            outline: 2px dashed var(--primary-color);
            outline-offset: 2px;
        }

        /* === Tombol (Button) === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.75rem;
            border: 1px solid transparent;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.95rem;
            /* Sedikit lebih kecil untuk kesan modern */
            cursor: pointer;
            transition: var(--transition-normal);
            text-decoration: none;
            line-height: 1.5;
            white-space: nowrap;
            box-shadow: var(--shadow-xs);
        }

        .btn:hover {
            text-decoration: none;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0px);
            box-shadow: var(--shadow-sm);
        }

        .btn:focus-visible {
            outline: 3px solid rgba(var(--primary-color-rgb), 0.4);
            /* Outline lebih tebal dan halus */
            outline-offset: 2px;
        }

        .btn i {
            font-size: 1.1em;
            /* Ukuran ikon relatif terhadap font tombol */
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--text-color-light);
            border-color: var(--primary-color);
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background-color: var(--primary-color-hover);
            border-color: var(--primary-color-hover);
            color: var(--text-color-light);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--text-color-dark);
            border-color: var(--border-color);
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background-color: #e2e6ea;
            border-color: #dae0e5;
            color: var(--text-color-dark);
        }

        .btn-accent {
            background-color: var(--accent-color);
            color: var(--text-color-dark);
            border-color: var(--accent-color);
        }

        .btn-accent:hover,
        .btn-accent:focus {
            background-color: var(--accent-color-hover);
            border-color: var(--accent-color-hover);
            color: var(--text-color-dark);
        }

        .btn-outline-primary {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-outline-primary:hover,
        .btn-outline-primary:focus {
            background-color: var(--primary-color);
            color: var(--text-color-light);
        }

        .btn-lg {
            padding: 0.9rem 2rem;
            font-size: 1.1rem;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        .btn-icon {
            padding: 0.6rem;
            font-size: 1.25rem;
            line-height: 1;
            border-radius: 50%;
            /* Tombol ikon bulat */
        }

        /* === Formulir (Form) === */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-color-dark);
            font-size: 0.9rem;
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="search"],
        input[type="tel"],
        input[type="url"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            font-family: var(--font-family-main);
            font-size: 1rem;
            transition: var(--transition-fast);
            background-color: var(--background-color-light);
            color: var(--text-color-dark);
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="password"]:focus,
        input[type="search"]:focus,
        input[type="tel"]:focus,
        input[type="url"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.2);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%236c757d' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
            /* Menggunakan SVG data URI untuk ikon panah */
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 0.8em;
            padding-right: 2.5rem;
        }

        ::placeholder {
            color: var(--text-color-muted);
            opacity: 0.7;
        }

        /* === Header Aplikasi === */
        .app-header {
            background-color: var(--background-color-light);
            box-shadow: var(--shadow-sm);
            /* Bayangan lebih halus */
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 0.8rem 0;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 60px;
        }

        .navbar-brand {
            font-family: var(--font-family-heading);
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            /* Ukuran responsif */
            font-weight: 800;
            color: var(--text-color-dark);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .navbar-brand:hover,
        .navbar-brand:focus {
            color: var(--primary-color);
            text-decoration: none;
        }

        .navbar-brand i {
            color: var(--primary-color);
            margin-right: 0.6rem;
            font-size: 1.8em;
            /* Relatif terhadap font brand */
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            /* Efek fancy */
        }

        .navbar-brand:hover i {
            transform: rotate(-10deg) scale(1.1);
        }

        .navbar-brand strong {
            color: var(--primary-color);
        }

        .navbar-collapse {
            /* Wrapper untuk nav dan buttons, untuk mobile */
            display: flex;
            align-items: center;
        }

        .navbar-nav {
            display: flex;
            list-style: none;
            align-items: center;
        }

        .nav-item {
            margin-left: 0.5rem;
        }

        .nav-link {
            padding: 0.6rem 1.2rem;
            color: var(--text-color-muted);
            font-weight: 600;
            font-size: 0.95rem;
            text-decoration: none;
            border-radius: var(--border-radius-md);
            transition: var(--transition-fast);
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            /* Sedikit di bawah teks */
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            /* Mulai dari tengah, skala 0 */
            width: 60%;
            height: 2px;
            background-color: var(--primary-color);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* Efek fancy */
            transform-origin: center;
        }

        .nav-link:hover,
        .nav-link:focus,
        .nav-link.active {
            color: var(--primary-color);
            background-color: rgba(var(--primary-color-rgb), 0.05);
        }

        .nav-link.active::after,
        .nav-link:hover::after,
        .nav-link:focus::after {
            transform: translateX(-50%) scaleX(1);
            /* Munculkan underline */
        }

        .nav-buttons {
            margin-left: 1.5rem;
        }

        .navbar-toggler {
            display: none;
            background: none;
            border: none;
            font-size: 1.75rem;
            color: var(--text-color-dark);
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
            transition: transform 0.2s ease;
        }

        .navbar-toggler:hover {
            transform: scale(1.1);
        }

        /* === Hero Section === */
        .hero-section {
            position: relative;
            min-height: 85vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color-light);
            text-align: center;
            padding: var(--section-padding-y) 0;
            background-color: var(--text-color-dark);
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--overlay-color);
            z-index: 1;
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
            /* Efek parallax sederhana jika diinginkan nanti (JS) */
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            padding: 0 15px;
            animation: fadeInFromBottom 0.8s ease-out 0.3s backwards;
        }

        @keyframes fadeInFromBottom {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-content h1 {
            font-size: clamp(2.5rem, 7vw, 4.2rem);
            color: var(--text-color-light);
            margin-bottom: 1rem;
            font-weight: 800;
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.6);
        }

        .hero-content .subtitle {
            font-size: clamp(1.1rem, 3vw, 1.5rem);
            color: var(--text-color-light);
            opacity: 0.9;
            margin-bottom: 2.5rem;
            font-weight: 400;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-form-hero {
            display: grid;
            grid-template-columns: 1fr;
            /* Default 1 kolom */
            gap: 1rem;
            background-color: rgba(255, 255, 255, 0.95);
            /* Latar belakang form lebih solid */
            padding: 1.5rem 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            margin-top: 2rem;
            width: 100%;
            max-width: 750px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-form-hero .form-group {
            margin-bottom: 0;
        }

        .search-form-hero input,
        .search-form-hero select {
            background-color: var(--background-color-light);
        }

        .search-form-hero button[type="submit"] {
            padding: 0.9rem 2rem;
        }

        @media (min-width: 768px) {
            .search-form-hero {
                grid-template-columns: 2.5fr 1.5fr auto;
                /* Lokasi, Tipe, Tombol */
                align-items: center;
                /* Sejajarkan item form secara vertikal */
            }
        }

        /* === Section Umum === */
        .section {
            padding: var(--section-padding-y) 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 1.5rem;
            /* Jarak dari judul ke subjudul lebih rapat */
            font-size: clamp(2rem, 5vw, 2.8rem);
            font-weight: 700;
            position: relative;
            padding-bottom: 1rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 5px;
            background-color: var(--primary-color);
            border-radius: 3px;
        }

        .section-subtitle {
            text-align: center;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 3.5rem;
            /* Jarak lebih besar dari subjudul ke konten */
            color: var(--text-color-muted);
            font-size: 1.1rem;
        }

        /* === Grid Properti === */
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(100%, 330px), 1fr));
            gap: 2rem;
        }

        .property-card {
            background-color: var(--background-color-light);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            /* Menandakan bisa diklik */
        }

        .property-card:hover {
            transform: translateY(-10px) scale(1.02);
            /* Efek angkat lebih dramatis */
            box-shadow: var(--shadow-xl);
        }

        .property-card-image-wrapper {
            position: relative;
            width: 100%;
            padding-top: 66.66%;
            /* Aspect ratio 3:2 */
            overflow: hidden;
        }

        .property-card-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .property-card:hover .property-card-image {
            transform: scale(1.1);
        }

        .property-card-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background-color: var(--accent-color);
            color: var(--text-color-dark);
            padding: 0.35rem 0.9rem;
            border-radius: var(--border-radius-sm);
            font-size: 0.8rem;
            font-weight: 700;
            /* Lebih tebal */
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .property-card-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .property-card-content h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--text-color-dark);
            line-height: 1.4;
            display: -webkit-box;
            /* Untuk ellipsis jika terlalu panjang */
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: calc(1.3rem * 1.4 * 2);
            /* Jaga tinggi konsisten */
        }

        .property-card-content .location,
        .property-card-content .specs {
            font-size: 0.9rem;
            color: var(--text-color-muted);
            margin-bottom: 0.4rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .property-card-content .location i,
        .property-card-content .specs i {
            color: var(--primary-color);
            font-size: 1.1em;
        }

        .property-card-content .price {
            font-size: 1.5rem;
            /* Harga lebih menonjol */
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 1rem;
            margin-bottom: 1.5rem;
        }

        .property-card-content .btn {
            width: 100%;
            margin-top: auto;
        }

        /* === Halaman Detail Properti === */
        .property-detail-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2.5rem;
            /* Gap lebih besar */
        }

        @media (min-width: 992px) {
            .property-detail-layout {
                grid-template-columns: minmax(0, 2.5fr) minmax(0, 1.5fr);
                /* Kolom utama lebih lebar */
            }
        }

        .property-detail-gallery img {
            width: 100%;
            max-height: 550px;
            /* Gambar utama lebih besar */
            object-fit: cover;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            margin-bottom: 1rem;
        }

        .property-detail-info h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 0.5rem;
        }

        .property-detail-info .location {
            font-size: 1.1rem;
            color: var(--text-color-muted);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .property-detail-info .location i {
            color: var(--primary-color);
        }

        .property-detail-info .price {
            font-size: clamp(1.8rem, 4vw, 2.2rem);
            font-weight: 800;
            /* Harga sangat menonjol */
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .property-detail-specs {
            list-style: none;
            padding: 0;
            margin: 2rem 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
        }

        .property-detail-specs li {
            background-color: var(--secondary-color);
            padding: 1rem 1.2rem;
            /* Padding lebih */
            border-radius: var(--border-radius-md);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: var(--shadow-xs);
        }

        .property-detail-specs li i {
            color: var(--primary-color);
            font-size: 1.4em;
            /* Ikon spek lebih besar */
        }

        .property-detail-specs li strong {
            font-weight: 600;
            color: var(--text-color-dark);
        }

        .property-detail-description {
            margin-top: 2rem;
            line-height: 1.8;
        }

        .property-detail-description h4 {
            margin-bottom: 0.75rem;
        }

        .property-detail-agent,
        .property-detail-contact-form {
            background-color: var(--secondary-color);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            margin-top: 2rem;
            /* Jarak dari atas jika di kolom terpisah */
        }

        .property-detail-agent h4,
        .property-detail-contact-form h4 {
            margin-top: 0;
            margin-bottom: 1.5rem;
        }

        /* === Services Section (Custom Grid) === */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .service-item {
            background-color: var(--background-color-light);
            padding: 2rem 1.5rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
        }

        .service-item:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .service-item i {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: inline-block;
            color: var(--primary-color);
            background-image: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .service-item h4 {
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
        }

        /* === Footer Aplikasi === */
        .app-footer {
            background-color: var(--background-color-dark);
            color: var(--text-color-muted);
            padding: 4rem 0 1.5rem;
            /* Padding atas lebih besar, bawah lebih kecil */
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 3rem;
            /* Gap lebih besar */
        }

        .footer-section h3,
        .footer-section h4 {
            color: var(--text-color-light);
            margin-bottom: 1.2rem;
            font-size: 1.25rem;
            /* Judul footer lebih besar */
            font-weight: 600;
        }

        .footer-section .footer-brand {
            font-family: var(--font-family-heading);
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--text-color-light);
            display: inline-flex;
            /* Agar tidak full width */
            align-items: center;
            margin-bottom: 1rem;
            text-decoration: none;
        }

        .footer-section .footer-brand i {
            color: var(--accent-color);
            margin-right: 0.6rem;
            font-size: 2rem;
        }

        .footer-section .footer-brand strong {
            color: var(--accent-color);
        }

        .footer-section p {
            color: #a0aec0;
            /* Warna muted lebih terang di BG gelap */
            font-size: 0.9rem;
            line-height: 1.7;
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 0.75rem;
            /* Jarak antar link */
        }

        .footer-section ul li a {
            color: #a0aec0;
            text-decoration: none;
            transition: var(--transition-fast);
            font-weight: 500;
        }

        .footer-section ul li a:hover,
        .footer-section ul li a:focus {
            color: var(--accent-color);
            padding-left: 6px;
            text-decoration: none;
        }

        .footer-section .social-icons {
            display: flex;
            gap: 1.2rem;
            /* Jarak ikon sosial lebih besar */
            margin-top: 1.5rem;
        }

        .footer-section .social-icons a {
            color: #a0aec0;
            font-size: 1.6rem;
            /* Ikon sosial lebih besar */
            transition: var(--transition-fast);
        }

        .footer-section .social-icons a:hover {
            color: var(--accent-color);
            transform: translateY(-3px) scale(1.1);
        }

        .footer-section address p {
            margin-bottom: 0.5rem;
        }

        .footer-section address i {
            margin-right: 0.5rem;
            color: var(--accent-color);
        }

        #newsletterForm input[type="email"] {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            color: var(--text-color-light);
        }

        #newsletterForm input[type="email"]::placeholder {
            color: #a0aec0;
        }

        #newsletterForm input[type="email"]:focus {
            background-color: rgba(255, 255, 255, 0.15);
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.3);
        }

        .footer-bottom {
            text-align: center;
            margin-top: 3.5rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #a0aec0;
        }

        .footer-bottom a {
            color: var(--accent-color);
            font-weight: 500;
        }

        .footer-bottom a:hover {
            text-decoration: underline;
        }

        .footer-bottom .bi-heart-fill {
            /* Jantung di footer */
            color: var(--danger-color) !important;
            /* Override text-accent */
            position: relative;
            top: 2px;
        }


        /* === Modal === */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(18, 24, 40, 0.85);
            /* Overlay lebih gelap dan sesuai tema */
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: var(--background-color-light);
            margin: auto;
            padding: 2rem 2.5rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            width: 90%;
            max-width: 500px;
            position: relative;
            animation: modalScaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes modalScaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h3 {
            margin-bottom: 0;
            font-size: 1.7rem;
            /* Judul modal lebih besar */
        }

        .modal-close-btn {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--text-color-muted);
            cursor: pointer;
            padding: 0.25rem;
            line-height: 1;
            transition: var(--transition-fast);
        }

        .modal-close-btn:hover {
            color: var(--danger-color);
            /* Merah saat hover tombol close */
            transform: rotate(90deg);
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .modal-body p a {
            color: var(--primary-color);
            font-weight: 600;
        }

        .modal-body p a:hover {
            color: var(--primary-color-hover);
        }

        /* Alert/Message Box */
        .alert {
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: var(--border-radius-md);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .alert i {
            font-size: 1.25rem;
        }

        .alert-success {
            color: #0f5132;
            background-color: #d1e7dd;
            border-color: #badbcc;
        }

        .alert-danger {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
        }

        .alert-info {
            color: #055160;
            background-color: #cff4fc;
            border-color: #b6effb;
        }

        .alert-warning {
            color: #664d03;
            background-color: #fff3cd;
            border-color: #ffecb5;
        }

        /* === Responsivitas Navigasi === */
        @media (max-width: 991.98px) {
            .navbar-collapse {
                flex-direction: column;
                position: fixed;
                top: 0;
                /* Akan di-offset oleh tinggi header saat JS mengatur */
                left: -100%;
                width: 85%;
                max-width: 320px;
                height: 100vh;
                background-color: var(--background-color-light);
                box-shadow: var(--shadow-lg);
                padding: 5rem 1.5rem 2rem;
                /* Padding atas untuk ruang header */
                align-items: flex-start;
                transition: left 0.35s cubic-bezier(0.23, 1, 0.32, 1);
                /* Transisi lebih smooth */
                z-index: 999;
                overflow-y: auto;
            }

            .navbar-collapse.show {
                left: 0;
            }

            .navbar-nav {
                flex-direction: column;
                width: 100%;
                align-items: flex-start;
            }

            .nav-item {
                margin-left: 0;
                width: 100%;
            }

            .nav-link {
                display: block;
                padding: 0.8rem 1rem;
                margin-bottom: 0.5rem;
                font-size: 1.1rem;
            }

            .nav-link::after {
                display: none;
                /* Sembunyikan underline fancy di mobile */
            }

            .nav-buttons {
                margin-left: 0;
                margin-top: 1.5rem;
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 0.8rem;
            }

            .nav-buttons .btn {
                width: 100%;
                text-align: center;
            }

            .navbar-toggler {
                display: block;
            }

            /* Overlay untuk mobile menu */
            body.mobile-nav-active::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 998;
                /* Di bawah menu, di atas konten */
            }
        }

        /* Responsivitas umum lainnya */
        @media (max-width: 767.98px) {
            .hero-content h1 {
                font-size: clamp(2rem, 10vw, 3rem);
            }

            .hero-content .subtitle {
                font-size: clamp(1rem, 5vw, 1.2rem);
            }

            .search-form-hero {
                padding: 1.5rem;
            }

            .property-grid {
                gap: 1.5rem;
                grid-template-columns: repeat(auto-fill, minmax(min(100%, 280px), 1fr));
                /* Kartu lebih kecil di mobile */
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
                /* Footer rata tengah di mobile */
            }

            .footer-section .social-icons {
                justify-content: center;
            }

            .footer-section ul li a:hover,
            .footer-section ul li a:focus {
                padding-left: 0;
            }

            .footer-section .footer-brand {
                justify-content: center;
            }

            .filter-form div[style*="grid-template-columns"] {
                /* Target filter form */
                grid-template-columns: 1fr !important;
                /* Semua input filter 1 kolom */
            }

            .filter-form button[type="submit"] {
                grid-column: 1 / -1;
                /* Tombol filter full width */
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: clamp(1.8rem, 8vw, 2.5rem);
            }

            h2 {
                font-size: clamp(1.6rem, 7vw, 2rem);
            }

            .search-form-hero {
                padding: 1rem;
            }

            .property-card-content {
                padding: 1.2rem;
            }

            .property-card-content h3 {
                font-size: 1.15rem;
                min-height: calc(1.15rem * 1.4 * 2);
            }

            .property-card-content .price {
                font-size: 1.3rem;
            }
        }
    </style>
</head>

<body>
    <!-- Header Aplikasi -->
    <header class="app-header" id="appHeader">
        <div class="container">
            <nav class="navbar">
                <a href="#/" class="navbar-brand" aria-label="PropertiKu Beranda">
                    <i class="bi bi-buildings-fill"></i> Properti<strong>Ku</strong>
                </a>
                <button class="navbar-toggler" id="navbarToggler" aria-label="Toggle navigasi"
                    aria-expanded="false" aria-controls="navMenu">
                    <i class="bi bi-list"></i>
                </button>
                <div class="navbar-collapse" id="navMenu" role="navigation">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="#/">Beranda</a></li>
                        <li class="nav-item"><a class="nav-link" href="#/properti">Properti</a></li>
                        <li class="nav-item"><a class="nav-link" href="#/tentang">Tentang Kami</a></li>
                        <li class="nav-item"><a class="nav-link" href="#/kontak">Kontak</a></li>
                    </ul>
                    <div class="nav-buttons">
                        <button class="btn btn-primary" id="loginButtonTrigger">
                            <i class="bi bi-box-arrow-in-right"></i> Masuk
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Konten Utama Aplikasi (SPA) -->
    <main id="app-content" aria-live="polite">
        <!-- Konten halaman akan dimuat di sini oleh JavaScript -->
    </main>

    <!-- Footer Aplikasi -->
    <footer class="app-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <a href="#/" class="footer-brand" aria-label="PropertiKu Beranda">
                        <i class="bi bi-buildings-fill"></i> Properti<strong>Ku</strong>
                    </a>
                    <p>Platform terpercaya untuk menemukan properti impian Anda. Jelajahi ribuan listing
                        apartemen, rumah, dan studio terbaik dengan mudah dan aman.</p>
                    <div class="social-icons">
                        <a href="#" aria-label="Facebook PropertiKu" target="_blank"
                            rel="noopener noreferrer"><i class="bi bi-facebook"></i></a>
                        <a href="#" aria-label="Instagram PropertiKu" target="_blank"
                            rel="noopener noreferrer"><i class="bi bi-instagram"></i></a>
                        <a href="#" aria-label="Twitter PropertiKu" target="_blank" rel="noopener noreferrer"><i
                                class="bi bi-twitter-x"></i></a>
                        <a href="#" aria-label="LinkedIn PropertiKu" target="_blank"
                            rel="noopener noreferrer"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Tautan Cepat</h4>
                    <ul>
                        <li><a href="#/">Beranda</a></li>
                        <li><a href="#/properti">Cari Properti</a></li>
                        <li><a href="#/tentang">Tentang Kami</a></li>
                        <li><a href="#/kontak">Hubungi Kami</a></li>
                        <li><a href="#/panduan">Panduan Properti</a></li>
                        <li><a href="#/faq">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Hubungi Kami</h4>
                    <address>
                        <p><i class="bi bi-geo-alt-fill"></i> Jl. Properti Impian No. 123, Kota Metropolitan,
                            Indonesia 12345</p>
                        <p><i class="bi bi-telephone-fill"></i> <a href="tel:+62215550123">(021) 555-0123</a>
                        </p>
                        <p><i class="bi bi-envelope-fill"></i> <a
                                href="mailto:info@propertiku.com">info@propertiku.com</a></p>
                    </address>
                </div>
                <div class="footer-section">
                    <h4>Langganan Nawala</h4>
                    <p>Dapatkan update properti terbaru, tips, dan penawaran eksklusif langsung ke email Anda.
                    </p>
                    <form id="newsletterForm" class="d-flex flex-column flex-sm-row gap-2 mt-3">
                        <label for="newsletterEmail" class="sr-only">Alamat Email</label>
                        <input type="email" id="newsletterEmail" name="email" placeholder="Masukkan email Anda"
                            aria-label="Alamat Email untuk Nawala" required class="form-control flex-grow-1">
                        <button type="submit" class="btn btn-accent">Kirim <i
                                class="bi bi-send-fill"></i></button>
                    </form>
                    <div id="newsletterMessage" class="mt-2"></div>
                </div>
            </div>
            <div class="footer-bottom">
                <p> <span id="currentYear"></span> PropertiKu. Semua hak cipta dilindungi. Dirancang dengan <i
                        class="bi bi-heart-fill"></i> oleh Tim PropertiKu Profesional.</p>
            </div>
        </div>
    </footer>

    <!-- Template untuk Modal Login -->
    <div class="modal" id="loginModal" aria-labelledby="loginModalTitle" aria-hidden="true" role="dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="loginModalTitle" class="h4">Masuk Akun Anda</h3>
                <button class="modal-close-btn" aria-label="Tutup modal login" data-dismiss-modal="loginModal">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="loginMessage" class="mb-3"></div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Alamat Email</label>
                        <input type="email" id="loginEmail" name="email" required placeholder="contoh@email.com"
                            aria-describedby="emailHelp">
                        <small id="emailHelp" class="text-muted">Kami tidak akan pernah membagikan email
                            Anda.</small>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Kata Sandi</label>
                        <input type="password" id="loginPassword" name="password" required
                            placeholder="Masukkan kata sandi Anda">
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe"
                                style="font-weight: normal; font-size: 0.9rem;">Ingat saya</label>
                        </div>
                        <a href="#" class="text-primary fw-medium" style="font-size: 0.9rem;">Lupa kata
                            sandi?</a>
                    </div>
                    <button type="submit" class="btn btn-primary w-100 btn-lg">Masuk Sekarang</button>
                </form>
                <p class="text-center mt-4 text-muted">Belum punya akun? <a href="#/daftar"
                        class="text-primary fw-semibold" id="switchToRegister">Daftar gratis di sini</a></p>
            </div>
        </div>
    </div>

    <!-- === TEMPLATES UNTUK HALAMAN SPA === -->

    <!-- Template untuk Halaman: Beranda -->
    <template id="page-beranda">
        <section class="hero-section">
            <img src="https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=85"
                alt="Rumah modern mewah dengan kolam renang dan taman hijau" class="hero-background"
                loading="lazy">
            <div class="hero-content container">
                <h1>Temukan Properti <span class="text-accent">Impian</span> Anda Bersama Kami</h1>
                <p class="subtitle">Cari dari ribuan listing apartemen, rumah, atau studio eksklusif yang
                    terverifikasi dengan mudah, cepat, dan aman bersama PropertiKu.</p>
                <form class="search-form-hero" id="heroSearchForm">
                    <div class="form-group">
                        <label for="heroLokasi" class="sr-only">Lokasi</label>
                        <input type="text" id="heroLokasi" name="lokasi"
                            placeholder="Ketik lokasi, mis. Jakarta Selatan" aria-label="Lokasi Properti">
                    </div>
                    <div class="form-group">
                        <label for="heroTipeProperti" class="sr-only">Tipe Properti</label>
                        <select id="heroTipeProperti" name="tipe" aria-label="Tipe Properti">
                            <option value="">Semua Tipe</option>
                            <option value="apartemen">Apartemen</option>
                            <option value="rumah">Rumah</option>
                            <option value="studio">Studio</option>
                            <option value="ruko">Ruko</option>
                            <option value="tanah">Tanah</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-accent btn-lg"><i class="bi bi-search"></i> Cari
                        Sekarang</button>
                </form>
            </div>
        </section>

        <section class="featured-properties-section section container">
            <h2 class="section-title">Properti Unggulan Pilihan</h2>
            <p class="section-subtitle">Pilihan properti terbaik yang paling diminati dan baru saja ditambahkan.
                Jangan sampai Anda melewatkan kesempatan emas ini!</p>
            <div class="property-grid" id="featuredPropertiesGrid">
                <!-- Kartu properti akan dirender di sini oleh JavaScript -->
                <p class="text-center" id="loadingFeatured">Memuat properti unggulan...</p>
            </div>
            <div class="text-center mt-5">
                <a href="#/properti" class="btn btn-primary btn-lg"><i class="bi bi-grid-3x3-gap-fill"></i>
                    Lihat Semua Properti</a>
            </div>
        </section>

        <section class="services-section section bg-light">
            <div class="container">
                <h2 class="section-title">Mengapa Memilih PropertiKu?</h2>
                <p class="section-subtitle">Kami berkomitmen menyediakan layanan terbaik untuk membantu Anda
                    dalam setiap langkah perjalanan properti Anda, dari pencarian hingga transaksi.</p>
                <div class="services-grid">
                    <div class="service-item text-center">
                        <i class="bi bi-patch-check-fill"></i>
                        <h4>Listing Terverifikasi</h4>
                        <p>Setiap properti telah melalui proses verifikasi ketat untuk memastikan keamanan dan
                            kenyamanan transaksi Anda.</p>
                    </div>
                    <div class="service-item text-center">
                        <i class="bi bi-person-video3"></i>
                        <h4>Agen Profesional</h4>
                        <p>Terhubung langsung dengan jaringan agen properti berpengalaman yang siap memberikan
                            konsultasi dan bantuan.</p>
                    </div>
                    <div class="service-item text-center">
                        <i class="bi bi-search-heart"></i>
                        <h4>Pencarian Cerdas & Mudah</h4>
                        <p>Fitur pencarian canggih dengan filter intuitif untuk menemukan properti yang paling
                            sesuai dengan kriteria Anda.</p>
                    </div>
                    <div class="service-item text-center">
                        <i class="bi bi-shield-lock-fill"></i>
                        <h4>Transaksi Aman</h4>
                        <p>Kami mengutamakan keamanan data dan transaksi Anda dengan teknologi enkripsi terkini.
                        </p>
                    </div>
                    <div class="service-item text-center">
                        <i class="bi bi-headset"></i>
                        <h4>Dukungan Pelanggan</h4>
                        <p>Tim dukungan kami siap membantu Anda 24/7 untuk menjawab pertanyaan dan mengatasi
                            masalah.</p>
                    </div>
                    <div class="service-item text-center">
                        <i class="bi bi-graph-up-arrow"></i>
                        <h4>Update Pasar Terkini</h4>
                        <p>Dapatkan informasi dan analisis pasar properti terbaru untuk keputusan investasi yang
                            lebih baik.</p>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <!-- Template untuk Halaman: Daftar Properti -->
    <template id="page-properti">
        <section class="section container">
            <h1 class="section-title" id="propertiPageTitle">Daftar Properti</h1>
            <p class="section-subtitle" id="propertiPageSubtitle">Jelajahi semua properti yang tersedia. Gunakan
                filter canggih di bawah ini untuk menemukan yang paling sesuai dengan kebutuhan dan impian Anda.
            </p>

            <form class="filter-form mb-4 p-3 bg-light shadow-sm rounded-lg" id="filterPropertiesForm">
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; align-items: end;">
                    <div class="form-group mb-0">
                        <label for="filterLokasi">Kata Kunci / Lokasi</label>
                        <input type="text" id="filterLokasi" name="lokasi"
                            placeholder="cth: Apartemen Jakarta Pusat">
                    </div>
                    <div class="form-group mb-0">
                        <label for="filterTipe">Tipe Properti</label>
                        <select id="filterTipe" name="tipe">
                            <option value="">Semua Tipe</option>
                            <option value="apartemen">Apartemen</option>
                            <option value="rumah">Rumah</option>
                            <option value="studio">Studio</option>
                            <option value="ruko">Ruko</option>
                            <option value="tanah">Tanah</option>
                        </select>
                    </div>
                    <div class="form-group mb-0">
                        <label for="filterHargaMin">Harga Min (Rp)</label>
                        <input type="number" id="filterHargaMin" name="hargaMin" placeholder="Contoh: 500000000"
                            min="0" step="10000000">
                    </div>
                    <div class="form-group mb-0">
                        <label for="filterHargaMax">Harga Max (Rp)</label>
                        <input type="number" id="filterHargaMax" name="hargaMax"
                            placeholder="Contoh: 2000000000" min="0" step="10000000">
                    </div>
                    <div class="form-group mb-0">
                        <label for="filterUrutkan">Urutkan Berdasarkan</label>
                        <select id="filterUrutkan" name="urutkan">
                            <option value="terbaru">Terbaru</option>
                            <option value="harga-terendah">Harga Terendah</option>
                            <option value="harga-tertinggi">Harga Tertinggi</option>
                            <option value="populer">Paling Populer</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary w-100" style="padding: 0.75rem;"><i
                            class="bi bi-funnel-fill"></i> Terapkan Filter</button>
                </div>
            </form>

            <div id="filterInfo" class="mb-3"></div>
            <div class="property-grid" id="allPropertiesGrid">
                <!-- Kartu properti akan dirender di sini -->
                <p class="text-center" id="loadingAllProperties">Memuat properti...</p>
            </div>
            <div id="paginationControls" class="mt-5 text-center">
                <!-- Kontrol pagination akan ditambahkan di sini jika diperlukan -->
            </div>
        </section>
    </template>

    <!-- Template untuk Halaman: Detail Properti -->
    <template id="page-properti-detail">
        <section class="section container" id="propertyDetailContainer">
            <!-- Konten detail akan dirender di sini -->
            <p class="text-center">Memuat detail properti...</p>
        </section>
    </template>

    <!-- Template untuk Konten Detail Properti (untuk dirender ke dalam page-properti-detail) -->
    <template id="template-property-detail-content">
        <div class="property-detail-layout">
            <div class="property-detail-main">
                <div class="property-detail-gallery mb-4">
                    <img src="" alt="Gambar utama properti" id="mainPropertyImage" class="mb-3">
                    <!-- Mini gallery bisa ditambahkan di sini jika ada banyak gambar -->
                </div>
                <h1 id="propertyTitle" class="mb-1"></h1>
                <p class="location text-muted mb-3 fs-5" id="propertyLocation"><i
                        class="bi bi-geo-alt-fill"></i> </p>
                <p class="price display-5 fw-bold text-primary mb-4" id="propertyPrice"></p>

                <h4>Spesifikasi Utama</h4>
                <ul class="property-detail-specs">
                    <li id="specKamarTidur"></li>
                    <li id="specKamarMandi"></li>
                    <li id="specLuasBangunan"></li>
                    <li id="specLuasTanah"></li>
                    <li id="specLantai"></li>
                    <li id="specSertifikat"></li>
                </ul>

                <div class="property-detail-description mt-4">
                    <h4>Deskripsi Properti</h4>
                    <p id="propertyDescription"></p>
                </div>

                <div class="property-detail-features mt-4">
                    <h4>Fasilitas Tambahan</h4>
                    <ul id="propertyFeaturesList" class="list-unstyled d-flex flex-wrap gap-2">
                        <!-- Fasilitas akan diisi oleh JS -->
                    </ul>
                </div>
            </div>

            <aside class="property-detail-sidebar">
                <div class="property-detail-agent p-3 rounded-lg shadow-md bg-white">
                    <h4 class="h5">Informasi Agen</h4>
                    <div class="d-flex align-items-center mb-3">
                        <img src="https://i.pravatar.cc/80?img=1" alt="Foto Agen Properti" id="agentPhoto"
                            class="rounded-circle me-3" style="width:80px; height:80px; object-fit:cover;">
                        <div>
                            <strong id="agentName" class="d-block fs-5"></strong>
                            <small class="text-muted" id="agentOffice"></small>
                        </div>
                    </div>
                    <p><i class="bi bi-telephone-fill text-primary me-2"></i> <a href="#" id="agentPhone"></a>
                    </p>
                    <p><i class="bi bi-envelope-fill text-primary me-2"></i> <a href="#" id="agentEmail"></a>
                    </p>
                    <button class="btn btn-primary w-100 mt-2"><i class="bi bi-whatsapp"></i> Hubungi via
                        WhatsApp</button>
                </div>

                <div class="property-detail-contact-form p-3 rounded-lg shadow-md bg-white mt-4">
                    <h4 class="h5">Kirim Pesan ke Agen</h4>
                    <form id="agentContactForm">
                        <div class="form-group">
                            <label for="contactAgName">Nama Anda</label>
                            <input type="text" id="contactAgName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="contactAgEmail">Email Anda</label>
                            <input type="email" id="contactAgEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="contactAgMessage">Pesan Anda</label>
                            <textarea id="contactAgMessage" rows="4" class="form-control"
                                required>Saya tertarik dengan properti ini dan ingin informasi lebih lanjut.</textarea>
                        </div>
                        <button type="submit" class="btn btn-accent w-100">Kirim Pesan <i
                                class="bi bi-send"></i></button>
                    </form>
                    <div id="agentContactMessage" class="mt-2"></div>
                </div>
            </aside>
        </div>
    </template>

    <!-- Template untuk Halaman: Tentang Kami -->
    <template id="page-tentang">
        <section class="section container">
            <h1 class="section-title">Tentang PropertiKu</h1>
            <div class="row" style="display: flex; flex-wrap: wrap; gap: 2rem; align-items:center;">
                <div style="flex: 1 1 400px;">
                    <img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?auto=format&fit=crop&w=1200&q=80"
                        alt="Tim PropertiKu sedang berdiskusi dan merencanakan strategi"
                        style="width:100%; border-radius: var(--border-radius-lg); margin-bottom: 2rem; box-shadow: var(--shadow-lg);">
                </div>
                <div style="flex: 1 1 500px;">
                    <h2 class="h3">Selamat Datang di Dunia Properti Impian Anda</h2>
                    <p><strong>PropertiKu</strong> adalah platform properti digital terdepan di Indonesia, lahir
                        dari semangat untuk menyederhanakan kompleksitas pasar real estat. Sejak didirikan pada
                        tahun 2023, misi utama kami adalah menjadi jembatan terpercaya yang menghubungkan Anda
                        dengan properti idaman, baik untuk hunian maupun investasi.</p>
                    <p>Kami percaya bahwa setiap individu berhak mendapatkan akses mudah dan transparan terhadap
                        informasi properti. Oleh karena itu, kami berinovasi tanpa henti, menghadirkan teknologi
                        canggih, data akurat, dan antarmuka pengguna yang intuitif untuk memberdayakan Anda
                        dalam mengambil keputusan properti yang cerdas dan tepat.</p>
                </div>
            </div>

            <div class="mt-5">
                <div class="row" style="display: flex; flex-wrap: wrap; gap: 2rem;">
                    <div style="flex: 1 1 300px;">
                        <h3 class="mt-0"><i class="bi bi-eye-fill text-primary me-2"></i>Visi Kami</h3>
                        <p>Menjadi ekosistem properti digital nomor satu di Asia Tenggara, yang mentransformasi
                            cara masyarakat berinteraksi, bertransaksi, dan mengelola aset properti dengan
                            inovasi berkelanjutan dan layanan berstandar global.</p>
                    </div>
                    <div style="flex: 1 1 300px;">
                        <h3 class="mt-0"><i class="bi bi-bullseye text-primary me-2"></i>Misi Kami</h3>
                        <ul class="list-unstyled ps-0">
                            <li class="d-flex mb-2"><i
                                    class="bi bi-check-circle-fill text-success me-2 mt-1"></i>Menyediakan
                                platform dengan pilihan properti terlengkap, terkurasi, dan terverifikasi.</li>
                            <li class="d-flex mb-2"><i
                                    class="bi bi-check-circle-fill text-success me-2 mt-1"></i>Memberikan
                                pengalaman pengguna yang superior, mulus, dan personal melalui teknologi
                                terdepan.</li>
                            <li class="d-flex mb-2"><i
                                    class="bi bi-check-circle-fill text-success me-2 mt-1"></i>Membangun
                                jaringan kemitraan yang kuat dengan para profesional dan pemangku kepentingan
                                industri properti.</li>
                            <li class="d-flex mb-2"><i
                                    class="bi bi-check-circle-fill text-success me-2 mt-1"></i>Mendorong
                                transparansi, keamanan, dan kepercayaan dalam setiap aspek transaksi properti.
                            </li>
                            <li class="d-flex"><i
                                    class="bi bi-check-circle-fill text-success me-2 mt-1"></i>Menjadi sumber
                                informasi dan edukasi properti yang kredibel dan komprehensif.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <p class="text-center mt-5 fs-5">Terima kasih telah memilih <strong>PropertiKu</strong> sebagai
                mitra terpercaya Anda. Kami bersemangat untuk membantu Anda mewujudkan impian properti Anda!</p>
        </section>
    </template>

    <!-- Template untuk Halaman: Kontak -->
    <template id="page-kontak">
        <section class="section container">
            <h1 class="section-title">Hubungi Tim Dukungan Kami</h1>
            <p class="section-subtitle">Kami selalu senang mendengar dari Anda! Jangan ragu untuk menghubungi
                kami jika Anda memiliki pertanyaan, masukan, atau membutuhkan bantuan terkait layanan
                PropertiKu.</p>
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2.5rem; align-items: start;">
                <div class="contact-form-wrapper p-4 rounded-lg shadow-md bg-white">
                    <h4><i class="bi bi-envelope-paper-fill text-primary me-2"></i>Kirim Pesan Langsung</h4>
                    <p class="text-muted mb-3">Isi formulir di bawah ini dan tim kami akan segera merespons
                        Anda.</p>
                    <div id="contactFormMessage" class="mb-3"></div>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="contactName">Nama Lengkap Anda</label>
                            <input type="text" id="contactName" name="nama" required
                                placeholder="Masukkan nama lengkap Anda">
                        </div>
                        <div class="form-group">
                            <label for="contactEmail">Alamat Email Aktif</label>
                            <input type="email" id="contactEmail" name="email" required
                                placeholder="contoh@email.com">
                        </div>
                        <div class="form-group">
                            <label for="contactSubject">Subjek Pesan</label>
                            <input type="text" id="contactSubject" name="subjek" required
                                placeholder="Misalnya: Pertanyaan tentang listing">
                        </div>
                        <div class="form-group">
                            <label for="contactMessage">Isi Pesan Anda</label>
                            <textarea id="contactMessage" name="pesan" rows="5" required
                                placeholder="Tuliskan pesan Anda di sini..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg w-100">Kirim Pesan Sekarang <i
                                class="bi bi-send-check-fill"></i></button>
                    </form>
                </div>
                <div class="contact-info-wrapper p-4 rounded-lg shadow-md bg-light">
                    <h4><i class="bi bi-info-circle-fill text-primary me-2"></i>Informasi Kontak Lainnya</h4>
                    <p class="text-muted mb-4">Anda juga bisa menghubungi kami melalui detail kontak berikut:
                    </p>
                    <div class="mb-3">
                        <h5><i class="bi bi-geo-alt-fill text-primary me-2"></i>Alamat Kantor Pusat:</h5>
                        <p class="mb-0">PropertiKu Tower, Lt. 25<br>Jl. Properti Impian No. 123, Sudirman
                            CBD<br>Kota Metropolitan, Indonesia 12345</p>
                    </div>
                    <div class="mb-3">
                        <h5><i class="bi bi-telephone-inbound-fill text-primary me-2"></i>Nomor Telepon:</h5>
                        <p class="mb-0"><a href="tel:+62215550123">(021) 555-0123</a> (Hunting)</p>
                        <p class="mb-0"><a href="tel:+6281234567890">0812-3456-7890</a> (WhatsApp Bisnis)</p>
                    </div>
                    <div class="mb-3">
                        <h5><i class="bi bi-envelope-at-fill text-primary me-2"></i>Alamat Email:</h5>
                        <p class="mb-0"><a href="mailto:dukungan@propertiku.com">dukungan@propertiku.com</a>
                            (Umum)</p>
                        <p class="mb-0"><a href="mailto:mitra@propertiku.com">mitra@propertiku.com</a>
                            (Kemitraan)</p>
                    </div>
                    <div class="mt-4">
                        <h5><i class="bi bi-clock-history text-primary me-2"></i>Jam Operasional:</h5>
                        <p class="mb-0">Senin - Jumat: 08.00 - 17.00 WIB</p>
                        <p class="mb-0">Sabtu: 09.00 - 15.00 WIB</p>
                        <p class="mb-0">Minggu & Hari Libur Nasional: Tutup</p>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <!-- Template untuk Halaman Tidak Ditemukan (404) -->
    <template id="page-not-found">
        <section class="section container text-center py-5">
            <i class="bi bi-exclamation-triangle-fill display-1 text-warning mb-4"></i>
            <h1 class="section-title">Oops! Halaman Tidak Ditemukan</h1>
            <p class="section-subtitle fs-5">Maaf, halaman yang Anda cari tidak ada atau mungkin telah
                dipindahkan. <br>Silakan periksa kembali URL Anda atau kembali ke beranda.</p>
            <img src="https://cdn.dribbble.com/users/285475/screenshots/2083086/dribbble_1.gif"
                alt="Animasi 404"
                style="max-width: 400px; width: 100%; margin: 2rem auto; border-radius: var(--border-radius-lg);">
            <div>
                <a href="#/" class="btn btn-primary btn-lg me-2"><i class="bi bi-house-door-fill"></i> Kembali
                    ke Beranda</a>
                <a href="#/kontak" class="btn btn-outline-primary btn-lg"><i class="bi bi-envelope-fill"></i>
                    Hubungi Dukungan</a>
            </div>
        </section>
    </template>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // === STATE APLIKASI SEDERHANA ===
            const appState = {
                properties: [], // Akan diisi dengan data properti
                currentPage: 1,
                itemsPerPage: 6, // Untuk pagination di halaman properti
                activeFilters: {},
                sortOrder: 'terbaru',
            };

            // === DATA PROPERTI (MOCK) ===
            // Data ini seharusnya datang dari API di aplikasi nyata
            const propertiesData = [
                { id: 1, name: 'Apartemen Mewah Tengah Kota', location: 'Jakarta Pusat, DKI Jakarta', price: 2500000000, type: 'apartemen', image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 3, bathrooms: 2, area: 120, landArea: 0, floor: 15, certificate: 'SHM', featured: true, popular: 500, dateAdded: '2024-07-10', description: 'Apartemen mewah dengan fasilitas lengkap di jantung kota Jakarta. Akses mudah ke pusat bisnis dan perbelanjaan. Pemandangan kota yang menakjubkan dari lantai 15. Cocok untuk profesional muda atau keluarga kecil yang mendambakan gaya hidup urban modern.', agent: { name: 'Budi Santoso', office: 'Agen Properti Jaya', phone: '081234567890', email: 'budi.s@agenjaya.com', photo: 'https://i.pravatar.cc/80?img=' }, features: ['Kolam Renang', 'Gym', 'Keamanan 24 Jam', 'Parkir Basement', 'Balkon Luas'] },
                { id: 2, name: 'Rumah Klasik Modern di Lingkungan Asri', location: 'Bandung, Jawa Barat', price: 3200000000, type: 'rumah', image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 4, bathrooms: 3, area: 250, landArea: 300, floor: 2, certificate: 'SHM', featured: true, popular: 450, dateAdded: '2024-07-15', description: 'Rumah elegan dengan desain klasik modern, terletak di lingkungan yang tenang dan asri di Bandung. Memiliki taman belakang yang luas, cocok untuk keluarga. Dekat dengan fasilitas pendidikan dan kesehatan.', agent: { name: 'Citra Lestari', office: 'Bandung Properti Unggul', phone: '081298765432', email: 'citra.l@bandungproperti.com', photo: 'https://i.pravatar.cc/80?img=' }, features: ['Taman Luas', 'Garasi 2 Mobil', 'Dapur Modern', 'Ruang Keluarga Besar', 'Keamanan Kompleks'] },
                { id: 3, name: 'Studio Minimalis Dekat Kampus', location: 'Yogyakarta, DIY', price: 850000000, type: 'studio', image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 1, bathrooms: 1, area: 45, landArea: 0, floor: 5, certificate: 'HGB', featured: false, popular: 300, dateAdded: '2024-06-20', description: 'Studio apartemen modern dan minimalis, sangat strategis dekat dengan area kampus ternama di Yogyakarta. Furnitur lengkap dan siap huni. Investasi properti yang menjanjikan.', agent: { name: 'Andi Wijaya', office: 'Jogja Real Estate', phone: '081211223344', email: 'andi.w@jogjarealestate.com', photo: 'https://i.pravatar.cc/80?img=3' }, features: ['Full Furnished', 'Akses Kartu', 'Internet Cepat', 'Area Komunal', 'Dekat Transportasi Umum'] },
                { id: 4, name: 'Ruko Strategis Pinggir Jalan Utama', location: 'Surabaya, Jawa Timur', price: 4500000000, type: 'ruko', image: 'https://images.unsplash.com/photo-1599779940899-370eb14187a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 0, bathrooms: 3, area: 300, landArea: 150, floor: 3, certificate: 'HGB', featured: true, popular: 250, dateAdded: '2024-07-01', description: 'Ruko 3 lantai di lokasi super strategis, berada di pinggir jalan utama Surabaya yang ramai. Cocok untuk berbagai jenis usaha. Area parkir luas di depan.', agent: { name: 'Dewi Anggraini', office: 'Surabaya Bisnis Properti', phone: '081255667788', email: 'dewi.a@sbybisnis.com', photo: 'https://i.pravatar.cc/80?img=4' }, features: ['Lokasi Premium', 'Area Parkir Luas', 'Hadap Jalan Raya', 'Listrik Daya Besar', 'Cocok Untuk Usaha'] },
                { id: 5, name: 'Tanah Kavling Siap Bangun View Pegunungan', location: 'Bogor, Jawa Barat', price: 1200000000, type: 'tanah', image: 'https://images.unsplash.com/photo-1604719312566-8912e9227c6a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 0, bathrooms: 0, area: 0, landArea: 500, floor: 0, certificate: 'AJB', featured: false, popular: 150, dateAdded: '2024-05-10', description: 'Tanah kavling dengan pemandangan pegunungan yang indah di Bogor. Udara sejuk dan lingkungan asri. Akses jalan sudah baik. Siap untuk dibangun villa atau rumah peristirahatan.', agent: { name: 'Rahmat Hidayat', office: 'Bogor Land Investama', phone: '081299887766', email: 'rahmat.h@bogorland.com', photo: 'https://i.pravatar.cc/80?img=5' }, features: ['View Pegunungan', 'Udara Sejuk', 'Akses Jalan Baik', 'Zona Kuning Perumahan', 'Potensi Investasi'] },
                { id: 6, name: 'Apartemen Modern Tipe 2BR di BSD City', location: 'Tangerang Selatan, Banten', price: 1800000000, type: 'apartemen', image: 'https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 2, bathrooms: 1, area: 75, landArea: 0, floor: 10, certificate: 'PPJB', featured: true, popular: 480, dateAdded: '2024-07-18', description: 'Apartemen 2 kamar tidur modern di kawasan premium BSD City. Fasilitas super lengkap, dekat dengan pusat perbelanjaan, perkantoran, dan universitas. Ideal untuk keluarga muda atau investasi sewa.', agent: { name: 'Siska Amelia', office: 'BSD Prime Living', phone: '081222334455', email: 'siska.a@bsdprime.com', photo: 'https://i.pravatar.cc/80?img=6' }, features: ['Kolam Renang Olympic', 'Sky Garden', 'Fitness Center & Spa', 'Area BBQ', 'Jogging Track'] },
                { id: 7, name: 'Rumah Minimalis Baru di Cluster Elit', location: 'Bekasi, Jawa Barat', price: 1500000000, type: 'rumah', image: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 3, bathrooms: 2, area: 150, landArea: 120, floor: 2, certificate: 'SHM', featured: false, popular: 380, dateAdded: '2024-06-28', description: 'Rumah baru desain minimalis modern di dalam cluster elit Bekasi. Keamanan 24 jam, one-gate system. Lingkungan nyaman dan bebas banjir. Akses tol mudah.', agent: { name: 'Budi Santoso', office: 'Agen Properti Jaya', phone: '081234567890', email: 'budi.s@agenjaya.com', photo: 'https://i.pravatar.cc/80?img=' }, features: ['One Gate System', 'CCTV Kompleks', 'Taman Bermain Anak', 'Bebas Banjir', 'Dekat Pintu Tol'] },
                { id: 8, name: 'Gudang Luas Strategis Dekat Pelabuhan', location: 'Semarang, Jawa Tengah', price: 7500000000, type: 'ruko', /* Anggap ruko bisa jadi gudang */ image: 'https://images.unsplash.com/photo-1587033942840-0a213b8f1c81?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 0, bathrooms: 2, area: 1000, landArea: 1500, floor: 1, certificate: 'HGB', featured: false, popular: 90, dateAdded: '2024-04-15', description: 'Gudang luas dan kokoh, lokasi sangat strategis dekat dengan area pelabuhan Tanjung Emas Semarang. Akses kontainer 40 feet. Cocok untuk logistik dan industri.', agent: { name: 'Andi Wijaya', office: 'Jogja Real Estate', phone: '081211223344', email: 'andi.w@jogjarealestate.com', photo: 'https://i.pravatar.cc/80?img=3' }, features: ['Akses Kontainer', 'Area Bongkar Muat Luas', 'Keamanan 24 Jam', 'Kantor Admin', 'Dekat Pelabuhan'] },
                { id: 9, name: 'Villa Eksklusif dengan Private Pool di Bali', location: 'Seminyak, Bali', price: 15000000000, type: 'rumah', image: 'https://images.unsplash.com/photo-1613977257365-aaae5a9817ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 5, bathrooms: 5, area: 600, landArea: 800, floor: 2, certificate: 'SHM', featured: true, popular: 600, dateAdded: '2024-07-20', description: 'Villa mewah dan eksklusif di jantung Seminyak, Bali. Dilengkapi private pool, taman tropis, dan interior berkelas. Hanya beberapa menit berjalan kaki ke pantai dan restoran ternama. Investasi sempurna untuk disewakan atau hunian pribadi.', agent: { name: 'Ayu Pratiwi', office: 'Bali Paradise Property', phone: '081288889999', email: 'ayu.p@baliparadise.com', photo: 'https://i.pravatar.cc/80?img=8' }, features: ['Private Pool', 'Taman Tropis', 'Fully Furnished High-End', 'Jacuzzi', 'Dekat Pantai Seminyak'] },
                { id: 10, name: 'Apartemen Compact City View di Surabaya', location: 'Surabaya Timur, Jawa Timur', price: 950000000, type: 'apartemen', image: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70', bedrooms: 1, bathrooms: 1, area: 35, landArea: 0, floor: 20, certificate: 'HGB', featured: false, popular: 320, dateAdded: '2024-06-05', description: 'Apartemen tipe studio compact dengan pemandangan kota Surabaya yang menawan. Terletak di tower apartemen modern dengan fasilitas lengkap. Pilihan cerdas untuk profesional muda atau mahasiswa.', agent: { name: 'Dewi Anggraini', office: 'Surabaya Bisnis Properti', phone: '081255667788', email: 'dewi.a@sbybisnis.com', photo: 'https://i.pravatar.cc/80?img=4' }, features: ['Infinity Pool', 'Co-working Space', 'Smart Home System', 'Gym', 'Dekat Mall'] },
            ];
            appState.properties = propertiesData; // Inisialisasi data properti di state

            // === ELEMEN DOM UTAMA ===
            const appContent = document.getElementById('app-content');
            const navbarMenu = document.getElementById('navMenu');
            const navbarToggler = document.getElementById('navbarToggler');
            const appHeader = document.getElementById('appHeader');
            const loginModalElement = document.getElementById('loginModal');
            const loginButtonTrigger = document.getElementById('loginButtonTrigger');
            const loginForm = document.getElementById('loginForm');
            const newsletterForm = document.getElementById('newsletterForm');

            // === FUNGSI HELPER ===
            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
            };

            const showAlert = (message, type = 'info', containerId, duration = 5000) => {
                const container = document.getElementById(containerId);
                if (!container) return;

                const alertDiv = document.createElement('div');
                alertDiv.className = `alert alert-${type}`;
                alertDiv.setAttribute('role', 'alert');

                let iconClass = 'bi-info-circle-fill';
                if (type === 'success') iconClass = 'bi-check-circle-fill';
                else if (type === 'danger') iconClass = 'bi-exclamation-triangle-fill';
                else if (type === 'warning') iconClass = 'bi-exclamation-triangle-fill';

                alertDiv.innerHTML = `<i class="bi ${iconClass}"></i> ${message}`;

                // Hapus alert sebelumnya jika ada
                const existingAlert = container.querySelector('.alert');
                if (existingAlert) existingAlert.remove();

                container.appendChild(alertDiv);

                if (duration) {
                    setTimeout(() => {
                        alertDiv.style.transition = 'opacity 0.5s ease';
                        alertDiv.style.opacity = '0';
                        setTimeout(() => alertDiv.remove(), 500);
                    }, duration);
                }
                return alertDiv;
            };

            // === FUNGSI RENDER KOMPONEN ===
            function renderPropertyCard(property) {
                const card = document.createElement('article');
                card.className = 'property-card';
                card.setAttribute('data-id', property.id);
                card.setAttribute('tabindex', '0'); // Aksesibilitas
                card.setAttribute('role', 'link'); // Semantik link
                card.setAttribute('aria-label', `Lihat detail ${property.name}`);

                const typeBadgeText = property.type.charAt(0).toUpperCase() + property.type.slice(1);

                card.innerHTML = `
                <div class="property-card-image-wrapper">
                    <img src="${property.image}" alt="Foto ${property.name}" class="property-card-image" loading="lazy">
                    ${property.featured ? '<span class="property-card-badge">Unggulan</span>' : ''}
                </div>
                <div class="property-card-content">
                    <h3>${property.name}</h3>
                    <p class="location"><i class="bi bi-geo-alt-fill"></i> ${property.location}</p>
                    <div class="specs d-flex gap-3 mb-2">
                        ${property.bedrooms > 0 ? `<span><i class="bi bi-door-open-fill"></i> ${property.bedrooms} KT</span>` : ''}
                        ${property.bathrooms > 0 ? `<span><i class="bi bi-droplet-half"></i> ${property.bathrooms} KM</span>` : ''}
                        ${property.area > 0 ? `<span><i class="bi bi-rulers"></i> ${property.area} m</span>` : ''}
                    </div>
                    <p class="price">${formatCurrency(property.price)}</p>
                    <button class="btn btn-primary btn-sm mt-auto" data-id="${property.id}"><i class="bi bi-eye-fill"></i> Lihat Detail</button>
                </div>
            `;
                card.addEventListener('click', (e) => {
                    if (e.target.closest('button') || e.target.tagName === 'BUTTON') {
                        window.location.hash = `#/properti/${property.id}`;
                    } else if (e.target.closest('.property-card')) {
                        window.location.hash = `#/properti/${property.id}`;
                    }
                });
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        window.location.hash = `#/properti/${property.id}`;
                    }
                });
                return card;
            }

            function renderPage(pageId, context = {}) {
                appContent.innerHTML = ''; // Kosongkan konten lama
                const template = document.getElementById(pageId);
                if (template) {
                    const content = template.content.cloneNode(true);
                    appContent.appendChild(content);
                    document.documentElement.scrollTop = 0; // Scroll ke atas

                    // Update active nav link
                    updateActiveNavLink(context.path);

                    // Umumnya, fokus akan diarahkan ke elemen h1 pertama di halaman baru untuk aksesibilitas
                    const firstHeading = appContent.querySelector('h1');
                    if (firstHeading) {
                        firstHeading.setAttribute('tabindex', '-1'); // Buat bisa difokus programmatically
                        firstHeading.focus();
                    }

                } else {
                    console.error(`Template dengan ID "${pageId}" tidak ditemukan.`);
                    navigateTo('#/404'); // Arahkan ke halaman 404 jika template tidak ada
                }
            }

            // === LOGIKA HALAMAN ===
            function initHomePage() {
                renderPage('page-beranda', { path: '#/' });
                const featuredGrid = document.getElementById('featuredPropertiesGrid');
                if (featuredGrid) {
                    featuredGrid.innerHTML = ''; // Kosongkan placeholder loading
                    const featuredProperties = appState.properties.filter(p => p.featured).slice(0, 3);
                    if (featuredProperties.length > 0) {
                        featuredProperties.forEach(prop => featuredGrid.appendChild(renderPropertyCard(prop)));
                    } else {
                        featuredGrid.innerHTML = '<p class="text-center col-span-full">Tidak ada properti unggulan saat ini.</p>';
                    }
                }

                const heroSearchForm = document.getElementById('heroSearchForm');
                if (heroSearchForm) {
                    heroSearchForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const lokasi = document.getElementById('heroLokasi').value;
                        const tipe = document.getElementById('heroTipeProperti').value;
                        let query = '';
                        if (lokasi) query += `lokasi=${encodeURIComponent(lokasi)}`;
                        if (tipe) query += `${lokasi ? '&' : ''}tipe=${encodeURIComponent(tipe)}`;

                        window.location.hash = `#/properti${query ? '?' + query : ''}`;
                    });
                }
            }

            function initPropertiesPage(params = {}) {
                renderPage('page-properti', { path: '#/properti' });

                appState.activeFilters = {
                    lokasi: params.lokasi || '',
                    tipe: params.tipe || '',
                    hargaMin: params.hargaMin || '',
                    hargaMax: params.hargaMax || '',
                };
                appState.sortOrder = params.urutkan || 'terbaru';

                // Set nilai form filter dari parameter
                const filterForm = document.getElementById('filterPropertiesForm');
                if (filterForm) {
                    if (params.lokasi) filterForm.lokasi.value = params.lokasi;
                    if (params.tipe) filterForm.tipe.value = params.tipe;
                    if (params.hargaMin) filterForm.hargaMin.value = params.hargaMin;
                    if (params.hargaMax) filterForm.hargaMax.value = params.hargaMax;
                    if (params.urutkan) filterForm.urutkan.value = params.urutkan;

                    filterForm.addEventListener('submit', handleFilterSubmit);
                }

                displayFilteredProperties();
                updateFilterInfo();
            }

            function handleFilterSubmit(e) {
                e.preventDefault();
                const form = e.target;
                appState.activeFilters = {
                    lokasi: form.lokasi.value.trim(),
                    tipe: form.tipe.value,
                    hargaMin: form.hargaMin.value,
                    hargaMax: form.hargaMax.value,
                };
                appState.sortOrder = form.urutkan.value;

                // Update URL hash
                const queryParams = new URLSearchParams();
                if (appState.activeFilters.lokasi) queryParams.set('lokasi', appState.activeFilters.lokasi);
                if (appState.activeFilters.tipe) queryParams.set('tipe', appState.activeFilters.tipe);
                if (appState.activeFilters.hargaMin) queryParams.set('hargaMin', appState.activeFilters.hargaMin);
                if (appState.activeFilters.hargaMax) queryParams.set('hargaMax', appState.activeFilters.hargaMax);
                if (appState.sortOrder) queryParams.set('urutkan', appState.sortOrder);

                window.location.hash = `#/properti${queryParams.toString() ? '?' + queryParams.toString() : ''}`;
                // displayFilteredProperties(); // Router akan menangani ini via hashchange
                // updateFilterInfo();
            }

            function displayFilteredProperties() {
                const allPropertiesGrid = document.getElementById('allPropertiesGrid');
                if (!allPropertiesGrid) return;

                allPropertiesGrid.innerHTML = '<p class="text-center" id="loadingAllProperties">Memfilter properti...</p>';

                let filtered = [...appState.properties];

                // Filter berdasarkan lokasi/nama (case-insensitive)
                if (appState.activeFilters.lokasi) {
                    const searchTerm = appState.activeFilters.lokasi.toLowerCase();
                    filtered = filtered.filter(p =>
                        p.name.toLowerCase().includes(searchTerm) ||
                        p.location.toLowerCase().includes(searchTerm)
                    );
                }
                // Filter berdasarkan tipe
                if (appState.activeFilters.tipe) {
                    filtered = filtered.filter(p => p.type === appState.activeFilters.tipe);
                }
                // Filter harga min
                if (appState.activeFilters.hargaMin) {
                    filtered = filtered.filter(p => p.price >= parseInt(appState.activeFilters.hargaMin));
                }
                // Filter harga max
                if (appState.activeFilters.hargaMax) {
                    filtered = filtered.filter(p => p.price <= parseInt(appState.activeFilters.hargaMax));
                }

                // Sorting
                switch (appState.sortOrder) {
                    case 'harga-terendah':
                        filtered.sort((a, b) => a.price - b.price);
                        break;
                    case 'harga-tertinggi':
                        filtered.sort((a, b) => b.price - a.price);
                        break;
                    case 'populer':
                        filtered.sort((a, b) => (b.popular || 0) - (a.popular || 0));
                        break;
                    case 'terbaru':
                    default:
                        filtered.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
                        break;
                }

                allPropertiesGrid.innerHTML = ''; // Kosongkan grid
                if (filtered.length > 0) {
                    filtered.forEach(prop => allPropertiesGrid.appendChild(renderPropertyCard(prop)));
                } else {
                    allPropertiesGrid.innerHTML = '<p class="text-center col-span-full">Tidak ada properti yang cocok dengan kriteria filter Anda.</p>';
                }

                // Update judul halaman
                const propertiPageTitle = document.getElementById('propertiPageTitle');
                const propertiPageSubtitle = document.getElementById('propertiPageSubtitle');
                let titleText = "Daftar Properti";
                if (appState.activeFilters.lokasi) titleText += ` di ${appState.activeFilters.lokasi}`;
                if (appState.activeFilters.tipe) titleText += ` (${appState.activeFilters.tipe.charAt(0).toUpperCase() + appState.activeFilters.tipe.slice(1)})`;
                if (propertiPageTitle) propertiPageTitle.textContent = titleText;
                if (propertiPageSubtitle) propertiPageSubtitle.textContent = `Menampilkan ${filtered.length} properti. Gunakan filter untuk pencarian lebih spesifik.`;

            }

            function updateFilterInfo() {
                const filterInfoDiv = document.getElementById('filterInfo');
                if (!filterInfoDiv) return;

                let infoText = 'Filter aktif: ';
                const activeFilterLabels = [];
                if (appState.activeFilters.lokasi) activeFilterLabels.push(`Lokasi/Kata Kunci: "${appState.activeFilters.lokasi}"`);
                if (appState.activeFilters.tipe) activeFilterLabels.push(`Tipe: ${appState.activeFilters.tipe}`);
                if (appState.activeFilters.hargaMin) activeFilterLabels.push(`Harga Min: ${formatCurrency(appState.activeFilters.hargaMin)}`);
                if (appState.activeFilters.hargaMax) activeFilterLabels.push(`Harga Max: ${formatCurrency(appState.activeFilters.hargaMax)}`);

                if (activeFilterLabels.length > 0) {
                    infoText += activeFilterLabels.join(', ') + '.';
                    filterInfoDiv.innerHTML = `<div class="alert alert-info">${infoText} <button class="btn btn-sm btn-outline-primary ms-auto" id="resetFilterBtn">Reset Filter</button></div>`;
                    document.getElementById('resetFilterBtn').addEventListener('click', () => {
                        // Reset form values
                        const filterForm = document.getElementById('filterPropertiesForm');
                        if (filterForm) filterForm.reset();
                        // Reset state and URL, then re-render
                        window.location.hash = '#/properti';
                    });
                } else {
                    filterInfoDiv.innerHTML = '';
                }
            }


            function initPropertyDetailPage(propertyId) {
                renderPage('page-properti-detail', { path: `#/properti/${propertyId}` });
                const detailContainer = document.getElementById('propertyDetailContainer');
                const property = appState.properties.find(p => p.id === parseInt(propertyId));

                if (property && detailContainer) {
                    const detailTemplate = document.getElementById('template-property-detail-content');
                    if (detailTemplate) {
                        const detailContent = detailTemplate.content.cloneNode(true);

                        detailContent.getElementById('mainPropertyImage').src = property.image;
                        detailContent.getElementById('mainPropertyImage').alt = `Gambar utama ${property.name}`;
                        detailContent.getElementById('propertyTitle').textContent = property.name;
                        detailContent.getElementById('propertyLocation').innerHTML = `<i class="bi bi-geo-alt-fill"></i> ${property.location}`;
                        detailContent.getElementById('propertyPrice').textContent = formatCurrency(property.price);

                        // Spek
                        const specKT = detailContent.getElementById('specKamarTidur');
                        if (property.bedrooms > 0) specKT.innerHTML = `<i class="bi bi-door-open-fill"></i> <strong>${property.bedrooms}</strong> Kamar Tidur`; else specKT.remove();

                        const specKM = detailContent.getElementById('specKamarMandi');
                        if (property.bathrooms > 0) specKM.innerHTML = `<i class="bi bi-droplet-half"></i> <strong>${property.bathrooms}</strong> Kamar Mandi`; else specKM.remove();

                        const specLB = detailContent.getElementById('specLuasBangunan');
                        if (property.area > 0) specLB.innerHTML = `<i class="bi bi-rulers"></i> <strong>${property.area} m</strong> Luas Bangunan`; else specLB.remove();

                        const specLT = detailContent.getElementById('specLuasTanah');
                        if (property.landArea > 0) specLT.innerHTML = `<i class="bi bi-aspect-ratio-fill"></i> <strong>${property.landArea} m</strong> Luas Tanah`; else specLT.remove();

                        const specLantai = detailContent.getElementById('specLantai');
                        if (property.floor > 0) specLantai.innerHTML = `<i class="bi bi-layers-fill"></i> <strong>${property.floor}</strong> Lantai`; else if (property.floor === "Dasar") specLantai.innerHTML = `<i class="bi bi-layers-fill"></i> <strong>Dasar</strong>`; else specLantai.remove();

                        const specSert = detailContent.getElementById('specSertifikat');
                        if (property.certificate) specSert.innerHTML = `<i class="bi bi-patch-check-fill"></i> <strong>${property.certificate}</strong>`; else specSert.remove();

                        detailContent.getElementById('propertyDescription').textContent = property.description;

                        // Fitur Tambahan
                        const featuresList = detailContent.getElementById('propertyFeaturesList');
                        featuresList.innerHTML = ''; // Clear previous
                        if (property.features && property.features.length > 0) {
                            property.features.forEach(feature => {
                                const li = document.createElement('li');
                                li.className = 'badge bg-light text-dark p-2';
                                li.innerHTML = `<i class="bi bi-check-circle me-1 text-success"></i> ${feature}`;
                                featuresList.appendChild(li);
                            });
                        } else {
                            detailContent.querySelector('.property-detail-features').style.display = 'none';
                        }


                        // Info Agen
                        if (property.agent) {
                            detailContent.getElementById('agentPhoto').src = property.agent.photo || 'https://i.pravatar.cc/80';
                            detailContent.getElementById('agentPhoto').alt = `Foto ${property.agent.name}`;
                            detailContent.getElementById('agentName').textContent = property.agent.name;
                            detailContent.getElementById('agentOffice').textContent = property.agent.office;
                            detailContent.getElementById('agentPhone').href = `tel:${property.agent.phone}`;
                            detailContent.getElementById('agentPhone').textContent = property.agent.phone;
                            detailContent.getElementById('agentEmail').href = `mailto:${property.agent.email}`;
                            detailContent.getElementById('agentEmail').textContent = property.agent.email;

                            const agentContactForm = detailContent.getElementById('agentContactForm');
                            agentContactForm.addEventListener('submit', (e) => {
                                e.preventDefault();
                                // Simulasi pengiriman pesan
                                showAlert('Pesan Anda telah berhasil dikirim ke agen.', 'success', 'agentContactMessage');
                                agentContactForm.reset();
                                // Set default pesan lagi
                                setTimeout(() => {
                                    agentContactForm.querySelector('textarea').value = `Saya tertarik dengan properti "${property.name}" ini dan ingin informasi lebih lanjut.`;
                                }, 100);
                            });
                            // Set default pesan saat load
                            agentContactForm.querySelector('textarea').value = `Saya tertarik dengan properti "${property.name}" ini dan ingin informasi lebih lanjut.`;
                        }


                        detailContainer.innerHTML = ''; // Kosongkan kontainer
                        detailContainer.appendChild(detailContent);

                        // Set judul dokumen
                        document.title = `${property.name} - PropertiKu`;

                    } else {
                        detailContainer.innerHTML = '<p class="text-center">Gagal memuat template detail properti.</p>';
                    }
                } else {
                    detailContainer.innerHTML = '<p class="text-center">Properti tidak ditemukan atau terjadi kesalahan.</p>';
                    document.title = 'Properti Tidak Ditemukan - PropertiKu';
                }
            }

            function initTentangPage() {
                renderPage('page-tentang', { path: '#/tentang' });
                document.title = 'Tentang Kami - PropertiKu';
            }

            function initKontakPage() {
                renderPage('page-kontak', { path: '#/kontak' });
                document.title = 'Hubungi Kami - PropertiKu';
                const contactForm = document.getElementById('contactForm');
                if (contactForm) {
                    contactForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        // Simulasi pengiriman
                        showAlert('Pesan Anda telah berhasil dikirim. Tim kami akan segera menghubungi Anda.', 'success', 'contactFormMessage');
                        contactForm.reset();
                    });
                }
            }

            function initNotFoundPage() {
                renderPage('page-not-found', { path: '#/404' });
                document.title = '404 Halaman Tidak Ditemukan - PropertiKu';
            }

            // === ROUTER SEDERHANA ===
            const routes = {
                '/': initHomePage,
                '/properti': initPropertiesPage,
                '/properti/:id': initPropertyDetailPage,
                '/tentang': initTentangPage,
                '/kontak': initKontakPage,
                '/404': initNotFoundPage,
            };

            function router() {
                const fullHash = window.location.hash.slice(1) || '/';
                const [path, queryString] = fullHash.split('?');

                let params = {};
                if (queryString) {
                    const urlParams = new URLSearchParams(queryString);
                    for (const [key, value] of urlParams) {
                        params[key] = value;
                    }
                }

                // Cek route dinamis seperti /properti/:id
                let routeHandler;
                let routeParams;

                for (const routePath in routes) {
                    const routeParts = routePath.split('/');
                    const currentPathParts = path.split('/');

                    if (routeParts.length === currentPathParts.length) {
                        let match = true;
                        routeParams = {};
                        for (let i = 0; i < routeParts.length; i++) {
                            if (routeParts[i].startsWith(':')) {
                                routeParams[routeParts[i].slice(1)] = currentPathParts[i];
                            } else if (routeParts[i] !== currentPathParts[i]) {
                                match = false;
                                break;
                            }
                        }
                        if (match) {
                            routeHandler = routes[routePath];
                            break;
                        }
                    }
                }

                // Reset judul default
                document.title = 'PropertiKu - Temukan Properti Impian Anda';

                if (routeHandler) {
                    if (Object.keys(routeParams).length > 0) {
                        // Untuk route seperti /properti/:id, gabungkan routeParams dan queryParams
                        routeHandler(...Object.values(routeParams), params);
                    } else {
                        // Untuk route seperti /properti?filter=X
                        routeHandler(params);
                    }
                } else {
                    navigateTo('#/404');
                }

                // Tutup menu mobile jika terbuka
                if (navbarMenu.classList.contains('show')) {
                    toggleMobileNav();
                }
            }

            function navigateTo(hash) {
                window.location.hash = hash;
            }

            function updateActiveNavLink(currentPath) {
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    // Hapus query string dari href untuk perbandingan path dasar
                    const linkPath = link.getAttribute('href').split('?')[0];
                    // Untuk beranda, path bisa '/' atau '#/'
                    const isHomePage = (currentPath === '/' || currentPath === '#/') && (linkPath === '#/' || linkPath === '/');
                    // Untuk halaman lain, cocokkan path dasar
                    const isCurrentPage = linkPath === currentPath || linkPath.substring(1) === currentPath.substring(1);

                    if (isHomePage || (currentPath !== '/' && currentPath !== '#/' && isCurrentPage)) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }

            // === NAVIGASI MOBILE ===
            function toggleMobileNav() {
                const isOpen = navbarMenu.classList.toggle('show');
                navbarToggler.setAttribute('aria-expanded', isOpen);
                navbarToggler.querySelector('i').className = isOpen ? 'bi bi-x-lg' : 'bi bi-list';

                // Set top offset untuk menu mobile berdasarkan tinggi header
                if (isOpen) {
                    const headerHeight = appHeader.offsetHeight;
                    navbarMenu.style.top = `${headerHeight}px`;
                    // Tambahkan class ke body untuk overlay
                    document.body.classList.add('mobile-nav-active');
                } else {
                    document.body.classList.remove('mobile-nav-active');
                }
            }

            if (navbarToggler) {
                navbarToggler.addEventListener('click', toggleMobileNav);
            }
            // Tutup menu saat link di klik
            navbarMenu.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    if (navbarMenu.classList.contains('show')) {
                        toggleMobileNav();
                    }
                });
            });

            // === MODAL LOGIN ===
            function openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('show');
                    modal.setAttribute('aria-hidden', 'false');
                    // Fokus ke elemen pertama yang bisa diinteraksikan di modal
                    const firstFocusable = modal.querySelector('input, button, [href], textarea, select');
                    if (firstFocusable) firstFocusable.focus();
                }
            }

            function closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('show');
                    modal.setAttribute('aria-hidden', 'true');
                    // Kembalikan fokus ke tombol yang membuka modal jika ada
                    if (loginButtonTrigger) loginButtonTrigger.focus();
                }
            }

            if (loginButtonTrigger) {
                loginButtonTrigger.addEventListener('click', () => openModal('loginModal'));
            }

            document.querySelectorAll('[data-dismiss-modal]').forEach(button => {
                button.addEventListener('click', () => {
                    const modalId = button.getAttribute('data-dismiss-modal');
                    closeModal(modalId);
                });
            });

            // Tutup modal jika klik di luar konten modal
            if (loginModalElement) {
                loginModalElement.addEventListener('click', (e) => {
                    if (e.target === loginModalElement) { // Klik pada backdrop
                        closeModal('loginModal');
                    }
                });
            }
            // Tutup modal dengan tombol Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && loginModalElement.classList.contains('show')) {
                    closeModal('loginModal');
                }
            });

            if (loginForm) {
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value;
                    // Simulasi login
                    if (email === "user@propertiku.com" && document.getElementById('loginPassword').value === "password123") {
                        showAlert(`Selamat datang kembali, ${email}! Anda berhasil masuk.`, 'success', 'loginMessage');
                        setTimeout(() => {
                            closeModal('loginModal');
                            loginForm.reset();
                            // Mungkin update UI untuk state login
                        }, 2000);
                    } else {
                        showAlert('Email atau kata sandi salah. Silakan coba lagi.', 'danger', 'loginMessage');
                    }
                });
            }

            // === FORMULIR NEWSLETTER ===
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('newsletterEmail').value;
                    if (email) {
                        // Simulasi sukses
                        showAlert(`Terima kasih! Email ${email} telah berhasil didaftarkan untuk nawala kami.`, 'success', 'newsletterMessage');
                        newsletterForm.reset();
                    } else {
                        showAlert('Harap masukkan alamat email yang valid.', 'danger', 'newsletterMessage');
                    }
                });
            }

            // === TAHUN COPYRIGHT OTOMATIS ===
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // === INISIALISASI ROUTER ===
            window.addEventListener('hashchange', router);
            window.addEventListener('load', router); // Panggil router saat halaman dimuat pertama kali

            // Panggil router untuk memuat halaman awal berdasarkan hash (jika ada) atau default
            router();

        });
    </script>
</body>

</html>