<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Valley - Properti Impian Anda</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Variabel CSS */
        :root {
            --primary-color: #28a745;
            /* Hijau khas Green Valley */
            --secondary-color: #6c757d;
            /* Abu-abu sekunder */
            --accent-color: #ffc107;
            /* Kuning aksen */
            --light-bg: #f8f9fa;
            --dark-text: #343a40;
            --light-text: #ffffff;
            --border-color: #dee2e6;
            --shadow-sm: 0 .125rem .25rem rgba(0, 0, 0, .075);
            --shadow-md: 0 .5rem 1rem rgba(0, 0, 0, .15);
            --border-radius-sm: .25rem;
            --border-radius-md: .5rem;
            --font-main: 'Inter', sans-serif;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Utilitas Global */
        .section-padding {
            padding: 60px 0;
        }

        .text-primary-emphasis {
            color: var(--primary-color) !important;
        }

        .bg-primary-emphasis {
            background-color: var(--primary-color) !important;
        }

        .btn-primary-custom {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: var(--light-text);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .btn-primary-custom:hover {
            background-color: #218838;
            /* Sedikit lebih gelap */
            border-color: #1e7e34;
            color: var(--light-text);
        }

        /* Header & Navigasi */
        .navbar-brand {
            font-weight: 700;
            color: var(--primary-color) !important;
        }

        .navbar-nav .nav-link {
            font-weight: 500;
            color: var(--dark-text) !important;
            transition: color 0.3s ease;
        }

        .navbar-nav .nav-link.active,
        .navbar-nav .nav-link:hover {
            color: var(--primary-color) !important;
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80') no-repeat center center;
            background-size: cover;
            color: var(--light-text);
            padding: 100px 0;
        }

        .hero-section h1 {
            font-size: 2.8rem;
            font-weight: 700;
        }

        .hero-section p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        /* Formulir Pencarian */
        .search-form-container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 30px;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
        }

        .search-form-container label {
            font-weight: 500;
            margin-bottom: .5rem;
        }

        .form-control,
        .form-select {
            border-radius: var(--border-radius-sm);
        }

        /* Kartu Kategori */
        .category-card {
            border: none;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-decoration: none;
            color: var(--dark-text);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            color: var(--primary-color);
        }

        .category-card img {
            height: 200px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .category-card:hover img {
            transform: scale(1.05);
        }

        .category-card .card-body {
            padding: 20px;
        }

        .category-card .card-title {
            font-weight: 600;
            margin-bottom: 10px;
        }

        /* Kartu Properti (SFC) */
        .property-card {
            background-color: var(--light-text);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.3s ease;
            margin-bottom: 20px;
        }

        .property-card:hover {
            box-shadow: var(--shadow-md);
        }

        .property-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-top-left-radius: var(--border-radius-md);
            border-top-right-radius: var(--border-radius-md);
        }

        .property-card .card-body {
            padding: 20px;
        }

        .property-card .property-type {
            font-size: 0.85rem;
            color: var(--secondary-color);
            text-transform: uppercase;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .property-card .property-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 10px;
        }

        .property-card .property-location,
        .property-card .property-price {
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .property-card .property-price {
            font-weight: 600;
            color: var(--primary-color);
        }

        .property-card .property-features {
            font-size: 0.9rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
        }

        .property-card .btn-detail {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            color: var(--dark-text);
            font-weight: 500;
        }

        .property-card .btn-detail:hover {
            background-color: #e0a800;
            border-color: #d39e00;
        }

        /* Footer */
        .footer {
            background-color: var(--dark-text);
            color: var(--light-bg);
            padding: 40px 0;
        }

        .footer a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* SPA behavior: hide all sections by default */
        .page-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsif */
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2.2rem;
            }

            .hero-section p {
                font-size: 1rem;
            }

            .search-form-container .row>div {
                margin-bottom: 15px;
            }

            .search-form-container .btn-primary-custom {
                width: 100%;
            }
        }
    </style>
</head>

<body>

    <!-- Header & Navigasi -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm fixed-top">
            <div class="container">
                <a class="navbar-brand" href="#beranda">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI3Ljk5OTkgMTZMMC4wMDAxMjIwNzEgMTZMMC4wMDAxMjIwNzEgMTQuMTM0M0wyMy44NjM3IDE0LjEzNDNMMTYuNzEyOSAyLjY1NDY3TDE4LjA3NzMgMEwyOS44NjUzIDE0LjEzNDNMMjkuODY1MyAwTDMxLjk5OTkgMEwzMS45OTk5IDE2TDI3Ljk5OTkgMTZaIiBmaWxsPSIjMjhBNzQ1Ii8+CjxwYXRoIGQ9Ik00LjAwMDA5IDE2TDMyIDE2TDMyIDE3Ljg2NTdMOC4xMzYyMyAxNy44NjU3TDE1LjI4NzIgMjkuMzQ1M0wxMy45MjI4IDMyTDIuMTM0NzUgMTcuODY1N0wyLjEzNDc1IDMyTDogMTcuODY1N0wyLjEzNDc1IDMyTDQgMTZaIiBmaWxsPSIjMjhBNzQ1Ii8+Cjwvc3ZnPgo="
                        alt="Green Valley Logo" width="30" height="30" class="d-inline-block align-top me-2">
                    Green Valley
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#beranda" data-page="beranda">Beranda</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#pencarian" data-page="pencarian">Cari Properti</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="kategoriDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Kategori
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="kategoriDropdown">
                                <li><a class="dropdown-item nav-link-kategori" href="#kategori/apartemen"
                                        data-page="kategori" data-category="apartemen">Apartemen</a></li>
                                <li><a class="dropdown-item nav-link-kategori" href="#kategori/rumah"
                                        data-page="kategori" data-category="rumah">Rumah</a></li>
                                <li><a class="dropdown-item nav-link-kategori" href="#kategori/kos" data-page="kategori"
                                        data-category="kos">Kos</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#tentang" data-page="tentang">Tentang Kami</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Konten Utama (SPA views) -->
    <main style="padding-top: 70px;"> <!-- Padding untuk fixed navbar -->

        <!-- Halaman Beranda -->
        <section id="beranda" class="page-section active">
            <!-- Hero Section -->
            <div class="hero-section text-center">
                <div class="container">
                    <h1>Temukan Properti Impian Anda di Green Valley</h1>
                    <p>Pilihan terbaik untuk apartemen, rumah, dan kos dengan harga bersaing.</p>
                    <a href="#pencarian" class="btn btn-primary-custom btn-lg spa-link" data-page="pencarian">Mulai Cari
                        Sekarang</a>
                </div>
            </div>

            <!-- Kategori Properti -->
            <div class="container section-padding">
                <h2 class="text-center mb-5">Kategori Properti Populer</h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <a href="#kategori/apartemen" class="category-card spa-link" data-page="kategori"
                            data-category="apartemen">
                            <img src="https://images.unsplash.com/photo-1616594039964-ae9021a400a0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80"
                                class="card-img-top" alt="Apartemen">
                            <div class="card-body">
                                <h3 class="card-title">Apartemen</h3>
                                <p class="card-text">Hunian vertikal modern dengan fasilitas lengkap di lokasi
                                    strategis.</p>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a href="#kategori/rumah" class="category-card spa-link" data-page="kategori"
                            data-category="rumah">
                            <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80"
                                class="card-img-top" alt="Rumah">
                            <div class="card-body">
                                <h3 class="card-title">Rumah</h3>
                                <p class="card-text">Kenyamanan rumah tapak idaman untuk keluarga Anda.</p>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a href="#kategori/kos" class="category-card spa-link" data-page="kategori" data-category="kos">
                            <img src="https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80"
                                class="card-img-top" alt="Kos">
                            <div class="card-body">
                                <h3 class="card-title">Kos</h3>
                                <p class="card-text">Pilihan tempat tinggal praktis dan terjangkau untuk mahasiswa dan
                                    pekerja.</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Halaman Pencarian Properti -->
        <section id="pencarian" class="page-section">
            <div class="container section-padding">
                <h2 class="text-center mb-5">Cari Properti</h2>
                <div class="search-form-container col-md-10 mx-auto">
                    <form id="searchPropertyForm">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="lokasi" class="form-label">Lokasi</label>
                                <input type="text" class="form-control" id="lokasi"
                                    placeholder="Contoh: Jakarta Selatan">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="tipeProperti" class="form-label">Tipe Properti</label>
                                <select class="form-select" id="tipeProperti">
                                    <option selected value="">Semua Tipe</option>
                                    <option value="apartemen">Apartemen</option>
                                    <option value="rumah">Rumah</option>
                                    <option value="kos">Kos</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="budget" class="form-label">Budget Maksimal (Rp)</label>
                                <input type="number" class="form-control" id="budget" placeholder="Contoh: 500000000">
                            </div>
                            <div class="col-md-2 mb-3 d-flex align-items-end">
                                <button type="submit" class="btn btn-primary-custom w-100">Cari</button>
                            </div>
                        </div>
                        <!-- Saran: Filter Lanjutan bisa ditambahkan di sini -->
                        <div id="advancedFiltersContainer" class="mt-3" style="display:none;">
                            <hr>
                            <h5>Filter Lanjutan</h5>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="jumlahKamar" class="form-label">Jumlah Kamar Tidur</label>
                                    <select class="form-select" id="jumlahKamar">
                                        <option selected value="">Semua</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3+</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="fasilitas" class="form-label">Fasilitas</label>
                                    <select class="form-select" id="fasilitas">
                                        <option selected value="">Semua</option>
                                        <option value="kolam-renang">Kolam Renang</option>
                                        <option value="parkir">Parkir</option>
                                        <option value="gym">Gym</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button type="button" id="toggleAdvancedFilters" class="btn btn-link p-0">Filter
                            Lanjutan</button>
                    </form>
                </div>

                <div id="searchResults" class="row mt-5">
                    <!-- Hasil pencarian akan ditampilkan di sini menggunakan SFC -->
                    <p class="text-center text-muted">Silakan isi formulir di atas untuk memulai pencarian.</p>
                </div>
            </div>
        </section>

        <!-- Halaman Detail Kategori -->
        <section id="kategori" class="page-section">
            <div class="container section-padding">
                <h2 class="text-center mb-1" id="categoryTitle">Properti Kategori</h2>
                <p class="text-center text-muted mb-5" id="categorySubtitle">Menampilkan properti pilihan untuk Anda.
                </p>
                <div id="categoryResults" class="row">
                    <!-- Hasil properti berdasarkan kategori akan ditampilkan di sini -->
                </div>
            </div>
        </section>

        <!-- Halaman Tentang Kami -->
        <section id="tentang" class="page-section">
            <div class="container section-padding">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h2 class="mb-4">Tentang Green Valley</h2>
                        <p>Green Valley berkomitmen untuk membantu Anda menemukan properti impian dengan mudah dan
                            transparan. Kami menyediakan platform yang menghubungkan pencari properti dengan ribuan
                            listing apartemen, rumah, dan kos berkualitas di seluruh Indonesia.</p>
                        <p>Dengan teknologi terkini dan tim yang berdedikasi, kami berusaha memberikan pengalaman
                            pencarian properti yang intuitif, informatif, dan efisien. Fokus kami adalah kepuasan Anda.
                        </p>
                        <a href="#pencarian" class="btn btn-primary-custom spa-link" data-page="pencarian">Cari Properti
                            Sekarang</a>
                    </div>
                    <div class="col-md-6 text-center">
                        <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1073&q=80"
                            alt="Tentang Green Valley" class="img-fluid rounded shadow-md">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <p>© <span id="currentYear"></span> Green Valley. Semua Hak Dilindungi.</p>
            <p>
                <a href="#privasi" class="spa-link" data-page="privasi">Kebijakan Privasi</a> |
                <a href="#syarat" class="spa-link" data-page="syarat">Syarat & Ketentuan</a>
            </p>
            <!-- Saran: Opsi ubah bahasa bisa ditambahkan di sini -->
        </div>
    </footer>

    <!-- Template untuk Single File Component (SFC) - Kartu Properti -->
    <template id="propertyCardTemplate">
        <div class="col-md-6 col-lg-4">
            <div class="property-card">
                <img src="" alt="Gambar Properti" class="property-image">
                <div class="card-body">
                    <p class="property-type"></p>
                    <h5 class="property-name"></h5>
                    <p class="property-location"><i class="fas fa-map-marker-alt me-1"></i> </p>
                    <p class="property-price"></p>
                    <p class="property-features"></p>
                    <a href="#" class="btn btn-detail property-detail-link">Lihat Detail</a>
                </div>
            </div>
        </div>
    </template>

    <!-- Bootstrap JS Bundle (Popper.js & Bootstrap JS) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <!-- Font Awesome (untuk ikon) -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous" async></script>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pageSections = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link, .navbar-nav .dropdown-item, .spa-link');
            const propertyCardTemplate = document.getElementById('propertyCardTemplate');
            const searchResultsContainer = document.getElementById('searchResults');
            const categoryResultsContainer = document.getElementById('categoryResults');
            const searchForm = document.getElementById('searchPropertyForm');
            const categoryTitleEl = document.getElementById('categoryTitle');
            const categorySubtitleEl = document.getElementById('categorySubtitle');
            const currentYearEl = document.getElementById('currentYear');
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

            // Mock Data Properti
            const allProperties = [
                { id: 1, name: "Apartemen Mewah Sudirman", type: "apartemen", location: "Jakarta Pusat", price: 2500000000, image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80", features: "3 KT, 2 KM, 120m²", kamar: 3, fasilitas: ['kolam-renang', 'gym'] },
                { id: 2, name: "Rumah Asri Pondok Indah", type: "rumah", location: "Jakarta Selatan", price: 5000000000, image: "https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1674&q=80", features: "4 KT, 3 KM, 300m², Taman", kamar: 4, fasilitas: ['parkir', 'taman'] },
                { id: 3, name: "Kos Nyaman Depok", type: "kos", location: "Depok", price: 1500000, image: "https://images.unsplash.com/photo-1600585152915-d208bec867a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80", features: "AC, WiFi, Kamar Mandi Dalam", kamar: 1, fasilitas: ['wifi'] },
                { id: 4, name: "Apartemen Studio Kuningan", type: "apartemen", location: "Jakarta Selatan", price: 800000000, image: "https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80", features: "1 KT, 1 KM, 35m²", kamar: 1, fasilitas: ['gym'] },
                { id: 5, name: "Rumah Minimalis Bekasi", type: "rumah", location: "Bekasi", price: 750000000, image: "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80", features: "2 KT, 1 KM, 70m²", kamar: 2, fasilitas: ['parkir'] },
                { id: 6, name: "Kos Putri Cikutra", type: "kos", location: "Bandung", price: 900000, image: "https://images.unsplash.com/photo-1513584684374-8bab748fbf90?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1730&q=80", features: "WiFi, Dapur Bersama", kamar: 1, fasilitas: ['wifi'] },
                { id: 7, name: "Apartemen City View Surabaya", type: "apartemen", location: "Surabaya", price: 1200000000, image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80", features: "2 KT, 1 KM, 60m²", kamar: 2, fasilitas: ['kolam-renang'] },
            ];

            // Fungsi untuk render property card (SFC emulation)
            function renderPropertyCard(property) {
                const cardClone = propertyCardTemplate.content.cloneNode(true);
                cardClone.querySelector('.property-image').src = property.image;
                cardClone.querySelector('.property-image').alt = property.name;
                cardClone.querySelector('.property-type').textContent = property.type.charAt(0).toUpperCase() + property.type.slice(1);
                cardClone.querySelector('.property-name').textContent = property.name;
                cardClone.querySelector('.property-location').innerHTML = `<i class="fas fa-map-marker-alt me-1 text-secondary"></i> ${property.location}`;
                cardClone.querySelector('.property-price').textContent = `Rp ${property.price.toLocaleString('id-ID')}${property.type === 'kos' ? '/bulan' : ''}`;
                cardClone.querySelector('.property-features').textContent = property.features;
                cardClone.querySelector('.property-detail-link').href = `#properti/${property.id}`; // Nanti bisa untuk halaman detail
                return cardClone;
            }

            // Fungsi untuk menampilkan properti
            function displayProperties(properties, container) {
                container.innerHTML = ''; // Kosongkan kontainer
                if (properties.length === 0) {
                    container.innerHTML = '<p class="text-center text-muted col-12">Tidak ada properti yang cocok dengan kriteria Anda.</p>';
                    return;
                }
                properties.forEach(prop => {
                    container.appendChild(renderPropertyCard(prop));
                });
            }

            // SPA Router Sederhana
            function navigateToPage(pageId, category = null) {
                pageSections.forEach(section => section.classList.remove('active'));
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                    // Update active link di navbar
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.dataset.page === pageId) {
                            if (link.classList.contains('dropdown-item') && link.dataset.category === category) {
                                link.classList.add('active');
                                // Juga aktifkan parent dropdown
                                link.closest('.nav-item.dropdown').querySelector('.nav-link.dropdown-toggle').classList.add('active');
                            } else if (!link.classList.contains('dropdown-item') && !link.closest('.dropdown-menu')) {
                                link.classList.add('active');
                            }
                        }
                        // Hapus active dari dropdown toggle jika tidak ada itemnya yang aktif
                        if (link.classList.contains('dropdown-toggle') && !link.classList.contains('active')) {
                            const dropdownItems = link.parentElement.querySelectorAll('.dropdown-item');
                            let anyActive = false;
                            dropdownItems.forEach(item => { if (item.classList.contains('active')) anyActive = true; });
                            if (!anyActive) link.classList.remove('active');
                        }
                    });

                    // Scroll to top of page
                    window.scrollTo(0, 0);

                    // Logika spesifik per halaman
                    if (pageId === 'kategori' && category) {
                        const categoryName = category.charAt(0).toUpperCase() + category.slice(1);
                        categoryTitleEl.textContent = `Properti Kategori: ${categoryName}`;
                        categorySubtitleEl.textContent = `Menjelajahi pilihan ${categoryName.toLowerCase()} terbaik kami.`;
                        const filteredProperties = allProperties.filter(prop => prop.type === category);
                        displayProperties(filteredProperties, categoryResultsContainer);
                    } else if (pageId === 'pencarian') {
                        // Mungkin reset form atau tampilkan hasil terakhir jika ada
                        // Untuk contoh ini, kita kosongkan hasil
                        searchResultsContainer.innerHTML = '<p class="text-center text-muted">Silakan isi formulir di atas untuk memulai pencarian.</p>';
                    }
                } else {
                    console.warn(`Halaman dengan ID "${pageId}" tidak ditemukan.`);
                    navigateToPage('beranda'); // Fallback ke beranda
                }
            }

            // Event listener untuk link navigasi
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.dataset.page;
                    const category = link.dataset.category || null;

                    // Update URL hash
                    if (category) {
                        window.location.hash = `${pageId}/${category}`;
                    } else {
                        window.location.hash = pageId;
                    }
                    // Navigasi akan ditangani oleh event hashchange
                });
            });

            // Handle navigasi berbasis hash (untuk bookmark dan direct URL access)
            function handleHashChange() {
                const hash = window.location.hash.substring(1); // Hapus #
                let pageId = 'beranda'; // Default page
                let category = null;

                if (hash) {
                    const parts = hash.split('/');
                    pageId = parts[0];
                    if (parts.length > 1) {
                        category = parts[1];
                    }
                }
                navigateToPage(pageId, category);
            }

            // Panggil handleHashChange saat load awal dan saat hash berubah
            window.addEventListener('hashchange', handleHashChange);
            handleHashChange(); // Untuk load awal

            // Fungsi untuk form pencarian
            if (searchForm) {
                searchForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const lokasi = document.getElementById('lokasi').value.toLowerCase();
                    const tipe = document.getElementById('tipeProperti').value;
                    const budget = parseInt(document.getElementById('budget').value) || Infinity;

                    // Filter lanjutan (jika visible)
                    const jumlahKamar = document.getElementById('jumlahKamar').value;
                    const fasilitasInput = document.getElementById('fasilitas').value;


                    let filtered = allProperties.filter(prop => {
                        let match = true;
                        if (lokasi && !prop.location.toLowerCase().includes(lokasi)) match = false;
                        if (tipe && prop.type !== tipe) match = false;
                        if (prop.price > budget) match = false;

                        // Filter lanjutan
                        if (document.getElementById('advancedFiltersContainer').style.display !== 'none') {
                            if (jumlahKamar && prop.kamar < parseInt(jumlahKamar) && !(jumlahKamar === "3+" && prop.kamar >= 3)) match = false;
                            if (jumlahKamar && jumlahKamar === "3+" && prop.kamar < 3) match = false;

                            if (fasilitasInput && (!prop.fasilitas || !prop.fasilitas.includes(fasilitasInput))) match = false;
                        }

                        return match;
                    });
                    displayProperties(filtered, searchResultsContainer);
                });
            }

            // Toggle Filter Lanjutan
            const toggleAdvancedFiltersBtn = document.getElementById('toggleAdvancedFilters');
            const advancedFiltersContainer = document.getElementById('advancedFiltersContainer');
            if (toggleAdvancedFiltersBtn && advancedFiltersContainer) {
                toggleAdvancedFiltersBtn.addEventListener('click', () => {
                    const isHidden = advancedFiltersContainer.style.display === 'none' || advancedFiltersContainer.style.display === '';
                    advancedFiltersContainer.style.display = isHidden ? 'block' : 'none';
                    toggleAdvancedFiltersBtn.textContent = isHidden ? 'Sembunyikan Filter Lanjutan' : 'Filter Lanjutan';
                });
            }

        });
    </script>
</body>

</html>