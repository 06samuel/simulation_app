<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Temukan apartemen impian Anda di Green Valley. Platform penyewaan apartemen modern dengan UI/UX terbaik.">
  <title>Green Valley Apartments - Sewa Apartemen Impian Anda</title>

  <!-- Optimized Font Loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload"
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap"
    as="style" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap"
    media="all" />

  <style>
    /* =========================
       DESIGN TOKENS (TOKEN DESAIN)
    ========================= */
    :root {
      /* Palet Warna Utama (HSL) - Disesuaikan untuk Green Valley */
      --color-primary-h: 145;
      /* Hijau yang menenangkan */
      --color-primary-s: 63%;
      --color-primary-l: 42%;
      --color-primary: hsl(var(--color-primary-h), var(--color-primary-s), var(--color-primary-l));
      /* #4CAF50 */
      --color-primary-dark: hsl(var(--color-primary-h), var(--color-primary-s), 32%);
      --color-primary-light: hsl(var(--color-primary-h), var(--color-primary-s), 95%);
      --color-accent-h: 45;
      /* Kuning keemasan sebagai aksen */
      --color-accent-s: 100%;
      --color-accent-l: 50%;
      --color-accent: hsl(var(--color-accent-h), var(--color-accent-s), var(--color-accent-l));
      /* #FFC107 */
      --color-success: hsl(150, 85%, 40%);
      --color-warning: hsl(45, 95%, 50%);
      --color-error: hsl(0, 85%, 60%);

      /* Warna Dasar UI */
      --color-bg: hsl(210, 20%, 98%);
      /* Latar belakang halaman sedikit kebiruan */
      --color-surface: #ffffff;
      /* Permukaan elemen seperti kartu, modal */
      --color-surface-alt: hsl(210, 20%, 94%);
      /* Permukaan alternatif, misal input field */
      --color-border: hsl(210, 15%, 88%);
      --color-text: hsl(210, 10%, 25%);
      /* Teks utama */
      --color-text-muted: hsl(210, 10%, 45%);
      /* Teks sekunder/placeholder */
      --color-link: var(--color-primary);

      /* Tipografi */
      --font-family-sans: 'Poppins', system-ui, -apple-system, sans-serif;
      --font-family-serif: 'Merriweather', serif;
      --font-size-xs: 0.75rem;
      /* 12px */
      --font-size-sm: 0.875rem;
      /* 14px */
      --font-size-base: 1rem;
      /* 16px */
      --font-size-md: 1.125rem;
      /* 18px */
      --font-size-lg: 1.5rem;
      /* 24px */
      --font-size-xl: 2rem;
      /* 32px */
      --font-size-2xl: 2.5rem;
      /* 40px */
      --font-size-3xl: 3rem;
      /* 48px */

      --line-height-tight: 1.2;
      --line-height-normal: 1.6;
      /* Lebih nyaman dibaca */
      --line-height-relaxed: 1.8;

      /* Spasi (Spacing) */
      --space-1: 0.25rem;
      /* 4px */
      --space-2: 0.5rem;
      /* 8px */
      --space-3: 1rem;
      /* 16px */
      --space-4: 1.5rem;
      /* 24px */
      --space-5: 2rem;
      /* 32px */
      --space-6: 3rem;
      /* 48px */
      --space-7: 4rem;
      /* 64px */

      /* Radius Sudut (Border Radius) */
      --radius-sm: 0.25rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      /* Sedikit lebih halus */
      --radius-xl: 1rem;
      --radius-full: 9999px;

      /* Bayangan (Shadow) - Sentuhan Neumorphism Halus */
      --shadow-xs: 0 1px 2px hsla(210, 10%, 15%, 0.05);
      --shadow-sm: 0 3px 6px hsla(210, 10%, 15%, 0.07), 0 1px 2px hsla(210, 10%, 15%, 0.04);
      --shadow-md: 0 6px 12px hsla(210, 10%, 15%, 0.1), 0 3px 6px hsla(210, 10%, 15%, 0.06);
      --shadow-lg: 0 10px 20px hsla(210, 10%, 15%, 0.12), 0 6px 6px hsla(210, 10%, 15%, 0.08);
      --shadow-inset: inset 0 2px 4px hsla(210, 10%, 15%, 0.06);

      /* Transisi */
      --transition-cubic: 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
      /* Transisi lebih elegan */
      --transition-smooth: 0.2s ease-in-out;
    }

    /* =========================
       DASAR & RESET (BASE & RESET)
    ========================= */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      font-size: 100%;
      /* 16px default */
    }

    body {
      font-family: var(--font-family-sans);
      font-size: var(--font-size-base);
      color: var(--color-text);
      background-color: var(--color-bg);
      line-height: var(--line-height-normal);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      display: flex;
      flex-direction: column;
    }

    main {
      flex-grow: 1;
      /* Memastikan footer tetap di bawah */
    }

    /* Kontainer utama untuk halaman SPA */
    .page-section {
      display: none;
      /* Semua section disembunyikan defaultnya */
      padding: var(--space-5) var(--space-3);
      animation: fadeIn var(--transition-cubic);
    }

    .page-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    a {
      color: var(--color-link);
      text-decoration: none;
      transition: color var(--transition-smooth);
    }

    a:hover,
    a:focus {
      color: var(--color-primary-dark);
    }

    a:focus-visible {
      outline: 2px solid var(--color-accent);
      outline-offset: 2px;
      border-radius: var(--radius-sm);
    }

    img,
    svg,
    video {
      display: block;
      max-width: 100%;
      height: auto;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: var(--font-family-serif);
      /* Judul dengan font serif */
      line-height: var(--line-height-tight);
      color: var(--color-text);
      /* Lebih gelap untuk judul */
      margin-bottom: var(--space-3);
    }

    h1 {
      font-size: var(--font-size-2xl);
      margin-bottom: var(--space-4);
    }

    h2 {
      font-size: var(--font-size-xl);
    }

    h3 {
      font-size: var(--font-size-lg);
    }

    h4 {
      font-size: var(--font-size-md);
    }

    p {
      margin-bottom: var(--space-3);
    }

    /* =========================
       KELAS UTILITAS (UTILITY CLASSES)
    ========================= */
    .container {
      width: 100%;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      padding-left: var(--space-3);
      padding-right: var(--space-3);
    }

    .text-center {
      text-align: center;
    }

    .text-primary {
      color: var(--color-primary);
    }

    .text-accent {
      color: var(--color-accent);
    }

    .mb-1 {
      margin-bottom: var(--space-1);
    }

    .mb-2 {
      margin-bottom: var(--space-2);
    }

    .mb-3 {
      margin-bottom: var(--space-3);
    }

    .mb-4 {
      margin-bottom: var(--space-4);
    }

    .mt-1 {
      margin-top: var(--space-1);
    }

    .mt-2 {
      margin-top: var(--space-2);
    }

    .mt-3 {
      margin-top: var(--space-3);
    }

    .mt-4 {
      margin-top: var(--space-4);
    }

    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* =========================
       HEADER & NAVIGASI (HEADER & NAVIGATION)
    ========================= */
    .site-header {
      background-color: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--transition-smooth);
    }

    .site-header.scrolled {
      box-shadow: var(--shadow-md);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 70px;
      /* Ketinggian header tetap */
    }

    .nav__brand {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-weight: 700;
      font-size: var(--font-size-md);
      color: var(--color-primary);
      font-family: var(--font-family-serif);
    }

    .nav__brand-icon {
      color: var(--color-primary);
      transition: transform var(--transition-cubic);
    }

    .nav__brand:hover .nav__brand-icon {
      transform: rotate(15deg) scale(1.1);
    }

    .nav__menu {
      display: flex;
      gap: var(--space-1);
      /* Sedikit lebih rapat untuk desktop */
      list-style: none;
    }

    .nav__link {
      font-weight: 500;
      padding: var(--space-2) var(--space-3);
      border-radius: var(--radius-md);
      transition: background-color var(--transition-smooth), color var(--transition-smooth);
      position: relative;
      overflow: hidden;
    }

    .nav__link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 2px;
      background-color: var(--color-accent);
      transition: width var(--transition-cubic);
    }

    .nav__link:hover,
    .nav__link:focus,
    .nav__link.active {
      color: var(--color-primary-dark);
      background-color: var(--color-primary-light);
    }

    .nav__link.active::after,
    .nav__link:hover::after {
      width: 70%;
    }

    .nav__link.cta {
      /* Call to Action button in nav */
      background-color: var(--color-accent);
      color: var(--color-text);
      font-weight: 600;
    }

    .nav__link.cta:hover,
    .nav__link.cta:focus {
      background-color: hsl(var(--color-accent-h), var(--color-accent-s), calc(var(--color-accent-l) - 10%));
      color: var(--color-surface);
    }


    .nav__toggle {
      display: none;
      /* Sembunyikan di desktop */
      background: none;
      border: none;
      cursor: pointer;
      padding: var(--space-2);
      z-index: 1100;
      /* Di atas menu mobile */
    }

    .nav__toggle svg {
      width: 28px;
      height: 28px;
      color: var(--color-primary);
      transition: transform var(--transition-cubic);
    }

    .nav__toggle.active svg {
      transform: rotate(90deg);
    }

    /* Navigasi Mobile */
    @media (max-width: 768px) {
      .nav__menu {
        position: fixed;
        top: 0;
        right: -100%;
        /* Mulai dari luar layar */
        width: min(75vw, 300px);
        height: 100vh;
        background-color: var(--color-surface);
        flex-direction: column;
        align-items: flex-start;
        padding: calc(var(--space-6) + 70px) var(--space-4) var(--space-4);
        /* Padding atas memperhitungkan header */
        box-shadow: var(--shadow-lg);
        transition: right var(--transition-cubic);
        overflow-y: auto;
      }

      .nav__menu.active {
        right: 0;
      }

      .nav__link {
        width: 100%;
        padding: var(--space-3) var(--space-2);
      }

      .nav__toggle {
        display: block;
      }
    }

    /* =========================
       BAGIAN HERO (HERO SECTION)
    ========================= */
    .hero {
      background: linear-gradient(135deg, hsla(var(--color-primary-h), var(--color-primary-s), var(--color-primary-l), 0.9), hsla(var(--color-accent-h), var(--color-accent-s), var(--color-accent-l), 0.8)),
        url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80') no-repeat center center/cover;
      color: var(--color-surface);
      padding: var(--space-7) var(--space-3);
      min-height: 70vh;
      /* Lebih tinggi untuk dampak visual */
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
      /* Untuk parallax effect jika ditambahkan */
    }

    .hero::before {
      /* Overlay tekstur halus */
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, hsla(0, 0%, 100%, 0.02) 10px, hsla(0, 0%, 100%, 0.02) 20px);
      opacity: 0.5;
    }

    .hero__content {
      position: relative;
      /* Di atas overlay */
      z-index: 1;
      max-width: 700px;
    }

    .hero__title {
      font-size: var(--font-size-3xl);
      font-weight: 700;
      color: var(--color-surface);
      line-height: 1.1;
      margin-bottom: var(--space-4);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .hero__subtitle {
      font-size: var(--font-size-md);
      font-weight: 400;
      opacity: 0.95;
      margin-bottom: var(--space-5);
      max-width: 550px;
    }

    .hero__search-form {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      /* Efek Glassmorphism */
      -webkit-backdrop-filter: blur(10px);
      padding: var(--space-4);
      border-radius: var(--radius-lg);
      display: flex;
      gap: var(--space-2);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .hero__search-input {
      flex-grow: 1;
      padding: var(--space-3);
      border: none;
      border-radius: var(--radius-md);
      font-size: var(--font-size-base);
      background-color: var(--color-surface-alt);
      box-shadow: var(--shadow-inset);
    }

    .hero__search-input::placeholder {
      color: var(--color-text-muted);
    }

    .hero__search-btn {
      padding: var(--space-3) var(--space-4);
    }

    @media (max-width: 768px) {
      .hero {
        min-height: 80vh;
        text-align: center;
      }

      .hero__content {
        margin-left: auto;
        margin-right: auto;
      }

      .hero__title {
        font-size: var(--font-size-2xl);
      }

      .hero__subtitle {
        font-size: var(--font-size-base);
      }

      .hero__search-form {
        flex-direction: column;
      }
    }

    /* =========================
       TOMBOL (BUTTONS)
    ========================= */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-family-sans);
      font-weight: 600;
      font-size: var(--font-size-base);
      padding: var(--space-3) var(--space-4);
      border-radius: var(--radius-md);
      border: 1px solid transparent;
      cursor: pointer;
      transition: all var(--transition-cubic);
      text-align: center;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
      /* Untuk efek ripple atau shine */
    }

    .btn:focus-visible {
      outline: 2px solid var(--color-accent);
      outline-offset: 2px;
    }

    .btn:active {
      transform: scale(0.98);
    }

    .btn[disabled] {
      opacity: 0.6;
      cursor: not-allowed;
      background-color: var(--color-text-muted);
      color: var(--color-surface);
    }

    .btn--primary {
      background-color: var(--color-primary);
      color: var(--color-surface);
      box-shadow: var(--shadow-sm);
    }

    .btn--primary:hover,
    .btn--primary:focus {
      background-color: var(--color-primary-dark);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
      color: var(--color-surface);
      outline: 0.2em solid var(--color-success);
    }

    .btn--secondary {
      background-color: var(--color-surface);
      color: var(--color-primary);
      border-color: var(--color-primary);
      box-shadow: var(--shadow-xs);
    }

    .btn--secondary:hover,
    .btn--secondary:focus {
      background-color: var(--color-primary-light);
      color: var(--color-primary-dark);
      border-color: var(--color-primary-dark);
      box-shadow: var(--shadow-sm);
      transform: translateY(-2px);
    }

    .btn--accent {
      background-color: var(--color-accent);
      color: var(--color-text);
      /* Kontras baik dengan kuning */
      box-shadow: var(--shadow-sm);
    }

    .btn--accent:hover,
    .btn--accent:focus {
      background-color: hsl(var(--color-accent-h), var(--color-accent-s), calc(var(--color-accent-l) - 10%));
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .btn--icon {
      /* Untuk tombol hanya ikon */
      padding: var(--space-2);
    }

    .btn svg {
      margin-right: var(--space-2);
      width: 1.2em;
      height: 1.2em;
    }

    .btn--icon svg {
      margin-right: 0;
    }

    /* =========================
       DAFTAR APARTEMEN (APARTMENT LISTINGS)
    ========================= */
    .apartment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: var(--space-4);
    }

    .apartment-card {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform var(--transition-cubic), box-shadow var(--transition-cubic);
      border: 1px solid var(--color-border);
    }

    .apartment-card:hover,
    .apartment-card:focus-within {
      transform: translateY(-5px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }

    .apartment-card__image-wrapper {
      position: relative;
      aspect-ratio: 16 / 10;
      /* Rasio gambar konsisten */
      overflow: hidden;
    }

    .apartment-card__image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .apartment-card:hover .apartment-card__image {
      transform: scale(1.1);
    }

    .apartment-card__badge {
      position: absolute;
      top: var(--space-3);
      left: var(--space-3);
      background-color: var(--color-accent);
      color: var(--color-text);
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-sm);
      font-size: var(--font-size-xs);
      font-weight: 600;
      text-transform: uppercase;
    }

    .apartment-card__content {
      padding: var(--space-4);
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .apartment-card__title {
      font-size: var(--font-size-md);
      /* Lebih kecil dari H3 global */
      font-family: var(--font-family-sans);
      /* Konsisten dengan body */
      font-weight: 600;
      color: var(--color-primary-dark);
      margin-bottom: var(--space-1);
    }

    .apartment-card__location {
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      margin-bottom: var(--space-2);
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }

    .apartment-card__location svg {
      width: 1em;
      height: 1em;
      color: var(--color-primary);
    }

    .apartment-card__features {
      display: flex;
      gap: var(--space-3);
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      margin-bottom: var(--space-3);
    }

    .apartment-card__feature-item {
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }

    .apartment-card__feature-item svg {
      width: 1.1em;
      height: 1.1em;
      color: var(--color-primary);
    }

    .apartment-card__price {
      font-size: var(--font-size-lg);
      font-weight: 700;
      color: var(--color-primary);
      margin-top: auto;
      /* Mendorong harga ke bawah jika card flex */
      margin-bottom: var(--space-3);
    }

    .apartment-card__price span {
      font-size: var(--font-size-sm);
      font-weight: 400;
      color: var(--color-text-muted);
    }

    .apartment-card__actions {
      margin-top: auto;
      /* Tombol tetap di bawah */
    }

    /* Skeleton Loader untuk kartu */
    .skeleton-card {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      overflow: hidden;
    }

    .skeleton-card__image {
      background-color: var(--color-surface-alt);
      aspect-ratio: 16 / 10;
      animation: pulse 1.5s infinite ease-in-out;
    }

    .skeleton-card__content {
      padding: var(--space-4);
    }

    .skeleton-text {
      background-color: var(--color-surface-alt);
      height: 1em;
      margin-bottom: var(--space-2);
      border-radius: var(--radius-sm);
      animation: pulse 1.5s infinite ease-in-out;
    }

    .skeleton-text--title {
      width: 60%;
      height: 1.5em;
      margin-bottom: var(--space-3);
    }

    .skeleton-text--line {
      width: 80%;
    }

    .skeleton-text--short {
      width: 40%;
    }

    @keyframes pulse {
      0% {
        background-color: hsl(210, 20%, 90%);
      }

      50% {
        background-color: hsl(210, 20%, 96%);
      }

      100% {
        background-color: hsl(210, 20%, 90%);
      }
    }

    /* Filter Bar */
    .filter-bar {
      display: flex;
      gap: var(--space-3);
      margin-bottom: var(--space-4);
      padding: var(--space-3);
      background-color: var(--color-surface);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xs);
      align-items: center;
      flex-wrap: wrap;
    }

    .filter-bar__group {
      display: flex;
      flex-direction: column;
    }

    .filter-bar__label {
      font-size: var(--font-size-xs);
      color: var(--color-text-muted);
      margin-bottom: var(--space-1);
    }

    .filter-bar__select,
    .filter-bar__input {
      padding: var(--space-2) var(--space-3);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: var(--font-size-sm);
      background-color: var(--color-surface-alt);
      min-width: 150px;
    }

    .filter-bar__select:focus,
    .filter-bar__input:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 2px var(--color-primary-light);
      outline: none;
    }

    /* =========================
       SOROTAN FITUR (FEATURE HIGHLIGHTS)
    ========================= */
    .feature-highlights {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-4);
      padding: var(--space-6) 0;
      /* Spasi atas bawah */
    }

    .feature-item {
      background-color: var(--color-surface);
      padding: var(--space-4);
      border-radius: var(--radius-lg);
      text-align: center;
      box-shadow: var(--shadow-sm);
      transition: transform var(--transition-cubic), box-shadow var(--transition-cubic);
      border: 1px solid var(--color-border);
    }

    .feature-item:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }

    .feature-item__icon {
      background-color: var(--color-primary-light);
      color: var(--color-primary);
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--space-3);
      transition: background-color var(--transition-cubic), color var(--transition-cubic);
    }

    .feature-item:hover .feature-item__icon {
      background-color: var(--color-primary);
      color: var(--color-surface);
    }

    .feature-item__icon svg {
      width: 28px;
      height: 28px;
    }

    .feature-item__title {
      font-size: var(--font-size-md);
      font-family: var(--font-family-sans);
      font-weight: 600;
      margin-bottom: var(--space-2);
    }

    .feature-item__description {
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
    }

    /* =========================
       BAGIAN FORMULIR (FORM SECTION)
    ========================= */
    .form-section {
      max-width: 600px;
      /* Lebih lebar untuk form */
      margin-left: auto;
      margin-right: auto;
      background-color: var(--color-surface);
      padding: var(--space-5);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-md);
    }

    .form__group {
      margin-bottom: var(--space-3);
    }

    .form__label {
      display: block;
      font-weight: 500;
      margin-bottom: var(--space-1);
      color: var(--color-text);
    }

    .form__input,
    .form__textarea,
    .form__select {
      width: 100%;
      padding: var(--space-2) var(--space-3);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: var(--font-size-base);
      background-color: var(--color-surface-alt);
      transition: border-color var(--transition-smooth), box-shadow var(--transition-smooth);
      box-shadow: var(--shadow-inset);
    }

    .form__input:focus,
    .form__textarea:focus,
    .form__select:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px hsla(var(--color-primary-h), var(--color-primary-s), var(--color-primary-l), 0.2);
      outline: none;
    }

    .form__textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form__error-message {
      display: block;
      color: var(--color-error);
      font-size: var(--font-size-sm);
      margin-top: var(--space-1);
      min-height: 1.2em;
      /* Agar layout tidak bergeser saat error muncul/hilang */
    }

    .form__success-message {
      display: block;
      color: var(--color-success);
      background-color: hsl(var(--color-success-h, 150), var(--color-success-s, 85%), 95%);
      border: 1px solid hsl(var(--color-success-h, 150), var(--color-success-s, 85%), 85%);
      padding: var(--space-3);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-3);
    }

    /* =========================
       FOOTER
    ========================= */
    .site-footer {
      background-color: var(--color-text);
      /* Footer lebih gelap */
      color: var(--color-bg);
      /* Teks terang di footer */
      padding: var(--space-6) 0 var(--space-3);
      border-top: 5px solid var(--color-primary);
    }

    .footer__content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-4);
      margin-bottom: var(--space-5);
    }

    .footer__section-title {
      font-size: var(--font-size-md);
      font-family: var(--font-family-serif);
      color: var(--color-surface);
      margin-bottom: var(--space-3);
      position: relative;
    }

    .footer__section-title::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 40px;
      height: 2px;
      background-color: var(--color-accent);
    }

    .footer__links {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer__links li {
      margin-bottom: var(--space-2);
    }

    .footer__link {
      color: var(--color-text-muted);
      /* Warna link di footer */
      transition: color var(--transition-smooth), padding-left var(--transition-smooth);
      font-size: var(--font-size-sm);
    }

    .footer__link:hover,
    .footer__link:focus {
      color: var(--color-accent);
      padding-left: var(--space-1);
      text-decoration: none;
    }

    .footer__social-links {
      display: flex;
      gap: var(--space-3);
    }

    .footer__social-link svg {
      width: 24px;
      height: 24px;
      color: var(--color-text-muted);
      transition: color var(--transition-smooth), transform var(--transition-cubic);
    }

    .footer__social-link:hover svg,
    .footer__social-link:focus svg {
      color: var(--color-accent);
      transform: scale(1.2);
    }

    .footer__copyright {
      border-top: 1px solid var(--color-text-muted);
      padding-top: var(--space-4);
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      text-align: center;
    }

    /* =========================
       AKSESIBILITAS & PREFERS REDUCED MOTION
    ========================= */
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }

      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>

<body>
  <a href="#main-content" class="visually-hidden focusable">Lewati ke konten utama</a>

  <header class="site-header" id="site-header">
    <div class="container">
      <nav class="nav" aria-label="Navigasi Utama">
        <a href="#home" class="nav__brand spa-link" aria-label="Green Valley Apartments - Beranda">
          <svg class="nav__brand-icon" width="36" height="36" aria-hidden="true" focusable="false" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span>Green Valley</span>
        </a>

        <button class="nav__toggle" id="nav-toggle" aria-label="Buka menu" aria-controls="nav-menu"
          aria-expanded="false">
          <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
            <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" fill="none"
              stroke-linecap="round" />
          </svg>
        </button>

        <ul class="nav__menu" id="nav-menu" role="menubar">
          <li role="none"><a href="#home" class="nav__link spa-link active" role="menuitem">Beranda</a></li>
          <li role="none"><a href="#listings" class="nav__link spa-link" role="menuitem">Daftar Apartemen</a></li>
          <li role="none"><a href="#about" class="nav__link spa-link" role="menuitem">Tentang Kami</a></li>
          <li role="none"><a href="#contact" class="nav__link spa-link" role="menuitem">Kontak</a></li>
          <li role="none"><a href="#contact" class="nav__link spa-link cta" role="menuitem">Sewa Sekarang</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main-content">
    <!-- Halaman Beranda -->
    <section id="page-home" class="page-section active">
      <div class="hero">
        <div class="container hero__content">
          <h1 class="hero__title">Temukan Apartemen Impian Anda di Green Valley</h1>
          <p class="hero__subtitle">Nikmati kenyamanan hidup modern dengan fasilitas lengkap dan lokasi strategis. Green
            Valley hadir untuk memenuhi kebutuhan hunian berkualitas Anda.</p>
          <form class="hero__search-form" id="hero-search-form">
            <input type="text" class="hero__search-input"
              placeholder="Cari berdasarkan lokasi, tipe, atau kata kunci..." aria-label="Pencarian apartemen">
            <button type="submit" class="btn btn--accent hero__search-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
              Cari
            </button>
          </form>
        </div>
      </div>

      <div class="container">
        <section id="featured-listings" aria-labelledby="featured-listings-title" class="mt-4">
          <h2 id="featured-listings-title" class="text-center mb-4">Unit Pilihan Untuk Anda</h2>
          <div class="apartment-grid" id="featured-apartment-grid">
            <!-- Kartu apartemen unggulan akan dimuat oleh JavaScript -->
          </div>
          <div class="text-center mt-4">
            <a href="#listings" class="btn btn--primary spa-link">Lihat Semua Unit</a>
          </div>
        </section>

        <section id="feature-highlights-home" aria-labelledby="feature-highlights-title" class="mt-4">
          <h2 id="feature-highlights-title" class="text-center mb-4">Mengapa Memilih Green Valley?</h2>
          <div class="feature-highlights">
            <article class="feature-item">
              <div class="feature-item__icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path
                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                  </path>
                </svg>
              </div>
              <h3 class="feature-item__title">Kenyamanan Maksimal</h3>
              <p class="feature-item__description">Desain interior modern dan fungsional untuk kenyamanan tinggal Anda
                sehari-hari.</p>
            </article>
            <article class="feature-item">
              <div class="feature-item__icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
              </div>
              <h3 class="feature-item__title">Fasilitas Lengkap</h3>
              <p class="feature-item__description">Kolam renang, gym, area bermain anak, dan keamanan 24 jam untuk gaya
                hidup premium.</p>
            </article>
            <article class="feature-item">
              <div class="feature-item__icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
              </div>
              <h3 class="feature-item__title">Lokasi Strategis</h3>
              <p class="feature-item__description">Akses mudah ke pusat bisnis, perbelanjaan, sekolah, dan transportasi
                publik.</p>
            </article>
          </div>
        </section>
      </div>
    </section>

    <!-- Halaman Daftar Apartemen -->
    <section id="page-listings" class="page-section">
      <div class="container">
        <h1 class="text-center">Daftar Apartemen Tersedia</h1>
        <p class="text-center mb-4">Temukan unit yang paling sesuai dengan kebutuhan dan gaya hidup Anda.</p>

        <div class="filter-bar">
          <div class="filter-bar__group">
            <label for="filter-location" class="filter-bar__label">Lokasi Tower:</label>
            <select id="filter-location" class="filter-bar__select">
              <option value="">Semua Tower</option>
              <option value="Tower A">Tower A</option>
              <option value="Tower B">Tower B</option>
              <option value="Tower C">Tower C</option>
            </select>
          </div>
          <div class="filter-bar__group">
            <label for="filter-type" class="filter-bar__label">Tipe Unit:</label>
            <select id="filter-type" class="filter-bar__select">
              <option value="">Semua Tipe</option>
              <option value="Studio">Studio</option>
              <option value="1BR">1 Kamar Tidur</option>
              <option value="2BR">2 Kamar Tidur</option>
              <option value="3BR">3 Kamar Tidur</option>
            </select>
          </div>
          <div class="filter-bar__group">
            <label for="filter-sort" class="filter-bar__label">Urutkan Berdasarkan:</label>
            <select id="filter-sort" class="filter-bar__select">
              <option value="price-asc">Harga Termurah</option>
              <option value="price-desc">Harga Termahal</option>
              <option value="newest">Terbaru</option>
            </select>
          </div>
          <button id="apply-filter-btn" class="btn btn--primary" style="align-self: flex-end;">Terapkan Filter</button>
        </div>

        <div class="apartment-grid" id="all-apartment-grid">
          <!-- Kartu apartemen akan dimuat oleh JavaScript -->
          <!-- Contoh Skeleton Loader -->
          <div class="skeleton-card">
            <div class="skeleton-card__image"></div>
            <div class="skeleton-card__content">
              <div class="skeleton-text skeleton-text--title"></div>
              <div class="skeleton-text skeleton-text--line"></div>
              <div class="skeleton-text skeleton-text--short"></div>
              <div class="skeleton-text skeleton-text--line mt-3"></div>
            </div>
          </div>
          <div class="skeleton-card">
            <div class="skeleton-card__image"></div>
            <div class="skeleton-card__content">
              <div class="skeleton-text skeleton-text--title"></div>
              <div class="skeleton-text skeleton-text--line"></div>
              <div class="skeleton-text skeleton-text--short"></div>
              <div class="skeleton-text skeleton-text--line mt-3"></div>
            </div>
          </div>
          <div class="skeleton-card">
            <div class="skeleton-card__image"></div>
            <div class="skeleton-card__content">
              <div class="skeleton-text skeleton-text--title"></div>
              <div class="skeleton-text skeleton-text--line"></div>
              <div class="skeleton-text skeleton-text--short"></div>
              <div class="skeleton-text skeleton-text--line mt-3"></div>
            </div>
          </div>
        </div>
        <p id="no-results-message" class="text-center mt-4" style="display: none;">Tidak ada apartemen yang cocok dengan
          kriteria Anda.</p>
      </div>
    </section>

    <!-- Halaman Tentang Kami -->
    <section id="page-about" class="page-section">
      <div class="container">
        <h1 class="text-center">Tentang Green Valley Apartments</h1>
        <div style="display: flex; gap: var(--space-4); align-items: flex-start; flex-wrap: wrap;">
          <div style="flex: 1; min-width: 300px;">
            <img
              src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
              alt="Interior Apartemen Green Valley yang Mewah"
              style="border-radius: var(--radius-lg); box-shadow: var(--shadow-md); margin-bottom: var(--space-4);"
              loading="eager">
          </div>
          <div style="flex: 1.5; min-width: 300px;">
            <p>Green Valley Apartments adalah sebuah kompleks hunian vertikal modern yang dirancang untuk memberikan
              kualitas hidup terbaik bagi para penghuninya. Terletak di lokasi yang strategis, kami menawarkan
              keseimbangan sempurna antara kemudahan akses perkotaan dan ketenangan lingkungan hijau.</p>
            <p>Sejak didirikan pada tahun 2015, misi kami adalah untuk menciptakan komunitas yang nyaman, aman, dan
              harmonis. Kami percaya bahwa rumah bukan hanya sekadar tempat tinggal, tetapi juga sebuah ruang untuk
              bertumbuh, berkreasi, dan membangun kenangan indah.</p>
            <h3 class="mt-4">Visi Kami</h3>
            <p>Menjadi pengembang properti hunian vertikal terdepan yang dikenal karena inovasi, kualitas, dan komitmen
              terhadap kepuasan pelanggan serta keberlanjutan lingkungan.</p>
            <h3 class="mt-4">Misi Kami</h3>
            <ul>
              <li>Menyediakan unit apartemen dengan desain terbaik dan material berkualitas tinggi.</li>
              <li>Mengelola fasilitas secara profesional untuk kenyamanan semua penghuni.</li>
              <li>Membangun komunitas yang solid dan suportif.</li>
              <li>Berkontribusi pada lingkungan yang lebih hijau dan berkelanjutan.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Halaman Kontak -->
    <section id="page-contact" class="page-section">
      <div class="container">
        <h1 class="text-center">Hubungi Kami</h1>
        <p class="text-center mb-4">Ada pertanyaan atau ingin menjadwalkan kunjungan? Jangan ragu untuk menghubungi tim
          kami.</p>

        <div class="form-section">
          <form id="contact-form" class="form" novalidate>
            <div id="form-success-message-container" class="form__success-message" style="display:none;">Pesan Anda
              telah berhasil terkirim! Kami akan segera menghubungi Anda.</div>
            <div class="form__group">
              <label for="contact-name" class="form__label">Nama Lengkap</label>
              <input type="text" id="contact-name" name="name" class="form__input" required aria-required="true"
                autocomplete="name" placeholder="Contoh: Budi Santoso">
              <span class="form__error-message" id="error-contact-name" aria-live="polite"></span>
            </div>
            <div class="form__group">
              <label for="contact-email" class="form__label">Alamat Email</label>
              <input type="email" id="contact-email" name="email" class="form__input" required aria-required="true"
                autocomplete="email" placeholder="Contoh: budi.santoso@example.com">
              <span class="form__error-message" id="error-contact-email" aria-live="polite"></span>
            </div>
            <div class="form__group">
              <label for="contact-phone" class="form__label">Nomor Telepon (Opsional)</label>
              <input type="tel" id="contact-phone" name="phone" class="form__input" autocomplete="tel"
                placeholder="Contoh: 081234567890">
              <span class="form__error-message" id="error-contact-phone" aria-live="polite"></span>
            </div>
            <div class="form__group">
              <label for="contact-subject" class="form__label">Subjek</label>
              <input type="text" id="contact-subject" name="subject" class="form__input" required aria-required="true"
                placeholder="Contoh: Pertanyaan tentang tipe Studio">
              <span class="form__error-message" id="error-contact-subject" aria-live="polite"></span>
            </div>
            <div class="form__group">
              <label for="contact-message" class="form__label">Pesan Anda</label>
              <textarea id="contact-message" name="message" class="form__textarea" rows="5" required
                aria-required="true" placeholder="Tuliskan pesan atau pertanyaan Anda di sini..."></textarea>
              <span class="form__error-message" id="error-contact-message" aria-live="polite"></span>
            </div>
            <button type="submit" class="btn btn--primary" id="contact-submit-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
              </svg>
              Kirim Pesan
            </button>
          </form>
        </div>
      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer__content">
        <section class="footer__section">
          <h4 class="footer__section-title">Green Valley</h4>
          <p style="font-size: var(--font-size-sm); color: var(--color-text-muted);">Menyediakan hunian vertikal modern
            dengan kenyamanan dan fasilitas terbaik untuk gaya hidup berkualitas Anda.</p>
        </section>
        <section class="footer__section">
          <h4 class="footer__section-title">Navigasi Cepat</h4>
          <ul class="footer__links">
            <li><a href="#home" class="footer__link spa-link">Beranda</a></li>
            <li><a href="#listings" class="footer__link spa-link">Daftar Apartemen</a></li>
            <li><a href="#about" class="footer__link spa-link">Tentang Kami</a></li>
            <li><a href="#contact" class="footer__link spa-link">Kontak</a></li>
            <li><a href="#" class="footer__link">Syarat & Ketentuan</a></li>
            <li><a href="#" class="footer__link">Kebijakan Privasi</a></li>
          </ul>
        </section>
        <section class="footer__section">
          <h4 class="footer__section-title">Hubungi Kami</h4>
          <ul class="footer__links">
            <li><span class="footer__link" style="cursor:default;">Jl. Apartemen Indah No. 123, Jakarta Selatan,
                12345</span></li>
            <li><a href="mailto:info@greenvalley.com" class="footer__link">info@greenvalley.com</a></li>
            <li><a href="tel:+62215550123" class="footer__link">(021) 555-0123</a></li>
          </ul>
          <h4 class="footer__section-title mt-4">Ikuti Kami</h4>
          <nav class="footer__social-links" aria-label="Tautan Media Sosial">
            <a href="#" class="footer__social-link" aria-label="Facebook Green Valley">
              <svg viewBox="0 0 24 24">
                <path fill="currentColor"
                  d="M12 2.04C6.5 2.04 2 6.53 2 12.06c0 5.52 4.5 10.02 10 10.02c5.52 0 10-4.5 10-10.02c0-5.53-4.48-10.02-10-10.02zm3.6 7.98h-2.17c-.22 0-.4.18-.4.4v1.4h2.57l-.34 2.58h-2.23v7.45h-2.63V14.4h-2.17v-2.58h2.17V10.4c0-1.3.6-2.02 2.02-2.02H15.6v2.6z" />
              </svg>
            </a>
            <a href="#" class="footer__social-link" aria-label="Instagram Green Valley">
              <svg viewBox="0 0 24 24">
                <path fill="currentColor"
                  d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8c1.99 0 3.6-1.61 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8A1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5a5 5 0 0 1-5 5a5 5 0 0 1-5-5a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3z" />
              </svg>
            </a>
            <a href="#" class="footer__social-link" aria-label="Twitter Green Valley">
              <svg viewBox="0 0 24 24">
                <path fill="currentColor"
                  d="M22.46 6c-.77.35-1.6.58-2.46.67c.88-.53 1.56-1.37 1.88-2.38c-.83.49-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29c0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15c0 1.49.75 2.81 1.91 3.56c-.71 0-1.37-.22-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21c-.36.1-.74.15-1.14.15c-.28 0-.55-.03-.81-.08c.55 1.7 2.14 2.93 4.03 2.97C6.82 18.81 4.98 19.52 3 19.52c-.35 0-.7-.02-1.05-.06C3.94 20.45 6.08 21 8.39 21c7.44 0 11.5-6.16 11.5-11.5c0-.17 0-.35-.01-.52c.78-.57 1.46-1.28 2-2.04z" />
              </svg>
            </a>
          </nav>
        </section>
      </div>
      <div class="footer__copyright">
        Â© <span id="current-year"></span> Green Valley Apartments. Hak Cipta Dilindungi Undang-Undang.
      </div>
    </div>
  </footer>

  <script>
    // ========== STATE APLIKASI SEDERHANA ==========
    const AppState = {
      currentPage: 'home', // Halaman default
      apartments: [], // Akan diisi data apartemen
      filteredApartments: [],
      filters: {
        location: '',
        type: '',
        sort: 'price-asc'
      },
      isLoading: false
    };

    // ========== DATA APARTEMEN (CONTOH) ==========
    const sampleApartments = [
      { id: 1, name: 'The Serene Studio', location: 'Tower A', type: 'Studio', price: 5000000, beds: 1, baths: 1, area: 30, image: 'https://images.unsplash.com/photo-1616594039964-ae9021a400a0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=880&q=80', featured: true, dateAdded: '2023-10-01' },
      { id: 2, name: 'Urban Comfort 1BR', location: 'Tower B', type: '1BR', price: 8500000, beds: 1, baths: 1, area: 55, image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', featured: true, dateAdded: '2023-11-15' },
      { id: 3, name: 'Family Haven 2BR', location: 'Tower A', type: '2BR', price: 12000000, beds: 2, baths: 2, area: 75, image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', featured: false, dateAdded: '2023-09-20' },
      { id: 4, name: 'Luxury Penthouse 3BR', location: 'Tower C', type: '3BR', price: 25000000, beds: 3, baths: 3, area: 150, image: 'https://images.unsplash.com/photo-1505691938895-1758d7feb511?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', featured: true, dateAdded: '2023-12-01' },
      { id: 5, name: 'Compact Living Studio', location: 'Tower B', type: 'Studio', price: 4800000, beds: 1, baths: 1, area: 28, image: 'https://images.unsplash.com/photo-1560185007-c5ca91ba2960?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', featured: false, dateAdded: '2023-10-25' },
      { id: 6, name: 'Spacious Sky View 2BR', location: 'Tower C', type: '2BR', price: 13500000, beds: 2, baths: 2, area: 85, image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', featured: true, dateAdded: '2023-11-05' },
      { id: 7, name: 'Elegant Downtown 1BR', location: 'Tower A', type: '1BR', price: 9000000, beds: 1, baths: 1, area: 60, image: 'https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', featured: false, dateAdded: '2023-08-10' },
      { id: 8, name: 'Cozy Corner Studio', location: 'Tower C', type: 'Studio', price: 5200000, beds: 1, baths: 1, area: 32, image: 'https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80', featured: false, dateAdded: '2023-12-10' }
    ];

    // ========== FUNGSI UTILITAS (UTILITY FUNCTIONS) ==========
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);

    function formatCurrency(amount) {
      return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
    }

    // ========== LOGIKA SPA (SINGLE PAGE APPLICATION LOGIC) ==========
    function navigateTo(pageId) {
      AppState.currentPage = pageId;
      $$('.page-section').forEach(section => section.classList.remove('active'));
      const targetPage = $(`#page-${pageId}`);
      if (targetPage) {
        targetPage.classList.add('active');
        document.title = `Green Valley - ${targetPage.querySelector('h1') ? targetPage.querySelector('h1').textContent : 'Apartments'}`;
        window.scrollTo(0, 0); // Scroll ke atas halaman
      }

      // Update link navigasi aktif
      $$('.nav__link.spa-link').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${pageId}`) {
          link.classList.add('active');
        }
      });
      // Tutup menu mobile jika terbuka
      if (navMenu.classList.contains('active')) {
        closeMobileMenu();
      }
    }

    function handleSpaLinkClick(event) {
      event.preventDefault();
      const pageId = event.currentTarget.getAttribute('href').substring(1);
      history.pushState({ page: pageId }, '', `#${pageId}`);
      navigateTo(pageId);
    }

    // ========== NAVIGASI MOBILE ==========
    const navToggle = $('#nav-toggle');
    const navMenu = $('#nav-menu');
    const navLinks = $$('.nav__menu .spa-link'); // Hanya link SPA di dalam menu

    function openMobileMenu() {
      navMenu.classList.add('active');
      navToggle.setAttribute('aria-expanded', 'true');
      navToggle.classList.add('active'); // Untuk styling tombol toggle
      document.body.style.overflow = 'hidden'; // Mencegah scroll body
    }

    function closeMobileMenu() {
      navMenu.classList.remove('active');
      navToggle.setAttribute('aria-expanded', 'false');
      navToggle.classList.remove('active');
      document.body.style.overflow = '';
    }

    if (navToggle && navMenu) {
      navToggle.addEventListener('click', () => {
        if (navMenu.classList.contains('active')) {
          closeMobileMenu();
        } else {
          openMobileMenu();
        }
      });

      // Tutup menu saat link di klik (untuk mobile)
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth <= 768) { // Hanya jika di mode mobile
            closeMobileMenu();
          }
        });
      });

      // Tutup menu saat klik di luar area menu (overlay)
      document.addEventListener('click', (event) => {
        if (navMenu.classList.contains('active') &&
          !navMenu.contains(event.target) &&
          !navToggle.contains(event.target) &&
          !navToggle.querySelector('svg').contains(event.target)) { // Cek juga svg di dalam button
          closeMobileMenu();
        }
      });

      // Tutup menu dengan tombol Escape
      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && navMenu.classList.contains('active')) {
          closeMobileMenu();
        }
      });
    }

    // ========== HEADER SCROLLED STATE ==========
    const siteHeader = $('#site-header');
    if (siteHeader) {
      window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
          siteHeader.classList.add('scrolled');
        } else {
          siteHeader.classList.remove('scrolled');
        }
      });
    }

    // ========== RENDER KARTU APARTEMEN ==========
    function createApartmentCard(apartment) {
      const card = document.createElement('article');
      card.className = 'apartment-card';
      card.innerHTML = `
        <div class="apartment-card__image-wrapper">
          <img src="${apartment.image}" alt="${apartment.name}" class="apartment-card__image" loading="eager">
          ${apartment.featured ? '<span class="apartment-card__badge">Unggulan</span>' : ''}
        </div>
        <div class="apartment-card__content">
          <h3 class="apartment-card__title">${apartment.name}</h3>
          <p class="apartment-card__location">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
            ${apartment.location}
          </p>
          <div class="apartment-card__features">
            <span class="apartment-card__feature-item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 22s5-4 5-8H2V2h5l4 6 4-6h5v12h-5s-4 4-8 4H2z"></path></svg>
                ${apartment.beds} K. Tidur
            </span>
            <span class="apartment-card__feature-item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 12h4M12 16h4M8 20h4M6 4H4v2M4 8H2m11-2V2M20 6V4M4 14H2m11 6v2M20 18v2m-2-16h2m-2 16h2M10 4a2 2 0 1 0-4 0v10a2 2 0 1 0 4 0V4zm0 0h4M6 14H4v6h2V14zm4 0h4v6h-4v-6zm8-10a2 2 0 1 0-4 0v10a2 2 0 1 0 4 0V4zm0 0h-4"></path></svg> <!-- Icon shower/bath -->
                ${apartment.baths} K. Mandi
            </span>
            <span class="apartment-card__feature-item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10V3H3v7"/><path d="M21 10l-9 6-9-6"/><path d="M3 10v11h18V10"/><path d="M12 21V10"/></svg> <!-- Icon area/luas -->
                ${apartment.area} mÂ²
            </span>
          </div>
          <p class="apartment-card__price">${formatCurrency(apartment.price)} <span>/ bulan</span></p>
          <div class="apartment-card__actions">
            <a href="#contact" data-apartment-id="${apartment.id}" class="btn btn--primary spa-link inquiry-btn">Tanya Unit Ini</a>
          </div>
        </div>
      `;
      // Tambahkan event listener untuk tombol "Tanya Unit Ini"
      const inquiryBtn = card.querySelector('.inquiry-btn');
      if (inquiryBtn) {
        inquiryBtn.addEventListener('click', (e) => {
          e.preventDefault(); // Hentikan navigasi default
          const apartmentId = e.currentTarget.dataset.apartmentId;
          const selectedApartment = AppState.apartments.find(apt => apt.id == apartmentId);

          // Navigasi ke halaman kontak
          history.pushState({ page: 'contact' }, '', '#contact');
          navigateTo('contact');

          // Pre-fill form kontak
          setTimeout(() => { // Beri sedikit waktu agar halaman kontak terender
            const contactSubject = $('#contact-subject');
            const contactMessage = $('#contact-message');
            if (contactSubject && selectedApartment) {
              contactSubject.value = `Pertanyaan tentang ${selectedApartment.name} (${selectedApartment.location})`;
            }
            if (contactMessage) {
              contactMessage.focus();
            }
          }, 100); // Delay kecil
        });
      }
      return card;
    }

    function renderApartments(apartments, containerId) {
      const gridContainer = $(`#${containerId}`);
      if (!gridContainer) return;

      gridContainer.innerHTML = ''; // Kosongkan kontainer
      AppState.isLoading = true;

      // Tampilkan skeleton loader jika di #all-apartment-grid
      if (containerId === 'all-apartment-grid') {
        showSkeletonLoaders(gridContainer, 3); // Tampilkan 3 skeleton
      }

      // Simulasi loading data
      setTimeout(() => {
        gridContainer.innerHTML = ''; // Hapus skeleton loader
        if (apartments.length === 0 && containerId === 'all-apartment-grid') {
          $('#no-results-message').style.display = 'block';
        } else {
          if (containerId === 'all-apartment-grid') {
            $('#no-results-message').style.display = 'none';
          }
          apartments.forEach(apt => {
            gridContainer.appendChild(createApartmentCard(apt));
          });
        }
        AppState.isLoading = false;
      }, containerId === 'all-apartment-grid' ? 1000 : 200); // Loading lebih lama untuk halaman list
    }

    function showSkeletonLoaders(container, count) {
      for (let i = 0; i < count; i++) {
        const skeleton = document.createElement('div');
        skeleton.className = 'skeleton-card';
        skeleton.innerHTML = `
                <div class="skeleton-card__image"></div>
                <div class="skeleton-card__content">
                    <div class="skeleton-text skeleton-text--title"></div>
                    <div class="skeleton-text skeleton-text--line"></div>
                    <div class="skeleton-text skeleton-text--short"></div>
                    <div class="skeleton-text skeleton-text--line mt-3"></div>
                </div>
            `;
        container.appendChild(skeleton);
      }
    }

    // ========== FILTER DAN SORTIR APARTEMEN ==========
    function applyFiltersAndSort() {
      let SorteredFilteredApartments = [...AppState.apartments];

      // Filter berdasarkan lokasi
      if (AppState.filters.location) {
        SorteredFilteredApartments = SorteredFilteredApartments.filter(apt => apt.location === AppState.filters.location);
      }
      // Filter berdasarkan tipe
      if (AppState.filters.type) {
        SorteredFilteredApartments = SorteredFilteredApartments.filter(apt => apt.type === AppState.filters.type);
      }

      // Sortir
      switch (AppState.filters.sort) {
        case 'price-asc':
          SorteredFilteredApartments.sort((a, b) => a.price - b.price);
          break;
        case 'price-desc':
          SorteredFilteredApartments.sort((a, b) => b.price - a.price);
          break;
        case 'newest':
          SorteredFilteredApartments.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
          break;
      }
      AppState.filteredApartments = SorteredFilteredApartments;
      renderApartments(AppState.filteredApartments, 'all-apartment-grid');
    }


    // ========== VALIDASI FORMULIR KONTAK ==========
    const contactForm = $('#contact-form');
    if (contactForm) {
      const requiredFields = ['contact-name', 'contact-email', 'contact-subject', 'contact-message'];
      const errorElements = {
        'contact-name': $('#error-contact-name'),
        'contact-email': $('#error-contact-email'),
        'contact-subject': $('#error-contact-subject'),
        'contact-message': $('#error-contact-message')
      };
      const successMessageContainer = $('#form-success-message-container');
      const submitButton = $('#contact-submit-btn');
      const originalButtonText = submitButton.innerHTML;

      function validateField(fieldId, value) {
        const fieldName = $(`label[for="${fieldId}"]`).textContent;
        if (!value.trim()) return `${fieldName} wajib diisi.`;
        if (fieldId === 'contact-email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) return 'Format email tidak valid.';
        if (fieldId === 'contact-phone' && value.trim() && !/^[0-9\s+-]+$/.test(value)) return 'Format nomor telepon tidak valid.';
        return '';
      }

      function displayError(fieldId, message) {
        if (errorElements[fieldId]) {
          errorElements[fieldId].textContent = message;
          $(`#${fieldId}`).setAttribute('aria-invalid', 'true');
        }
      }

      function clearError(fieldId) {
        if (errorElements[fieldId]) {
          errorElements[fieldId].textContent = '';
          $(`#${fieldId}`).removeAttribute('aria-invalid');
        }
      }

      requiredFields.forEach(fieldId => {
        const inputElement = $(`#${fieldId}`);
        if (inputElement) {
          inputElement.addEventListener('input', (e) => {
            const errorMessage = validateField(fieldId, e.target.value);
            if (errorMessage) {
              displayError(fieldId, errorMessage);
            } else {
              clearError(fieldId);
            }
          });
          // Validasi juga saat blur untuk field yang sudah pernah diisi
          inputElement.addEventListener('blur', (e) => {
            if (e.target.value.trim() !== '') { // Hanya validasi jika ada isinya
              const errorMessage = validateField(fieldId, e.target.value);
              if (errorMessage) {
                displayError(fieldId, errorMessage);
              } else {
                clearError(fieldId);
              }
            }
          });
        }
      });

      // Validasi untuk field opsional phone, jika diisi
      const phoneInput = $('#contact-phone');
      if (phoneInput) {
        phoneInput.addEventListener('input', (e) => {
          const errorMessage = validateField('contact-phone', e.target.value);
          if (errorMessage) {
            displayError('error-contact-phone', errorMessage); // ID error element perlu disesuaikan
          } else {
            clearError('error-contact-phone');
          }
        });
      }


      contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        let formIsValid = true;
        successMessageContainer.style.display = 'none'; // Sembunyikan pesan sukses jika ada

        requiredFields.forEach(fieldId => {
          const value = $(`#${fieldId}`).value;
          const errorMessage = validateField(fieldId, value);
          if (errorMessage) {
            displayError(fieldId, errorMessage);
            formIsValid = false;
          } else {
            clearError(fieldId);
          }
        });

        // Validasi field phone jika ada isinya
        const phoneValue = phoneInput ? phoneInput.value : '';
        if (phoneInput && phoneValue.trim()) {
          const phoneError = validateField('contact-phone', phoneValue);
          if (phoneError) {
            displayError('error-contact-phone', phoneError); // ID error element perlu disesuaikan
            formIsValid = false;
          } else {
            clearError('error-contact-phone');
          }
        }


        if (formIsValid) {
          submitButton.disabled = true;
          submitButton.innerHTML = `
            <svg class="animate-spin" style="animation: spin 1s linear infinite;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>
            Mengirim...
          `;

          // Simulasi pengiriman form
          setTimeout(() => {
            contactForm.reset();
            requiredFields.forEach(clearError);
            if (phoneInput) clearError('error-contact-phone');
            successMessageContainer.style.display = 'block';
            successMessageContainer.focus(); // Fokus ke pesan sukses untuk aksesibilitas
            submitButton.disabled = false;
            submitButton.innerHTML = originalButtonText;

            // Sembunyikan pesan sukses setelah beberapa detik
            setTimeout(() => {
              successMessageContainer.style.display = 'none';
            }, 5000);

          }, 1500);
        } else {
          // Fokus ke field pertama yang error
          const firstErrorField = requiredFields.find(id => errorElements[id] && errorElements[id].textContent !== '');
          if (firstErrorField) {
            $(`#${firstErrorField}`).focus();
          }
        }
      });
    }

    // ========== INISIALISASI APLIKASI ==========
    document.addEventListener('DOMContentLoaded', () => {
      // Atur tahun copyright
      $('#current-year').textContent = new Date().getFullYear();

      // Daftarkan event listener untuk semua link SPA
      $$('.spa-link').forEach(link => {
        link.addEventListener('click', handleSpaLinkClick);
      });

      // Tangani navigasi back/forward browser
      window.addEventListener('popstate', (event) => {
        if (event.state && event.state.page) {
          navigateTo(event.state.page);
        } else {
          // Jika state null (misalnya halaman pertama dimuat langsung dengan hash)
          const initialPageId = window.location.hash.substring(1) || 'home';
          navigateTo(initialPageId);
        }
      });

      // Muat data apartemen (simulasi)
      AppState.apartments = sampleApartments;
      AppState.filteredApartments = [...sampleApartments];

      // Render apartemen unggulan di beranda
      renderApartments(AppState.apartments.filter(apt => apt.featured).slice(0, 3), 'featured-apartment-grid');

      // Render semua apartemen di halaman listings (awal)
      // Ini akan ditunda sampai halaman listing diakses atau filter diterapkan.
      // Tapi kita bisa panggil applyFiltersAndSort agar data awal siap dan di-render saat halaman listing aktif.
      // applyFiltersAndSort(); // Dipanggil saat halaman listing aktif untuk pertama kali

      // Tangani filter
      const filterLocation = $('#filter-location');
      const filterType = $('#filter-type');
      const filterSort = $('#filter-sort');
      const applyFilterBtn = $('#apply-filter-btn');

      if (filterLocation) filterLocation.addEventListener('change', (e) => AppState.filters.location = e.target.value);
      if (filterType) filterType.addEventListener('change', (e) => AppState.filters.type = e.target.value);
      if (filterSort) filterSort.addEventListener('change', (e) => AppState.filters.sort = e.target.value);

      if (applyFilterBtn) {
        applyFilterBtn.addEventListener('click', () => {
          // Update state filter sebelum memanggil applyFiltersAndSort
          if (filterLocation) AppState.filters.location = filterLocation.value;
          if (filterType) AppState.filters.type = filterType.value;
          if (filterSort) AppState.filters.sort = filterSort.value;
          applyFiltersAndSort();
        });
      }

      // Navigasi awal berdasarkan hash URL atau default ke 'home'
      const initialPageId = window.location.hash.substring(1) || 'home';
      history.replaceState({ page: initialPageId }, '', `#${initialPageId}`); // Ganti state awal tanpa menambah history
      navigateTo(initialPageId);

      // Jika halaman awal adalah listings, langsung render
      if (initialPageId === 'listings') {
        applyFiltersAndSort();
      }

      // Hero search form (simulasi)
      const heroSearchForm = $('#hero-search-form');
      if (heroSearchForm) {
        heroSearchForm.addEventListener('submit', (e) => {
          e.preventDefault();
          const searchTerm = heroSearchForm.querySelector('.hero__search-input').value;
          // Navigasi ke halaman listing dengan parameter pencarian (jika diimplementasikan lebih lanjut)
          // Untuk sekarang, hanya navigasi ke halaman listing dan bisa terapkan filter jika ada
          alert(`Pencarian untuk "${searchTerm}" akan mengarahkan ke halaman daftar unit.`);
          history.pushState({ page: 'listings' }, '', '#listings');
          navigateTo('listings');
          // Jika Anda ingin menerapkan filter berdasarkan searchTerm, tambahkan logikanya di sini
          // dan panggil applyFiltersAndSort()
          if (AppState.currentPage === 'listings') { // Pastikan halaman listing aktif
            applyFiltersAndSort(); // Render ulang dengan filter default
          }
        });
      }
    });
  </script>
</body>

</html>