<!DOCTYPE html>
<html lang="id" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GREEN VALLEY | Manajemen Sewa Apartemen</title>
  <!-- Font Awesome (Ikon Gratis) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Google Fonts: Inter, Poppins -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap"
    rel="stylesheet">
  <!-- Favicon (Contoh, ganti dengan favicon Anda) -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè¢</text></svg>">

  <style>
    /* === VARIABEL CSS GLOBAL === */
    :root {
      --primary-color: #2a9d8f;
      /* Teal yang lebih modern */
      --secondary-color: #e9c46a;
      /* Kuning Mustard */
      --accent-color: #f4a261;
      /* Oranye Pasir */
      --danger-color: #e76f51;
      /* Merah Bata */
      --success-color: #2a9d8f;
      /* Sama dengan primary untuk konsistensi */
      --warning-color: #e9c46a;
      /* Sama dengan secondary */
      --info-color: #457b9d;
      /* Biru Baja */

      --bg-light: #f8f9fa;
      --bg-dark: #1a1a1a;
      /* Lebih gelap untuk kontras lebih baik */
      --text-light: #212529;
      --text-dark: #f0f0f0;
      /* Putih keabu-abuan */

      --surface-light: #ffffff;
      --surface-dark: #2c2c2c;
      /* Permukaan elemen di mode gelap */

      --border-light: #dee2e6;
      --border-dark: #444444;

      --border-radius-sm: 0.25rem;
      /* 4px */
      --border-radius-md: 0.5rem;
      /* 8px */
      --border-radius-lg: 1rem;
      /* 16px */

      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.15);

      --font-heading: 'Poppins', 'Arial', sans-serif;
      --font-body: 'Inter', 'Helvetica Neue', sans-serif;

      --transition-base: all 0.3s ease-in-out;

      --space-xs: 0.25rem;
      /* 4px */
      --space-sm: 0.5rem;
      /* 8px */
      --space-md: 1rem;
      /* 16px */
      --space-lg: 1.5rem;
      /* 24px */
      --space-xl: 2rem;
      /* 32px */
      --space-xxl: 3rem;
      /* 48px */

      /* Default ke Light Theme */
      --current-bg: var(--bg-light);
      --current-text: var(--text-light);
      --current-surface: var(--surface-light);
      --current-border: var(--border-light);
      --current-primary-hover: #248a7f;
    }

    [data-theme="dark"] {
      --current-bg: var(--bg-dark);
      --current-text: var(--text-dark);
      --current-surface: var(--surface-dark);
      --current-border: var(--border-dark);
      --current-primary-hover: #3dbdae;

      /* Warna spesifik untuk mode gelap jika diperlukan */
      --primary-color: #3dbdae;
      /* Teal lebih terang di mode gelap */
      --secondary-color: #f0d27e;
    }

    /* === RESET CSS & DASAR === */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
      /* Basis font untuk unit rem */
    }

    body {
      font-family: var(--font-body);
      background-color: var(--current-bg);
      color: var(--current-text);
      line-height: 1.6;
      transition: background-color var(--transition-base), color var(--transition-base);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: var(--font-heading);
      font-weight: 700;
      line-height: 1.2;
      color: var(--current-text);
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: var(--space-lg);
    }

    /* 40px */
    h2 {
      font-size: 2rem;
      margin-bottom: var(--space-md);
    }

    /* 32px */
    h3 {
      font-size: 1.75rem;
      margin-bottom: var(--space-sm);
    }

    /* 28px */
    h4 {
      font-size: 1.5rem;
      margin-bottom: var(--space-xs);
    }

    /* 24px */

    a {
      color: var(--primary-color);
      text-decoration: none;
      transition: color var(--transition-base);
    }

    a:hover,
    a:focus {
      color: var(--current-primary-hover);
      text-decoration: underline;
    }

    img,
    picture,
    video,
    canvas {
      /* Tidak ada SVG sesuai permintaan */
      max-width: 100%;
      height: auto;
      display: block;
    }

    /* === UTILITIES === */
    /* Layout & Grid System (Flexbox-based) */
    .container {
      width: 100%;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      padding-left: var(--space-md);
      padding-right: var(--space-md);
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      margin-left: calc(-1 * var(--space-sm));
      /* Gutter compensation */
      margin-right: calc(-1 * var(--space-sm));
    }

    .col {
      flex-grow: 1;
      flex-basis: 0;
      max-width: 100%;
      padding-left: var(--space-sm);
      /* Gutter */
      padding-right: var(--space-sm);
    }

    /* Contoh kolom responsif, bisa diperluas */
    .col-12 {
      flex: 0 0 100%;
      max-width: 100%;
      padding: 0 var(--space-sm);
    }

    @media (min-width: 768px) {
      .col-md-3 {
        flex: 0 0 25%;
        max-width: 25%;
        padding: 0 var(--space-sm);
      }

      .col-md-4 {
        flex: 0 0 33.3333%;
        max-width: 33.3333%;
        padding: 0 var(--space-sm);
      }

      .col-md-6 {
        flex: 0 0 50%;
        max-width: 50%;
        padding: 0 var(--space-sm);
      }

      .col-md-8 {
        flex: 0 0 66.6667%;
        max-width: 66.6667%;
        padding: 0 var(--space-sm);
      }
    }

    @media (min-width: 992px) {
      .col-lg-3 {
        flex: 0 0 25%;
        max-width: 25%;
        padding: 0 var(--space-sm);
      }

      .col-lg-4 {
        flex: 0 0 33.3333%;
        max-width: 33.3333%;
        padding: 0 var(--space-sm);
      }

      /* ... tambahkan ukuran lain jika perlu */
    }


    /* Spacing */
    .m-1 {
      margin: var(--space-xs);
    }

    .mt-1 {
      margin-top: var(--space-xs);
    }

    /* ... dan seterusnya untuk m, mt, mb, ml, mr, mx, my, p, pt, pb, pl, pr, px, py */
    .mb-1 {
      margin-bottom: var(--space-xs);
    }

    .mb-2 {
      margin-bottom: var(--space-sm);
    }

    .mb-3 {
      margin-bottom: var(--space-md);
    }

    .mb-4 {
      margin-bottom: var(--space-lg);
    }

    .mb-5 {
      margin-bottom: var(--space-xl);
    }

    .mt-1 {
      margin-top: var(--space-xs);
    }

    .mt-2 {
      margin-top: var(--space-sm);
    }

    .mt-3 {
      margin-top: var(--space-md);
    }

    .mt-4 {
      margin-top: var(--space-lg);
    }

    .mt-5 {
      margin-top: var(--space-xl);
    }

    .py-1 {
      padding-top: var(--space-xs);
      padding-bottom: var(--space-xs);
    }

    .py-2 {
      padding-top: var(--space-sm);
      padding-bottom: var(--space-sm);
    }

    .py-3 {
      padding-top: var(--space-md);
      padding-bottom: var(--space-md);
    }

    .py-4 {
      padding-top: var(--space-lg);
      padding-bottom: var(--space-lg);
    }

    .py-5 {
      padding-top: var(--space-xl);
      padding-bottom: var(--space-xl);
    }

    .px-1 {
      padding-left: var(--space-xs);
      padding-right: var(--space-xs);
    }

    .px-2 {
      padding-left: var(--space-sm);
      padding-right: var(--space-sm);
    }

    .px-3 {
      padding-left: var(--space-md);
      padding-right: var(--space-md);
    }

    .px-4 {
      padding-left: var(--space-lg);
      padding-right: var(--space-lg);
    }

    .px-5 {
      padding-left: var(--space-xl);
      padding-right: var(--space-xl);
    }


    /* Display */
    .d-none {
      display: none !important;
    }

    .d-block {
      display: block !important;
    }

    .d-flex {
      display: flex !important;
    }

    .d-inline-flex {
      display: inline-flex !important;
    }

    .justify-content-center {
      justify-content: center !important;
    }

    .justify-content-between {
      justify-content: space-between !important;
    }

    .align-items-center {
      align-items: center !important;
    }

    .align-items-stretch {
      align-items: stretch !important;
    }

    .text-center {
      text-align: center !important;
    }

    .text-right {
      text-align: right !important;
    }

    .text-left {
      text-align: left !important;
    }

    /* Typography */
    .fw-bold {
      font-weight: 700 !important;
    }

    .fw-semibold {
      font-weight: 600 !important;
    }

    .fw-normal {
      font-weight: 400 !important;
    }

    .fs-1 {
      font-size: 2.5rem !important;
    }

    /* 40px */
    .fs-2 {
      font-size: 2rem !important;
    }

    /* 32px */
    .fs-3 {
      font-size: 1.75rem !important;
    }

    /* 28px */
    .fs-4 {
      font-size: 1.5rem !important;
    }

    /* 24px */
    .fs-5 {
      font-size: 1.25rem !important;
    }

    /* 20px */
    .fs-6 {
      font-size: 1rem !important;
    }

    /* 16px */

    .text-primary {
      color: var(--primary-color) !important;
    }

    .text-secondary {
      color: var(--secondary-color) !important;
    }

    .text-accent {
      color: var(--accent-color) !important;
    }

    .text-muted {
      color: #6c757d !important;
    }

    /* Tetap sama, atau buat variabel khusus */
    [data-theme="dark"] .text-muted {
      color: #adb5bd !important;
    }


    /* === KOMPONEN === */
    /* Tombol (Button) */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-sm) var(--space-lg);
      /* 8px 24px */
      font-family: var(--font-body);
      font-weight: 600;
      font-size: 1rem;
      text-align: center;
      vertical-align: middle;
      cursor: pointer;
      user-select: none;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: var(--border-radius-md);
      transition: var(--transition-base);
      text-decoration: none !important;
      /* Menimpa default link */
    }

    .btn:hover,
    .btn:focus {
      box-shadow: var(--shadow-sm);
      transform: translateY(-2px);
      outline: none;
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: #fff;
      border-color: var(--primary-color);
    }

    .btn-primary:hover,
    .btn-primary:focus {
      background-color: var(--current-primary-hover);
      border-color: var(--current-primary-hover);
      color: #fff;
    }

    .btn-secondary {
      background-color: var(--secondary-color);
      color: var(--text-light);
      /* Teks gelap pada background terang */
      border-color: var(--secondary-color);
    }

    .btn-secondary:hover,
    .btn-secondary:focus {
      background-color: #d8b054;
      /* Sedikit lebih gelap */
      border-color: #d8b054;
      color: var(--text-light);
    }

    [data-theme="dark"] .btn-secondary {
      color: var(--text-dark);
    }


    .btn-outline-primary {
      color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .btn-outline-primary:hover,
    .btn-outline-primary:focus {
      background-color: var(--primary-color);
      color: #fff;
    }

    .btn-lg {
      padding: var(--space-md) var(--space-xl);
      /* 16px 32px */
      font-size: 1.125rem;
      /* 18px */
    }

    .btn-sm {
      padding: var(--space-xs) var(--space-md);
      /* 4px 16px */
      font-size: 0.875rem;
      /* 14px */
    }

    .btn i {
      /* Ikon di dalam tombol */
      margin-right: var(--space-sm);
    }

    .btn .icon-only i {
      /* Tombol hanya ikon */
      margin-right: 0;
    }

    /* Kartu (Card) */
    .card {
      background-color: var(--current-surface);
      border: 1px solid var(--current-border);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-md);
      overflow: hidden;
      transition: transform var(--transition-base), box-shadow var(--transition-base);
      height: 100%;
      /* Untuk align-items-stretch pada row */
      display: flex;
      flex-direction: column;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .card-header,
    .card-footer {
      padding: var(--space-md);
      background-color: var(--current-surface);
      /* Atau sedikit berbeda */
      border-bottom: 1px solid var(--current-border);
    }

    .card-footer {
      border-top: 1px solid var(--current-border);
      border-bottom: none;
      margin-top: auto;
      /* Mendorong footer ke bawah */
    }

    .card-body {
      padding: var(--space-lg);
      flex-grow: 1;
    }

    .card-title {
      font-family: var(--font-heading);
      font-size: 1.5rem;
      /* 24px */
      margin-bottom: var(--space-md);
      font-weight: 700;
    }

    .card-text {
      margin-bottom: var(--space-sm);
    }

    .card-text:last-child {
      margin-bottom: 0;
    }

    /* Badge (Lencana) */
    .badge {
      display: inline-block;
      padding: var(--space-xs) var(--space-sm);
      font-size: 0.8em;
      font-weight: 700;
      line-height: 1;
      text-align: center;
      white-space: nowrap;
      vertical-align: baseline;
      border-radius: var(--border-radius-sm);
      color: #fff;
    }

    .badge-primary {
      background-color: var(--primary-color);
    }

    .badge-secondary {
      background-color: var(--secondary-color);
      color: var(--text-light);
    }

    .badge-success {
      background-color: var(--success-color);
    }

    .badge-danger {
      background-color: var(--danger-color);
    }

    .badge-warning {
      background-color: var(--warning-color);
      color: var(--text-light);
    }

    .badge-info {
      background-color: var(--info-color);
    }

    /* List Group */
    .list-group {
      list-style: none;
      padding-left: 0;
      border-radius: var(--border-radius-md);
      overflow: hidden;
      /* untuk border-radius pada item */
    }

    .list-group-item {
      padding: var(--space-md);
      background-color: var(--current-surface);
      border-bottom: 1px solid var(--current-border);
      transition: background-color var(--transition-base);
    }

    .list-group-item:last-child {
      border-bottom: none;
    }

    .list-group-item:hover {
      background-color: var(--current-bg);
      /* Sedikit lebih gelap dari surface */
    }

    .list-group-item.active {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }


    /* === STRUKTUR UTAMA & NAVIGASI === */
    /* Navbar */
    .navbar {
      font-family: var(--font-heading);
      background-color: var(--current-surface);
      border-bottom: 1px solid var(--current-border);
      padding: var(--space-md) 0;
      position: sticky;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1030;
      box-shadow: var(--shadow-sm);
    }

    .navbar-container {
      /* Menggantikan .container-fluid untuk navbar */
      width: 100%;
      max-width: 1400px;
      /* Lebih lebar untuk navbar */
      margin-left: auto;
      margin-right: auto;
      padding-left: var(--space-md);
      padding-right: var(--space-md);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .navbar-brand {
      font-weight: 800;
      color: var(--primary-color) !important;
      /* Override warna link default */
      font-size: 1.75rem;
      /* 28px */
      letter-spacing: 0.5px;
      text-decoration: none !important;
      display: flex;
      align-items: center;
    }

    .navbar-brand i {
      margin-right: var(--space-sm);
      font-size: 1.5rem;
      /* Sesuaikan ukuran ikon brand */
    }

    .navbar-nav {
      display: flex;
      list-style: none;
      align-items: center;
    }

    .nav-item {
      margin-left: var(--space-xs);
      /* Jarak antar item sedikit */
    }

    .nav-link {
      color: var(--current-text);
      padding: var(--space-sm) var(--space-md);
      /* 8px 16px */
      font-weight: 600;
      border-radius: var(--border-radius-sm);
      transition: color var(--transition-base), background-color var(--transition-base);
      text-decoration: none !important;
    }

    .nav-link:hover,
    .nav-link:focus,
    .nav-link.active {
      color: var(--primary-color);
      background-color: rgba(var(--primary-color-rgb, 42, 157, 143), 0.1);
      /* Transparansi dari primary color */
    }

    :root {
      /* ... variabel lain ... */
      --primary-color-rgb: 42, 157, 143;
      /* RGB dari #2a9d8f */
    }

    [data-theme="dark"] {
      /* ... variabel lain ... */
      --primary-color-rgb: 61, 189, 174;
      /* RGB dari #3dbdae */
    }


    .navbar-toggler {
      display: none;
      /* Sembunyikan di desktop */
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 24px */
      color: var(--current-text);
      cursor: pointer;
      padding: var(--space-sm);
    }

    .navbar-collapse {
      display: flex;
      /* Default di desktop */
      align-items: center;
    }

    /* Main Content Area */
    #app-main-content {
      flex-grow: 1;
      /* Memastikan footer tetap di bawah */
      padding-top: var(--space-xl);
      /* 32px */
      padding-bottom: var(--space-xl);
      width: 100%;
    }

    .page-title {
      font-size: 2.25rem;
      /* 36px */
      color: var(--primary-color);
      margin-bottom: var(--space-lg);
      border-bottom: 2px solid var(--accent-color);
      padding-bottom: var(--space-sm);
    }

    /* Footer */
    .app-footer {
      background-color: var(--current-bg);
      /* Warna berbeda dari surface */
      color: var(--current-text);
      padding: var(--space-lg) 0;
      /* 24px */
      border-top: 1px solid var(--current-border);
      text-align: center;
      font-size: 0.9rem;
      /* 14.4px */
    }

    .app-footer .container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    @media (min-width: 768px) {
      .app-footer .container {
        flex-direction: row;
        justify-content: space-between;
      }

      .app-footer p {
        text-align: left;
      }

      .footer-links {
        text-align: right;
      }
    }

    .footer-links a {
      margin-left: var(--space-md);
      color: var(--current-text);
    }

    .footer-links a:hover {
      color: var(--primary-color);
    }

    /* === SECTION SPESIFIK (Contoh: Hero) === */
    .hero-section {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
      color: #fff;
      padding: var(--space-xxl) var(--space-md);
      /* 48px 16px */
      border-radius: var(--border-radius-lg);
      margin-bottom: var(--space-xl);
      text-align: center;
      box-shadow: var(--shadow-lg);
    }

    .hero-title {
      font-size: 2.5rem;
      /* 40px */
      font-weight: 800;
      margin-bottom: var(--space-md);
      color: #fff;
      /* Pastikan warna kontras */
    }

    @media (min-width: 768px) {
      .hero-title {
        font-size: 3.5rem;
      }

      /* 56px */
    }

    .hero-desc {
      font-size: 1.125rem;
      /* 18px */
      margin-bottom: var(--space-lg);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      opacity: 0.9;
    }

    .hero-section .btn-secondary {
      /* Tombol di hero */
      background-color: var(--secondary-color);
      color: var(--text-light);
      border-color: var(--secondary-color);
    }

    .hero-section .btn-secondary:hover {
      background-color: #d8b054;
      border-color: #d8b054;
    }


    /* Widget Statistik */
    .widget-card .card-body {
      padding: var(--space-md);
    }

    .widget-card .card-title {
      font-size: 1.1rem;
      /* 17.6px */
      font-weight: 600;
      margin-bottom: var(--space-sm);
    }

    .widget-card .widget-value {
      font-size: 2rem;
      /* 32px */
      font-weight: 700;
      color: var(--primary-color);
    }

    .widget-card .widget-icon {
      font-size: 2.5rem;
      /* 40px */
      opacity: 0.2;
      position: absolute;
      right: var(--space-md);
      top: 50%;
      transform: translateY(-50%);
    }

    .card-primary {
      background-color: var(--primary-color);
      color: #fff;
    }

    .card-primary .widget-value,
    .card-primary .card-title {
      color: #fff;
    }

    .card-primary .widget-icon {
      opacity: 0.3;
      color: rgba(255, 255, 255, 0.7);
    }

    .card-success {
      background-color: var(--success-color);
      color: #fff;
    }

    .card-success .widget-value,
    .card-success .card-title {
      color: #fff;
    }

    .card-success .widget-icon {
      opacity: 0.3;
      color: rgba(255, 255, 255, 0.7);
    }

    .card-warning {
      background-color: var(--warning-color);
      color: var(--text-light);
    }

    .card-warning .widget-value,
    .card-warning .card-title {
      color: var(--text-light);
    }

    .card-warning .widget-icon {
      opacity: 0.3;
      color: rgba(0, 0, 0, 0.5);
    }

    .card-info {
      background-color: var(--info-color);
      color: #fff;
    }

    .card-info .widget-value,
    .card-info .card-title {
      color: #fff;
    }

    .card-info .widget-icon {
      opacity: 0.3;
      color: rgba(255, 255, 255, 0.7);
    }


    /* Fitur Section */
    .features-section {
      padding-top: var(--space-xl);
      padding-bottom: var(--space-xl);
    }

    .feature-item {
      text-align: center;
      padding: var(--space-lg);
    }

    .feature-icon {
      font-size: 3rem;
      /* 48px */
      color: var(--primary-color);
      margin-bottom: var(--space-md);
      display: block;
      /* Agar margin bottom bekerja */
    }

    .feature-title {
      font-size: 1.5rem;
      /* 24px */
      margin-bottom: var(--space-sm);
    }

    .feature-desc {
      color: var(--current-text);
      opacity: 0.8;
    }

    /* Chart Canvas */
    #occupancyChartContainer {
      min-height: 300px;
      /* Pastikan ada ruang untuk chart */
      position: relative;
      /* Untuk positioning chart jika perlu */
    }

    canvas#occupancyChart {
      max-width: 100%;
      height: auto !important;
      /* Override Chart.js inline style jika perlu */
    }

    /* Theme Toggle Button */
    #theme-toggle {
      font-size: 1.2rem;
      padding: var(--space-sm) var(--space-md);
    }

    #theme-toggle i {
      margin-right: 0;
    }

    /* Tidak ada margin untuk ikon saja */


    /* === ANIMASI & EFEK TAMBAHAN === */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.6s ease-out forwards;
    }

    .fade-in-delay-1 {
      animation-delay: 0.1s;
    }

    .fade-in-delay-2 {
      animation-delay: 0.2s;
    }

    .fade-in-delay-3 {
      animation-delay: 0.3s;
    }

    .fade-in-delay-4 {
      animation-delay: 0.4s;
    }


    /* === RESPONSIVE UNTUK NAVIGASI === */
    @media (max-width: 991.98px) {
      .navbar-nav {
        margin-left: 0;
        /* Reset margin di mobile */
      }

      .navbar-collapse {
        display: none;
        /* Sembunyikan secara default di mobile */
        flex-direction: column;
        align-items: flex-start;
        position: absolute;
        top: 100%;
        /* Tepat di bawah navbar */
        left: 0;
        right: 0;
        background-color: var(--current-surface);
        padding: var(--space-md);
        box-shadow: var(--shadow-md);
        border-top: 1px solid var(--current-border);
      }

      .navbar-collapse.show {
        display: flex;
        /* Tampilkan saat .show ditambahkan oleh JS */
      }

      .nav-item {
        margin-left: 0;
        width: 100%;
      }

      .nav-link {
        display: block;
        width: 100%;
        padding: var(--space-md);
        /* Padding lebih besar di mobile */
      }

      .navbar-toggler {
        display: block;
        /* Tampilkan tombol burger di mobile */
      }

      #theme-toggle {
        margin-top: var(--space-md);
        /* Jarak tombol tema di mobile nav */
        width: 100%;
      }
    }

    @media (max-width: 767.98px) {
      .hero-title {
        font-size: 2.5rem;
      }

      /* 40px */
      .hero-desc {
        font-size: 1rem;
      }

      /* 16px */
      .page-title {
        font-size: 1.8rem;
      }

      h1 {
        font-size: 2rem;
      }

      h2 {
        font-size: 1.75rem;
      }

      /* Kolom di mobile agar full width */
      .row>[class*="col-md-"],
      .row>[class*="col-lg-"] {
        flex-basis: 100%;
        max-width: 100%;
        margin-bottom: var(--space-lg);
        /* Beri jarak antar card di mobile */
      }

      .row>[class*="col-"]:last-child {
        margin-bottom: 0;
      }
    }

    /* Aksesibilitas: Skip to content link */
    .skip-link {
      position: absolute;
      top: -100px;
      /* Sembunyikan di luar layar */
      left: 0;
      background: var(--primary-color);
      color: white;
      padding: var(--space-sm);
      z-index: 9999;
      transition: top 0.3s ease-in-out;
    }

    .skip-link:focus {
      top: 0;
      /* Tampilkan saat fokus */
    }
  </style>
</head>

<body>
  <a href="#app-main-content" class="skip-link">Lewati ke Konten Utama</a>

  <!-- Navbar Responsif -->
  <nav class="navbar" role="navigation" aria-label="Navigasi Utama">
    <div class="navbar-container">
      <a class="navbar-brand" href="#dashboard" aria-label="Green Valley - Ke Dasbor">
        <i class="fa-solid fa-building-columns" aria-hidden="true"></i> GREEN VALLEY
      </a>
      <button class="navbar-toggler" type="button" id="navbarToggler" aria-controls="mainNavbarCollapse"
        aria-expanded="false" aria-label="Toggle navigasi">
        <i class="fas fa-bars"></i>
      </button>
      <div class="navbar-collapse" id="mainNavbarCollapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a href="#dashboard" class="nav-link" data-route="dashboard">Dasbor</a></li>
          <li class="nav-item"><a href="#apartments" class="nav-link" data-route="apartments">Apartemen</a></li>
          <li class="nav-item"><a href="#tenants" class="nav-link" data-route="tenants">Penyewa</a></li>
          <li class="nav-item"><a href="#gallery" class="nav-link" data-route="gallery">Galeri</a></li>
          <li class="nav-item"><a href="#finance" class="nav-link" data-route="finance">Keuangan</a></li>
          <li class="nav-item"><a href="#maintenance" class="nav-link" data-route="maintenance">Pemeliharaan</a></li>
          <li class="nav-item"><a href="#bookings" class="nav-link" data-route="bookings">Pemesanan</a></li>
          <li class="nav-item"><a href="#docs" class="nav-link" data-route="docs">Dokumentasi</a></li>
        </ul>
        <button id="theme-toggle" class="btn btn-outline-primary btn-sm ms-lg-3 mt-2 mt-lg-0" aria-label="Ganti Tema">
          <i class="fa-solid fa-moon" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Konten Utama Aplikasi (SPA Target) -->
  <main id="app-main-content" class="container py-4" tabindex="-1">
    <!-- Konten akan dirender di sini oleh JavaScript -->
  </main>

  <!-- Footer Aplikasi -->
  <footer class="app-footer" role="contentinfo">
    <div class="container">
      <p>¬© <span id="currentYear"></span> Green Valley Apartments. Semua hak dilindungi undang-undang.</p>
      <div class="footer-links">
        <a href="#docs" data-route="docs">Dokumentasi</a>
        <a href="mailto:dukungan@greenvalley.com">Dukungan</a>
        <a href="#privacy" data-route="privacy">Kebijakan Privasi</a>
      </div>
    </div>
  </footer>

  <!-- Chart.js (tetap digunakan karena diminta visualisasi data, ini library spesifik, bukan framework UI) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script>
    // IIFE untuk menjaga scope
    (function () {
      "use strict";

      // === STATE APLIKASI SEDERHANA ===
      const appState = {
        currentTheme: localStorage.getItem('theme') || 'light',
        currentPage: '',
        chartInstance: null,
      };

      // === ELEMENT DOM UTAMA ===
      const DOMElements = {
        html: document.documentElement,
        body: document.body,
        mainContent: document.getElementById('app-main-content'),
        navbarToggler: document.getElementById('navbarToggler'),
        navbarCollapse: document.getElementById('mainNavbarCollapse'),
        navLinks: document.querySelectorAll('.nav-link'),
        themeToggleButton: document.getElementById('theme-toggle'),
        themeToggleIcon: document.querySelector('#theme-toggle i'),
        currentYearSpan: document.getElementById('currentYear'),
      };

      // === KONFIGURASI & DATA ===
      const config = {
        defaultPage: 'dashboard',
        appName: 'Green Valley Apartments'
      };

      // Contoh data (bisa dari API di aplikasi nyata)
      const appData = {
        dashboardStats: {
          totalApartments: 58,
          occupiedUnits: 42,
          vacantUnits: 16,
          monthlyRevenue: 235000000 // Dalam Rupiah
        },
        recentActivities: [
          { time: '2024-07-28 10:15', desc: 'Penyewa baru, Bapak Andi, check-in ke unit C-201.' },
          { time: '2024-07-27 17:30', desc: 'Pembayaran sewa diterima dari Ibu Sinta (A-105).' },
          { time: '2024-07-27 09:00', desc: 'Jadwal pemeliharaan AC untuk blok B selesai.' },
          { time: '2024-07-26 14:00', desc: 'Unit D-303 berhasil dipesan oleh calon penyewa.' }
        ],
        occupancyData: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul'],
          datasets: [
            {
              label: 'Unit Terisi',
              data: [30, 35, 40, 38, 42, 41, 42],
              backgroundColor: 'rgba(42, 157, 143, 0.6)', // --primary-color with alpha
              borderColor: 'rgba(42, 157, 143, 1)',
              borderWidth: 2,
              tension: 0.1, // Untuk line chart
              fill: true // Untuk area chart
            },
            {
              label: 'Unit Kosong',
              data: [28, 23, 18, 20, 16, 17, 16],
              backgroundColor: 'rgba(233, 196, 106, 0.6)', // --secondary-color with alpha
              borderColor: 'rgba(233, 196, 106, 1)',
              borderWidth: 2,
              tension: 0.1,
              fill: true
            }
          ]
        }
      };

      // === UTILITIES ===
      const Utils = {
        // Fungsi untuk format mata uang Rupiah
        formatCurrency: (value) => {
          return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(value);
        },
        // Fungsi untuk membersihkan string HTML (dasar)
        sanitizeHTML: (str) => {
          const temp = document.createElement('div');
          temp.textContent = str;
          return temp.innerHTML;
        },
        // Fungsi untuk animasi fade-in sederhana pada elemen
        fadeInElement: (element, delay = 0) => {
          if (!element) return;
          element.style.opacity = '0';
          element.style.transform = 'translateY(20px)';
          element.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
          if (delay > 0) {
            element.style.transitionDelay = `${delay}s`;
          }
          // Trigger reflow untuk memastikan transisi diterapkan
          // eslint-disable-next-line no-unused-expressions
          element.offsetHeight;

          requestAnimationFrame(() => {
            element.style.opacity = '1';
            element.style.transform = 'translateY(0)';
          });
        },
        // Fungsi untuk animasi pada elemen saat scroll masuk viewport
        animateOnScroll: () => {
          const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add('visible'); // Tambah class 'visible'
                // CSS bisa: .animated-item { opacity:0; transform: translateY(20px); transition...}
                // .animated-item.visible { opacity:1; transform: translateY(0px); }
                Utils.fadeInElement(entry.target); // Atau gunakan fadeIn langsung
                observer.unobserve(entry.target); // Hentikan observasi setelah animasi
              }
            });
          }, { threshold: 0.1 }); // Trigger saat 10% elemen terlihat

          document.querySelectorAll('.animate-on-scroll').forEach(el => {
            observer.observe(el);
          });
        }
      };

      // === TEMPLATE HALAMAN (HTML SEBAGAI STRING) ===
      // Ini adalah cara sederhana untuk SPA vanilla. Di aplikasi besar, pertimbangkan template engine atau cara lain.
      const PageTemplates = {
        dashboard: () => `
          <header class="hero-section text-center mb-5 animate-on-scroll" role="banner">
            <h1 class="hero-title display-4 mb-3">Selamat Datang di <span class="text-secondary">${config.appName}</span></h1>
            <p class="hero-desc">Solusi lengkap untuk manajemen sewa apartemen Anda. Efisien, modern, dan mudah digunakan.</p>
            <a href="#apartments" data-route="apartments" class="btn btn-secondary btn-lg cta-main" role="button">Lihat Apartemen <i class="fas fa-arrow-right ms-2"></i></a>
          </header>

          <section class="row mb-4" aria-label="Widget Dasbor">
            <div class="col-md-6 col-lg-3 mb-4 animate-on-scroll">
              <div class="card widget-card card-primary text-white">
                <div class="card-body position-relative">
                  <i class="fas fa-building widget-icon"></i>
                  <h5 class="card-title">Total Apartemen</h5>
                  <p class="widget-value mb-0" id="total-apartments">${appData.dashboardStats.totalApartments}</p>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-3 mb-4 animate-on-scroll" style="animation-delay: 0.1s;">
              <div class="card widget-card card-success text-white">
                <div class="card-body position-relative">
                  <i class="fas fa-house-user widget-icon"></i>
                  <h5 class="card-title">Unit Terisi</h5>
                  <p class="widget-value mb-0" id="occupied-units">${appData.dashboardStats.occupiedUnits}</p>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-3 mb-4 animate-on-scroll" style="animation-delay: 0.2s;">
              <div class="card widget-card card-warning text-dark">
                <div class="card-body position-relative">
                  <i class="fas fa-door-open widget-icon"></i>
                  <h5 class="card-title">Unit Kosong</h5>
                  <p class="widget-value mb-0" id="vacant-units">${appData.dashboardStats.vacantUnits}</p>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-3 mb-4 animate-on-scroll" style="animation-delay: 0.3s;">
              <div class="card widget-card card-info text-white">
                <div class="card-body position-relative">
                  <i class="fas fa-wallet widget-icon"></i>
                  <h5 class="card-title">Pendapatan Bulanan</h5>
                  <p class="widget-value mb-0" id="monthly-revenue">${Utils.formatCurrency(appData.dashboardStats.monthlyRevenue)}</p>
                </div>
              </div>
            </div>
          </section>

          <section class="row align-items-stretch mb-5" aria-label="Grafik dan Aktivitas Terbaru">
            <div class="col-lg-8 mb-4 mb-lg-0 animate-on-scroll" style="animation-delay: 0.4s;">
              <div class="card h-100">
                <div class="card-header">
                  <h3 class="card-title mb-0">Ikhtisar Hunian (6 Bulan Terakhir)</h3>
                </div>
                <div class="card-body" id="occupancyChartContainer">
                  <canvas id="occupancyChart" aria-label="Grafik Tingkat Hunian Apartemen" role="img"></canvas>
                </div>
              </div>
            </div>
            <div class="col-lg-4 animate-on-scroll" style="animation-delay: 0.5s;">
              <div class="card h-100">
                <div class="card-header">
                  <h3 class="card-title mb-0">Aktivitas Terbaru</h3>
                </div>
                <div class="card-body">
                  <ul class="list-group list-group-flush" id="recent-activities" aria-live="polite">
                    ${appData.recentActivities.map(activity => `
                      <li class="list-group-item">
                        <small class="text-muted d-block">${Utils.sanitizeHTML(activity.time)}</small>
                        ${Utils.sanitizeHTML(activity.desc)}
                      </li>
                    `).join('')}
                  </ul>
                </div>
                <div class="card-footer text-center">
                    <a href="#activitylog" data-route="activitylog" class="btn btn-sm btn-outline-primary">Lihat Semua Aktivitas</a>
                </div>
              </div>
            </div>
          </section>

          <section class="features-section py-5 animate-on-scroll" style="animation-delay: 0.6s;" aria-label="Fitur Utama Platform">
            <h2 class="text-center page-title mb-5">Fitur Unggulan Kami</h2>
            <div class="row text-center">
              <div class="col-md-4 mb-4 feature-item">
                <i class="fa-solid fa-users-gear feature-icon"></i>
                <h4 class="feature-title">Manajemen Penyewa Intuitif</h4>
                <p class="feature-desc">Lacak data penyewa, kontrak, dan riwayat pembayaran dengan mudah dan aman.</p>
              </div>
              <div class="col-md-4 mb-4 feature-item">
                <i class="fa-solid fa-chart-line feature-icon"></i>
                <h4 class="feature-title">Dasbor Keuangan Komprehensif</h4>
                <p class="feature-desc">Pantau pendapatan, pengeluaran, dan hasilkan laporan keuangan secara otomatis.</p>
              </div>
              <div class="col-md-4 mb-4 feature-item">
                <i class="fa-solid fa-building-shield feature-icon"></i>
                <h4 class="feature-title">Manajemen Properti Terpusat</h4>
                <p class="feature-desc">Kelola unit apartemen, status ketersediaan, dan jadwal pemeliharaan dalam satu platform.</p>
              </div>
            </div>
          </section>
        `,
        apartments: () => `
          <h1 class="page-title animate-on-scroll">Daftar Apartemen</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Halaman manajemen apartemen akan menampilkan daftar unit, detail, status, dan opsi untuk menambah atau mengedit informasi apartemen.</p>
              <button class="btn btn-primary"><i class="fas fa-plus"></i> Tambah Apartemen Baru</button>
            </div>
          </div>
          <!-- Tambahkan filter, tabel daftar apartemen, dll. di sini -->
        `,
        tenants: () => `
          <h1 class="page-title animate-on-scroll">Manajemen Penyewa</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Halaman ini akan berisi daftar penyewa, detail kontak, riwayat sewa, dan status pembayaran. Akan ada fitur pencarian dan filter.</p>
              <button class="btn btn-primary"><i class="fas fa-user-plus"></i> Tambah Penyewa Baru</button>
            </div>
          </div>
        `,
        gallery: () => `
          <h1 class="page-title animate-on-scroll">Galeri Foto Apartemen</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Galeri foto unit-unit apartemen, fasilitas umum, dan lingkungan sekitar. Akan menggunakan layout grid yang menarik.</p>
              <!-- Contoh item galeri -->
              <div class="row">
                ${[1, 2, 3, 4, 5, 6].map(i => `
                  <div class="col-md-4 mb-4">
                    <div class="card">
                      <img src="https://picsum.photos/seed/${i}/400/300" alt="Contoh Gambar Apartemen ${i}" class="card-img-top">
                      <div class="card-body">
                        <h5 class="card-title">Unit Tipe ${String.fromCharCode(64 + i)}</h5>
                        <p class="card-text">Deskripsi singkat tentang unit ini.</p>
                      </div>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        `,
        finance: () => `
          <h1 class="page-title animate-on-scroll">Laporan Keuangan</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Dasbor keuangan dengan ringkasan pendapatan, pengeluaran, piutang, dan laporan laba rugi. Mungkin ada grafik juga di sini.</p>
            </div>
          </div>
        `,
        maintenance: () => `
          <h1 class="page-title animate-on-scroll">Jadwal Pemeliharaan</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Sistem untuk melacak permintaan pemeliharaan, menugaskan teknisi, dan memantau status perbaikan.</p>
            </div>
          </div>
        `,
        bookings: () => `
          <h1 class="page-title animate-on-scroll">Manajemen Pemesanan</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Halaman untuk mengelola permintaan pemesanan unit, kalender ketersediaan, dan konfirmasi booking.</p>
            </div>
          </div>
        `,
        docs: () => `
          <h1 class="page-title animate-on-scroll">Dokumentasi Pengguna</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <p class="card-text">Panduan penggunaan aplikasi, FAQ, dan informasi teknis lainnya.</p>
            </div>
          </div>
        `,
        privacy: () => `
          <h1 class="page-title animate-on-scroll">Kebijakan Privasi</h1>
          <div class="card animate-on-scroll">
            <div class="card-body">
              <h4 class="card-title">Pengumpulan Informasi</h4>
              <p>Kami mengumpulkan informasi yang Anda berikan secara langsung kepada kami saat Anda mendaftar, menggunakan layanan kami, atau berkomunikasi dengan kami...</p>
              <h4 class="card-title mt-3">Penggunaan Informasi</h4>
              <p>Informasi yang kami kumpulkan digunakan untuk menyediakan, memelihara, dan meningkatkan layanan kami...</p>
              <h4 class="card-title mt-3">Keamanan</h4>
              <p>Kami mengambil langkah-langkah yang wajar untuk melindungi informasi Anda dari kehilangan, pencurian, penyalahgunaan, serta akses, pengungkapan, perubahan, dan perusakan yang tidak sah...</p>
              </div>
          </div>
        `,
        notFound: () => `
          <div class="text-center py-5 animate-on-scroll">
            <h1 class="display-1 fw-bold text-danger">404</h1>
            <p class="fs-3"> <span class="text-danger">Opps!</span> Halaman tidak ditemukan.</p>
            <p class="lead">
              Halaman yang Anda cari sepertinya tidak ada.
            </p>
            <a href="#dashboard" data-route="dashboard" class="btn btn-primary">Kembali ke Dasbor</a>
          </div>
        `
      };

      // === FUNGSI INTI SPA ===
      // Render Halaman
      function renderPage(pageName) {
        if (!DOMElements.mainContent) return;

        // Hancurkan instance chart lama jika ada dan jika halaman bukan dashboard
        if (appState.chartInstance && pageName !== 'dashboard') {
          appState.chartInstance.destroy();
          appState.chartInstance = null;
        }

        const pageFunction = PageTemplates[pageName] || PageTemplates.notFound;
        DOMElements.mainContent.innerHTML = pageFunction();
        appState.currentPage = pageName;

        // Re-initialize chart jika halaman adalah dashboard
        if (pageName === 'dashboard') {
          initializeChart();
        }

        updateActiveNavLink(pageName);
        DOMElements.mainContent.focus(); // Untuk aksesibilitas, fokus ke konten baru

        // Inisialisasi ulang animasi on-scroll untuk elemen baru
        Utils.animateOnScroll();

        // Update judul dokumen
        const pageTitleText = pageName.charAt(0).toUpperCase() + pageName.slice(1);
        document.title = `${pageTitleText} | ${config.appName}`;
      }

      // Update Link Navigasi Aktif
      function updateActiveNavLink(currentPage) {
        DOMElements.navLinks.forEach(link => {
          link.classList.remove('active');
          link.removeAttribute('aria-current');
          if (link.dataset.route === currentPage) {
            link.classList.add('active');
            link.setAttribute('aria-current', 'page');
          }
        });
      }

      // Router Sederhana
      function router() {
        const hash = window.location.hash.substring(1) || config.defaultPage;
        // Jika hash mengandung parameter (contoh: #products/123), ambil bagian utama saja
        const pageName = hash.split('/')[0];
        renderPage(pageName);
      }

      // Inisialisasi Chart
      function initializeChart() {
        const chartCanvas = document.getElementById('occupancyChart');
        if (!chartCanvas) return; // Pastikan canvas ada

        if (appState.chartInstance) { // Hancurkan chart lama jika ada
          appState.chartInstance.destroy();
        }

        const ctx = chartCanvas.getContext('2d');
        appState.chartInstance = new Chart(ctx, {
          type: 'line', // Ganti ke 'line' atau 'bar' sesuai kebutuhan
          data: appData.occupancyData,
          options: {
            responsive: true,
            maintainAspectRatio: false, // Penting agar chart mengisi container
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(0,0,0,0.05)' // Warna grid lebih halus
                },
                ticks: {
                  color: appState.currentTheme === 'dark' ? 'var(--text-dark)' : 'var(--text-light)'
                }
              },
              x: {
                grid: {
                  display: false // Sembunyikan grid X
                },
                ticks: {
                  color: appState.currentTheme === 'dark' ? 'var(--text-dark)' : 'var(--text-light)'
                }
              }
            },
            plugins: {
              legend: {
                position: 'top',
                labels: {
                  color: appState.currentTheme === 'dark' ? 'var(--text-dark)' : 'var(--text-light)'
                }
              },
              tooltip: {
                backgroundColor: appState.currentTheme === 'dark' ? 'var(--surface-dark)' : 'var(--surface-light)',
                titleColor: appState.currentTheme === 'dark' ? 'var(--text-dark)' : 'var(--text-light)',
                bodyColor: appState.currentTheme === 'dark' ? 'var(--text-dark)' : 'var(--text-light)',
                borderColor: 'var(--primary-color)',
                borderWidth: 1
              }
            }
          }
        });
      }

      // === PENGELOLAAN TEMA ===
      function applyTheme(theme) {
        DOMElements.html.setAttribute('data-theme', theme);
        appState.currentTheme = theme;
        localStorage.setItem('theme', theme);
        if (DOMElements.themeToggleIcon) {
          DOMElements.themeToggleIcon.classList.toggle('fa-sun', theme === 'dark');
          DOMElements.themeToggleIcon.classList.toggle('fa-moon', theme === 'light');
        }
        // Jika chart sudah ada, update warna chart
        if (appState.chartInstance) {
          // Cara sederhana: re-render halaman dashboard untuk update chart
          // Cara lebih baik: update options chart secara langsung dan panggil chartInstance.update()
          if (appState.currentPage === 'dashboard') {
            initializeChart(); // Ini akan membuat ulang chart dengan opsi baru
          }
        }
      }

      function toggleTheme() {
        const newTheme = appState.currentTheme === 'light' ? 'dark' : 'light';
        applyTheme(newTheme);
      }

      // === EVENT LISTENERS ===
      // Navigasi Hash
      window.addEventListener('hashchange', router);
      window.addEventListener('load', router); // Untuk load awal

      // Toggle Navbar Mobile
      if (DOMElements.navbarToggler) {
        DOMElements.navbarToggler.addEventListener('click', () => {
          const isExpanded = DOMElements.navbarToggler.getAttribute('aria-expanded') === 'true' || false;
          DOMElements.navbarToggler.setAttribute('aria-expanded', !isExpanded);
          DOMElements.navbarCollapse.classList.toggle('show');
        });
      }

      // Klik Link Navigasi (untuk menutup navbar mobile & routing)
      DOMElements.navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          if (link.href.includes('#')) { // Hanya untuk link internal SPA
            e.preventDefault();
            const route = link.dataset.route;
            if (route) {
              window.location.hash = route;
            }
          }
          // Tutup navbar mobile jika terbuka
          if (DOMElements.navbarCollapse.classList.contains('show')) {
            DOMElements.navbarToggler.setAttribute('aria-expanded', 'false');
            DOMElements.navbarCollapse.classList.remove('show');
          }
        });
      });

      // Klik link di footer yang bersifat internal SPA
      document.querySelectorAll('.app-footer a[data-route]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const route = link.dataset.route;
          if (route) {
            window.location.hash = route;
          }
        });
      });


      // Tombol Ganti Tema
      if (DOMElements.themeToggleButton) {
        DOMElements.themeToggleButton.addEventListener('click', toggleTheme);
      }

      // Global Error Handler
      window.onerror = function (msg, url, lineNo, columnNo, error) {
        console.error('KESALAHAN GLOBAL:', {
          pesan: msg,
          sumber: url,
          baris: lineNo,
          kolom: columnNo,
          objekError: error
        });
        // Bisa ditambahkan notifikasi ke user di sini
        // DOMElements.mainContent.innerHTML = `<div class="alert alert-danger">Terjadi kesalahan. Silakan coba lagi nanti.</div>`;
        return false; // Biarkan browser menangani error default juga
      };

      // === INISIALISASI APLIKASI ===
      function init() {
        // Set tahun sekarang di footer
        if (DOMElements.currentYearSpan) {
          DOMElements.currentYearSpan.textContent = new Date().getFullYear();
        }

        // Terapkan tema yang tersimpan
        applyTheme(appState.currentTheme);

        // Panggil router untuk memuat halaman awal
        router();

        // Inisialisasi animasi on scroll
        Utils.animateOnScroll();

        console.log("Aplikasi Green Valley berhasil diinisialisasi.");
      }

      // Jalankan Inisialisasi setelah DOM siap
      document.addEventListener('DOMContentLoaded', init);

    })();
  </script>
</body>

</html>