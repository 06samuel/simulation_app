<!DOCTYPE html>
<html lang="id" class="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="script-src 'self' 'unsafe-inline' https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://via.placeholder.com https://*.tile.openstreetmap.org;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta name="description" content="RentEase - Platform sewa apartemen modern, aman, dan mudah digunakan.">
    <meta name="keywords" content="sewa apartemen, apartemen, RentEase, properti, sewa properti">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">
    <title>RentEase - Platform Sewa Apartemen</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        /* CSS Variabel dan Gaya Dasar (sebagian besar tetap, beberapa penyesuaian) */
        :root {
            --font-size-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
            --font-size-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
            --font-size-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
            --font-size-lg: clamp(1.125rem, 1rem + 0.625vw, 1.25rem);
            --font-size-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
            --font-size-2xl: clamp(1.5rem, 1.4rem + 0.5vw, 2rem);
            --font-size-3xl: clamp(2rem, 1.8rem + 1vw, 3rem);

            --spacing-0: 0;
            --spacing-1: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
            --spacing-2: clamp(0.5rem, 0.4rem + 0.25vw, 0.75rem);
            --spacing-3: clamp(0.75rem, 0.65rem + 0.5vw, 1rem);
            --spacing-4: clamp(1rem, 0.85rem + 0.75vw, 1.5rem);
            --spacing-5: clamp(1.5rem, 1.25rem + 1.25vw, 2rem);
            --spacing-6: clamp(2rem, 1.75rem + 1.25vw, 3rem);
            --spacing-8: clamp(2.5rem, 2.25rem + 1.25vw, 3.5rem);
            /* Added for consistency */

            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

            --radius: 0.5rem;
            /* Adjusted for softer corners */
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --sidebar-width: clamp(16rem, 14rem + 10vw, 20rem);
            --sidebar-width-collapsed: 4.5rem;
            --header-height: 4.5rem;
            --max-content-width: 1440px;

            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            --line-height-normal: 1.6;
            /* Slightly increased for readability */
            --line-height-tight: 1.25;
            --line-height-relaxed: 1.75;
            --letter-spacing-normal: 0;
            --letter-spacing-wide: 0.025em;
            --letter-spacing-wider: 0.05em;

            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
            --shadow-none: 0 0 #0000;

            --background: #f8fafc;
            --foreground: #0f172a;
            --card: #ffffff;
            --card-foreground: #0f172a;
            --popover: #ffffff;
            --popover-foreground: #0f172a;
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --primary-focus: #1d4ed8;
            /* Added focus state */
            --primary-foreground: #ffffff;
            --secondary: #f1f5f9;
            --secondary-hover: #e2e8f0;
            --secondary-focus: #cbd5e1;
            /* Added focus state */
            --secondary-foreground: #1e293b;
            --muted: #f1f5f9;
            --muted-foreground: #64748b;
            --accent: #f1f5f9;
            --accent-foreground: #1e293b;
            --destructive: #ef4444;
            --destructive-hover: #dc2626;
            --destructive-focus: #b91c1c;
            /* Added focus state */
            --destructive-foreground: #ffffff;
            --border: #e2e8f0;
            --input: #e2e8f0;
            --ring: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --info: #0ea5e9;
        }

        .dark {
            --background: #0f172a;
            --foreground: #f8fafc;
            --card: #1e293b;
            --card-foreground: #f8fafc;
            --popover: #1e293b;
            --popover-foreground: #f8fafc;
            --primary: #60a5fa;
            --primary-hover: #3b82f6;
            --primary-focus: #2563eb;
            --primary-foreground: #0f172a;
            --secondary: #334155;
            --secondary-hover: #475569;
            --secondary-focus: #52525b;
            --secondary-foreground: #f8fafc;
            --muted: #334155;
            --muted-foreground: #94a3b8;
            --accent: #334155;
            --accent-foreground: #f8fafc;
            --destructive: #f87171;
            --destructive-hover: #ef4444;
            --destructive-focus: #dc2626;
            --destructive-foreground: #0f172a;
            --border: #334155;
            --input: #334155;
            --ring: #60a5fa;
            --success: #34d399;
            --warning: #fbbf24;
            --info: #60a5fa;
        }

        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            /* Basis untuk REM */
            height: 100%;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            font-size: var(--font-size-base);
            line-height: var(--line-height-normal);
            color: var(--foreground);
            background-color: var(--background);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
            display: flex;
            /* Forcing body to fill height for splash screen */
            flex-direction: column;
            transition: background-color var(--transition-normal), color var(--transition-normal);
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            line-height: var(--line-height-tight);
            font-weight: 700;
            letter-spacing: var(--letter-spacing-wide);
            margin-bottom: var(--spacing-3);
            color: var(--foreground);
            /* Explicit color for headings */
        }

        h1 {
            font-size: var(--font-size-3xl);
        }

        h2 {
            font-size: var(--font-size-2xl);
        }

        h3 {
            font-size: var(--font-size-xl);
        }

        h4 {
            font-size: var(--font-size-lg);
        }

        h5 {
            font-size: var(--font-size-base);
        }

        h6 {
            font-size: var(--font-size-sm);
        }

        p {
            margin-bottom: var(--spacing-3);
            line-height: var(--line-height-normal);
        }

        p:last-child {
            margin-bottom: 0;
        }

        /* Common reset */

        small {
            font-size: var(--font-size-xs);
            color: var(--muted-foreground);
        }

        strong,
        b {
            font-weight: 600;
        }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition-fast), text-decoration-color var(--transition-fast);
            outline-offset: 2px;
        }

        a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
            text-decoration-color: var(--primary-hover);
        }

        a:focus-visible {
            outline: 2px solid var(--ring);
            border-radius: var(--radius);
        }

        button,
        input,
        select,
        textarea {
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
            color: inherit;
            outline: none;
        }

        button {
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
            background: none;
            padding: 0;
        }

        button:focus-visible,
        input:focus-visible,
        select:focus-visible,
        textarea:focus-visible {
            outline: 2px solid var(--ring);
            outline-offset: 2px;
            border-radius: var(--radius);
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        textarea,
        select {
            padding: var(--spacing-2) var(--spacing-3);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background-color: var(--card);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="password"]:focus,
        textarea:focus,
        select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px var(--ring);
        }


        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        [aria-busy="true"] {
            cursor: progress;
        }

        [aria-disabled="true"],
        :disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .app-container {
            display: none;
            /* Initially hidden, shown by JS */
            grid-template-columns: var(--sidebar-width) 1fr;
            min-height: 100vh;
            max-width: var(--max-content-width);
            margin: 0 auto;
            flex-grow: 1;
            /* Takes remaining space from body */
        }

        .app-container.sidebar-collapsed {
            grid-template-columns: var(--sidebar-width-collapsed) 1fr;
        }

        .main-container {
            /* grid-column: 2; No longer needed if app-container handles columns */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            /* transition: margin-left var(--transition-normal); Removed, handled by grid */
            overflow-x: hidden;
            /* Prevent horizontal scroll from content */
        }

        .main-content {
            flex: 1;
            padding: var(--spacing-6) var(--spacing-6) var(--spacing-8);
            overflow-y: auto;
            /* Allow content to scroll if it overflows */
        }

        .sidebar {
            /* position: fixed; No longer fixed, part of the grid */
            width: var(--sidebar-width);
            /* Controlled by app-container grid */
            height: 100vh;
            background: var(--card);
            border-right: 1px solid var(--border);
            transition: width var(--transition-normal), transform var(--transition-normal);
            z-index: 40;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--muted-foreground) transparent;
            display: flex;
            flex-direction: column;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background-color: var(--muted-foreground);
            border-radius: var(--radius);
        }

        /* .sidebar.collapsed is handled by app-container.sidebar-collapsed */
        .sidebar.collapsed .sidebar-logo-text,
        .sidebar.collapsed .sidebar-item-text,
        .sidebar.collapsed .sidebar-group-label,
        .sidebar.collapsed .sidebar-footer-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
            pointer-events: none;
            white-space: nowrap;
        }

        .sidebar.collapsed .sidebar-item a {
            justify-content: center;
        }

        .sidebar.collapsed .sidebar-logo {
            justify-content: center;
        }


        .sidebar-header {
            padding: var(--spacing-4);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            height: var(--header-height);
            flex-shrink: 0;
            /* Prevent shrinking */
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            font-weight: 600;
            font-size: var(--font-size-lg);
            color: var(--foreground);
            transition: opacity var(--transition-normal);
            /* For text */
        }

        .sidebar-logo svg {
            width: 28px;
            /* Slightly larger */
            height: 28px;
            flex-shrink: 0;
            color: var(--primary);
        }

        .sidebar-logo-text {
            transition: opacity var(--transition-fast), width var(--transition-fast);
        }

        .sidebar-content {
            flex: 1;
            padding: var(--spacing-4);
            overflow-y: auto;
            /* Allows content to scroll */
        }

        .sidebar-group {
            margin-bottom: var(--spacing-6);
        }

        .sidebar-group-label {
            font-size: var(--font-size-xs);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: var(--letter-spacing-wider);
            color: var(--muted-foreground);
            margin-bottom: var(--spacing-2);
            padding: 0 var(--spacing-2);
            /* Use padding not margin for group label */
            transition: opacity var(--transition-fast), width var(--transition-fast);
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item {
            margin-bottom: var(--spacing-1);
            position: relative;
        }

        .sidebar-item a {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            padding: var(--spacing-2) var(--spacing-3);
            border-radius: var(--radius);
            color: var(--muted-foreground);
            font-weight: 500;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .sidebar-item a:hover {
            background-color: var(--secondary);
            color: var(--secondary-foreground);
        }

        .sidebar-item.active a {
            background-color: var(--primary);
            color: var(--primary-foreground);
        }

        .sidebar-item.active a svg {
            color: var(--primary-foreground);
        }

        .sidebar-item-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            color: var(--muted-foreground);
            /* Icon color */
            transition: color var(--transition-fast);
        }

        .sidebar-item-text {
            transition: opacity var(--transition-fast), width var(--transition-fast);
        }

        .sidebar-footer {
            padding: var(--spacing-4);
            border-top: 1px solid var(--border);
            flex-shrink: 0;
            /* Prevent shrinking */
        }

        .sidebar-footer-actions .button {
            justify-content: flex-start;
            /* Align icon and text to start */
        }

        .sidebar.collapsed .sidebar-footer-actions .button {
            justify-content: center;
            /* Center icon when collapsed */
        }

        .sidebar-footer-text {
            transition: opacity var(--transition-fast), width var(--transition-fast);
        }


        .header {
            position: sticky;
            top: 0;
            height: var(--header-height);
            background-color: var(--card);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-6);
            z-index: 30;
        }

        .sidebar-toggle {
            display: none;
            /* Hidden by default, shown in media query */
            width: 40px;
            height: 40px;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius);
            color: var(--muted-foreground);
            transition: all var(--transition-fast);
        }

        .sidebar-toggle:hover {
            background-color: var(--secondary);
            color: var(--secondary-foreground);
        }

        .sidebar-toggle:focus-visible {
            background-color: var(--secondary-focus);
            color: var(--secondary-foreground);
        }

        .sidebar-toggle svg {
            width: 20px;
            height: 20px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-4);
        }

        .user-nav {
            position: relative;
        }

        .user-nav-trigger {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: var(--secondary);
            color: var(--secondary-foreground);
            font-weight: 600;
            transition: all var(--transition-fast);
            border: 2px solid transparent;
            /* For focus state */
        }

        .user-nav-trigger:hover {
            background-color: var(--secondary-hover);
        }

        .user-nav-trigger:focus-visible {
            border-color: var(--ring);
        }

        .user-nav-trigger[aria-expanded="true"] {
            background-color: var(--primary);
            color: var(--primary-foreground);
        }

        .user-nav-menu {
            position: absolute;
            right: 0;
            top: calc(100% + var(--spacing-2));
            width: 280px;
            background-color: var(--popover);
            /* Use popover for dropdowns */
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-lg);
            padding: var(--spacing-2) 0;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px) scale(0.95);
            transition: opacity var(--transition-fast), visibility var(--transition-fast), transform var(--transition-fast);
            z-index: 50;
        }

        .user-nav-trigger[aria-expanded="true"]+.user-nav-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .user-nav-header {
            padding: var(--spacing-3) var(--spacing-4);
            border-bottom: 1px solid var(--border);
            margin-bottom: var(--spacing-2);
        }

        .user-nav-name {
            font-weight: 600;
            margin-bottom: var(--spacing-1);
        }

        .user-nav-email {
            font-size: var(--font-size-sm);
            color: var(--muted-foreground);
        }

        .user-nav-items {
            list-style: none;
        }

        .user-nav-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            padding: var(--spacing-2) var(--spacing-4);
            font-size: var(--font-size-sm);
            color: var(--popover-foreground);
            /* Use popover foreground */
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .user-nav-item:hover {
            background-color: var(--secondary);
        }

        .user-nav-item svg {
            width: 18px;
            height: 18px;
            color: var(--muted-foreground);
        }

        .user-nav-separator {
            height: 1px;
            background-color: var(--border);
            margin: var(--spacing-2) 0;
        }

        .page {
            display: none;
            animation: fadeIn var(--transition-normal) ease-out forwards;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: var(--spacing-6);
        }

        .page-title {
            margin-bottom: var(--spacing-2);
        }

        .page-description {
            color: var(--muted-foreground);
            max-width: 70ch;
            /* Optimal line length */
            font-size: var(--font-size-base);
        }

        .card {
            background-color: var(--card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            /* Default shadow for cards */
            transition: box-shadow var(--transition-normal);
            overflow: hidden;
            /* For images inside cards */
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            padding: var(--spacing-4);
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-1);
        }

        .card-description {
            color: var(--muted-foreground);
            font-size: var(--font-size-sm);
            margin-bottom: 0;
            /* Adjusted as it's often last element in header */
        }

        .card-content {
            padding: var(--spacing-4);
        }

        .card-footer {
            padding: var(--spacing-4);
            border-top: 1px solid var(--border);
            display: flex;
            gap: var(--spacing-3);
            justify-content: flex-end;
            /* Common pattern for buttons in footer */
        }

        .stats-card {
            position: relative;
            overflow: hidden;
        }

        .stats-card .card-header {
            border-bottom: none;
            padding-bottom: 0;
        }

        /* Stats cards often don't need border */
        .stats-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .stats-card-title {
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--muted-foreground);
        }

        .stats-card-icon {
            width: 24px;
            /* Slightly larger */
            height: 24px;
            color: var(--primary);
        }

        .stats-card-value {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            margin-bottom: var(--spacing-1);
        }

        .stats-card-description {
            font-size: var(--font-size-sm);
            color: var(--muted-foreground);
        }

        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-2);
            font-weight: 500;
            font-size: var(--font-size-sm);
            padding: var(--spacing-2) var(--spacing-4);
            border-radius: var(--radius);
            transition: all var(--transition-fast);
            white-space: nowrap;
            user-select: none;
            border: 1px solid transparent;
            /* Base for outline buttons */
        }

        .button-sm {
            padding: var(--spacing-1) var(--spacing-3);
            /* Adjusted padding for better balance */
            font-size: var(--font-size-xs);
        }

        .button-lg {
            padding: var(--spacing-3) var(--spacing-6);
            font-size: var(--font-size-base);
        }

        .button-primary {
            background-color: var(--primary);
            color: var(--primary-foreground);
            border-color: var(--primary);
        }

        .button-primary:hover {
            background-color: var(--primary-hover);
            border-color: var(--primary-hover);
        }

        .button-primary:focus-visible {
            background-color: var(--primary-focus);
            border-color: var(--primary-focus);
            outline-color: var(--ring);
            /* Ensure ring matches theme */
        }

        .button-primary:active {
            transform: translateY(1px);
        }

        .button-secondary {
            background-color: var(--secondary);
            color: var(--secondary-foreground);
            border-color: var(--secondary);
        }

        .button-secondary:hover {
            background-color: var(--secondary-hover);
            border-color: var(--secondary-hover);
        }

        .button-secondary:focus-visible {
            background-color: var(--secondary-focus);
            border-color: var(--secondary-focus);
            outline-color: var(--ring);
        }

        .button-outline {
            background-color: transparent;
            color: var(--primary);
            border-color: var(--primary);
        }

        .button-outline:hover {
            background-color: var(--primary-hover);
            color: var(--primary-foreground);
            border-color: var(--primary-hover);
        }

        .button-outline:focus-visible {
            background-color: var(--primary-focus);
            color: var(--primary-foreground);
            border-color: var(--primary-focus);
            outline-color: var(--ring);
        }

        .button-outline:active {
            transform: translateY(1px);
        }

        .button-ghost {
            background-color: transparent;
            color: var(--primary);
            border-color: transparent;
        }

        .button-ghost:hover {
            background-color: var(--secondary);
            color: var(--primary-hover);
        }

        .button-ghost:focus-visible {
            background-color: var(--secondary-focus);
            outline-color: var(--ring);
        }

        .button-block {
            width: 100%;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xs);
            font-weight: 600;
            /* Bolder for badges */
            padding: var(--spacing-0-5, 0.25rem) var(--spacing-2);
            /* Adjusted padding */
            border-radius: var(--radius);
            line-height: 1.2;
            /* Ensure text fits */
            text-transform: capitalize;
            /* Common for status badges */
        }

        .badge-primary {
            background-color: var(--primary);
            color: var(--primary-foreground);
        }

        .badge-secondary {
            background-color: var(--secondary);
            color: var(--secondary-foreground);
        }

        .badge-outline {
            background-color: transparent;
            color: var(--foreground);
            border: 1px solid var(--border);
        }

        .badge-success {
            background-color: var(--success);
            color: white;
        }

        .badge-warning {
            background-color: var(--warning);
            color: #1e293b;
        }

        /* Darker text for yellow */
        .badge-destructive {
            background-color: var(--destructive);
            color: white;
        }

        .badge-info {
            background-color: var(--info);
            color: white;
        }


        /* Grid & Flex Utilities */
        .grid {
            display: grid;
        }

        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }

        .grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }

        .gap-2 {
            gap: var(--spacing-2);
        }

        .gap-4 {
            gap: var(--spacing-4);
        }

        .gap-6 {
            gap: var(--spacing-6);
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .items-start {
            align-items: flex-start;
        }

        .items-end {
            align-items: flex-end;
        }

        .justify-start {
            justify-content: flex-start;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-end {
            justify-content: flex-end;
        }

        .flex-col {
            flex-direction: column;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .flex-1 {
            flex: 1 1 0%;
        }

        .flex-grow {
            flex-grow: 1;
        }

        /* Margin & Padding Utilities (sample) */
        .m-auto {
            margin: auto;
        }

        .mb-1 {
            margin-bottom: var(--spacing-1);
        }

        .mb-2 {
            margin-bottom: var(--spacing-2);
        }

        .mb-3 {
            margin-bottom: var(--spacing-3);
        }

        .mb-4 {
            margin-bottom: var(--spacing-4);
        }

        .mb-6 {
            margin-bottom: var(--spacing-6);
        }

        .mb-8 {
            margin-bottom: var(--spacing-8);
        }

        .mt-1 {
            margin-top: var(--spacing-1);
        }

        .mt-2 {
            margin-top: var(--spacing-2);
        }

        .mt-3 {
            margin-top: var(--spacing-3);
        }

        .mt-4 {
            margin-top: var(--spacing-4);
        }

        .mt-6 {
            margin-top: var(--spacing-6);
        }

        .mt-8 {
            margin-top: var(--spacing-8);
        }

        .mr-2 {
            margin-right: var(--spacing-2);
        }

        .ml-auto {
            margin-left: auto;
        }

        .p-2 {
            padding: var(--spacing-2);
        }

        .p-3 {
            padding: var(--spacing-3);
        }

        .p-4 {
            padding: var(--spacing-4);
        }

        .p-6 {
            padding: var(--spacing-6);
        }

        .py-2 {
            padding-top: var(--spacing-2);
            padding-bottom: var(--spacing-2);
        }

        .px-4 {
            padding-left: var(--spacing-4);
            padding-right: var(--spacing-4);
        }

        /* Text Utilities */
        .text-center {
            text-align: center;
        }

        .text-sm {
            font-size: var(--font-size-sm);
        }

        .text-lg {
            font-size: var(--font-size-lg);
        }

        .text-xl {
            font-size: var(--font-size-xl);
        }

        .font-semibold {
            font-weight: 600;
        }

        .font-medium {
            font-weight: 500;
        }

        .text-muted-foreground {
            color: var(--muted-foreground);
        }

        .text-primary {
            color: var(--primary);
        }

        .text-success {
            color: var(--success);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-destructive {
            color: var(--destructive);
        }

        /* Border Radius & Overflow */
        .rounded-md {
            border-radius: var(--radius);
        }

        .rounded-lg {
            border-radius: var(--radius-lg);
        }

        .rounded-full {
            border-radius: 9999px;
        }

        .overflow-hidden {
            overflow: hidden;
        }

        /* Sizing */
        .w-full {
            width: 100%;
        }

        .h-48 {
            height: 12rem;
        }

        .h-64 {
            height: 16rem;
        }

        /* Added for map */
        .object-cover {
            object-fit: cover;
        }

        .max-w-md {
            max-width: 28rem;
        }

        .max-w-xl {
            max-width: 36rem;
        }

        /* Added for empty states */
        .max-w-2xl {
            max-width: 42rem;
        }

        /* Spacing for direct children */
        .space-y-2>*+* {
            margin-top: var(--spacing-2);
        }

        .space-y-4>*+* {
            margin-top: var(--spacing-4);
        }

        .space-x-2>*+* {
            margin-left: var(--spacing-2);
        }

        .space-x-4>*+* {
            margin-left: var(--spacing-4);
        }

        /* Tabs */
        .tabs {
            display: flex;
            flex-direction: column;
        }

        .tabs-list {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: var(--spacing-4);
            overflow-x: auto;
            /* For many tabs on small screens */
            scrollbar-width: none;
            /* Firefox */
        }

        .tabs-list::-webkit-scrollbar {
            display: none;
        }

        /* Chrome, Safari, Opera */
        .tab-trigger {
            padding: var(--spacing-3) var(--spacing-4);
            /* Increased padding */
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--muted-foreground);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
            /* Overlap border */
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .tab-trigger:hover {
            color: var(--foreground);
        }

        .tab-trigger.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn var(--transition-normal) ease-out forwards;
        }

        .tab-content.active {
            display: block;
        }

        /* Chart Placeholder */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            background-color: var(--secondary);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted-foreground);
            font-style: italic;
            border: 1px dashed var(--border);
        }

        /* Real chart styles from original can be added here if implementing a chart library later */

        /* Avatar */
        .avatar {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: var(--secondary);
            color: var(--secondary-foreground);
            font-weight: 600;
            overflow: hidden;
            text-transform: uppercase;
        }

        .avatar-sm {
            width: 32px;
            height: 32px;
            font-size: var(--font-size-xs);
        }

        .avatar-md {
            width: 40px;
            height: 40px;
            font-size: var(--font-size-sm);
        }

        .avatar-lg {
            width: 64px;
            height: 64px;
            font-size: var(--font-size-lg);
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-8) var(--spacing-4);
            text-align: center;
            border: 2px dashed var(--border);
            border-radius: var(--radius-lg);
            background-color: var(--muted);
            min-height: 200px;
        }

        .empty-state-icon {
            width: 64px;
            height: 64px;
            color: var(--muted-foreground);
            margin-bottom: var(--spacing-4);
        }

        .empty-state-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--foreground);
            margin-bottom: var(--spacing-2);
        }

        .empty-state-description {
            font-size: var(--font-size-base);
            color: var(--muted-foreground);
            max-width: var(--max-w-xl);
            margin-bottom: var(--spacing-4);
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--primary);
            /* Consistent with primary color */
            color: var(--primary-foreground);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity var(--transition-slow) ease-in-out, visibility var(--transition-slow) ease-in-out;
            visibility: visible;
        }

        .splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .splash-logo {
            margin-bottom: var(--spacing-6);
            animation: pulse 2s infinite ease-in-out;
        }

        .splash-logo svg {
            width: 80px;
            height: 80px;
            stroke-width: 1.5;
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
        }

        .splash-title {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            margin-bottom: var(--spacing-2);
            letter-spacing: var(--letter-spacing-wider);
        }

        .splash-subtitle {
            font-size: var(--font-size-lg);
            opacity: 0.9;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--primary-foreground);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-top: var(--spacing-6);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Leaflet map specific styles */
        #map {
            height: var(--h-64);
            width: 100%;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            z-index: 1;
            /* Ensure map is above other elements in its container */
        }

        .leaflet-popup-content-wrapper {
            background: var(--card);
            color: var(--card-foreground);
            box-shadow: var(--shadow-lg);
            border-radius: var(--radius);
        }

        .leaflet-popup-content {
            font-family: var(--font-sans);
        }

        .leaflet-popup-tip {
            background: var(--card);
        }

        .leaflet-container a {
            color: var(--primary);
            /* Make links in popup use theme color */
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            /* No change needed for sidebar width if using clamp */
        }

        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
                /* Single column layout */
            }

            .app-container.sidebar-collapsed {
                /* Reset for mobile */
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: fixed;
                /* Fixed for mobile overlay */
                transform: translateX(-100%);
                box-shadow: var(--shadow-xl);
                /* Add shadow for overlay */
            }

            .sidebar.mobile-active {
                transform: translateX(0);
            }

            .sidebar.collapsed {
                /* Mobile doesn't use collapsed state, always full width when open */
                width: var(--sidebar-width);
            }

            .sidebar.collapsed .sidebar-logo-text,
            .sidebar.collapsed .sidebar-item-text,
            .sidebar.collapsed .sidebar-group-label,
            .sidebar.collapsed .sidebar-footer-text {
                opacity: 1;
                width: auto;
                pointer-events: auto;
            }

            .sidebar.collapsed .sidebar-item a {
                justify-content: flex-start;
            }

            .sidebar.collapsed .sidebar-logo {
                justify-content: flex-start;
            }

            .sidebar-toggle {
                display: flex;
            }

            .main-container {
                margin-left: 0;
            }

            .grid-cols-4,
            .grid-cols-3 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (max-width: 640px) {

            .grid-cols-2,
            .grid-cols-3,
            .grid-cols-4 {
                grid-template-columns: 1fr;
                /* Single column for cards on small screens */
            }

            .main-content {
                padding: var(--spacing-4);
            }

            .header {
                padding: 0 var(--spacing-4);
            }

            .page-title {
                font-size: var(--font-size-2xl);
            }

            .stats-card-value {
                font-size: var(--font-size-xl);
            }
        }

        /* Print Styles */
        @media print {
            body {
                background-color: #fff;
                color: #000;
            }

            .sidebar,
            .header,
            .splash-screen,
            .sidebar-toggle,
            .user-nav,
            .theme-toggle-container,
            .card-footer button {
                display: none !important;
            }

            .app-container {
                display: block !important;
                /* Override grid */
                grid-template-columns: 1fr !important;
            }

            .main-container {
                margin: 0;
                padding: 0;
            }

            .main-content {
                padding: var(--spacing-4) 0;
            }

            .card {
                box-shadow: none;
                border: 1px solid #ccc;
                page-break-inside: avoid;
                border-radius: 0;
            }

            .card-header,
            .card-content,
            .card-footer {
                padding: var(--spacing-2);
            }

            a {
                color: #000;
                text-decoration: none;
            }

            :root {
                /* Reset variables for print */
                --background: #ffffff;
                --foreground: #0f172a;
                --card: #ffffff;
                --border: #e2e8f0;
            }

            .dark {
                /* Force light mode for print */
                --background: #ffffff;
                --foreground: #0f172a;
                --card: #ffffff;
                --border: #e2e8f0;
            }
        }
    </style>
</head>

<body>
    <div class="splash-screen" id="splashScreen" aria-live="polite" aria-busy="true">
        <div class="splash-logo">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 21h18M9 8h1m-1 4h1m-1 4h1m4-8h1m-1 4h1m-1 4h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16">
                </path>
            </svg>
        </div>
        <h1 class="splash-title">RentEase</h1>
        <p class="splash-subtitle">Platform Sewa Apartemen Terpercaya</p>
        <div class="spinner" role="status" aria-label="Memuat aplikasi"></div>
    </div>

    <div class="app-container" id="appContainer">
        <aside class="sidebar" id="sidebar" role="complementary" aria-label="Navigasi Utama">
            <div class="sidebar-header">
                <a href="#dashboard" class="sidebar-logo" aria-label="RentEase Beranda">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M3 21h18M9 8h1m-1 4h1m-1 4h1m4-8h1m-1 4h1m-1 4h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16">
                        </path>
                    </svg>
                    <span class="sidebar-logo-text">RentEase</span>
                </a>
            </div>
            <nav class="sidebar-content">
                <div class="sidebar-group">
                    <h2 class="sidebar-group-label">Menu Utama</h2>
                    <ul class="sidebar-menu" role="menu">
                        <li class="sidebar-item" data-page="dashboard" role="menuitem">
                            <a href="#dashboard">
                                <svg class="sidebar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                </svg>
                                <span class="sidebar-item-text">Beranda</span>
                            </a>
                        </li>
                        <li class="sidebar-item" data-page="apartemen" role="menuitem">
                            <a href="#apartemen">
                                <svg class="sidebar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M3 21h18M9 8h1m-1 4h1m-1 4h1m4-8h1m-1 4h1m-1 4h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16">
                                    </path>
                                </svg>
                                <span class="sidebar-item-text">Apartemen Saya</span>
                            </a>
                        </li>
                        <li class="sidebar-item" data-page="riwayat" role="menuitem">
                            <a href="#riwayat">
                                <svg class="sidebar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2">
                                    </path>
                                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                </svg>
                                <span class="sidebar-item-text">Riwayat Sewa</span>
                            </a>
                        </li>
                        <li class="sidebar-item" data-page="pembayaran" role="menuitem">
                            <a href="#pembayaran">
                                <svg class="sidebar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                                    <line x1="2" y1="10" x2="22" y2="10"></line>
                                </svg>
                                <span class="sidebar-item-text">Pembayaran</span>
                            </a>
                        </li>
                        <li class="sidebar-item" data-page="notifikasi" role="menuitem">
                            <a href="#notifikasi">
                                <svg class="sidebar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                                <span class="sidebar-item-text">Notifikasi</span>
                                <span class="badge badge-destructive ml-auto" id="notificationBadge"
                                    style="display: none;">3</span>
                            </a>
                        </li>
                        <li class="sidebar-item" data-page="pengaturan" role="menuitem">
                            <a href="#pengaturan">
                                <svg class="sidebar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                                    </path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                <span class="sidebar-item-text">Pengaturan</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="sidebar-footer">
                <div class="sidebar-footer-actions">
                    <button class="button button-secondary button-block" id="themeToggle" aria-label="Ganti Tema">
                        <svg class="sidebar-item-icon" id="themeIconLight" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="sidebar-item-icon" id="themeIconDark" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" style="display:none;">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <span class="sidebar-footer-text">Ganti Tema</span>
                    </button>
                </div>
            </div>
        </aside>

        <div class="main-container">
            <header class="header" role="banner">
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Alihkan Navigasi Samping"
                    aria-expanded="false" aria-controls="sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="header-search" style="flex-grow: 1; max-width: 400px; margin-left: var(--spacing-4);">
                    <!-- Placeholder for global search, can be implemented later -->
                    <!-- <input type="search" placeholder="Cari apartemen, transaksi..." style="width: 100%;"> -->
                </div>
                <div class="header-actions">
                    <div class="user-nav">
                        <button class="user-nav-trigger" id="userNavTrigger" aria-label="Menu Pengguna"
                            aria-haspopup="true" aria-expanded="false" aria-controls="userNavMenu">
                            JD
                        </button>
                        <div class="user-nav-menu" id="userNavMenu" role="menu" aria-labelledby="userNavTrigger">
                            <div class="user-nav-header">
                                <div class="flex items-center gap-3">
                                    <div class="avatar avatar-md"><span>JD</span></div>
                                    <div>
                                        <div class="user-nav-name">John Doe</div>
                                        <div class="user-nav-email">john.doe@example.com</div>
                                    </div>
                                </div>
                            </div>
                            <ul class="user-nav-items">
                                <li class="user-nav-item" role="menuitem" tabindex="0">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    Profil
                                </li>
                                <li class="user-nav-item" role="menuitem" tabindex="0">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path
                                            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z">
                                        </path>
                                        <line x1="12" y1="9" x2="12" y2="13"></line>
                                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                    </svg>
                                    Bantuan
                                </li>
                                <li class="user-nav-separator" role="separator"></li>
                                <li class="user-nav-item" role="menuitem" tabindex="0" id="logoutButton">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                        <polyline points="16 17 21 12 16 7"></polyline>
                                        <line x1="21" y1="12" x2="9" y2="12"></line>
                                    </svg>
                                    Keluar
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </header>

            <main class="main-content" role="main" id="mainContentArea">
                <section id="dashboardPage" class="page">
                    <header class="page-header">
                        <h1 class="page-title">Beranda</h1>
                        <p class="page-description">Selamat datang kembali, John! Kelola penyewaan apartemen Anda dengan
                            mudah dan efisien.</p>
                    </header>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="card stats-card">
                            <div class="card-header">
                                <div class="stats-card-header">
                                    <h3 class="stats-card-title">Apartemen Aktif</h3>
                                    <svg class="stats-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path
                                            d="M3 21h18M9 8h1m-1 4h1m-1 4h1m4-8h1m-1 4h1m-1 4h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16">
                                        </path>
                                    </svg>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="stats-card-value">2</div>
                                <p class="stats-card-description">Sedang disewa</p>
                            </div>
                        </div>
                        <div class="card stats-card">
                            <div class="card-header">
                                <div class="stats-card-header">
                                    <h3 class="stats-card-title">Pembayaran Mendatang</h3>
                                    <svg class="stats-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                                        <line x1="2" y1="10" x2="22" y2="10"></line>
                                    </svg>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="stats-card-value">1</div>
                                <p class="stats-card-description">Jatuh tempo bulan ini</p>
                            </div>
                        </div>
                        <div class="card stats-card">
                            <div class="card-header">
                                <div class="stats-card-header">
                                    <h3 class="stats-card-title">Notifikasi Baru</h3>
                                    <svg class="stats-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="stats-card-value" id="dashboardNotificationCount">3</div>
                                <p class="stats-card-description">Belum dibaca</p>
                            </div>
                        </div>
                        <div class="card stats-card">
                            <div class="card-header">
                                <div class="stats-card-header">
                                    <h3 class="stats-card-title">Total Pengeluaran</h3>
                                    <svg class="stats-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="stats-card-value">Rp 5.6JT</div>
                                <p class="stats-card-description">Bulan ini</p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Pembayaran Mendatang</h2>
                                <p class="card-description">Tagihan sewa yang akan jatuh tempo segera.</p>
                            </div>
                            <div class="card-content">
                                <div class="space-y-4">
                                    <div
                                        class="flex justify-between items-center py-3 border-b border-border last:border-b-0">
                                        <div>
                                            <p class="font-semibold">Apartemen Taman Anggrek</p>
                                            <p class="text-sm text-muted-foreground">Jatuh Tempo: <time
                                                    datetime="2023-06-25">25 Juni 2023</time></p>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-semibold">Rp 3.200.000</p>
                                            <span class="badge badge-warning mt-1">Belum Lunas</span>
                                        </div>
                                    </div>
                                    <!-- Item lain bisa ditambahkan di sini -->
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="button button-outline" onclick="app.navigateTo('pembayaran')">Lihat
                                    Semua</button>
                                <button class="button button-primary">Bayar Sekarang</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Notifikasi Terbaru</h2>
                                <p class="card-description">Pemberitahuan terkini tentang penyewaan Anda.</p>
                            </div>
                            <div class="card-content">
                                <div class="space-y-4">
                                    <div class="flex items-start gap-3 py-3 border-b border-border last:border-b-0">
                                        <div
                                            class="avatar avatar-sm rounded-full bg-info text-primary-foreground flex-shrink-0 mt-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round">
                                                <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                                                <line x1="2" y1="10" x2="22" y2="10"></line>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-semibold">Pembayaran Jatuh Tempo</p>
                                            <p class="text-sm text-muted-foreground"><time datetime="2023-05-20">20 Mei
                                                    2023</time> &bull; Apartemen Taman Anggrek</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3 py-3">
                                        <div
                                            class="avatar avatar-sm rounded-full bg-success text-primary-foreground flex-shrink-0 mt-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round">
                                                <polyline points="20 6 9 17 4 12"></polyline>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-semibold">Pembayaran Berhasil</p>
                                            <p class="text-sm text-muted-foreground"><time datetime="2023-05-19">19 Mei
                                                    2023</time> &bull; Apartemen Sudirman Park</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="button button-outline" onclick="app.navigateTo('notifikasi')">Lihat
                                    Semua</button>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-6">
                        <div class="card-header">
                            <h2 class="card-title">Aktivitas Sewa (Contoh)</h2>
                            <p class="card-description">Ringkasan aktivitas penyewaan Anda dalam 6 bulan terakhir.</p>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <p>Konten grafik akan ditampilkan di sini.</p>
                                <!-- Implementasi grafik dengan Vanilla JS bisa kompleks, placeholder untuk saat ini -->
                            </div>
                        </div>
                    </div>
                </section>

                <section id="apartemenPage" class="page">
                    <header class="page-header">
                        <h1 class="page-title">Apartemen Saya</h1>
                        <p class="page-description">Kelola semua apartemen yang sedang atau pernah Anda sewa melalui
                            RentEase.</p>
                    </header>
                    <div class="mb-6" id="map"></div> <!-- Map container -->
                    <div class="tabs">
                        <div class="tabs-list" role="tablist" aria-label="Filter Apartemen">
                            <button class="tab-trigger active" data-tab="semua-apartemen" role="tab"
                                aria-selected="true" aria-controls="semua-apartemen-content">Semua</button>
                            <button class="tab-trigger" data-tab="aktif-apartemen" role="tab" aria-selected="false"
                                aria-controls="aktif-apartemen-content">Aktif</button>
                            <button class="tab-trigger" data-tab="selesai-apartemen" role="tab" aria-selected="false"
                                aria-controls="selesai-apartemen-content">Selesai</button>
                        </div>

                        <div class="tab-content active" id="semua-apartemen-content" role="tabpanel"
                            aria-labelledby="semua-apartemen">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <article class="card">
                                    <img src="https://via.placeholder.com/400x200/3B82F6/FFFFFF?text=Apartemen+Modern"
                                        alt="Foto Apartemen Taman Anggrek" class="w-full h-48 object-cover">
                                    <div class="card-header">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="card-title">Apartemen Taman Anggrek</h3>
                                                <p class="card-description">Jl. Letjen S. Parman Kav. 21, Jakarta Barat
                                                </p>
                                            </div>
                                            <span class="badge badge-success">Aktif</span>
                                        </div>
                                    </div>
                                    <div class="card-content">
                                        <dl class="grid grid-cols-2 gap-4">
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Tipe</dt>
                                                <dd>2 Kamar Tidur</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Harga Sewa</dt>
                                                <dd>Rp 3.200.000/bulan</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Sewa Hingga</dt>
                                                <dd><time datetime="2023-12-31">31 Desember 2023</time></dd>
                                            </div>
                                        </dl>
                                    </div>
                                    <div class="card-footer">
                                        <button class="button button-outline button-sm">Lihat Detail</button>
                                        <button class="button button-primary button-sm">Perpanjang Sewa</button>
                                    </div>
                                </article>
                                <article class="card">
                                    <img src="https://via.placeholder.com/400x200/10B981/FFFFFF?text=Apartemen+Nyaman"
                                        alt="Foto Apartemen Sudirman Park" class="w-full h-48 object-cover">
                                    <div class="card-header">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="card-title">Apartemen Sudirman Park</h3>
                                                <p class="card-description">Jl. K.H. Mas Mansyur Kav. 35, Jakarta Pusat
                                                </p>
                                            </div>
                                            <span class="badge badge-success">Aktif</span>
                                        </div>
                                    </div>
                                    <div class="card-content">
                                        <dl class="grid grid-cols-2 gap-4">
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Tipe</dt>
                                                <dd>1 Kamar Tidur</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Harga Sewa</dt>
                                                <dd>Rp 2.400.000/bulan</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Sewa Hingga</dt>
                                                <dd><time datetime="2024-01-15">15 Januari 2024</time></dd>
                                            </div>
                                        </dl>
                                    </div>
                                    <div class="card-footer">
                                        <button class="button button-outline button-sm">Lihat Detail</button>
                                        <button class="button button-primary button-sm">Perpanjang Sewa</button>
                                    </div>
                                </article>
                            </div>
                        </div>
                        <div class="tab-content" id="aktif-apartemen-content" role="tabpanel"
                            aria-labelledby="aktif-apartemen">
                            <!-- Konten untuk apartemen aktif, bisa sama dengan di atas atau difilter -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Contoh satu apartemen aktif -->
                                <article class="card">
                                    <img src="https://via.placeholder.com/400x200/3B82F6/FFFFFF?text=Apartemen+Aktif+1"
                                        alt="Foto Apartemen Taman Anggrek" class="w-full h-48 object-cover">
                                    <div class="card-header">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="card-title">Apartemen Taman Anggrek</h3>
                                                <p class="card-description">Jl. Letjen S. Parman Kav. 21, Jakarta Barat
                                                </p>
                                            </div>
                                            <span class="badge badge-success">Aktif</span>
                                        </div>
                                    </div>
                                    <div class="card-content">
                                        <dl class="grid grid-cols-2 gap-4">
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Tipe</dt>
                                                <dd>2 Kamar Tidur</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-muted-foreground">Harga Sewa</dt>
                                                <dd>Rp 3.200.000/bulan</dd>
                                            </div>
                                        </dl>
                                    </div>
                                    <div class="card-footer">
                                        <button class="button button-primary button-sm">Kelola</button>
                                    </div>
                                </article>
                            </div>
                        </div>
                        <div class="tab-content" id="selesai-apartemen-content" role="tabpanel"
                            aria-labelledby="selesai-apartemen">
                            <div class="empty-state">
                                <svg class="empty-state-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M3 21h18M9 8h1m-1 4h1m-1 4h1m4-8h1m-1 4h1m-1 4h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16">
                                    </path>
                                    <line x1="7" y1="19" x2="7" y2="5"></line>
                                    <line x1="17" y1="19" x2="17" y2="5"></line>
                                    <line x1="21" y1="12" x2="3" y2="12"></line>
                                </svg>
                                <h3 class="empty-state-title">Belum Ada Apartemen Selesai</h3>
                                <p class="empty-state-description">Riwayat apartemen yang sewanya telah berakhir akan
                                    muncul di sini.</p>
                                <button class="button button-primary mt-4" onclick="app.navigateTo('dashboard')">Cari
                                    Apartemen Baru</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="riwayatPage" class="page">
                    <header class="page-header">
                        <h1 class="page-title">Riwayat Sewa</h1>
                        <p class="page-description">Lihat detail semua transaksi dan periode sewa apartemen Anda
                            sebelumnya.</p>
                    </header>
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Daftar Riwayat Transaksi Sewa</h2>
                            <p class="card-description">Semua riwayat penyewaan dan pembayaran apartemen Anda.</p>
                        </div>
                        <div class="card-content">
                            <div class="space-y-6">
                                <article class="p-4 border border-border rounded-lg hover:shadow-md transition-shadow">
                                    <div
                                        class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3">
                                        <div>
                                            <h3 class="font-semibold text-lg">Apartemen Taman Anggrek</h3>
                                            <p class="text-sm text-muted-foreground">Periode: <time
                                                    datetime="2023-01-01">1 Jan 2023</time> - <time
                                                    datetime="2023-12-31">31 Des 2023</time></p>
                                        </div>
                                        <span class="badge badge-success mt-2 sm:mt-0">Sewa Aktif</span>
                                    </div>
                                    <dl class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-3 text-sm">
                                        <div>
                                            <dt class="font-medium text-muted-foreground">Total Pembayaran</dt>
                                            <dd class="font-medium">Rp 38.400.000</dd>
                                        </div>
                                        <div>
                                            <dt class="font-medium text-muted-foreground">Status Pembayaran</dt>
                                            <dd><span class="badge badge-info">Lunas Sebagian</span></dd>
                                        </div>
                                        <div>
                                            <dt class="font-medium text-muted-foreground">ID Transaksi</dt>
                                            <dd>TRX-00123</dd>
                                        </div>
                                    </dl>
                                    <div class="flex justify-end">
                                        <button class="button button-outline button-sm">Lihat Detail Transaksi</button>
                                    </div>
                                </article>
                                <article class="p-4 border border-border rounded-lg hover:shadow-md transition-shadow">
                                    <div
                                        class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3">
                                        <div>
                                            <h3 class="font-semibold text-lg">Apartemen Menteng Park (Lama)</h3>
                                            <p class="text-sm text-muted-foreground">Periode: <time
                                                    datetime="2022-06-01">1 Jun 2022</time> - <time
                                                    datetime="2022-12-31">31 Des 2022</time></p>
                                        </div>
                                        <span class="badge badge-secondary mt-2 sm:mt-0">Sewa Selesai</span>
                                    </div>
                                    <dl class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-3 text-sm">
                                        <div>
                                            <dt class="font-medium text-muted-foreground">Total Pembayaran</dt>
                                            <dd class="font-medium">Rp 21.000.000</dd>
                                        </div>
                                        <div>
                                            <dt class="font-medium text-muted-foreground">Status Pembayaran</dt>
                                            <dd><span class="badge badge-success">Lunas</span></dd>
                                        </div>
                                        <div>
                                            <dt class="font-medium text-muted-foreground">ID Transaksi</dt>
                                            <dd>TRX-00098</dd>
                                        </div>
                                    </dl>
                                    <div class="flex justify-end">
                                        <button class="button button-outline button-sm">Lihat Detail Transaksi</button>
                                    </div>
                                </article>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="button button-secondary">Muat Lebih Banyak</button>
                        </div>
                    </div>
                </section>

                <section id="pembayaranPage" class="page">
                    <header class="page-header">
                        <h1 class="page-title">Pembayaran</h1>
                        <p class="page-description">Kelola tagihan, lakukan pembayaran, dan lihat riwayat transaksi
                            Anda.</p>
                    </header>
                    <div class="empty-state">
                        <svg class="empty-state-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                            <line x1="2" y1="10" x2="22" y2="10"></line>
                        </svg>
                        <h3 class="empty-state-title">Halaman Pembayaran</h3>
                        <p class="empty-state-description">Fitur pembayaran akan segera tersedia. Di sini Anda akan
                            dapat melihat tagihan dan melakukan pembayaran.</p>
                    </div>
                </section>

                <section id="notifikasiPage" class="page">
                    <header class="page-header">
                        <h1 class="page-title">Notifikasi</h1>
                        <p class="page-description">Semua pemberitahuan penting terkait akun dan penyewaan Anda.</p>
                    </header>
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Daftar Notifikasi</h2>
                            <div class="flex items-center gap-2">
                                <p class="card-description mb-0">Pemberitahuan terbaru untuk Anda.</p>
                                <button class="button button-ghost button-sm ml-auto" id="markAllAsReadButton">Tandai
                                    semua terbaca</button>
                            </div>
                        </div>
                        <div class="card-content" id="notificationListContainer">
                            <div class="space-y-4">
                                <!-- Notifikasi akan dimuat oleh JavaScript -->
                            </div>
                            <div class="empty-state" id="emptyNotificationState" style="display:none;">
                                <svg class="empty-state-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                                <h3 class="empty-state-title">Tidak Ada Notifikasi</h3>
                                <p class="empty-state-description">Saat ini tidak ada notifikasi baru untuk Anda.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="pengaturanPage" class="page">
                    <header class="page-header">
                        <h1 class="page-title">Pengaturan Akun</h1>
                        <p class="page-description">Kelola informasi profil, preferensi, dan keamanan akun Anda.</p>
                    </header>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">Navigasi Pengaturan</h2>
                                </div>
                                <div class="card-content p-0">
                                    <ul class="space-y-1">
                                        <li><a href="#" class="block p-3 hover:bg-secondary rounded-md">Profil Saya</a>
                                        </li>
                                        <li><a href="#" class="block p-3 hover:bg-secondary rounded-md">Keamanan</a>
                                        </li>
                                        <li><a href="#" class="block p-3 hover:bg-secondary rounded-md">Preferensi
                                                Notifikasi</a></li>
                                        <li><a href="#" class="block p-3 hover:bg-secondary rounded-md">Tema &
                                                Tampilan</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-2">
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">Profil Saya</h2>
                                    <p class="card-description">Perbarui informasi pribadi Anda.</p>
                                </div>
                                <div class="card-content space-y-4">
                                    <div>
                                        <label for="fullName"
                                            class="block text-sm font-medium text-muted-foreground mb-1">Nama
                                            Lengkap</label>
                                        <input type="text" id="fullName" value="John Doe" class="w-full">
                                    </div>
                                    <div>
                                        <label for="email"
                                            class="block text-sm font-medium text-muted-foreground mb-1">Alamat
                                            Email</label>
                                        <input type="email" id="email" value="john.doe@example.com" class="w-full"
                                            readonly>
                                        <small>Email tidak dapat diubah.</small>
                                    </div>
                                    <div>
                                        <label for="phoneNumber"
                                            class="block text-sm font-medium text-muted-foreground mb-1">Nomor
                                            Telepon</label>
                                        <input type="tel" id="phoneNumber" value="081234567890" class="w-full">
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="button button-primary">Simpan Perubahan</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        const AppCore = (() => {
            'use strict';

            // Application State
            const state = {
                currentPage: 'dashboard',
                isSidebarCollapsed: localStorage.getItem('sidebarCollapsed') === 'true',
                isMobileSidebarOpen: false,
                theme: localStorage.getItem('theme') || 'light',
                mapInstance: null,
                notifications: [
                    { id: 1, title: 'Pembayaran Jatuh Tempo', message: 'Tagihan untuk Apartemen Taman Anggrek akan jatuh tempo pada 25 Juni 2023.', date: '2023-06-20', read: false, type: 'warning' },
                    { id: 2, title: 'Pembayaran Berhasil', message: 'Pembayaran untuk Apartemen Sudirman Park telah berhasil diproses.', date: '2023-06-19', read: false, type: 'success' },
                    { id: 3, title: 'Perpanjangan Sewa Disetujui', message: 'Permintaan perpanjangan sewa Anda untuk Apartemen Bassura City telah disetujui.', date: '2023-06-18', read: true, type: 'info' },
                    { id: 4, title: 'Selamat Datang di RentEase!', message: 'Akun Anda berhasil dibuat. Jelajahi fitur-fitur kami.', date: '2023-06-15', read: true, type: 'info' },
                ]
            };

            // DOM Elements Cache
            const DOMElements = {
                html: document.documentElement,
                body: document.body,
                splashScreen: document.getElementById('splashScreen'),
                appContainer: document.getElementById('appContainer'),
                sidebar: document.getElementById('sidebar'),
                sidebarToggle: document.getElementById('sidebarToggle'),
                mainContentArea: document.getElementById('mainContentArea'),
                themeToggle: document.getElementById('themeToggle'),
                themeIconLight: document.getElementById('themeIconLight'),
                themeIconDark: document.getElementById('themeIconDark'),
                userNavTrigger: document.getElementById('userNavTrigger'),
                userNavMenu: document.getElementById('userNavMenu'),
                logoutButton: document.getElementById('logoutButton'),
                notificationBadge: document.getElementById('notificationBadge'),
                dashboardNotificationCount: document.getElementById('dashboardNotificationCount'),
                notificationListContainer: document.getElementById('notificationListContainer'),
                emptyNotificationState: document.getElementById('emptyNotificationState'),
                markAllAsReadButton: document.getElementById('markAllAsReadButton'),
                // Pages and specific elements will be queried as needed or added here
            };

            // Utility Functions
            const Utils = {
                toggleClass: (el, className) => el && el.classList.toggle(className),
                addClass: (el, className) => el && el.classList.add(className),
                removeClass: (el, className) => el && el.classList.remove(className),
                setActive: (elements, targetElement, activeClass = 'active') => {
                    elements.forEach(el => Utils.removeClass(el, activeClass));
                    if (targetElement) Utils.addClass(targetElement, activeClass);
                },
                debounce: (func, delay) => {
                    let timeout;
                    return (...args) => {
                        clearTimeout(timeout);
                        timeout = setTimeout(() => func.apply(this, args), delay);
                    };
                },
                isDesktop: () => window.innerWidth > 768,
                escapeHTML: (str) => {
                    if (typeof str !== 'string') return '';
                    return str.replace(/[&<>"']/g, (match) => {
                        const escape = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' };
                        return escape[match];
                    });
                }
            };

            // Core Modules
            const Modules = {
                Splash: {
                    init: () => {
                        // Splash screen is visible by default via CSS
                    },
                    hide: () => {
                        if (DOMElements.splashScreen) {
                            Utils.addClass(DOMElements.splashScreen, 'hidden');
                            // Ensure splash screen is fully hidden before showing app
                            DOMElements.splashScreen.addEventListener('transitionend', () => {
                                DOMElements.splashScreen.style.display = 'none';
                            }, { once: true });
                        }
                        if (DOMElements.appContainer) {
                            DOMElements.appContainer.style.display = 'grid'; // Or 'flex' or appropriate display type
                        }
                    }
                },

                Theme: {
                    init: () => {
                        DOMElements.html.classList.remove('light', 'dark');
                        Utils.addClass(DOMElements.html, state.theme);
                        Modules.Theme.updateIcon();
                        DOMElements.themeToggle?.addEventListener('click', Modules.Theme.toggle);
                    },
                    toggle: () => {
                        state.theme = state.theme === 'light' ? 'dark' : 'light';
                        localStorage.setItem('theme', state.theme);
                        DOMElements.html.classList.remove('light', 'dark');
                        Utils.addClass(DOMElements.html, state.theme);
                        Modules.Theme.updateIcon();
                    },
                    updateIcon: () => {
                        if (DOMElements.themeIconLight && DOMElements.themeIconDark) {
                            DOMElements.themeIconLight.style.display = state.theme === 'light' ? 'block' : 'none';
                            DOMElements.themeIconDark.style.display = state.theme === 'dark' ? 'block' : 'none';
                        }
                    }
                },

                Sidebar: {
                    init: () => {
                        if (state.isSidebarCollapsed && Utils.isDesktop()) {
                            Utils.addClass(DOMElements.appContainer, 'sidebar-collapsed');
                        }
                        DOMElements.sidebarToggle?.addEventListener('click', Modules.Sidebar.toggle);
                        window.addEventListener('resize', Utils.debounce(Modules.Sidebar.handleResize, 200));
                        Modules.Sidebar.handleResize(); // Initial check
                    },
                    toggle: () => {
                        if (Utils.isDesktop()) {
                            state.isSidebarCollapsed = !state.isSidebarCollapsed;
                            localStorage.setItem('sidebarCollapsed', state.isSidebarCollapsed);
                            Utils.toggleClass(DOMElements.appContainer, 'sidebar-collapsed');
                        } else {
                            state.isMobileSidebarOpen = !state.isMobileSidebarOpen;
                            Utils.toggleClass(DOMElements.sidebar, 'mobile-active');
                            DOMElements.sidebarToggle.setAttribute('aria-expanded', state.isMobileSidebarOpen);
                        }
                    },
                    closeMobile: () => {
                        if (!Utils.isDesktop() && state.isMobileSidebarOpen) {
                            state.isMobileSidebarOpen = false;
                            Utils.removeClass(DOMElements.sidebar, 'mobile-active');
                            DOMElements.sidebarToggle.setAttribute('aria-expanded', 'false');
                        }
                    },
                    handleResize: () => { // Ensure correct state on resize
                        if (Utils.isDesktop()) {
                            Modules.Sidebar.closeMobile();
                            if (state.isSidebarCollapsed) {
                                Utils.addClass(DOMElements.appContainer, 'sidebar-collapsed');
                            } else {
                                Utils.removeClass(DOMElements.appContainer, 'sidebar-collapsed');
                            }
                        } else {
                            Utils.removeClass(DOMElements.appContainer, 'sidebar-collapsed'); // No collapsed state on mobile
                        }
                    }
                },

                Navigation: {
                    init: () => {
                        document.querySelectorAll('.sidebar-item a').forEach(link => {
                            link.addEventListener('click', (e) => {
                                e.preventDefault();
                                const pageId = link.closest('.sidebar-item').dataset.page;
                                if (pageId) Modules.Navigation.navigateTo(pageId);
                            });
                        });
                        window.addEventListener('hashchange', Modules.Navigation.handleHashChange);
                        Modules.Navigation.handleHashChange(); // Load initial page
                    },
                    navigateTo: (pageId, updateHash = true) => {
                        if (!pageId || state.currentPage === pageId && DOMElements.mainContentArea.querySelector(`#${pageId}Page.active`)) return;

                        state.currentPage = pageId;
                        if (updateHash) {
                            window.location.hash = pageId;
                        }

                        const pages = DOMElements.mainContentArea.querySelectorAll('.page');
                        const targetPageElement = DOMElements.mainContentArea.querySelector(`#${pageId}Page`);
                        Utils.setActive(pages, targetPageElement);

                        const sidebarItems = document.querySelectorAll('.sidebar-item');
                        const targetSidebarItem = document.querySelector(`.sidebar-item[data-page="${pageId}"]`);
                        Utils.setActive(sidebarItems, targetSidebarItem);

                        document.title = `RentEase - ${targetSidebarItem?.querySelector('.sidebar-item-text')?.textContent || 'Beranda'}`;

                        Modules.Sidebar.closeMobile();
                        DOMElements.mainContentArea.scrollTop = 0; // Scroll to top of new page

                        if (pageId === 'apartemen') {
                            Modules.Map.init();
                        }
                        if (pageId === 'notifikasi') {
                            Modules.Notifications.render();
                        }
                    },
                    handleHashChange: () => {
                        const hash = window.location.hash.substring(1);
                        const pageId = hash || 'dashboard'; // Default to dashboard
                        const validPages = Array.from(document.querySelectorAll('.sidebar-item')).map(item => item.dataset.page);
                        if (validPages.includes(pageId)) {
                            Modules.Navigation.navigateTo(pageId, false);
                        } else {
                            Modules.Navigation.navigateTo('dashboard', true); // Navigate to dashboard if hash is invalid
                        }
                    },
                    // Public method to allow other modules to navigate
                    navigate: (pageId) => {
                        Modules.Navigation.navigateTo(pageId, true);
                    }
                },

                UserMenu: {
                    init: () => {
                        DOMElements.userNavTrigger?.addEventListener('click', Modules.UserMenu.toggle);
                        DOMElements.logoutButton?.addEventListener('click', Modules.UserMenu.logout);
                        document.addEventListener('click', Modules.UserMenu.closeOnClickOutside);
                    },
                    toggle: (event) => {
                        event.stopPropagation(); // Prevent closeOnClickOutside from firing immediately
                        const isExpanded = DOMElements.userNavTrigger.getAttribute('aria-expanded') === 'true';
                        DOMElements.userNavTrigger.setAttribute('aria-expanded', !isExpanded);
                    },
                    close: () => {
                        DOMElements.userNavTrigger?.setAttribute('aria-expanded', 'false');
                    },
                    closeOnClickOutside: (event) => {
                        if (DOMElements.userNavMenu && !DOMElements.userNavMenu.contains(event.target) && DOMElements.userNavTrigger.getAttribute('aria-expanded') === 'true') {
                            Modules.UserMenu.close();
                        }
                    },
                    logout: () => {
                        alert('Fungsi keluar berhasil dipanggil. Anda akan diarahkan ke halaman login.');
                        // window.location.href = '/login.html'; // Implement actual logout
                        Modules.UserMenu.close();
                    }
                },

                Tabs: {
                    init: () => {
                        document.querySelectorAll('.tabs').forEach(tabsContainer => {
                            const triggers = tabsContainer.querySelectorAll('.tab-trigger');
                            const contents = tabsContainer.querySelectorAll('.tab-content');

                            triggers.forEach(trigger => {
                                trigger.addEventListener('click', () => {
                                    const tabId = trigger.dataset.tab;
                                    const targetContent = tabsContainer.querySelector(`#${tabId}-content`);

                                    Utils.setActive(triggers, trigger);
                                    trigger.setAttribute('aria-selected', 'true');
                                    triggers.forEach(t => { if (t !== trigger) t.setAttribute('aria-selected', 'false'); });

                                    Utils.setActive(contents, targetContent);
                                });
                            });
                            // Activate first tab by default if none is active
                            if (tabsContainer.querySelector('.tab-trigger.active') === null && triggers.length > 0) {
                                triggers[0].click();
                            }
                        });
                    }
                },

                Map: {
                    init: () => {
                        const mapContainer = document.getElementById('map');
                        if (!mapContainer || state.mapInstance) return; // Already initialized or no container

                        try {
                            state.mapInstance = L.map(mapContainer).setView([-6.2088, 106.8456], 12); // Jakarta
                            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                                maxZoom: 19,
                            }).addTo(state.mapInstance);

                            // Sample markers
                            const apartments = [
                                { name: 'Apartemen Taman Anggrek', coords: [-6.1765, 106.7922], info: '2 Kamar, Rp 3.2jt/bln' },
                                { name: 'Apartemen Sudirman Park', coords: [-6.2070, 106.8165], info: '1 Kamar, Rp 2.4jt/bln' },
                                { name: 'Apartemen Bassura City', coords: [-6.2250, 106.8837], info: 'Studio, Rp 2jt/bln' }
                            ];

                            apartments.forEach(apt => {
                                L.marker(apt.coords).addTo(state.mapInstance)
                                    .bindPopup(`<b>${Utils.escapeHTML(apt.name)}</b><br>${Utils.escapeHTML(apt.info)}`);
                            });
                            // Invalidate size after a short delay to ensure map renders correctly
                            setTimeout(() => {
                                if (state.mapInstance) state.mapInstance.invalidateSize();
                            }, 100);

                        } catch (error) {
                            console.error("Gagal memuat peta:", error);
                            if (mapContainer) mapContainer.innerHTML = '<p class="text-center text-destructive p-4">Gagal memuat peta. Pastikan koneksi internet Anda stabil.</p>';
                        }
                    }
                },

                Notifications: {
                    init: () => {
                        Modules.Notifications.updateBadge();
                        DOMElements.markAllAsReadButton?.addEventListener('click', Modules.Notifications.markAllAsRead);
                    },
                    render: () => {
                        if (!DOMElements.notificationListContainer) return;

                        const unreadNotifications = state.notifications.filter(n => !n.read);
                        const readNotifications = state.notifications.filter(n => n.read);

                        let html = '<div class="space-y-4">';

                        if (unreadNotifications.length > 0) {
                            html += '<h3 class="text-md font-semibold text-muted-foreground">Belum Dibaca</h3>';
                            unreadNotifications.forEach(n => html += Modules.Notifications.createNotificationHTML(n));
                        }

                        if (readNotifications.length > 0) {
                            html += '<h3 class="text-md font-semibold text-muted-foreground mt-6">Sudah Dibaca</h3>';
                            readNotifications.forEach(n => html += Modules.Notifications.createNotificationHTML(n));
                        }

                        if (state.notifications.length === 0) {
                            DOMElements.emptyNotificationState.style.display = 'flex';
                            DOMElements.notificationListContainer.innerHTML = ''; // Clear previous list
                        } else {
                            DOMElements.emptyNotificationState.style.display = 'none';
                            DOMElements.notificationListContainer.innerHTML = html + '</div>';
                            Modules.Notifications.addEventListeners();
                        }
                        Modules.Notifications.updateBadge();
                    },
                    createNotificationHTML: (notification) => {
                        const iconMap = {
                            warning: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',
                            success: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',
                            info: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>',
                        };
                        const badgeColor = {
                            warning: 'bg-warning',
                            success: 'bg-success',
                            info: 'bg-info'
                        };
                        const escapedTitle = Utils.escapeHTML(notification.title);
                        const escapedMessage = Utils.escapeHTML(notification.message);
                        const timeAgo = Modules.Notifications.timeAgo(notification.date);

                        return `
                        <div class="notification-item flex items-start gap-3 p-3 border rounded-lg ${notification.read ? 'bg-muted opacity-70' : 'bg-card hover:bg-secondary'} transition-colors" data-id="${notification.id}">
                            <div class="avatar avatar-sm rounded-full ${badgeColor[notification.type] || 'bg-primary'} text-primary-foreground flex-shrink-0 mt-1">
                                ${iconMap[notification.type] || iconMap.info}
                            </div>
                            <div class="flex-grow">
                                <div class="flex justify-between items-center">
                                    <h4 class="font-semibold">${escapedTitle}</h4>
                                    <small class="text-muted-foreground whitespace-nowrap">${timeAgo}</small>
                                </div>
                                <p class="text-sm text-muted-foreground">${escapedMessage}</p>
                            </div>
                            ${!notification.read ? `<button class="button button-ghost button-sm mark-read-btn" data-id="${notification.id}" aria-label="Tandai sebagai terbaca">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                            </button>` : ''}
                        </div>
                    `;
                    },
                    addEventListeners: () => {
                        DOMElements.notificationListContainer.querySelectorAll('.mark-read-btn').forEach(button => {
                            button.addEventListener('click', (e) => {
                                e.stopPropagation();
                                const id = parseInt(e.currentTarget.dataset.id);
                                Modules.Notifications.markAsRead(id);
                            });
                        });
                    },
                    markAsRead: (id) => {
                        const notification = state.notifications.find(n => n.id === id);
                        if (notification) notification.read = true;
                        Modules.Notifications.render();
                    },
                    markAllAsRead: () => {
                        state.notifications.forEach(n => n.read = true);
                        Modules.Notifications.render();
                    },
                    updateBadge: () => {
                        const unreadCount = state.notifications.filter(n => !n.read).length;
                        if (DOMElements.notificationBadge) {
                            DOMElements.notificationBadge.textContent = unreadCount;
                            DOMElements.notificationBadge.style.display = unreadCount > 0 ? 'inline-flex' : 'none';
                        }
                        if (DOMElements.dashboardNotificationCount) {
                            DOMElements.dashboardNotificationCount.textContent = unreadCount;
                        }
                    },
                    timeAgo: (dateString) => {
                        const date = new Date(dateString);
                        const now = new Date();
                        const seconds = Math.round((now - date) / 1000);
                        const minutes = Math.round(seconds / 60);
                        const hours = Math.round(minutes / 60);
                        const days = Math.round(hours / 24);

                        if (seconds < 60) return `${seconds} dtk lalu`;
                        if (minutes < 60) return `${minutes} mnt lalu`;
                        if (hours < 24) return `${hours} jam lalu`;
                        if (days < 7) return `${days} hr lalu`;
                        return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' });
                    }
                }
            };

            // Application Initialization
            const init = () => {
                Modules.Splash.init(); // Prepare splash
                Modules.Theme.init();
                Modules.Sidebar.init();
                Modules.Navigation.init(); // This will load initial page
                Modules.UserMenu.init();
                Modules.Tabs.init();
                Modules.Notifications.init(); // Must be after Nav to update badge on initial load

                // Simulate app loading and hide splash
                setTimeout(() => {
                    Modules.Splash.hide();
                }, 1500); // Adjust delay as needed

                console.log("RentEase App Initialized");
            };

            // Public API (if needed, e.g., for navigating from buttons outside the sidebar)
            return {
                init,
                navigateTo: Modules.Navigation.navigate,
                // Expose other modules or functions if necessary
            };

        })();

        // Initialize the application when DOM is ready
        document.addEventListener('DOMContentLoaded', AppCore.init);

    </script>
</body>

</html>