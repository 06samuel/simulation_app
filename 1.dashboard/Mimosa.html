<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rental Apartemen Elite</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Design System */
    :root {
      --primary: #0070f3;
      --primary-foreground: #ffffff;
      --secondary: #f5f5f5;
      --secondary-foreground: #1f2937;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --background: #ffffff;
      --foreground: #1f2937;
      --card: #ffffff;
      --card-foreground: #1f2937;
      --border: #e5e7eb;
      --spacing-xs: 0.25rem;
      --spacing-sm: 0.5rem;
      --spacing-md: 1rem;
      --spacing-lg: 1.5rem;
      --spacing-xl: 2rem;
      --radius-sm: 0.25rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --transition-fast: all 0.2s ease-in-out;
      --font-family: 'Inter', sans-serif;
    }

    /* Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font-family); background: var(--secondary); color: var(--foreground); line-height: 1.6; }
    a { text-decoration: none; color: inherit; }
    button, input, select, textarea { font-family: inherit; }

    /* Additional Custom Utilities */
    .justify-between { justify-content: space-between; }
    .items-center { align-items: center; }
    .text-primary { color: var(--primary); }
    .text-sm { font-size: 0.875rem; }
    .text-lg { font-size: 1.25rem; }
    .font-bold { font-weight: 700; }
    .border-none { border: none; }
    .bg-transparent { background: transparent; }
    .cursor-pointer { cursor: pointer; }
    .overflow-hidden { overflow: hidden; }
    .relative { position: relative; }
    .absolute { position: absolute; }
    .z-10 { z-index: 10; }
    .h-full { height: 100%; }
    .w-50 { width: 50%; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .py-sm { padding-top: var(--spacing-sm); padding-bottom: var(--spacing-sm); }
    .px-md { padding-left: var(--spacing-md); padding-right: var(--spacing-md); }

    /* Existing Utilities */
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .flex-center { justify-content: center; align-items: center; }
    .gap-xs { gap: var(--spacing-xs); }
    .gap-sm { gap: var(--spacing-sm); }
    .gap-md { gap: var(--spacing-md); }
    .gap-lg { gap: var(--spacing-lg); }
    .mt-xs { margin-top: var(--spacing-xs); }
    .mt-sm { margin-top: var(--spacing-sm); }
    .mt-md { margin-top: var(--spacing-md); }
    .mt-lg { margin-top: var(--spacing-lg); }
    .mb-sm { margin-bottom: var(--spacing-sm); }
    .mb-md { margin-bottom: var(--spacing-md); }
    .mb-lg { margin-bottom: var(--spacing-lg); }
    .p-sm { padding: var(--spacing-sm); }
    .p-md { padding: var(--spacing-md); }
    .p-lg { padding: var(--spacing-lg); }
    .text-center { text-align: center; }
    .w-full { width: 100%; }
    .rounded { border-radius: var(--radius-md); }
    .shadow { box-shadow: var(--shadow-md); }
    .hidden { display: none; }
    .fade-in { opacity: 0; transform: translateY(20px); transition: all 0.5s ease-out; }
    .fade-in.visible { opacity: 1; transform: translateY(0); }

    /* Layout */
    .container { max-width: 1200px; margin: 0 auto; padding: var(--spacing-md); }
    .section { padding: var(--spacing-xl) 0; }
    .grid { display: grid; gap: var(--spacing-lg); }
    .grid-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-auto { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }

    /* Navigation */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--background);
      padding: var(--spacing-md) 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow-sm);
    }
    .nav-brand { font-size: 1.5rem; font-weight: 700; color: var(--primary); }
    .nav-links { display: flex; gap: var(--spacing-lg); list-style: none; }
    .nav-link { font-weight: 500; padding: var(--spacing-sm) 0; cursor: pointer; position: relative; }
    .nav-link:hover::after, .nav-link.is-active::after {
      content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px; background: var(--primary);
    }

    /* Buttons */
    .btn {
      padding: var(--spacing-sm) var(--spacing-lg);
      border-radius: var(--radius-md);
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition-fast);
      border: none;
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    .btn-primary { background: var(--primary); color: var(--primary-foreground); }
    .btn-primary:hover { background: #005bb5; transform: translateY(-2px); }
    .btn-outline { background: transparent; border: 1px solid var(--border); }
    .btn-outline:hover { border-color: var(--primary); color: var(--primary); }
    .btn-success { background: var(--success); color: var(--primary-foreground); }
    .btn-danger { background: var(--danger); color: var(--primary-foreground); }

    /* Card Styles */
    .property-card {
      background: var(--card);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-md);
      transition: var(--transition-fast);
    }
    .property-card:hover { transform: translateY(-5px); }
    .property-card img { width: 100%; height: 200px; object-fit: cover; }
    .property-card figcaption { padding: var(--spacing-md); }
    .property-card h3 { font-size: 1.2rem; margin-bottom: var(--spacing-sm); display: flex; align-items: center; gap: var(--spacing-sm); }
    .property-details { display: flex; justify-content: space-between; margin-bottom: var(--spacing-sm); }
    .price { color: var(--primary); font-weight: 600; }
    .location { display: flex; align-items: center; gap: var(--spacing-xs); color: var(--secondary-foreground); }
    .property-features { display: flex; flex-wrap: wrap; gap: var(--spacing-md); color: var(--secondary-foreground); }
    details { padding: var(--spacing-md); border-top: 1px solid var(--border); }
    summary { cursor: pointer; color: var(--primary); font-weight: 500; }
    blockquote { border-left: 3px solid var(--primary); padding-left: var(--spacing-md); margin: var(--spacing-md) 0; font-style: italic; }

    /* Search and Filter */
    .search-form { background: var(--card); padding: var(--spacing-lg); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); }
    .filter-group { margin-bottom: var(--spacing-md); }
    .filter-group label { display: block; font-weight: 500; margin-bottom: var(--spacing-sm); }
    .filter-group input, .filter-group select { padding: var(--spacing-sm); border: 1px solid var(--border); border-radius: var(--radius-sm); width: 100%; }
    .map-canvas { width: 100%; height: 300px; background: var(--secondary); border-radius: var(--radius-md); }

    /* Calendar */
    .calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: var(--spacing-xs); }
    .calendar-day { padding: var(--spacing-sm); text-align: center; border-radius: var(--radius-sm); cursor: pointer; }
    .calendar-day.available { background: var(--success); color: var(--primary-foreground); }
    .calendar-day.booked { background: var(--warning); color: var(--primary-foreground); cursor: not-allowed; }
    .calendar-day.selected { background: var(--primary); color: var(--primary-foreground); }

    /* Gallery and Virtual Tour */
    .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md); }
    .gallery img { width: 100%; height: 150px; object-fit: cover; border-radius: var(--radius-md); transition: transform 0.3s; }
    .gallery img:hover { transform: scale(1.1); }
    .virtual-tour { position: relative; overflow: hidden; }
    .virtual-tour img { transition: transform 0.5s ease; }
    .virtual-tour:hover img { transform: rotate(5deg) scale(1.1); }

    /* Chat System */
    .chat-window { height: 300px; overflow-y: auto; border: 1px solid var(--border); padding: var(--spacing-md); border-radius: var(--radius-md); }
    .chat-message { margin-bottom: var(--spacing-sm); padding: var(--spacing-sm); border-radius: var(--radius-md); }
    .chat-message.sent { background: var(--primary); color: var(--primary-foreground); margin-left: 20%; }
    .chat-message.received { background: var(--secondary); margin-right: 20%; }

    /* Payment Methods */
    .payment-methods { display: flex; gap: var(--spacing-md); }
    .payment-method { padding: var(--spacing-sm); border: 1px solid var(--border); border-radius: var(--radius-md); cursor: pointer; transition: var(--transition-fast); }
    .payment-method.selected { border-color: var(--primary); background: #bfdbfe; }

    /* Cost Breakdown */
    .cost-breakdown { background: var(--card); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-md); }
    .cost-breakdown h3 { margin-bottom: var(--spacing-sm); }
    .cost-line { display: flex; justify-content: space-between; margin-bottom: var(--spacing-sm); }
    .total { font-weight: bold; font-size: 1.2rem; }

    /* Escrow Info */
    .escrow-info { background: #fef9c3; padding: var(--spacing-sm); border-left: 4px solid gold; margin: var(--spacing-md) 0; }

    /* Chatbox */
    .chatbox {
      position: fixed;
      bottom: 80px;
      right: var(--spacing-lg);
      background: var(--card);
      width: 300px;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-md);
      display: none;
      flex-direction: column;
      height: 400px;
    }
    .chat-header {
      background: var(--primary);
      color: var(--primary-foreground);
      padding: var(--spacing-sm);
      border-top-left-radius: var(--radius-md);
      border-top-right-radius: var(--radius-md);
    }
    .chat-body {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-sm);
    }
    .chat-input {
      display: flex;
      padding: var(--spacing-sm);
      border-top: 1px solid var(--border);
    }
    .chat-input input {
      flex: 1;
      padding: var(--spacing-sm);
      border: 1px solid var(--border);
      border-right: none;
      border-top-left-radius: var(--radius-sm);
      border-bottom-left-radius: var(--radius-sm);
    }
    .chat-input button {
      padding: var(--spacing-sm);
      border: 1px solid var(--border);
      background: var(--primary);
      color: var(--primary-foreground);
      border-top-right-radius: var(--radius-sm);
      border-bottom-right-radius: var(--radius-sm);
    }

    /* Loyalty Badge */
    .loyalty-badge {
      background: var(--warning);
      color: var(--primary-foreground);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
    }

    /* Report Form */
    .report-form { background: var(--card); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-md); }
    .report-form textarea { resize: vertical; min-height: 100px; }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .grid-3 { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 768px) {
      .navbar { flex-direction: column; gap: var(--spacing-md); }
      .nav-links { flex-direction: column; align-items: center; }
      .grid-3, .grid-2 { grid-template-columns: 1fr; }
      .search-form { grid-template-columns: 1fr; }
      .chatbox { width: 90%; }
    }

    /* Accessibility */
    @media (prefers-reduced-motion: reduce) {
      * { transition-duration: 0.01ms !important; }
    }
    [tabindex="0"]:focus, button:focus, input:focus, select:focus, textarea:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <header class="container">
    <nav class="navbar">
      <div class="nav-brand">EliteRent</div>
      <ul class="nav-links">
        <li><span class="nav-link is-active" data-page="home">Beranda</span></li>
        <li><span class="nav-link" data-page="search">Pencarian</span></li>
        <li><span class="nav-link" data-page="profile">Profil</span></li>
        <li><span class="nav-link" data-page="support">Dukungan</span></li>
        <li><span class="nav-link" data-page="admin">Admin</span></li>
      </ul>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="container">
    <!-- Home Page -->
    <section id="home" class="section page fade-in">
      <h1 class="text-center">Temukan Apartemen Impian Anda</h1>
      <p class="text-center mb-lg">Jelajahi apartemen modern dengan fasilitas premium</p>

      <!-- Quick Search -->
      <form class="search-form mb-lg">
        <div class="grid-3">
          <div class="filter-group">
            <label for="quick-location">Lokasi</label>
            <input type="text" id="quick-location" placeholder="Masukkan kota atau area" aria-label="Cari lokasi">
          </div>
          <div class="filter-group">
            <label for="quick-checkin">Check-in</label>
            <input type="date" id="quick-checkin" aria-label="Tanggal check-in">
          </div>
          <div class="filter-group">
            <label for="quick-checkout">Check-out</label>
            <input type="date" id="quick-checkout" aria-label="Tanggal check-out">
          </div>
        </div>
        <button type="submit" class="btn btn-primary mt-md"><span class="material-icons">search</span>Cari Sekarang</button>
      </form>

      <!-- Featured Properties -->
      <h2>Properti Unggulan</h2>
      <div class="grid grid-auto">
        <figure class="property-card">
          <img src="https://source.unsplash.com/random/800x600/?apartment" alt="Luxury Penthouse" loading="lazy">
          <figcaption>
            <h3>Luxury Penthouse <span class="material-icons verified-icon" title="Pemilik Terverifikasi">verified</span></h3>
            <div class="property-details">
              <span class="price">$2,500/bln</span>
              <span class="location"><i class="material-icons">location_on</i> Pusat Kota</span>
            </div>
            <div class="property-features">
              <span><i class="material-icons">hotel</i> 3 BR</span>
              <span><i class="material-icons">square_foot</i> 2000 sqft</span>
              <span><i class="material-icons">pool</i> Kolam</span>
            </div>
            <blockquote>
              <p>"Pemandangan kota yang luar biasa dan fasilitas terbaik!"</p>
              <footer>- John Doe <span class="material-icons report-icon" tabindex="0" onclick="showReportForm(1)" title="Laporkan Ulasan">report</span></footer>
            </blockquote>
          </figcaption>
          <details>
            <summary>Detail Lebih Lanjut</summary>
            <p>Apartemen modern dengan pemandangan kota, gym, dan keamanan 24/7.</p>
            <button class="btn btn-primary" onclick="navigateToDetail(1)">Lihat Detail</button>
          </details>
        </figure>
        <figure class="property-card">
          <img src="https://source.unsplash.com/random/800x600/?modern-apartment" alt="Modern Studio" loading="lazy">
          <figcaption>
            <h3>Modern Studio <span class="material-icons verified-icon" title="Pemilik Terverifikasi">verified</span></h3>
            <div class="property-details">
              <span class="price">$1,200/bln</span>
              <span class="location"><i class="material-icons">location_on</i> Pusat Kota</span>
            </div>
            <div class="property-features">
              <span><i class="material-icons">hotel</i> Studio</span>
              <span><i class="material-icons">square_foot</i> 500 sqft</span>
              <span><i class="material-icons">wifi</i> WiFi</span>
            </div>
            <blockquote>
              <p>"Cocok untuk profesional muda!"</p>
              <footer>- Jane Smith <span class="material-icons report-icon" tabindex="0" onclick="showReportForm(2)" title="Laporkan Ulasan">report</span></footer>
            </blockquote>
          </figcaption>
          <details>
            <summary>Detail Lebih Lanjut</summary>
            <p>Studio kompak dengan fasilitas modern di lingkungan yang dinamis.</p>
            <button class="btn btn-primary" onclick="navigateToDetail(2)">Lihat Detail</button>
          </details>
        </figure>
        <figure class="property-card">
          <img src="https://source.unsplash.com/random/800x600/?luxury-condo" alt="Family Apartment" loading="lazy">
          <figcaption>
            <h3>Family Apartment <span class="material-icons verified-icon" title="Pemilik Terverifikasi">verified</span></h3>
            <div class="property-details">
              <span class="price">$1,800/bln</span>
              <span class="location"><i class="material-icons">location_on</i> Pinggiran Kota</span>
            </div>
            <div class="property-features">
              <span><i class="material-icons">hotel</i> 2 BR</span>
              <span><i class="material-icons">square_foot</i> 1200 sqft</span>
              <span><i class="material-icons">local_parking</i> Parkir</span>
            </div>
            <blockquote>
              <p>"Luas dan nyaman untuk keluarga!"</p>
              <footer>- Sarah Johnson <span class="material-icons report-icon" tabindex="0" onclick="showReportForm(3)" title="Laporkan Ulasan">report</span></footer>
            </blockquote>
          </figcaption>
          <details>
            <summary>Detail Lebih Lanjut</summary>
            <p>Apartemen luas cocok untuk keluarga dengan fasilitas lengkap.</p>
            <button class="btn btn-primary" onclick="navigateToDetail(3)">Lihat Detail</button>
          </details>
        </figure>
      </div>

      <!-- Why Choose Us -->
      <h2 class="mt-lg">Mengapa Memilih Kami</h2>
      <div class="grid grid-3">
        <div class="card p-md">
          <h3>Pembayaran Aman</h3>
          <p>Transaksi dilindungi escrow dengan berbagai opsi pembayaran.</p>
        </div>
        <div class="card p-md">
          <h3>Dukungan 24/7</h3>
          <p>Hubungi tim kami kapan saja melalui chat, email, atau telepon.</p>
        </div>
        <div class="card p-md">
          <h3>Pemilik Terverifikasi</h3>
          <p>Semua pemilik diverifikasi identitas untuk keamanan Anda.</p>
        </div>
      </div>

      <!-- Testimonials -->
      <h2 class="mt-lg">Testimoni</h2>
      <div class="grid grid-auto">
        <div class="card p-md">
          <blockquote>
            <p>"Menemukan apartemen impian saya hanya dalam beberapa klik!"</p>
            <footer>- Sarah Johnson</footer>
          </blockquote>
        </div>
        <div class="card p-md">
          <blockquote>
            <p>"Proses pemesanan yang mulus dan aman."</p>
            <footer>- Michael Lee</footer>
          </blockquote>
        </div>
      </div>
    </section>

    <!-- Search Page -->
    <section id="search" class="section page fade-in hidden">
      <h1>Cari Apartemen</h1>
      <div class="grid-2">
        <div>
          <form class="search-form">
            <div class="filter-group">
              <label>Lokasi</label>
              <canvas class="map-canvas" id="searchMap" aria-label="Peta interaktif"></canvas>
              <input type="range" min="1" max="10" value="5" id="radiusSlider" aria-label="Filter radius">
              <p>Radius: <span id="radiusValue">5</span> km</p>
            </div>
            <div class="filter-group">
              <label>Tanggal</label>
              <div class="calendar" id="searchCalendar" role="grid" aria-label="Kalender ketersediaan"></div>
            </div>
            <div class="filter-group">
              <label>Rentang Harga</label>
              <input type="range" min="500" max="5000" value="2500" id="priceSlider" aria-label="Filter harga">
              <p>Maks: $<span id="priceValue">2500</span></p>
            </div>
            <div class="filter-group">
              <label>Fasilitas</label>
              <div class="flex-col gap-sm">
                <label><input type="checkbox" value="pool" aria-label="Kolam Renang"> Kolam Renang</label>
                <label><input type="checkbox" value="gym" aria-label="Gym"> Gym</label>
                <label><input type="checkbox" value="wifi" aria-label="WiFi"> WiFi</label>
                <label><input type="checkbox" value="parking" aria-label="Parkir"> Parkir</label>
                <label><input type="checkbox" value="ac" aria-label="AC"> AC</label>
                <label><input type="checkbox" value="laundry" aria-label="Laundry"> Laundry</label>
              </div>
            </div>
            <div class="filter-group">
              <label for="apartment-type">Tipe Apartemen</label>
              <select id="apartment-type" aria-label="Filter tipe apartemen">
                <option value="">Semua Tipe</option>
                <option value="studio">Studio</option>
                <option value="1br">1 Kamar</option>
                <option value="2br">2 Kamar</option>
                <option value="3br">3 Kamar+</option>
                <option value="penthouse">Penthouse</option>
                <option value="family">Keluarga</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary mt-md"><span class="material-icons">filter_alt</span>Terapkan Filter</button>
          </form>
        </div>
        <div>
          <h2>Hasil Pencarian</h2>
          <div class="grid grid-auto" id="searchResults"></div>
        </div>
      </div>
    </section>

    <!-- Apartment Detail Page -->
    <section id="apartment" class="section page fade-in hidden">
      <h1 id="apartment-title"></h1>
      <div class="gallery mb-lg">
        <div class="virtual-tour">
          <img src="https://source.unsplash.com/random/800x600/?apartment,interior" alt="Tur Virtual Interior Apartemen" loading="lazy">
        </div>
        <img src="https://source.unsplash.com/random/400x300/?bedroom" alt="Kamar Tidur" loading="lazy">
        <img src="https://source.unsplash.com/random/400x300/?kitchen" alt="Dapur" loading="lazy">
        <img src="https://source.unsplash.com/random/400x300/?living-room" alt="Ruang Tamu" loading="lazy">
      </div>
      <div class="grid-2">
        <div>
          <h2>Detail</h2>
          <p>Harga: <span id="apartment-price"></span></p>
          <p>Lokasi: <span id="apartment-location"></span></p>
          <p>Fasilitas: <span id="apartment-amenities"></span></p>
          <canvas class="map-canvas" id="apartmentMap" aria-label="Peta lokasi apartemen"></canvas>
          <p><a href="https://maps.google.com" target="_blank" aria-label="Lihat di Google Maps">Lihat di Google Maps</a></p>
          <h3>Ulasan</h3>
          <div id="apartment-reviews"></div>
          <form class="report-form hidden" id="report-form">
            <h3>Laporkan Ulasan</h3>
            <div class="filter-group">
              <label for="report-reason">Alasan Pelaporan</label>
              <textarea id="report-reason" placeholder="Jelaskan alasan pelaporan" aria-label="Alasan pelaporan"></textarea>
            </div>
            <button type="submit" class="btn btn-danger">Kirim Laporan</button>
            <button type="button" class="btn btn-outline" onclick="hideReportForm()">Batal</button>
          </form>
        </div>
        <div>
          <h2>Pesan Sekarang</h2>
          <form class="booking-form">
            <div class="filter-group">
              <label for="book-checkin">Check-in</label>
              <input type="date" id="book-checkin" required aria-label="Tanggal check-in pemesanan">
            </div>
            <div class="filter-group">
              <label for="book-checkout">Check-out</label>
              <input type="date" id="book-checkout" required aria-label="Tanggal check-out pemesanan">
            </div>
            <div class="filter-group">
              <label for="guests">Tamu</label>
              <input type="number" id="guests" min="1" value="1" required aria-label="Jumlah tamu">
            </div>
            <div class="filter-group">
              <label>Metode Pembayaran</label>
              <div class="payment-methods" role="radiogroup" aria-label="Pilih metode pembayaran">
                <div class="payment-method" data-method="credit" tabindex="0" role="radio" aria-checked="false">Kartu Kredit</div>
                <div class="payment-method" data-method="bank" tabindex="0" role="radio" aria-checked="false">Transfer Bank</div>
                <div class="payment-method" data-method="ewallet" tabindex="0" role="radio" aria-checked="false">E-Wallet</div>
              </div>
            </div>
            <div class="filter-group">
              <label><input type="checkbox" id="insurance" aria-label="Tambah asuransi"> Tambah Asuransi (+10%)</label>
            </div>
            <div class="cost-breakdown hidden" id="cost-breakdown">
              <h3>Rincian Biaya</h3>
              <div class="cost-line"><span>Sewa</span><span id="base-cost"></span></div>
              <div class="cost-line"><span>Biaya Layanan</span><span id="service-cost"></span></div>
              <div class="cost-line"><span>Asuransi</span><span id="insurance-cost"></span></div>
              <div class="cost-line total"><span>Total</span><span id="total-cost"></span></div>
            </div>
            <p class="escrow-info">Pembayaran dijamin aman melalui sistem escrow hingga check-in.</p>
            <button type="submit" class="btn btn-primary"><span class="material-icons">book</span>Konfirmasi Pemesanan</button>
          </form>
        </div>
      </div>
    </section>

    <!-- Profile Page -->
    <section id="profile" class="section page fade-in hidden">
      <h1>Profil Pengguna</h1>
      <div class="grid-2">
        <div class="card p-lg">
          <h2>Informasi Akun</h2>
          <p>Nama: Jane Doe</p>
          <p>Email: jane@example.com</p>
          <p>Poin Loyalitas: <span class="loyalty-badge">150</span></p>
          <button class="btn btn-outline mt-sm">Edit Profil</button>
        </div>
        <div class="card p-lg">
          <h2>Pesan</h2>
          <div class="chat-window" id="chatWindow" aria-live="polite">
            <div class="chat-message sent">Apakah apartemen tersedia?</div>
            <div class="chat-message received">Ya, tersedia!</div>
          </div>
          <input type="text" id="chatInput" placeholder="Ketik pesan..." aria-label="Input chat">
          <button class="btn btn-primary mt-sm" onclick="sendMessage()">Kirim</button>
        </div>
      </div>
      <h2 class="mt-lg">Riwayat Pemesanan</h2>
      <div class="grid grid-auto" id="booking-history">
        <div class="card p-md">
          <h3>Luxury Penthouse</h3>
          <p>Check-in: 2025-06-01</p>
          <p>Check-out: 2025-06-07</p>
          <p>Total: $17,500</p>
        </div>
        <div class="card p-md">
          <h3>Modern Studio</h3>
          <p>Check-in: 2025-07-01</p>
          <p>Check-out: 2025-07-15</p>
          <p>Total: $16,800</p>
        </div>
      </div>
      <h2 class="mt-lg">Notifikasi</h2>
      <div class="card p-md">
        <p>Pengingat: Check-in untuk Luxury Penthouse dalam 2 hari.</p>
      </div>
    </section>

    <!-- Support Page -->
    <section id="support" class="section page fade-in hidden">
      <h1>Dukungan Pelanggan</h1>
      <div class="grid-3">
        <div class="card p-md">
          <h2>Live Chat</h2>
          <button class="btn btn-primary" onclick="openChat()">Mulai Chat</button>
        </div>
        <div class="card p-md">
          <h2>Email</h2>
          <p><a href="mailto:support@eliterent.com">support@eliterent.com</a></p>
        </div>
        <div class="card p-md">
          <h2>Telepon</h2>
          <p><a href="tel:+628001234567">+62-800-123-4567</a></p>
        </div>
      </div>
    </section>

    <!-- Admin Dashboard -->
    <section id="admin" class="section page fade-in hidden">
      <h1>Dashboard Admin</h1>
      <div class="grid grid-3 mb-lg">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Total Apartemen</h5>
            <h2>120</h2>
            <span class="badge bg-primary">Tersedia</span>
          </div>
        </div>
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Total Penyewa</h5>
            <h2>234</h2>
            <span class="badge bg-success">Aktif</span>
          </div>
        </div>
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Pesanan Aktif</h5>
            <h2>18</h2>
            <span class="badge bg-warning text-dark">Diproses</span>
          </div>
        </div>
      </div>
      <div class="card mb-lg">
        <div class="card-header flex justify-between items-center">
          <h5 class="mb-0">Daftar Penyewa Terbaru</h5>
          <button class="btn btn-primary btn-sm"><i class="material-icons">add_circle</i> Tambah Penyewa</button>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead>
                <tr>
                  <th>ID Penyewa</th>
                  <th>Nama</th>
                  <th>Status</th>
                  <th>Apartemen</th>
                  <th>Terakhir Aktif</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#P001</td>
                  <td>John Doe</td>
                  <td><span class="badge bg-success">Aktif</span></td>
                  <td>Unit A-12</td>
                  <td>2 menit lalu</td>
                  <td>
                    <button class="btn btn-sm btn-primary"><i class="material-icons">edit</i></button>
                    <button class="btn btn-sm btn-danger"><i class="material-icons">delete</i></button>
                  </td>
                </tr>
                <tr>
                  <td>#P002</td>
                  <td>Jane Smith</td>
                  <td><span class="badge bg-danger">Nonaktif</span></td>
                  <td>Unit B-05</td>
                  <td>5 hari lalu</td>
                  <td>
                    <button class="btn btn-sm btn-primary"><i class="material-icons">edit</i></button>
                    <button class="btn btn-sm btn-danger"><i class="material-icons">delete</i></button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="alert alert-info">
        <i class="material-icons">info</i> Data dashboard menampilkan statistik apartemen, penyewa, dan pesanan secara real-time.
      </div>
    </section>
  </main>

  <!-- Chatbox -->
  <button class="message-btn btn btn-primary" id="messageBtn" aria-label="Buka chat"><span class="material-icons">chat</span></button>
  <div class="chatbox" id="chatbox">
    <div class="chat-header">Dukungan Pelanggan</div>
    <div class="chat-body" id="chatBody" aria-live="polite">
      <div class="chat-message system">Selamat datang! Bagaimana kami dapat membantu Anda?</div>
    </div>
    <div class="chat-input">
      <input type="text" id="supportChatInput" placeholder="Ketik pesan..." aria-label="Input chat dukungan">
      <button onclick="sendSupportMessage()" aria-label="Kirim pesan">Kirim</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center p-lg" style="background: var(--foreground); color: var(--primary-foreground);">
    <p>Â© 2025 EliteRent. Hak cipta dilindungi.</p>
  </footer>

  <script>
    // Mock Data
    const apartments = [
      {
        id: 1,
        title: 'Luxury Penthouse',
        price: 2500,
        location: 'Pusat Kota',
        bedrooms: 3,
        sqft: 2000,
        type: 'penthouse',
        amenities: ['pool', 'gym', 'wifi', 'parking', 'ac'],
        images: [
          'https://source.unsplash.com/random/800x600/?apartment',
          'https://source.unsplash.com/random/400x300/?bedroom',
          'https://source.unsplash.com/random/400x300/?kitchen',
          'https://source.unsplash.com/random/400x300/?living-room'
        ],
        description: 'Apartemen modern dengan pemandangan kota, gym, dan keamanan 24/7.',
        reviews: [
          { user: 'John Doe', comment: 'Pemandangan kota yang luar biasa dan fasilitas terbaik!', rating: 5 },
          { user: 'Michael Lee', comment: 'Layanan dan pemandangan luar biasa!', rating: 4 }
        ],
        status: 'available',
        bookedDates: []
      },
      {
        id: 2,
        title: 'Modern Studio',
        price: 1200,
        location: 'Pusat Kota',
        bedrooms: 0,
        sqft: 500,
        type: 'studio',
        amenities: ['wifi', 'ac', 'laundry'],
        images: [
          'https://source.unsplash.com/random/800x600/?modern-apartment',
          'https://source.unsplash.com/random/400x300/?living-room',
          'https://source.unsplash.com/random/400x300/?bathroom'
        ],
        description: 'Studio kompak cocok untuk profesional muda.',
        reviews: [
          { user: 'Jane Smith', comment: 'Lokasi strategis, sangat bersih!', rating: 4 },
          { user: 'Sarah Johnson', comment: 'Cocok untuk pelancong solo.', rating: 5 }
        ],
        status: 'booked',
        bookedDates: ['2025-06-01', '2025-06-02']
      },
      {
        id: 3,
        title: 'Family Apartment',
        price: 1800,
        location: 'Pinggiran Kota',
        bedrooms: 2,
        sqft: 1200,
        type: 'family',
        amenities: ['parking', 'ac', 'laundry'],
        images: [
          'https://source.unsplash.com/random/800x600/?luxury-condo',
          'https://source.unsplash.com/random/400x300/?bedroom',
          'https://source.unsplash.com/random/400x300/?kitchen'
        ],
        description: 'Apartemen luas cocok untuk keluarga dengan fasilitas lengkap.',
        reviews: [
          { user: 'Sarah Johnson', comment: 'Luas dan nyaman untuk keluarga!', rating: 5 }
        ],
        status: 'available',
        bookedDates: []
      }
    ];

    // SPA Routing with Hash
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.toggle('hidden', page.id !== pageId));
      document.querySelectorAll('.nav-link').forEach(link => link.classList.toggle('is-active', link.dataset.page === pageId));
      loadDynamicContent(pageId);
      window.scrollTo({ top: 0, behavior: 'smooth' });
      window.location.hash = pageId;
    }

    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => showPage(link.dataset.page));
    });

    window.addEventListener('hashchange', () => {
      const pageId = window.location.hash.slice(1) || 'home';
      showPage(pageId);
    });

    window.addEventListener('load', () => {
      const pageId = window.location.hash.slice(1) || 'home';
      showPage(pageId);
    });

    function navigateToDetail(id) {
      localStorage.setItem('selectedApartmentId', id);
      showPage('apartment');
    }

    // Dynamic Content Loading
    function loadDynamicContent(pageId) {
      switch (pageId) {
        case 'search':
          renderSearchResults();
          break;
        case 'apartment':
          renderApartmentDetails();
          break;
        case 'profile':
          renderBookingHistory();
          break;
        default:
          break;
      }
    }

    // Fade-in Animation
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

    // Search and Filter
    const searchForm = document.querySelector('.search-form');
    const searchResults = document.getElementById('searchResults');
    const radiusSlider = document.getElementById('radiusSlider');
    const radiusValue = document.getElementById('radiusValue');
    const priceSlider = document.getElementById('priceSlider');
    const priceValue = document.getElementById('priceValue');

    radiusSlider.addEventListener('input', () => {
      radiusValue.textContent = radiusSlider.value;
      renderSearchResults();
    });

    priceSlider.addEventListener('input', () => {
      priceValue.textContent = priceSlider.value;
      renderSearchResults();
    });

    function renderSearchResults() {
      const location = document.querySelector('#quick-location')?.value.toLowerCase() || '';
      const price = parseInt(priceSlider.value);
      const amenities = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
      const type = document.querySelector('#apartment-type').value;
      const checkin = document.querySelector('#quick-checkin')?.value;
      const checkout = document.querySelector('#quick-checkout')?.value;

      const results = apartments.filter(apartment => {
        const isDateAvailable = !checkin || !checkout || !apartment.bookedDates.some(date => {
          const booked = new Date(date);
          const start = new Date(checkin);
          const end = new Date(checkout);
          return booked >= start && booked <= end;
        });

        return (
          (!location || apartment.location.toLowerCase().includes(location)) &&
          apartment.price <= price &&
          (!amenities.length || amenities.every(amenity => apartment.amenities.includes(amenity))) &&
          (!type || apartment.type === type) &&
          isDateAvailable
        );
      });

      searchResults.innerHTML = results.length ? results.map(apartment => `
        <figure class="property-card">
          <img src="${apartment.images[0]}" alt="${apartment.title}" loading="lazy">
          <figcaption>
            <h3>${apartment.title} <span class="material-icons verified-icon" title="Pemilik Terverifikasi">verified</span></h3>
            <div class="property-details">
              <span class="price">$${apartment.price}/bln</span>
              <span class="location"><i class="material-icons">location_on</i> ${apartment.location}</span>
            </div>
            <div class="property-features">
              <span><i class="material-icons">hotel</i> ${apartment.bedrooms || 'Studio'} BR</span>
              <span><i class="material-icons">square_foot</i> ${apartment.sqft} sqft</span>
            </div>
            <blockquote>
              <p>"${apartment.reviews[0]?.comment || 'Tempat yang luar biasa!'}"</p>
              <footer>- ${apartment.reviews[0]?.user || 'Tamu'} <span class="material-icons report-icon" tabindex="0" onclick="showReportForm(${apartment.id})" title="Laporkan Ulasan">report</span></footer>
            </blockquote>
          </figcaption>
          <details>
            <summary>Detail Lebih Lanjut</summary>
            <p>${apartment.description}</p>
            <button class="btn btn-primary" onclick="navigateToDetail(${apartment.id})">Lihat Detail</button>
          </details>
        </figure>
      `).join('') : '<p class="text-center">Tidak ada hasil ditemukan.</p>';
    }

    searchForm.addEventListener('submit', (e) => {
      e.preventDefault();
      showPage('search');
      renderSearchResults();
    });

    // Calendar
    function renderCalendar(containerId, checkin = null, checkout = null) {
      const calendar = document.getElementById(containerId);
      const today = new Date();
      const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
      const days = Array(daysInMonth).fill().map((_, i) => {
        const date = new Date(today.getFullYear(), today.getMonth(), i + 1);
        const dateStr = date.toISOString().split('T')[0];
        const isBooked = apartments.some(a => a.bookedDates.includes(dateStr));
        return {
          day: i + 1,
          date: dateStr,
          status: isBooked ? 'booked' : 'available',
          selected: dateStr === checkin || dateStr === checkout
        };
      });

      calendar.innerHTML = days.map(day => `
        <div class="calendar-day ${day.status} ${day.selected ? 'selected' : ''}" 
             role="gridcell" 
             aria-label="${day.status} pada ${day.date}" 
             data-date="${day.date}"
             onclick="selectCalendarDate('${containerId}', '${day.date}', ${day.status === 'booked'})">
          ${day.day}
        </div>
      `).join('');
    }

    function selectCalendarDate(containerId, date, isBooked) {
      if (isBooked) return;
      const checkinInput = document.getElementById('book-checkin') || document.getElementById('quick-checkin');
      const checkoutInput = document.getElementById('book-checkout') || document.getElementById('quick-checkout');
      
      if (!checkinInput.value || (checkinInput.value && checkoutInput.value)) {
        checkinInput.value = date;
        checkoutInput.value = '';
      } else if (new Date(date) > new Date(checkinInput.value)) {
        checkoutInput.value = date;
      } else {
        checkinInput.value = date;
        checkoutInput.value = '';
      }
      
      renderCalendar(containerId, checkinInput.value, checkoutInput.value);
    }

    renderCalendar('searchCalendar');

    // Map Simulation
    function drawMap(canvasId, interactive = false) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#e2e8f0';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#10b981';
      ctx.beginPath();
      ctx.arc(canvas.width / 2, canvas.height / 2, 20, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = '#3b82f6';
      ctx.fillRect(canvas.width / 2 - 10, canvas.height / 2 - 40, 20, 20);

      if (interactive) {
        canvas.addEventListener('click', (e) => {
          const rect = canvas.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          ctx.fillStyle = '#ff0000';
          ctx.beginPath();
          ctx.arc(x, y, 5, 0, Math.PI * 2);
          ctx.fill();
        });
      }
    }
    drawMap('searchMap', true);
    drawMap('apartmentMap');

    // Apartment Details
    function renderApartmentDetails() {
      const id = parseInt(localStorage.getItem('selectedApartmentId'));
      const apartment = apartments.find(a => a.id === id);
      if (!apartment) {
        document.getElementById('apartment').innerHTML = '<p class="text-center">Apartemen tidak ditemukan.</p>';
        return;
      }

      document.getElementById('apartment-title').textContent = apartment.title;
      document.getElementById('apartment-price').textContent = `$${apartment.price}/bln`;
      document.getElementById('apartment-location').textContent = apartment.location;
      document.getElementById('apartment-amenities').textContent = apartment.amenities.join(', ');

      const gallery = document.querySelector('.gallery');
      gallery.innerHTML = `
        <div class="virtual-tour">
          <img src="${apartment.images[0]}" alt="Tur Virtual Interior Apartemen" loading="lazy">
        </div>
        ${apartment.images.slice(1).map(img => `
          <img src="${img}" alt="Interior Apartemen" loading="lazy">
        `).join('')}
      `;

      const reviewsContainer = document.getElementById('apartment-reviews');
      reviewsContainer.innerHTML = apartment.reviews.map(review => `
        <blockquote>
          <p>"${review.comment}"</p>
          <footer>- ${review.user} (${review.rating}/5) <span class="material-icons report-icon" tabindex="0" onclick="showReportForm(${apartment.id})" title="Laporkan Ulasan">report</span></footer>
        </blockquote>
      `).join('');

      renderCalendar('searchCalendar', null, null);
    }

    // Booking Form
    const bookingForm = document.querySelector('.booking-form');
    bookingForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const checkin = document.getElementById('book-checkin').value;
      const checkout = document.getElementById('book-checkout').value;
      const guests = document.getElementById('guests').value;
      const insurance = document.getElementById('insurance').checked;
      const paymentMethod = document.querySelector('.payment-method.selected')?.dataset.method;
      const id = parseInt(localStorage.getItem('selectedApartmentId'));
      const apartment = apartments.find(a => a.id === id);

      if (!checkin || !checkout) {
        alert('Silakan pilih tanggal check-in dan check-out.');
        return;
      }

      if (!paymentMethod) {
        alert('Silakan pilih metode pembayaran.');
        return;
      }

      const days = Math.ceil((new Date(checkout) - new Date(checkin)) / (1000 * 60 * 60 * 24));
      if (days <= 0) {
        alert('Tanggal check-out harus setelah tanggal check-in.');
        return;
      }

      const isBooked = apartment.bookedDates.some(date => {
        const booked = new Date(date);
        const start = new Date(checkin);
        const end = new Date(checkout);
        return booked >= start && booked <= end;
      });

      if (isBooked) {
        alert('Tanggal yang dipilih sudah dipesan. Silakan pilih tanggal lain.');
        return;
      }

      const baseCost = apartment.price * days;
      const serviceFee = baseCost * 0.05;
      const insuranceFee = insurance ? baseCost * 0.1 : 0;
      const total = baseCost + serviceFee + insuranceFee;

      document.getElementById('base-cost').textContent = `$${baseCost.toLocaleString()}`;
      document.getElementById('service-cost').textContent = `$${serviceFee.toLocaleString()}`;
      document.getElementById('insurance-cost').textContent = `$${insuranceFee.toLocaleString()}`;
      document.getElementById('total-cost').textContent = `$${total.toLocaleString()}`;
      document.getElementById('cost-breakdown').classList.remove('hidden');

      // Simulate adding booked dates
      const currentDate = new Date(checkin);
      const endDate = new Date(checkout);
      while (currentDate <= endDate) {
        apartment.bookedDates.push(currentDate.toISOString().split('T')[0]);
        currentDate.setDate(currentDate.getDate() + 1);
      }

      alert(`Pemesanan dikonfirmasi untuk ${guests} tamu! Periksa email Anda untuk detailnya.`);
      renderCalendar('searchCalendar');
      updateBookingHistory(apartment, checkin, checkout, total);
    });

    // Payment Method Selection
    document.querySelectorAll('.payment-method').forEach(method => {
      method.addEventListener('click', () => {
        document.querySelectorAll('.payment-method').forEach(m => {
          m.classList.remove('selected');
          m.setAttribute('aria-checked', 'false');
        });
        method.classList.add('selected');
        method.setAttribute('aria-checked', 'true');
      });
      method.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          method.click();
        }
      });
    });

    // Chat System
    function sendMessage() {
      const chatInput = document.getElementById('chatInput');
      const chatWindow = document.getElementById('chatWindow');
      if (chatInput.value.trim()) {
        chatWindow.innerHTML += `
          <div class="chat-message sent">${chatInput.value}</div>
        `;
        chatInput.value = '';
        chatWindow.scrollTop = chatWindow.scrollHeight;
        setTimeout(() => {
          chatWindow.innerHTML += `
            <div class="chat-message received">Terima kasih atas pesan Anda! Kami akan segera merespons.</div>
          `;
          chatWindow.scrollTop = chatWindow.scrollHeight;
        }, 1000);
      }
    }

    // Support Chat
    function sendSupportMessage() {
      const chatInput = document.getElementById('supportChatInput');
      const chatBody = document.getElementById('chatBody');
      if (chatInput.value.trim()) {
        chatBody.innerHTML += `
          <div class="chat-message user"><span>${chatInput.value}</span></div>
        `;
        chatInput.value = '';
        chatBody.scrollTop = chatBody.scrollHeight;
        setTimeout(() => {
          chatBody.innerHTML += `
            <div class="chat-message system"><span>Tim kami akan segera membantu Anda.</span></div>
          `;
          chatBody.scrollTop = chatBody.scrollHeight;
        }, 1000);
      }
    }

    document.getElementById('supportChatInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendSupportMessage();
      }
    });

    // Report Form
    function showReportForm(reviewId) {
      const reportForm = document.getElementById('report-form');
      reportForm.classList.remove('hidden');
      reportForm.onsubmit = (e) => {
        e.preventDefault();
        const reason = document.getElementById('report-reason').value;
        if (reason.trim()) {
          alert(`Laporan untuk ulasan #${reviewId} dikirim: ${reason}`);
          reportForm.classList.add('hidden');
          document.getElementById('report-reason').value = '';
        } else {
          alert('Silakan masukkan alasan pelaporan.');
        }
      };
    }

    function hideReportForm() {
      document.getElementById('report-form').classList.add('hidden');
    }

    // Open Chat
    function openChat() {
      const chatbox = document.getElementById('chatbox');
      chatbox.style.display = 'flex';
      document.getElementById('supportChatInput').focus();
    }

    document.getElementById('messageBtn').addEventListener('click', () => {
      const chatbox = document.getElementById('chatbox');
      chatbox.style.display = chatbox.style.display === 'flex' ? 'none' : 'flex';
    });

    // Booking History
    let bookingHistory = JSON.parse(localStorage.getItem('bookingHistory')) || [];

    function updateBookingHistory(apartment, checkin, checkout, total) {
      bookingHistory.push({
        title: apartment.title,
        checkin,
        checkout,
        total: total.toLocaleString()
      });
      localStorage.setItem('bookingHistory', JSON.stringify(bookingHistory));
      renderBookingHistory();
    }

    function renderBookingHistory() {
      const historyContainer = document.getElementById('booking-history');
      historyContainer.innerHTML = bookingHistory.length ? bookingHistory.map(booking => `
        <div class="card p-md">
          <h3>${booking.title}</h3>
          <p>Check-in: ${booking.checkin}</p>
          <p>Check-out: ${booking.checkout}</p>
          <p>Total: $${booking.total}</p>
        </div>
      `).join('') : '<p class="text-center">Belum ada riwayat pemesanan.</p>';
    }
  </script>
</body>
</html>