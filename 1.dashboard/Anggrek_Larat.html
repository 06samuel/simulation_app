<!DOCTYPE html>
<html lang="id"> <!-- Atribut bahasa untuk aksesibilitas -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apartemen Green Valley - Manajemen Properti Modern</title>
    <meta name="description"
        content="Temukan apartemen, rumah, dan properti impian Anda di Green Valley Estates. Platform manajemen properti modern dengan daftar terkini dan fitur pencarian canggih.">
    <meta name="keywords"
        content="apartemen, rumah, properti, sewa, beli, green valley, real estate, manajemen properti">
    <meta name="author" content="GreenValley Estates">

    <!-- Favicon (Contoh menggunakan emoji, ganti dengan file .ico atau .png Anda) -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè°</text></svg>">

    <!-- Bootstrap Icons via CDN (Sesuai permintaan) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Google Fonts (Sesuai permintaan) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        /* 
           ==========================================================================
           CSS NATIVE - MENGGANTIKAN TAILWIND CSS
           Struktur ini mencoba meniru pendekatan komponen dan utilitas dasar.
           ==========================================================================
        */

        /* 1. Variabel Global dan Reset Dasar */
        :root {
            /* Skema Warna - Mode Terang */
            --font-sans: 'Inter', sans-serif;
            --font-display: 'Poppins', sans-serif;

            --primary-light: #6EE7B7;
            --primary-default: #10B981;
            --primary-dark: #047857;

            --secondary-light: #93C5FD;
            --secondary-default: #3B82F6;
            --secondary-dark: #1D4ED8;

            --accent-light: #FCD34D;
            --accent-default: #F59E0B;
            --accent-dark: #B45309;

            --background-light: #F9FAFB;
            --card-light: #FFFFFF;
            --text-light: #1F2937;
            /* Abu-abu tua untuk teks pada latar terang */
            --text-muted-light: #6B7280;
            /* Abu-abu sedang */
            --border-light: #E5E7EB;

            /* Bayangan yang lebih halus */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);

            /* Transisi */
            --transition-duration: 0.3s;
            --transition-timing: ease-in-out;

            /* Spasi (contoh, bisa diperluas) */
            --space-1: 0.25rem;
            /* 4px */
            --space-2: 0.5rem;
            /* 8px */
            --space-3: 0.75rem;
            /* 12px */
            --space-4: 1rem;
            /* 16px */
            --space-6: 1.5rem;
            /* 24px */
            --space-8: 2rem;
            /* 32px */
        }

        html.dark {
            /* Skema Warna - Mode Gelap */
            --primary-light: #34D399;
            /* Sedikit lebih terang untuk kontras di gelap */
            --primary-default: #10B981;
            --primary-dark: #059669;

            --secondary-light: #60A5FA;
            --secondary-default: #3B82F6;
            --secondary-dark: #2563EB;

            --accent-light: #FBBF24;
            --accent-default: #F59E0B;
            --accent-dark: #D97706;

            --background-light: #111827;
            /* Latar utama gelap */
            --card-light: #1F2937;
            /* Latar kartu gelap */
            --text-light: #F3F4F6;
            /* Teks terang pada latar gelap */
            --text-muted-light: #9CA3AF;
            /* Abu-abu terang untuk teks muted */
            --border-light: #374151;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            /* Basis untuk unit rem */
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--background-light);
            color: var(--text-light);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color var(--transition-duration) var(--transition-timing),
                color var(--transition-duration) var(--transition-timing);
            display: flex;
            /* Untuk #app-container mengambil tinggi penuh */
            flex-direction: column;
            /* Untuk #app-container mengambil tinggi penuh */
            min-height: 100vh;
            /* Untuk #app-container mengambil tinggi penuh */
        }

        #app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            flex-grow: 1;
            /* Memastikan app-container mengisi ruang body */
        }


        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-display);
            line-height: 1.3;
            font-weight: 700;
            /* Default weight for headings */
        }

        a {
            color: var(--primary-default);
            text-decoration: none;
            transition: color var(--transition-duration) var(--transition-timing);
        }

        a:hover {
            color: var(--primary-dark);
        }

        html.dark a:hover {
            color: var(--primary-light);
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        button,
        input,
        select,
        textarea {
            font-family: inherit;
            font-size: inherit;
            border: 1px solid var(--border-light);
            border-radius: 0.5rem;
            /* 8px */
            padding: var(--space-2) var(--space-3);
            background-color: var(--card-light);
            color: var(--text-light);
            transition: background-color var(--transition-duration) var(--transition-timing),
                color var(--transition-duration) var(--transition-timing),
                border-color var(--transition-duration) var(--transition-timing),
                box-shadow var(--transition-duration) var(--transition-timing);
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary-default);
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        html.dark input,
        html.dark select,
        html.dark textarea {
            background-color: var(--background-light);
            /* Atau warna input field gelap yang sesuai */
        }


        /* 2. Utilitas Dasar (Contoh) */
        .container {
            width: 100%;
            max-width: 1280px;
            /* Contoh max-width, sesuaikan */
            margin-left: auto;
            margin-right: auto;
            padding-left: var(--space-4);
            padding-right: var(--space-4);
        }

        .visually-hidden {
            /* Untuk aksesibilitas */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .flex-grow {
            flex-grow: 1;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .space-x-4>*+* {
            margin-left: var(--space-4);
        }

        /* Sederhana, bisa lebih kompleks */
        .space-y-4>*+* {
            margin-top: var(--space-4);
        }

        .space-y-8>*+* {
            margin-top: var(--space-8);
        }

        .gap-3 {
            gap: var(--space-3);
        }

        .gap-4 {
            gap: var(--space-4);
        }

        .gap-6 {
            gap: var(--space-6);
        }

        .gap-8 {
            gap: var(--space-8);
        }

        .p-4 {
            padding: var(--space-4);
        }

        .p-6 {
            padding: var(--space-6);
        }

        .p-8 {
            padding: var(--space-8);
        }

        .py-2 {
            padding-top: var(--space-2);
            padding-bottom: var(--space-2);
        }

        .py-3 {
            padding-top: var(--space-3);
            padding-bottom: var(--space-3);
        }

        .px-3 {
            padding-left: var(--space-3);
            padding-right: var(--space-3);
        }

        .px-4 {
            padding-left: var(--space-4);
            padding-right: var(--space-4);
        }

        .px-6 {
            padding-left: var(--space-6);
            padding-right: var(--space-6);
        }

        .m-3 {
            margin: var(--space-3);
        }

        .mt-1 {
            margin-top: var(--space-1);
        }

        .mt-2 {
            margin-top: var(--space-2);
        }

        .mt-3 {
            margin-top: var(--space-3);
        }

        .mt-4 {
            margin-top: var(--space-4);
        }

        .mt-6 {
            margin-top: var(--space-6);
        }

        .mt-8 {
            margin-top: var(--space-8);
        }

        .mt-10 {
            margin-top: 2.5rem;
        }

        /* 40px */

        .mb-1 {
            margin-bottom: var(--space-1);
        }

        .mb-1_5 {
            margin-bottom: 0.375rem;
        }

        /* 6px, contoh spesifik */
        .mb-2 {
            margin-bottom: var(--space-2);
        }

        .mb-3 {
            margin-bottom: var(--space-3);
        }

        .mb-4 {
            margin-bottom: var(--space-4);
        }

        .mb-5 {
            margin-bottom: 1.25rem;
        }

        /* 20px */
        .mb-6 {
            margin-bottom: var(--space-6);
        }

        .mb-8 {
            margin-bottom: var(--space-8);
        }

        .mb-10 {
            margin-bottom: 2.5rem;
        }

        /* 40px */

        .ml-1 {
            margin-left: var(--space-1);
        }

        .ml-1_5 {
            margin-left: 0.375rem;
        }

        .ml-2 {
            margin-left: var(--space-2);
        }

        .ml-3 {
            margin-left: var(--space-3);
        }

        .ml-4 {
            margin-left: var(--space-4);
        }

        .ml-10 {
            margin-left: 2.5rem;
        }

        .mr-1 {
            margin-right: var(--space-1);
        }

        .mr-2 {
            margin-right: var(--space-2);
        }

        .mr-3 {
            margin-right: var(--space-3);
        }

        .mr-4 {
            margin-right: var(--space-4);
        }

        .mr-6 {
            margin-right: var(--space-6);
        }

        .text-center {
            text-align: center;
        }

        .text-left {
            text-align: left;
        }

        .text-right {
            text-align: right;
        }

        .text-sm {
            font-size: 0.875rem;
        }

        /* 14px */
        .text-base {
            font-size: 1rem;
        }

        /* 16px */
        .text-lg {
            font-size: 1.125rem;
        }

        /* 18px */
        .text-xl {
            font-size: 1.25rem;
        }

        /* 20px */
        .text-2xl {
            font-size: 1.5rem;
        }

        /* 24px */
        .text-3xl {
            font-size: 1.875rem;
        }

        /* 30px */
        .text-4xl {
            font-size: 2.25rem;
        }

        /* 36px */
        .text-5xl {
            font-size: 3rem;
        }

        /* 48px */
        .text-6xl {
            font-size: 3.75rem;
        }

        /* 60px */
        .text-8xl {
            font-size: 6rem;
        }

        /* 96px */

        .font-normal {
            font-weight: 400;
        }

        .font-medium {
            font-weight: 500;
        }

        .font-semibold {
            font-weight: 600;
        }

        .font-bold {
            font-weight: 700;
        }

        .font-extrabold {
            font-weight: 800;
        }

        .leading-tight {
            line-height: 1.25;
        }

        .leading-relaxed {
            line-height: 1.625;
        }

        .text-primary {
            color: var(--primary-default);
        }

        html.dark .text-primary-light {
            color: var(--primary-light);
        }

        .text-secondary {
            color: var(--secondary-default);
        }

        html.dark .text-secondary-light {
            color: var(--secondary-light);
        }

        .text-accent {
            color: var(--accent-default);
        }

        html.dark .text-accent-light {
            color: var(--accent-light);
        }

        .text-white {
            color: #fff;
        }

        .text-gray-400 {
            color: #9CA3AF;
        }

        html.dark .text-gray-400 {
            color: var(--text-muted-light);
        }

        .text-gray-500 {
            color: #6B7280;
        }

        html.dark .text-gray-500 {
            color: #9CA3AF;
        }

        .text-gray-600 {
            color: #4B5563;
        }

        html.dark .text-gray-300 {
            color: #D1D5DB;
        }

        html.dark .text-gray-200 {
            color: #E5E7EB;
        }

        .text-gray-700 {
            color: #374151;
        }

        html.dark .text-gray-100 {
            color: #F3F4F6;
        }

        .text-gray-800 {
            color: #1F2937;
        }

        .bg-primary {
            background-color: var(--primary-default);
        }

        .bg-primary-light {
            background-color: var(--primary-light);
        }

        .bg-primary-dark {
            background-color: var(--primary-dark);
        }

        html.dark .bg-primary-dark {
            background-color: var(--primary-dark);
        }

        .bg-secondary {
            background-color: var(--secondary-default);
        }

        .bg-secondary-dark {
            background-color: var(--secondary-dark);
        }

        .bg-card-light {
            background-color: var(--card-light);
        }

        html.dark .bg-card-dark {
            background-color: var(--card-light);
        }

        /* Menggunakan var card-light karena sudah di-override di html.dark */

        .bg-gray-50 {
            background-color: #F9FAFB;
        }

        html.dark .bg-gray-700 {
            background-color: #374151;
        }

        .bg-gray-100 {
            background-color: #F3F4F6;
        }

        html.dark .bg-gray-200 {
            background-color: #E5E7EB;
        }

        /* Untuk hover di dark mode jika perlu */

        .bg-green-100 {
            background-color: #D1FAE5;
        }

        .text-green-800 {
            color: #065F46;
        }

        html.dark .bg-green-700 {
            background-color: #047857;
        }

        html.dark .text-green-100 {
            color: #D1FAE5;
        }

        .bg-yellow-100 {
            background-color: #FEF3C7;
        }

        .text-yellow-800 {
            color: #92400E;
        }

        html.dark .bg-yellow-700 {
            background-color: #B45309;
        }

        html.dark .text-yellow-100 {
            color: #FEF3C7;
        }

        .bg-green-500 {
            background-color: #22C55E;
        }

        .hover-bg-green-600:hover {
            background-color: #16A34A;
        }

        .text-red-500 {
            color: #EF4444;
        }

        .text-red-600 {
            color: #DC2626;
        }

        .hover-text-red-800:hover {
            color: #991B1B;
        }

        html.dark .text-red-400 {
            color: #F87171;
        }

        html.dark .hover-text-red-300:hover {
            color: #FCA5A5;
        }


        .rounded-md {
            border-radius: 0.375rem;
        }

        /* 6px */
        .rounded-lg {
            border-radius: 0.5rem;
        }

        /* 8px */
        .rounded-xl {
            border-radius: 0.75rem;
        }

        /* 12px */
        .rounded-full {
            border-radius: 9999px;
        }

        .shadow-sm {
            box-shadow: var(--shadow-sm);
        }

        .shadow-md {
            box-shadow: var(--shadow-md);
        }

        .shadow-lg {
            box-shadow: var(--shadow-lg);
        }

        .shadow-xl {
            box-shadow: var(--shadow-xl);
        }

        .shadow-2xl {
            box-shadow: var(--shadow-2xl);
        }

        .w-full {
            width: 100%;
        }

        .h-12 {
            height: 3rem;
        }

        /* 48px */
        .w-12 {
            width: 3rem;
        }

        .h-20 {
            height: 5rem;
        }

        /* 80px */
        .h-64 {
            height: 16rem;
        }

        /* 256px */
        .h-96 {
            height: 24rem;
        }

        /* 384px */
        .object-cover {
            object-fit: cover;
        }

        .max-w-xs {
            max-width: 20rem;
        }

        .max-w-sm {
            max-width: 24rem;
        }

        .max-w-md {
            max-width: 28rem;
        }

        .max-w-lg {
            max-width: 32rem;
        }

        .max-w-xl {
            max-width: 36rem;
        }

        .max-w-2xl {
            max-width: 42rem;
        }

        .max-w-3xl {
            max-width: 48rem;
        }

        .max-w-4xl {
            max-width: 56rem;
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }

        .sticky {
            position: sticky;
        }

        .absolute {
            position: absolute;
        }

        .relative {
            position: relative;
        }

        .top-0 {
            top: 0;
        }

        .top-24 {
            top: 6rem;
        }

        /* Untuk filter bar sticky */
        .right-0 {
            right: 0;
        }

        .bottom-0 {
            bottom: 0;
        }

        .left-0 {
            left: 0;
        }

        .z-10 {
            z-index: 10;
        }

        .z-40 {
            z-index: 40;
        }

        .z-50 {
            z-index: 50;
        }

        .overflow-hidden {
            overflow: hidden;
        }

        .overflow-x-auto {
            overflow-x: auto;
        }

        .text-ellipsis {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .truncate {
            /* Sederhana, bisa lebih kompleks jika perlu clamp */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }


        .border {
            border-width: 1px;
        }

        .border-t {
            border-top-width: 1px;
        }

        .border-border-light {
            border-color: var(--border-light);
        }

        html.dark .border-border-dark {
            border-color: var(--border-light);
        }

        /* Menggunakan var border-light karena sudah di-override di html.dark */

        .uppercase {
            text-transform: uppercase;
        }

        .tracking-wider {
            letter-spacing: 0.05em;
        }

        .tracking-wide {
            letter-spacing: 0.025em;
        }

        .opacity-50 {
            opacity: 0.5;
        }

        .opacity-70 {
            opacity: 0.7;
        }

        .opacity-80 {
            opacity: 0.8;
        }

        .transform {
            /* Placeholder, use specific transforms */
        }

        .hover-scale-105:hover {
            transform: scale(1.05);
        }

        .hover-translate-y-1:hover {
            transform: translateY(-0.25rem);
        }

        .rotate-180 {
            transform: rotate(180deg);
        }

        /* Grid System (Contoh Sederhana) */
        .grid {
            display: grid;
        }

        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }

        .grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }

        /* Lanjutan untuk responsif akan di media queries */

        /* 3. Animasi dan Transisi Global */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes spin {
            to {
                transform: rotate(1turn);
            }
        }

        @keyframes pulse {

            /* Animasi untuk ikon 404 */
            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.1);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        .animate-slide-in-up {
            animation: slideInUp 0.5s ease-out;
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Transisi halus untuk elemen interaktif (sudah ada di body dan input, etc.) */
        button,
        .nav-link,
        .property-card {
            transition: background-color var(--transition-duration) var(--transition-timing),
                color var(--transition-duration) var(--transition-timing),
                border-color var(--transition-duration) var(--transition-timing),
                box-shadow var(--transition-duration) var(--transition-timing),
                transform var(--transition-duration) var(--transition-timing);
        }

        /* 4. Styling Komponen Spesifik */

        /* Navbar */
        #navbar-container {
            background-color: var(--card-light);
            box-shadow: var(--shadow-lg);
            position: sticky;
            top: 0;
            z-index: 50;
            transition: background-color var(--transition-duration) var(--transition-timing);
        }

        #navbar-container .navbar-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 5rem;
            /* 80px */
        }

        .navbar-brand-link {
            flex-shrink: 0;
            transition: opacity var(--transition-duration) var(--transition-timing);
        }

        .navbar-brand-link:hover {
            opacity: 0.8;
        }

        .navbar-brand-text {
            font-size: 1.875rem;
            /* 30px */
            font-weight: bold;
            font-family: var(--font-display);
            color: var(--primary-default);
        }

        html.dark .navbar-brand-text {
            color: var(--primary-light);
        }

        .navbar-brand-text .brand-secondary-color {
            color: var(--secondary-default);
        }

        html.dark .navbar-brand-text .brand-secondary-color {
            color: var(--secondary-light);
        }

        .navbar-brand-text i {
            margin-right: 0.25rem;
        }

        .nav-links-desktop {
            display: none;
            /* Sembunyikan di mobile */
            margin-left: 2.5rem;
        }

        .nav-links-desktop nav {
            display: flex;
            align-items: baseline;
            /* space-x-4 */
        }

        .nav-links-desktop nav>*+* {
            margin-left: var(--space-4);
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            /* py-2 px-3 */
            border-radius: 0.375rem;
            /* rounded-md */
            font-size: 1rem;
            /* text-base */
            font-weight: 500;
            /* font-medium */
            color: var(--text-light);
            transition: background-color var(--transition-duration) var(--transition-timing),
                color var(--transition-duration) var(--transition-timing),
                box-shadow var(--transition-duration) var(--transition-timing);
        }

        html.dark .nav-link {
            color: var(--text-light);
        }

        /* Teks terang di dark mode */

        .nav-link:hover,
        .nav-link:focus {
            background-color: var(--primary-light);
            color: var(--card-light);
            /* Teks putih/terang saat hover */
        }

        html.dark .nav-link:hover,
        html.dark .nav-link:focus {
            background-color: var(--primary-dark);
            color: #f0f0f0;
            /* Teks terang saat hover di dark mode */
        }

        .nav-link.active {
            background-color: var(--primary-default);
            color: #fff;
            /* Teks putih untuk link aktif */
            box-shadow: var(--shadow-md);
        }

        .nav-link i {
            margin-right: 0.5rem;
            font-size: 1.25rem;
        }

        #theme-toggle-button,
        #mobile-menu-button {
            background-color: transparent;
            border: none;
            padding: 0.5rem;
            border-radius: 50%;
            font-size: 1.25rem;
            /* text-xl */
            color: var(--primary-dark);
            cursor: pointer;
            transition: background-color var(--transition-duration) var(--transition-timing),
                color var(--transition-duration) var(--transition-timing);
        }

        html.dark #theme-toggle-button,
        html.dark #mobile-menu-button {
            color: var(--primary-light);
        }

        #theme-toggle-button:hover,
        #mobile-menu-button:hover {
            background-color: var(--border-light);
            /* Slightly visible hover */
        }

        html.dark #theme-toggle-button:hover,
        html.dark #mobile-menu-button:hover {
            background-color: #374151;
            /* Darker hover for dark mode */
        }

        #theme-toggle-button:focus,
        #mobile-menu-button:focus {
            outline: 2px solid var(--primary-default);
            outline-offset: 2px;
        }

        .mobile-menu-icon-container {
            margin-left: 0.75rem;
            /* ml-3 */
        }

        #mobile-menu-dropdown {
            display: none;
            /* Default hidden */
            position: absolute;
            /* Untuk tampil di bawah navbar */
            width: 100%;
            background-color: var(--card-light);
            box-shadow: var(--shadow-xl);
            padding-bottom: var(--space-4);
            animation: fadeIn 0.3s ease-out;
            /* Animasi saat muncul */
        }

        #mobile-menu-dropdown.open {
            display: block;
        }

        #mobile-menu-dropdown nav {
            padding: 0.5rem 0.5rem 0.75rem;
            /* px-2 pt-2 pb-3 */
        }

        #mobile-menu-dropdown nav>*+* {
            margin-top: 0.25rem;
        }

        /* space-y-1 */
        #mobile-menu-dropdown .nav-link {
            display: block;
            /* Navlink mengisi lebar di mobile menu */
        }


        /* Page Content Container */
        #page-content-container {
            flex-grow: 1;
            padding-top: var(--space-4);
            padding-bottom: var(--space-4);
        }

        /* Footer */
        #footer-container {
            background-color: var(--card-light);
            border-top: 1px solid var(--border-light);
            padding-top: 2.5rem;
            /* py-10 (total) */
            padding-bottom: 2.5rem;
            text-align: center;
            transition: background-color var(--transition-duration) var(--transition-timing),
                border-color var(--transition-duration) var(--transition-timing);
        }

        #footer-container p {
            color: var(--text-muted-light);
        }

        .footer-social-links {
            margin-top: var(--space-4);
        }

        .footer-social-links>*+* {
            margin-left: var(--space-4);
        }

        .footer-social-links a {
            color: var(--text-muted-light);
            font-size: 1.25rem;
        }

        .footer-social-links a:hover {
            color: var(--primary-default);
        }

        html.dark .footer-social-links a:hover {
            color: var(--primary-light);
        }


        /* Fancy Spinner */
        .fancy-spinner {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: conic-gradient(#0000 10%, var(--primary-default));
            -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 8px), #000 0);
            mask: radial-gradient(farthest-side, #0000 calc(100% - 8px), #000 0);
            animation: spin 1s infinite linear;
            margin-bottom: var(--space-6);
        }

        /* Scrollbar (Catatan: tidak semua browser mendukung penuh) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgba(16, 185, 129, 0.5);
            /* primary.DEFAULT dengan alpha */
            border-radius: 10px;
            border: 2px solid transparent;
            background-clip: content-box;
        }

        html.dark ::-webkit-scrollbar-thumb {
            background-color: rgba(110, 231, 183, 0.5);
            /* primary.light dengan alpha */
        }

        /* Filter Form */
        #filter-form {
            background-color: var(--card-light);
            padding: var(--space-6);
            border-radius: 0.75rem;
            /* rounded-xl */
            box-shadow: var(--shadow-xl);
            margin-bottom: 2.5rem;
            /* mb-10 */
            position: sticky;
            top: 6rem;
            /* Tinggi navbar + sedikit space */
            z-index: 40;
            transition: background-color var(--transition-duration) var(--transition-timing),
                box-shadow var(--transition-duration) var(--transition-timing);
        }

        .filter-form-grid {
            display: grid;
            gap: var(--space-6) var(--space-4);
            /* gap-x-6 gap-y-4 */
            align-items: end;
        }

        .filter-form-grid label {
            display: block;
            font-size: 0.875rem;
            /* text-sm */
            font-weight: 500;
            /* font-medium */
            color: var(--text-muted-light);
            margin-bottom: 0.375rem;
            /* mb-1.5 */
        }

        .filter-input-group {
            position: relative;
        }

        /* Untuk ikon di dalam input */
        .filter-input-group .input-icon {
            position: absolute;
            left: 0.75rem;
            /* pl-3 */
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted-light);
            pointer-events: none;
        }

        #searchTerm {
            padding-left: 2.5rem !important;
            /* pl-10 */
        }

        .filter-price-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-3);
        }

        .filter-button {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-default);
            color: #fff;
            font-weight: 600;
            /* font-semibold */
            padding: 0.625rem var(--space-6);
            /* py-2.5 px-6 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-md);
            border: none;
            cursor: pointer;
        }

        .filter-button:hover {
            background-color: var(--primary-dark);
            box-shadow: var(--shadow-lg);
        }

        html.dark .filter-button {
            background-color: var(--primary-dark);
        }

        html.dark .filter-button:hover {
            background-color: var(--primary-default);
        }

        .filter-button i {
            margin-right: 0.5rem;
        }

        /* Property Card */
        .property-card {
            background-color: var(--card-light);
            border-radius: 0.75rem;
            /* rounded-xl */
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform var(--transition-duration) var(--transition-timing),
                box-shadow var(--transition-duration) var(--transition-timing);
        }

        .property-card:hover {
            transform: translateY(-0.25rem);
            /* hover:-translate-y-1 */
            box-shadow: var(--shadow-2xl);
        }

        .property-image-wrapper {
            position: relative;
        }

        .property-image {
            width: 100%;
            height: 16rem;
            /* h-64 */
            object-fit: cover;
        }

        .property-type-badge {
            position: absolute;
            top: 0.75rem;
            /* m-3 */
            right: 0.75rem;
            /* m-3 */
            background-color: var(--primary-default);
            color: #fff;
            font-size: 0.75rem;
            /* text-xs */
            font-weight: 600;
            /* font-semibold */
            padding: 0.375rem 0.75rem;
            /* px-3 py-1.5 */
            border-radius: 9999px;
            /* rounded-full */
            box-shadow: var(--shadow-md);
        }

        .property-rating-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            color: #fff;
            padding: 0.75rem;
        }

        .property-card-content {
            padding: var(--space-6);
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .property-name {
            font-size: 1.5rem;
            /* text-2xl */
            font-weight: 600;
            /* font-semibold */
            font-family: var(--font-display);
            color: var(--primary-default);
            margin-bottom: 0.5rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        html.dark .property-name {
            color: var(--primary-light);
        }

        .property-location {
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-muted-light);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }

        .property-location i {
            margin-right: 0.5rem;
            color: var(--secondary-default);
        }

        html.dark .property-location i {
            color: var(--secondary-light);
        }

        .property-price {
            font-size: 1.5rem;
            /* text-2xl */
            font-weight: bold;
            color: var(--secondary-default);
            margin-bottom: var(--space-4);
        }

        html.dark .property-price {
            color: var(--secondary-light);
        }

        .property-price .price-period {
            font-size: 0.875rem;
            /* text-sm */
            font-weight: normal;
            color: var(--text-muted-light);
        }

        .property-specs-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            /* gap-3 */
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-light);
            margin-bottom: var(--space-4);
        }

        html.dark .property-specs-grid {
            color: var(--text-light);
        }

        /* Text terang */
        .property-spec-item {
            display: flex;
            align-items: center;
        }

        .property-spec-item i {
            margin-right: 0.5rem;
            font-size: 1.25rem;
            color: var(--primary-default);
        }

        .property-description-preview {
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-muted-light);
            margin-bottom: 1.25rem;
            /* mb-5 */
            height: 3rem;
            /* h-12, approx 2 lines */
            overflow: hidden;
            text-overflow: ellipsis;
            /* Might not work perfectly for multiline, but good enough */
            line-height: 1.5;
            display: -webkit-box;
            /* For multiline ellipsis (webkit only) */
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .property-amenities-preview h4 {
            font-size: 0.75rem;
            /* text-xs */
            font-weight: 600;
            /* font-semibold */
            text-transform: uppercase;
            color: var(--text-muted-light);
            margin-bottom: 0.375rem;
            /* mb-1.5 */
        }

        .property-amenities-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            /* gap-2 */
            margin-bottom: 1.25rem;
            /* mb-5 */
        }

        .amenity-tag {
            font-size: 0.75rem;
            /* text-xs */
            background-color: var(--border-light);
            /* bg-gray-100 */
            color: var(--text-muted-light);
            /* text-gray-700 */
            padding: 0.25rem 0.625rem;
            /* px-2.5 py-1 */
            border-radius: 9999px;
            /* rounded-full */
            box-shadow: var(--shadow-sm);
        }

        html.dark .amenity-tag {
            background-color: #374151;
            /* dark:bg-gray-700 */
            color: #D1D5DB;
            /* dark:text-gray-300 */
        }

        .property-details-button {
            margin-top: auto;
            /* Pushes button to bottom */
            width: 100%;
            background-color: var(--primary-default);
            color: #fff;
            font-weight: bold;
            padding: 0.75rem var(--space-4);
            /* py-3 px-4 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-md);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .property-details-button:hover {
            background-color: var(--primary-dark);
            box-shadow: var(--shadow-lg);
        }

        html.dark .property-details-button {
            background-color: var(--primary-dark);
        }

        html.dark .property-details-button:hover {
            background-color: var(--primary-default);
        }

        .property-details-button i {
            margin-right: 0.5rem;
        }

        /* Stars Rating */
        .star-rating i {
            color: var(--accent-default);
        }

        .star-rating .rating-value {
            margin-left: 0.375rem;
            /* ml-1.5 */
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-muted-light);
        }

        html.dark .star-rating .rating-value {
            color: var(--text-muted-light);
            /* Sudah diatur oleh html.dark color */
        }

        /* No Results State */
        .no-results-container {
            text-align: center;
            padding-top: 4rem;
            /* py-16 */
            padding-bottom: 4rem;
            background-color: var(--card-light);
            border-radius: 0.75rem;
            /* rounded-xl */
            box-shadow: var(--shadow-lg);
        }

        .no-results-container i.icon-main {
            font-size: 3.75rem;
            /* text-6xl */
            color: var(--text-muted-light);
            margin-bottom: 1.5rem;
            /* mb-6 */
        }

        .no-results-container h2 {
            font-size: 1.875rem;
            /* text-3xl */
            font-weight: 600;
            /* font-semibold */
            font-family: var(--font-display);
            color: var(--text-light);
            /* text-gray-700 */
            margin-bottom: 0.75rem;
            /* mb-3 */
        }

        html.dark .no-results-container h2 {
            color: var(--text-light);
        }

        /* text-gray-200 */
        .no-results-container p {
            color: var(--text-muted-light);
            /* text-gray-500 */
            max-width: 28rem;
            /* max-w-md */
            margin-left: auto;
            margin-right: auto;
        }

        #reset-filters-button {
            margin-top: 2rem;
            /* mt-8 */
            background-color: var(--secondary-default);
            color: #fff;
            font-weight: 600;
            /* font-semibold */
            padding: 0.625rem 1.5rem;
            /* py-2.5 px-6 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-md);
            border: none;
            cursor: pointer;
        }

        #reset-filters-button:hover {
            background-color: var(--secondary-dark);
            box-shadow: var(--shadow-lg);
        }

        #reset-filters-button i {
            margin-right: 0.5rem;
        }


        /* Dashboard Page Specifics */
        .dashboard-header {
            background-color: var(--card-light);
            box-shadow: var(--shadow-lg);
            border-radius: 0.75rem;
            /* rounded-xl */
            padding: var(--space-6);
        }

        .dashboard-header h1 {
            font-size: 2.25rem;
            /* text-4xl */
            font-weight: bold;
            font-family: var(--font-display);
            color: var(--primary-default);
        }

        html.dark .dashboard-header h1 {
            color: var(--primary-light);
        }

        .dashboard-header p {
            margin-top: 0.5rem;
            /* mt-2 */
            font-size: 1.125rem;
            /* text-lg */
            color: var(--text-muted-light);
            /* text-gray-600 */
        }

        .stats-card-grid {
            display: grid;
            gap: var(--space-6);
        }

        .stat-card {
            background-color: var(--card-light);
            /* Fallback */
            box-shadow: var(--shadow-xl);
            border-radius: 0.75rem;
            /* rounded-xl */
            padding: var(--space-6);
            color: #fff;
            transition: transform var(--transition-duration) var(--transition-timing);
        }

        .stat-card:hover {
            transform: scale(1.05);
        }

        .stat-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            /* mb-3 */
        }

        .stat-card-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .stat-card-header i {
            font-size: 1.875rem;
            opacity: 0.7;
        }

        .stat-card .stat-value {
            font-size: 3rem;
            font-weight: bold;
        }

        .stat-card .stat-subtitle {
            font-size: 0.875rem;
            opacity: 0.8;
            margin-top: 0.25rem;
        }

        .stat-card.primary-gradient {
            background-image: linear-gradient(to bottom right, var(--primary-light), var(--primary-default));
        }

        html.dark .stat-card.primary-gradient {
            background-image: linear-gradient(to bottom right, var(--primary-dark), var(--primary-default));
        }

        .stat-card.secondary-gradient {
            background-image: linear-gradient(to bottom right, var(--secondary-light), var(--secondary-default));
        }

        html.dark .stat-card.secondary-gradient {
            background-image: linear-gradient(to bottom right, var(--secondary-dark), var(--secondary-default));
        }

        .stat-card.accent-gradient {
            background-image: linear-gradient(to bottom right, var(--accent-light), var(--accent-default));
        }

        html.dark .stat-card.accent-gradient {
            background-image: linear-gradient(to bottom right, var(--accent-dark), var(--accent-default));
        }

        .activity-list-container {
            background-color: var(--card-light);
            box-shadow: var(--shadow-lg);
            border-radius: 0.75rem;
            /* rounded-xl */
            padding: var(--space-6);
        }

        .activity-list-container h2 {
            font-size: 1.5rem;
            /* text-2xl */
            font-weight: 600;
            /* font-semibold */
            font-family: var(--font-display);
            color: var(--text-light);
            /* text-gray-800 */
            margin-bottom: 1.5rem;
            /* mb-6 */
        }

        html.dark .activity-list-container h2 {
            color: var(--text-light);
        }

        /* text-gray-100 */

        .activity-list {
            list-style: none;
            padding: 0;
        }

        .activity-list>*+* {
            margin-top: var(--space-4);
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            padding: var(--space-4);
            background-color: var(--background-light);
            /* bg-gray-50 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-sm);
            transition: box-shadow var(--transition-duration) var(--transition-timing);
        }

        html.dark .activity-item {
            background-color: #374151;
            /* dark:bg-gray-700 */
        }

        .activity-item:hover {
            box-shadow: var(--shadow-md);
        }

        .activity-item i {
            font-size: 1.25rem;
            /* text-xl */
            margin-right: var(--space-4);
            margin-top: 0.25rem;
            /* mt-1 */
        }

        .activity-item .item-content p.font-medium {
            font-weight: 500;
            /* font-medium */
            color: var(--text-light);
            /* text-gray-700 */
        }

        html.dark .activity-item .item-content p.font-medium {
            color: var(--text-light);
            /* text-gray-200 */
        }

        .activity-item .item-content p.text-sm {
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-muted-light);
            /* text-gray-500 */
        }

        .icon-check {
            color: #16A34A;
        }

        /* text-green-500 */
        .icon-tools {
            color: #2563EB;
        }

        /* text-blue-500 */
        .icon-house-add {
            color: #7C3AED;
        }

        /* text-purple-500 */

        .dashboard-image-showcase img {
            border-radius: 0.75rem;
            /* rounded-xl */
            box-shadow: var(--shadow-2xl);
            margin-left: auto;
            margin-right: auto;
            width: 100%;
            max-width: 56rem;
            /* max-w-4xl */
            object-fit: cover;
            height: 16rem;
            /* h-64 */
        }

        .dashboard-image-showcase p {
            margin-top: 1.5rem;
            /* mt-6 */
            font-size: 1.125rem;
            /* text-lg */
            color: var(--text-muted-light);
            /* text-gray-600 */
        }

        /* Properties Page Header */
        .properties-page-header {
            background-color: var(--card-light);
            box-shadow: var(--shadow-lg);
            border-radius: 0.75rem;
            /* rounded-xl */
            padding: var(--space-6);
            text-align: center;
        }

        .properties-page-header .header-icon {
            font-size: 3rem;
            /* text-5xl (approx) */
            color: var(--primary-default);
            margin-bottom: var(--space-4);
        }

        html.dark .properties-page-header .header-icon {
            color: var(--primary-light);
        }

        .properties-page-header h1 {
            font-size: 2.25rem;
            /* text-4xl */
            font-weight: bold;
            font-family: var(--font-display);
            color: var(--primary-default);
        }

        html.dark .properties-page-header h1 {
            color: var(--primary-light);
        }

        .properties-page-header p {
            margin-top: 0.5rem;
            /* mt-2 */
            font-size: 1.125rem;
            /* text-lg */
            color: var(--text-muted-light);
            /* text-gray-600 */
            max-width: 42rem;
            /* max-w-2xl */
            margin-left: auto;
            margin-right: auto;
        }

        /* Property List Grid */
        #property-list-grid {
            display: grid;
            gap: var(--space-8);
        }

        /* Admin CRUD Page */
        .admin-page-header {
            background-color: var(--card-light);
            box-shadow: var(--shadow-lg);
            border-radius: 0.75rem;
            /* rounded-xl */
            padding: var(--space-6);
        }

        .admin-header-content {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-start;
        }

        .admin-header-content h1 {
            font-size: 2.25rem;
            /* text-4xl */
            font-weight: bold;
            font-family: var(--font-display);
            color: var(--primary-default);
        }

        html.dark .admin-header-content h1 {
            color: var(--primary-light);
        }

        .admin-header-content p {
            margin-top: 0.5rem;
            /* mt-2 */
            font-size: 1.125rem;
            /* text-lg */
            color: var(--text-muted-light);
        }

        .admin-add-button {
            margin-top: var(--space-4);
            /* mt-4 */
            background-color: var(--primary-default);
            color: #fff;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            /* py-3 px-6 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-md);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .admin-add-button:hover {
            background-color: var(--primary-dark);
            box-shadow: var(--shadow-lg);
        }

        .admin-add-button i {
            margin-right: 0.5rem;
        }

        .admin-table-container {
            background-color: var(--card-light);
            box-shadow: var(--shadow-xl);
            border-radius: 0.75rem;
            /* rounded-xl */
            padding: var(--space-6);
        }

        .admin-table-container h2 {
            font-size: 1.5rem;
            /* text-2xl */
            font-weight: 600;
            /* font-semibold */
            color: var(--text-light);
            /* text-gray-800 */
            margin-bottom: 1.5rem;
            /* mb-6 */
        }

        html.dark .admin-table-container h2 {
            color: var(--text-light);
            /* text-gray-100 */
        }

        .table-wrapper {
            overflow-x: auto;
            border-radius: 0.5rem;
            /* rounded-lg */
            border: 1px solid var(--border-light);
        }

        .admin-table {
            min-width: 100%;
            border-collapse: collapse;
            /* Replaces divide-y */
        }

        .admin-table thead {
            background-color: var(--background-light);
            /* bg-gray-50 */
        }

        html.dark .admin-table thead {
            background-color: #374151;
            /* dark:bg-gray-700 */
        }

        .admin-table th,
        .admin-table td {
            padding: 1rem 1.5rem;
            /* px-6 py-4 */
            text-align: left;
            font-size: 0.875rem;
            /* text-sm atau text-xs untuk th */
            border-bottom: 1px solid var(--border-light);
            /* Simulates divide-y */
        }

        .admin-table th {
            font-size: 0.75rem;
            /* text-xs */
            font-weight: 500;
            /* font-medium */
            color: var(--text-muted-light);
            /* text-gray-500 */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            /* tracking-wider */
        }

        html.dark .admin-table th {
            color: #D1D5DB;
            /* dark:text-gray-300 */
        }

        .admin-table tbody tr {
            transition: background-color var(--transition-duration) var(--transition-timing);
        }

        .admin-table tbody tr:hover {
            background-color: var(--background-light);
            /* hover:bg-gray-50 */
        }

        html.dark .admin-table tbody tr:hover {
            background-color: #374151;
            /* dark:hover:bg-gray-700 */
        }

        .admin-table td.cell-property-info {
            display: flex;
            align-items: center;
        }

        .cell-property-image-container {
            flex-shrink: 0;
            height: 3rem;
            width: 3rem;
        }

        .cell-property-image {
            height: 3rem;
            width: 3rem;
            border-radius: 0.375rem;
            object-fit: cover;
        }

        .cell-property-text {
            margin-left: var(--space-4);
        }

        .cell-property-name {
            font-weight: 500;
            color: var(--text-light);
        }

        html.dark .cell-property-name {
            color: var(--text-light);
        }

        .cell-property-type {
            font-size: 0.75rem;
            color: var(--text-muted-light);
        }

        .cell-location {
            color: var(--text-muted-light);
        }

        html.dark .cell-location {
            color: #D1D5DB;
        }

        .cell-price {
            font-weight: 600;
            color: var(--secondary-default);
        }

        html.dark .cell-price {
            color: var(--secondary-light);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            /* px-3 py-1 */
            display: inline-flex;
            font-size: 0.75rem;
            /* text-xs */
            line-height: 1.25;
            /* leading-5 */
            font-weight: 600;
            /* font-semibold */
            border-radius: 9999px;
            /* rounded-full */
        }

        .status-badge.available {
            background-color: #D1FAE5;
            color: #065F46;
        }

        /* bg-green-100 text-green-800 */
        html.dark .status-badge.available {
            background-color: #047857;
            color: #D1FAE5;
        }

        /* dark:bg-green-700 dark:text-green-100 */
        .status-badge.soon {
            background-color: #FEF3C7;
            color: #92400E;
        }

        /* bg-yellow-100 text-yellow-800 */
        html.dark .status-badge.soon {
            background-color: #B45309;
            color: #FEF3C7;
        }

        /* dark:bg-yellow-700 dark:text-yellow-100 */

        .cell-actions {
            text-align: right;
        }

        .cell-actions a {
            color: var(--primary-default);
            transition: color var(--transition-duration) var(--transition-timing);
            margin-left: 0.75rem;
            /* Sederhana dari space-x-3 */
        }

        .cell-actions a:hover {
            color: var(--primary-dark);
        }

        html.dark .cell-actions a {
            color: var(--primary-light);
        }

        html.dark .cell-actions a:hover {
            color: var(--primary-default);
        }

        .cell-actions a.action-delete {
            color: #DC2626;
            /* text-red-600 */
        }

        .cell-actions a.action-delete:hover {
            color: #991B1B;
            /* hover:text-red-800 */
        }

        html.dark .cell-actions a.action-delete {
            color: #F87171;
            /* dark:text-red-400 */
        }

        html.dark .cell-actions a.action-delete:hover {
            color: #FCA5A5;
            /* dark:hover:text-red-300 */
        }

        .admin-table-empty-row td {
            padding: 3rem 1.5rem;
            /* px-6 py-12 */
            text-align: center;
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-muted-light);
        }

        .admin-table-empty-row i {
            font-size: 2.25rem;
            margin-bottom: 0.75rem;
        }

        .admin-table-footer {
            margin-top: 1.5rem;
            /* mt-6 */
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            /* text-sm */
            color: var(--text-muted-light);
        }

        .pagination-mock {
            display: flex;
        }

        .pagination-mock>*+* {
            margin-left: 0.25rem;
        }

        /* space-x-1 */
        .pagination-mock button {
            padding: 0.25rem 0.75rem;
            /* px-3 py-1 */
            border: 1px solid var(--border-light);
            border-radius: 0.375rem;
            /* rounded-md */
            background-color: transparent;
            cursor: pointer;
        }

        .pagination-mock button:hover {
            background-color: var(--background-light);
        }

        html.dark .pagination-mock button:hover {
            background-color: #374151;
        }

        .pagination-mock button.active {
            border-color: var(--primary-default);
            background-color: var(--primary-default);
            color: #fff;
        }

        .admin-image-showcase img {
            border-radius: 0.75rem;
            /* rounded-xl */
            box-shadow: var(--shadow-2xl);
            margin: 0 auto;
            width: 100%;
            max-width: 48rem;
            /* max-w-3xl */
            object-fit: cover;
            height: 14rem;
            /* h-56 */
        }

        .admin-image-showcase p {
            margin-top: 1.5rem;
            /* mt-6 */
            font-size: 1.125rem;
            /* text-lg */
            color: var(--text-muted-light);
            /* text-gray-600 */
        }

        /* Not Found Page */
        .not-found-container {
            text-align: center;
            padding-top: 5rem;
            /* py-20 */
            padding-bottom: 5rem;
        }

        .not-found-container .icon-compass {
            font-size: 6rem;
            /* text-8xl */
            color: var(--accent-default);
            margin-bottom: 2rem;
            /* mb-8 */
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        html.dark .not-found-container .icon-compass {
            color: var(--accent-light);
        }

        .not-found-container h1 {
            font-size: 3.75rem;
            /* text-6xl */
            font-weight: bold;
            font-family: var(--font-display);
            color: var(--primary-default);
            margin-bottom: var(--space-4);
        }

        html.dark .not-found-container h1 {
            color: var(--primary-light);
        }

        .not-found-container h2 {
            font-size: 1.875rem;
            /* text-3xl */
            font-weight: 600;
            /* font-semibold */
            color: var(--text-light);
            /* text-gray-700 */
            margin-bottom: 1.5rem;
            /* mb-6 */
        }

        html.dark .not-found-container h2 {
            color: var(--text-light);
            /* text-gray-200 */
        }

        .not-found-container p {
            font-size: 1.125rem;
            /* text-lg */
            color: var(--text-muted-light);
            /* text-gray-500 */
            margin-bottom: 2rem;
            /* mb-8 */
            max-width: 32rem;
            /* max-w-lg */
            margin-left: auto;
            margin-right: auto;
        }

        .back-to-dashboard-button {
            background-color: var(--primary-default);
            color: #fff;
            font-weight: bold;
            padding: 0.75rem 2rem;
            /* py-3 px-8 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-lg);
            font-size: 1.125rem;
            /* text-lg */
            display: inline-flex;
            align-items: center;
            border: none;
            cursor: pointer;
            text-decoration: none;
        }

        .back-to-dashboard-button:hover {
            background-color: var(--primary-dark);
            box-shadow: var(--shadow-xl);
        }

        .back-to-dashboard-button i {
            margin-right: 0.5rem;
        }

        /* Property Detail Page */
        .property-detail-card {
            background-color: var(--card-light);
            border-radius: 0.75rem;
            /* rounded-xl */
            box-shadow: var(--shadow-2xl);
            overflow: hidden;
        }

        .property-detail-layout {
            display: flex;
            flex-direction: column;
        }

        /* Default mobile */
        .property-detail-image-container {
            width: 100%;
        }

        /* Default mobile */
        .property-detail-image {
            height: 16rem;
            /* h-64 */
            width: 100%;
            object-fit: cover;
        }

        .property-detail-info {
            width: 100%;
            padding: 2rem;
        }

        /* Default mobile, p-8 */

        .property-detail-type {
            text-transform: uppercase;
            letter-spacing: 0.025em;
            /* tracking-wide */
            font-size: 0.875rem;
            /* text-sm */
            color: var(--primary-default);
            font-weight: 600;
            /* font-semibold */
        }

        html.dark .property-detail-type {
            color: var(--primary-light);
        }

        .property-detail-name {
            display: block;
            /* block */
            margin-top: 0.25rem;
            /* mt-1 */
            font-size: 2.25rem;
            /* text-4xl */
            line-height: 1.25;
            /* leading-tight */
            font-weight: bold;
            font-family: var(--font-display);
            color: var(--text-light);
        }

        html.dark .property-detail-name {
            color: var(--text-light);
        }

        .property-detail-location {
            margin-top: 0.5rem;
            /* mt-2 */
            color: var(--text-muted-light);
            display: flex;
            align-items: center;
        }

        .property-detail-location i {
            margin-right: 0.5rem;
            color: var(--secondary-default);
        }

        html.dark .property-detail-location i {
            color: var(--secondary-light);
        }

        .property-detail-price {
            margin-top: 1rem;
            /* mt-4 */
            font-size: 1.875rem;
            /* text-3xl */
            font-weight: bold;
            color: var(--secondary-default);
        }

        html.dark .property-detail-price {
            color: var(--secondary-light);
        }

        .property-detail-price .price-period {
            font-size: 1rem;
            /* text-base */
            font-weight: normal;
            color: var(--text-muted-light);
        }

        .property-detail-specs-grid {
            margin-top: 1.5rem;
            /* mt-6 */
            display: grid;
            grid-template-columns: 1fr;
            /* Default 1 col */
            gap: 1rem;
            /* gap-4 */
            color: var(--text-light);
        }

        html.dark .property-detail-specs-grid {
            color: var(--text-light);
        }

        .property-detail-spec-item {
            display: flex;
            align-items: center;
        }

        .property-detail-spec-item i {
            margin-right: 0.5rem;
            /* mr-2 */
            font-size: 1.25rem;
            /* text-xl */
            color: var(--primary-default);
        }

        .property-detail-rating {
            margin-top: 1.5rem;
            /* mt-6 */
        }

        .property-detail-content-section {
            padding: 2rem;
            /* p-8 */
        }

        .property-detail-content-section h2 {
            font-size: 1.5rem;
            /* text-2xl */
            font-weight: 600;
            /* font-semibold */
            font-family: var(--font-display);
            color: var(--text-light);
            /* text-gray-800 */
            margin-bottom: 1rem;
            /* mb-4 */
        }

        html.dark .property-detail-content-section h2 {
            color: var(--text-light);
            /* text-gray-100 */
        }

        .property-detail-description {
            color: var(--text-muted-light);
            /* text-gray-600 */
            line-height: 1.625;
            /* leading-relaxed */
        }

        .property-detail-amenities-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            /* Responsive columns */
            gap: 1rem;
            /* gap-4 */
            list-style: none;
            padding: 0;
            color: var(--text-light);
        }

        html.dark .property-detail-amenities-list {
            color: var(--text-light);
        }

        .amenity-list-item {
            display: flex;
            align-items: center;
            background-color: var(--background-light);
            /* bg-gray-100 */
            padding: 0.75rem;
            /* p-3 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-sm);
        }

        html.dark .amenity-list-item {
            background-color: #374151;
            /* dark:bg-gray-700 */
        }

        .amenity-list-item i {
            color: var(--primary-default);
            margin-right: 0.75rem;
            /* mr-3 */
            font-size: 1.125rem;
            /* text-lg */
        }

        .agent-contact-section {
            margin-top: 2.5rem;
            /* mt-10 */
            padding-top: 2rem;
            /* pt-8 */
            border-top: 1px solid var(--border-light);
        }

        .agent-contact-card {
            display: flex;
            flex-direction: column;
            /* Mobile first */
            align-items: center;
            /* Mobile first */
            text-align: center;
            /* Mobile first */
            background-color: var(--background-light);
            /* bg-gray-100 */
            padding: 1.5rem;
            /* p-6 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-md);
        }

        html.dark .agent-contact-card {
            background-color: #374151;
            /* dark:bg-gray-700 */
        }

        .agent-contact-card .agent-icon {
            font-size: 3rem;
            /* text-5xl */
            color: var(--secondary-default);
            margin-bottom: 1rem;
            /* Mobile: mb, not mr */
        }

        html.dark .agent-contact-card .agent-icon {
            color: var(--secondary-light);
        }

        .agent-name {
            font-size: 1.25rem;
            /* text-xl */
            font-weight: 600;
            /* font-semibold */
            color: var(--text-light);
        }

        html.dark .agent-name {
            color: var(--text-light);
        }

        .agent-phone {
            color: var(--text-muted-light);
            /* text-gray-600 */
        }

        .agent-phone i {
            margin-right: 0.5rem;
        }

        .whatsapp-button {
            margin-top: 0.75rem;
            /* mt-3 */
            display: inline-block;
            background-color: #25D366;
            /* bg-green-500 (WhatsApp Green) */
            color: #fff;
            font-weight: 600;
            /* font-semibold */
            padding: 0.5rem 1rem;
            /* py-2 px-4 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: var(--shadow-sm);
            text-decoration: none;
        }

        .whatsapp-button:hover {
            background-color: #128C7E;
            box-shadow: var(--shadow-md);
        }

        .whatsapp-button i {
            margin-right: 0.5rem;
        }

        .back-to-list-link {
            margin-top: 2.5rem;
            /* mt-10 */
            text-align: center;
            display: block;
            /* Make it block for text-align to work */
        }

        .back-to-list-link a {
            color: var(--primary-default);
            font-weight: 600;
            /* font-semibold */
            text-decoration: none;
        }

        html.dark .back-to-list-link a {
            color: var(--primary-light);
        }

        .back-to-list-link a:hover {
            text-decoration: underline;
        }

        .back-to-list-link i {
            margin-right: 0.25rem;
        }


        /* 5. Responsivitas dengan Media Queries */
        @media (min-width: 640px) {

            /* sm_breakpoint */
            #page-content-container {
                padding-left: var(--space-6);
                padding-right: var(--space-6);
            }

            .filter-form-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .filter-form-grid .search-input-container {
                grid-column: span 2 / span 2;
            }

            /* searchTerm */
            .filter-form-grid .filter-button-container {
                grid-column: span 2 / span 2;
            }

            /* button */

            #property-list-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .property-detail-specs-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .property-detail-amenities-list {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (min-width: 768px) {

            /* md_breakpoint */
            .nav-links-desktop {
                display: block;
            }

            .mobile-menu-icon-container {
                display: none;
            }

            #mobile-menu-dropdown {
                display: none !important;
            }

            /* Ensure it's hidden */

            .stats-card-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .admin-header-content {
                flex-direction: row;
                align-items: center;
            }

            .admin-add-button {
                margin-top: 0;
            }

            .property-detail-layout {
                flex-direction: row;
            }

            .property-detail-image-container {
                width: 50%;
            }

            .property-detail-image {
                height: 100%;
            }

            /* md:h-full */
            .property-detail-info {
                width: 50%;
            }

            .agent-contact-card {
                flex-direction: row;
                align-items: center;
                text-align: left;
            }

            .agent-contact-card .agent-icon {
                margin-bottom: 0;
                margin-right: 1.5rem;
                /* mr-6 */
            }
        }

        @media (min-width: 1024px) {

            /* lg_breakpoint */
            #page-content-container {
                padding-left: var(--space-8);
                padding-right: var(--space-8);
            }

            .filter-form-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .filter-form-grid .search-input-container {
                grid-column: span 1 / span 1;
            }

            /* searchTerm (now takes 1/3) */
            /* price inputs take 1 column */
            .filter-form-grid .filter-button-container {
                grid-column: span 1 / span 1;
            }

            /* button */

            #property-list-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .property-detail-amenities-list {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
        }

        @media (min-width: 1280px) {

            /* xl_breakpoint */
            .filter-form-grid {
                grid-template-columns: 2fr 1fr 1fr 1.5fr 1fr;
                /* searchTerm (2 units), bedrooms, type, price (1.5 units), button */
            }

            .filter-form-grid .search-input-container {
                grid-column: span 1 / span 1;
            }

            /* Re-adjusting to match example */
            .filter-form-grid .filter-button-container {
                grid-column: span 1 / span 1;
            }

        }
    </style>
</head>

<body> <!-- Kelas tema akan ditambahkan oleh JavaScript -->

    <div id="app-container">
        <!-- Navbar akan dirender di sini oleh JavaScript -->
        <header id="navbar-container"></header>

        <!-- Konten Halaman Utama akan dirender di sini oleh JavaScript -->
        <main id="page-content-container" class="container">
            <!-- Konten halaman dinamis akan dimuat di sini -->
        </main>

        <!-- Footer akan dirender di sini oleh JavaScript -->
        <footer id="footer-container"></footer>
    </div>

    <script type="text/javascript">
        // Menggunakan 'strict mode' untuk penulisan kode JavaScript yang lebih aman
        'use strict';

        // --- KONSTANTA DAN DATA AWAL ---
        const APP_NAME = 'Green Valley  ';
        const NAV_LINKS = [
            { id: 'dashboard', name: 'Dasbor', path: '#/', icon: 'bi-speedometer2' },
            { id: 'properties', name: 'Properti', path: '#/properti', icon: 'bi-building' },
            { id: 'manage', name: 'Kelola Daftar', path: '#/kelola', icon: 'bi-pencil-square' },
        ];

        const PROPERTY_TYPES_OPTIONS = ['semua', 'Apartemen', 'Rumah', 'Kondominium', 'Townhouse', 'Studio'];
        const BEDROOM_OPTIONS_SELECT = ['semua', 1, 2, 3, 4, 5];

        // Data properti yang lebih beragam dan detail
        const MOCK_PROPERTIES_DATA = [
            {
                id: 'gv001',
                nama: 'Apartemen Emerald Sky',
                lokasi: 'Jl. Hijau Lestari No. 1, Green Valley Center',
                harga: 22000000, // Rupiah per bulan
                kamarTidur: 3,
                kamarMandi: 2,
                luas: 120, // m¬≤
                tipe: 'Apartemen',
                imageUrl: 'https://source.unsplash.com/random/600x400/?modern,apartment,interior',
                deskripsi: 'Apartemen mewah dengan pemandangan kota yang menakjubkan, desain interior kontemporer, dan fasilitas kelas satu. Sempurna untuk eksekutif dan keluarga modern.',
                fasilitas: ['Kolam Renang Infinity', 'Gym Lengkap', 'Area BBQ Rooftop', 'Keamanan 24/7', 'Parkir Basement', 'Layanan Concierge'],
                tersediaMulai: '2024-09-01',
                rating: 4.8,
                agen: { nama: 'Rina Wijaya', kontak: '0812-3456-7890' }
            },
            {
                id: 'gv002',
                nama: 'Rumah Oakwood Residence',
                lokasi: 'Komp. Oakwood Park Blok C2, Willow Creek Suburb',
                harga: 45000000,
                kamarTidur: 4,
                kamarMandi: 3,
                luas: 250,
                tipe: 'Rumah',
                imageUrl: 'https://source.unsplash.com/random/600x400/?luxury,house,exterior',
                deskripsi: 'Rumah keluarga yang luas dan elegan dengan taman pribadi yang rindang, kolam renang pribadi, dan area hiburan outdoor. Ideal untuk kehidupan keluarga yang berkualitas.',
                fasilitas: ['Taman Pribadi', 'Kolam Renang Pribadi', 'Garasi 2 Mobil', 'Dapur Gourmet', 'Ruang Kerja', 'Balkon Luas'],
                tersediaMulai: '2024-10-15',
                rating: 4.9,
                agen: { nama: 'Budi Santoso', kontak: '0811-9876-5432' }
            },
            {
                id: 'gv003',
                nama: 'Kondominium Urban Hive',
                lokasi: 'Jl. Metropolis No. 88, Central Business District',
                harga: 18500000,
                kamarTidur: 1,
                kamarMandi: 1,
                luas: 65,
                tipe: 'Kondominium',
                imageUrl: 'https://source.unsplash.com/random/600x400/?modern,condominium,cityview',
                deskripsi: 'Kondominium modern dan fungsional di jantung kota. Akses mudah ke transportasi publik, pusat perbelanjaan, dan hiburan. Cocok untuk profesional muda.',
                fasilitas: ['Akses Langsung ke Mall', 'Sky Lounge', 'Pusat Kebugaran', 'Co-working Space', 'Smart Home System'],
                tersediaMulai: '2024-08-20',
                rating: 4.5,
                agen: { nama: 'Citra Lestari', kontak: '0813-1234-5678' }
            },
            {
                id: 'gv004',
                nama: 'Townhouse Riverside Charm',
                lokasi: 'Cluster Riverbend Grove No. 12, Lakeside District',
                harga: 32000000,
                kamarTidur: 3,
                kamarMandi: 2.5, // Tetap float untuk kasus setengah kamar mandi
                luas: 180,
                tipe: 'Townhouse',
                imageUrl: 'https://source.unsplash.com/random/600x400/?cozy,townhouse,river',
                deskripsi: 'Townhouse menawan dengan arsitektur klasik modern, terletak di tepi sungai yang tenang. Nikmati suasana damai dengan akses mudah ke fasilitas perkotaan.',
                fasilitas: ['Pemandangan Sungai', 'Klub Komunitas', 'Jalur Jogging', 'Playground Anak', 'Keamanan Terpadu'],
                tersediaMulai: '2024-11-01',
                rating: 4.7,
                agen: { nama: 'Andi Pratama', kontak: '0815-1122-3344' }
            },
            {
                id: 'gv005',
                nama: 'Studio Minimalis City Loft',
                lokasi: 'Jl. Kreatif No. 5, Northwood Creative Hub',
                harga: 12000000,
                kamarTidur: 1,
                kamarMandi: 1,
                luas: 45,
                tipe: 'Studio',
                imageUrl: 'https://source.unsplash.com/random/600x400/?minimalist,studio,apartment',
                deskripsi: 'Studio apartemen yang ringkas dan bergaya dengan desain minimalis. Maksimalkan ruang hidup Anda di lokasi strategis yang dekat dengan pusat kreatif dan startup.',
                fasilitas: ['Dapur Kompak', 'Balkon Kecil', 'Area Penyimpanan Cerdas', 'Akses Internet Cepat', 'Laundry Bersama'],
                tersediaMulai: '2024-08-01',
                rating: 4.3,
                agen: { nama: 'Dewi Anggraini', kontak: '0818-9988-7766' }
            }
        ];

        // --- STATUS APLIKASI (STATE MANAGEMENT SEDERHANA) ---
        const appState = {
            theme: localStorage.getItem('green-valley-theme-native') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'),
            currentPage: getCurrentPath(),
            properties: [...MOCK_PROPERTIES_DATA],
            filteredProperties: [...MOCK_PROPERTIES_DATA],
            filters: {
                searchTerm: '',
                bedrooms: 'semua',
                propertyType: 'semua',
                minPrice: '',
                maxPrice: '',
            },
            isLoading: false,
            isMobileMenuOpen: false,
            selectedPropertyId: null,
        };

        // --- PEMILIH ELEMEN DOM UTAMA ---
        const htmlElement = document.documentElement;
        const navbarContainer = document.getElementById('navbar-container');
        const pageContentContainer = document.getElementById('page-content-container');
        const footerContainer = document.getElementById('footer-container');

        // --- FUNGSI UTILITAS ---

        /**
         * Memformat angka menjadi format mata uang Rupiah.
         * @param {number} number - Angka yang akan diformat.
         * @returns {string} String harga dalam format Rupiah.
         * @example formatCurrency(1000000) // "Rp 1.000.000"
         */
        function formatCurrency(number) {
            return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(number);
        }

        /**
         * Menghasilkan string HTML untuk rating bintang.
         * @param {number} rating - Nilai rating (0-5).
         * @returns {string} HTML untuk bintang rating.
         */
        function renderStars(rating) {
            let starsHTML = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);

            for (let i = 0; i < fullStars; i++) starsHTML += '<i class="bi bi-star-fill"></i>';
            if (halfStar) starsHTML += '<i class="bi bi-star-half"></i>';
            for (let i = 0; i < emptyStars; i++) starsHTML += '<i class="bi bi-star"></i>';

            return `<div class="star-rating flex items-center">${starsHTML}<span class="rating-value">(${rating.toFixed(1)})</span></div>`;
        }

        /**
         * Membersihkan string HTML untuk mencegah XSS sederhana.
         * Ini bukan solusi XSS yang lengkap, tetapi cukup untuk data yang dikontrol seperti nama properti.
         * Untuk input pengguna yang sebenarnya, diperlukan sanitasi yang lebih kuat.
         * @param {string} str - String yang akan dibersihkan.
         * @returns {string} String yang telah dibersihkan.
         */
        function sanitizeHTML(str) {
            const temp = document.createElement('div');
            temp.textContent = str;
            return temp.innerHTML;
        }


        // --- FUNGSI MANAJEMEN TEMA ---
        /** 
         * Menerapkan tema saat ini (terang/gelap) ke aplikasi.
         * Mengubah kelas pada elemen <html> dan menyimpan preferensi.
         */
        function applyTheme() {
            htmlElement.classList.remove(appState.theme === 'light' ? 'dark' : 'light');
            htmlElement.classList.add(appState.theme);
            localStorage.setItem('green-valley-theme-native', appState.theme);
            // Render ulang navbar untuk memperbarui ikon tema jika perlu
            if (navbarContainer.innerHTML) {
                renderNavbar(); // Re-render navbar to update theme toggle icon
            }
        }

        /** Mengganti antara tema terang dan gelap dan menerapkannya. */
        function toggleTheme() {
            appState.theme = appState.theme === 'light' ? 'dark' : 'light';
            applyTheme();
        }

        // --- FUNGSI RENDER KOMPONEN UI ---

        /** Merender Navbar Aplikasi. */
        function renderNavbar() {
            const linksHTML = NAV_LINKS.map(link => `
                <a href="${link.path}"
                   data-path="${link.path}"
                   class="nav-link ${appState.currentPage === link.path.slice(1) || (appState.currentPage === '/' && link.path === '#/') ? 'active' : ''}"
                   aria-current="${(appState.currentPage === link.path.slice(1) || (appState.currentPage === '/' && link.path === '#/')) ? 'page' : 'false'}">
                  <i class="${link.icon}"></i>
                  <span>${sanitizeHTML(link.name)}</span>
                </a>
            `).join('');

            navbarContainer.innerHTML = `
                <div class="container navbar-inner">
                    <div class="flex items-center">
                        <a href="#/" class="navbar-brand-link" aria-label="Beranda ${APP_NAME}">
                            <span class="navbar-brand-text">
                                <i class="bi bi-house-heart-fill"></i>${APP_NAME.split(' ')[0]}<span class="brand-secondary-color">${APP_NAME.split(' ')[1] || ''}</span>
                            </span>
                        </a>
                    </div>
                    <div class="nav-links-desktop">
                        <nav aria-label="Navigasi Utama">
                            ${linksHTML}
                        </nav>
                    </div>
                    <div class="flex items-center">
                        <button id="theme-toggle-button"
                                class="theme-toggle-button"
                                aria-label="${appState.theme === 'light' ? 'Ganti ke tema gelap' : 'Ganti ke tema terang'}"
                                title="${appState.theme === 'light' ? 'Ganti ke tema gelap' : 'Ganti ke tema terang'}">
                            <i class="${appState.theme === 'light' ? 'bi bi-moon-stars-fill' : 'bi bi-sun-fill'}"></i>
                        </button>
                        <div class="mobile-menu-icon-container">
                            <button id="mobile-menu-button" type="button"
                                    aria-controls="mobile-menu-dropdown" aria-expanded="${appState.isMobileMenuOpen}"
                                    aria-label="Buka atau tutup menu navigasi mobile">
                                <span class="visually-hidden">Buka menu utama</span>
                                <i class="${appState.isMobileMenuOpen ? 'bi bi-x-lg' : 'bi bi-list'}"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="mobile-menu-dropdown" class="${appState.isMobileMenuOpen ? 'open' : ''}">
                    <nav aria-label="Navigasi Mobile">
                        ${linksHTML}
                    </nav>
                </div>
            `;
            // Pasang event listener setelah merender
            document.getElementById('theme-toggle-button')?.addEventListener('click', toggleTheme);
            document.getElementById('mobile-menu-button')?.addEventListener('click', toggleMobileMenu);

            // Event listener untuk link navigasi (baik desktop maupun mobile)
            navbarContainer.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    // Navigasi SPA sudah ditangani oleh 'hashchange'
                    // Cukup tutup menu mobile jika terbuka
                    if (appState.isMobileMenuOpen) {
                        toggleMobileMenu();
                    }
                });
            });
        }

        /** Mengganti tampilan menu mobile. */
        function toggleMobileMenu() {
            appState.isMobileMenuOpen = !appState.isMobileMenuOpen;
            // Tidak perlu renderNavbar() lagi jika hanya toggle class di #mobile-menu-dropdown dan ikon
            const mobileMenu = document.getElementById('mobile-menu-dropdown');
            const menuButtonIcon = document.getElementById('mobile-menu-button')?.querySelector('i');
            if (mobileMenu) mobileMenu.classList.toggle('open', appState.isMobileMenuOpen);
            if (menuButtonIcon) {
                menuButtonIcon.className = appState.isMobileMenuOpen ? 'bi bi-x-lg' : 'bi bi-list';
            }
            // Update aria-expanded
            document.getElementById('mobile-menu-button')?.setAttribute('aria-expanded', appState.isMobileMenuOpen.toString());
        }


        /** Merender Footer Aplikasi. */
        function renderFooter() {
            footerContainer.innerHTML = `
                <div class="container">
                    <p class="text-base">
                        ¬© ${new Date().getFullYear()} ${sanitizeHTML(APP_NAME)}. Semua hak cipta dilindungi.
                    </p>
                    <p class="text-sm mt-2">
                        Ditenagai dengan <i class="bi bi-heart-fill text-red-500"></i> oleh HTML, CSS, dan JavaScript Native.
                    </p>
                    <div class="footer-social-links">
                        <a href="#" aria-label="Facebook ${APP_NAME}" title="Facebook"><i class="bi bi-facebook"></i></a>
                        <a href="#" aria-label="Instagram ${APP_NAME}" title="Instagram"><i class="bi bi-instagram"></i></a>
                        <a href="#" aria-label="Twitter ${APP_NAME}" title="Twitter/X"><i class="bi bi-twitter-x"></i></a>
                    </div>
                </div>
            `;
        }

        /**
         * Membuat HTML untuk satu kartu properti.
         * @param {object} property - Objek data properti.
         * @returns {string} String HTML untuk kartu properti.
         */
        function createPropertyCard(property) {
            return `
                <article class="property-card animate-slide-in-up">
                    <div class="property-image-wrapper">
                        <img class="property-image" src="${sanitizeHTML(property.imageUrl)}&sig=${sanitizeHTML(property.id)}" alt="Gambar ${sanitizeHTML(property.nama)}">
                        <div class="property-type-badge">${sanitizeHTML(property.tipe)}</div>
                        <div class="property-rating-overlay">
                            ${renderStars(property.rating)}
                        </div>
                    </div>
                    <div class="property-card-content">
                        <h3 class="property-name" title="${sanitizeHTML(property.nama)}">${sanitizeHTML(property.nama)}</h3>
                        <p class="property-location">
                            <i class="bi bi-geo-alt-fill"></i> ${sanitizeHTML(property.lokasi)}
                        </p>
                        <p class="property-price">${formatCurrency(property.harga)}<span class="price-period">/bulan</span></p>
                        
                        <div class="property-specs-grid">
                            <span class="property-spec-item"><i class="bi bi-rulers"></i> ${property.luas} m¬≤</span>
                            <span class="property-spec-item"><i class="bi bi-door-open-fill"></i> ${property.kamarTidur} KT</span>
                            <span class="property-spec-item"><i class="bi bi-droplet-half transform rotate-180"></i> ${Number.isInteger(property.kamarMandi) ? property.kamarMandi : property.kamarMandi.toFixed(1)} KM</span>
                            <span class="property-spec-item"><i class="bi bi-calendar-check-fill"></i> Mulai ${new Date(property.tersediaMulai).toLocaleDateString('id-ID', { year: 'numeric', month: 'short' })}</span>
                        </div>

                        <p class="property-description-preview">
                            ${sanitizeHTML(property.deskripsi)}
                        </p>
                        
                        <div class="property-amenities-preview">
                            <h4 class="text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-1_5">Fasilitas Unggulan:</h4>
                            <div class="property-amenities-tags">
                                ${property.fasilitas.slice(0, 3).map(amenity => `
                                    <span class="amenity-tag">${sanitizeHTML(amenity)}</span>
                                `).join('')}
                                ${property.fasilitas.length > 3 ? `<span class="amenity-tag">+${property.fasilitas.length - 3} lainnya</span>` : ''}
                            </div>
                        </div>

                        <button data-property-id="${sanitizeHTML(property.id)}" class="property-details-button">
                            <i class="bi bi-eye-fill"></i> Lihat Detail
                        </button>
                    </div>
                </article>
            `;
        }

        /** Merender bar pencarian dan filter. */
        function renderSearchBarAndFilters() {
            const { searchTerm, bedrooms, propertyType, minPrice, maxPrice } = appState.filters;
            return `
                <form id="filter-form">
                    <div class="filter-form-grid">
                        <div class="search-input-container"> 
                            <label for="searchTerm" class="block text-sm font-medium mb-1_5">Kata Kunci</label>
                            <div class="filter-input-group">
                                <span class="input-icon"><i class="bi bi-search"></i></span>
                                <input type="text" name="searchTerm" id="searchTerm" value="${sanitizeHTML(searchTerm)}" placeholder="Nama, lokasi, fasilitas..." class="w-full">
                            </div>
                        </div>
                        <div>
                            <label for="bedrooms" class="block text-sm font-medium mb-1_5">Jml. Kamar Tidur</label>
                            <select name="bedrooms" id="bedrooms" class="w-full">
                                ${BEDROOM_OPTIONS_SELECT.map(opt => `<option value="${opt}" ${bedrooms === opt.toString() ? 'selected' : ''}>${opt === 'semua' ? 'Semua Jumlah' : `${opt} Kamar`}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label for="propertyType" class="block text-sm font-medium mb-1_5">Tipe Properti</label>
                            <select name="propertyType" id="propertyType" class="w-full">
                                ${PROPERTY_TYPES_OPTIONS.map(type => `<option value="${type}" ${propertyType === type ? 'selected' : ''}>${type === 'semua' ? 'Semua Tipe' : sanitizeHTML(type)}</option>`).join('')}
                            </select>
                        </div>
                        <div class="filter-price-inputs">
                           <div>
                                <label for="minPrice" class="block text-sm font-medium mb-1_5">Harga Min (Rp)</label>
                                <input type="number" name="minPrice" id="minPrice" value="${sanitizeHTML(minPrice)}" placeholder="0" step="1000000" class="w-full">
                           </div>
                           <div>
                                <label for="maxPrice" class="block text-sm font-medium mb-1_5">Harga Max (Rp)</label>
                                <input type="number" name="maxPrice" id="maxPrice" value="${sanitizeHTML(maxPrice)}" placeholder="‚àû" step="1000000" class="w-full">
                           </div>
                        </div>
                        <div class="filter-button-container">  
                            <button type="submit" class="filter-button">
                                <i class="bi bi-funnel-fill"></i> Terapkan
                            </button>
                        </div>
                    </div>
                </form>
            `;
        }

        /** Merender state loading. */
        function renderLoadingState(message = "Memuat data...") {
            return `
                <div class="flex flex-col justify-center items-center h-96 text-center animate-fade-in">
                    <div class="fancy-spinner"></div>
                    <p class="text-xl font-semibold">${sanitizeHTML(message)}</p>
                    <p class="text-gray-500 dark:text-gray-400">Mohon tunggu sebentar...</p>
                </div>
            `;
        }

        /** Merender pesan ketika tidak ada hasil. */
        function renderNoResultsState(message = "Properti Tidak Ditemukan") {
            return `
                <div class="no-results-container animate-fade-in">
                    <i class="bi bi-search-heart icon-main"></i>
                    <h2>${sanitizeHTML(message)}</h2>
                    <p>
                        Coba sesuaikan filter pencarian Anda atau periksa kembali nanti. Mungkin properti impian Anda sedang menunggu untuk ditambahkan!
                    </p>
                    <button id="reset-filters-button">
                        <i class="bi bi-arrow-counterclockwise"></i> Reset Filter
                    </button>
                </div>`;
        }

        // --- FUNGSI RENDER HALAMAN ---

        /** Merender Halaman Dasbor. */
        function renderDashboardPage() {
            pageContentContainer.innerHTML = `
                <div class="space-y-8 animate-slide-in-up">
                    <header class="dashboard-header">
                        <h1>Dasbor Utama</h1>
                        <p>Selamat datang kembali! Berikut ringkasan aktivitas properti Anda.</p>
                    </header>

                    <div class="stats-card-grid">
                        <div class="stat-card primary-gradient">
                            <div class="stat-card-header">
                                <h2>Total Properti</h2>
                                <i class="bi bi-buildings-fill"></i>
                            </div>
                            <p class="stat-value">125</p>
                            <p class="stat-subtitle">+5 properti baru minggu ini</p>
                        </div>
                        <div class="stat-card secondary-gradient">
                             <div class="stat-card-header">
                                <h2>Tingkat Hunian</h2>
                                <i class="bi bi-pie-chart-fill"></i>
                            </div>
                            <p class="stat-value">88%</p>
                             <p class="stat-subtitle">Target 90% tercapai</p>
                        </div>
                        <div class="stat-card accent-gradient">
                             <div class="stat-card-header">
                                <h2>Permintaan Baru</h2>
                                <i class="bi bi-bell-fill"></i>
                            </div>
                            <p class="stat-value">12</p>
                            <p class="stat-subtitle">Perlu ditindaklanjuti</p>
                        </div>
                    </div>

                    <div class="activity-list-container">
                        <h2>Aktivitas Terkini</h2>
                        <ul class="activity-list">
                            <li class="activity-item">
                                <i class="bi bi-check-circle-fill icon-check"></i>
                                <div class="item-content">
                                    <p class="font-medium">Sewa baru ditandatangani untuk Apt Emerald Sky (ID: gv001).</p>
                                    <p class="text-sm">1 jam lalu</p>
                                </div>
                            </li>
                            <li class="activity-item">
                                <i class="bi bi-tools icon-tools"></i>
                                <div class="item-content">
                                    <p class="font-medium">Permintaan perawatan untuk Unit Oakwood C2 (ID: gv002) selesai.</p>
                                    <p class="text-sm">3 jam lalu</p>
                                </div>
                            </li>
                             <li class="activity-item">
                                <i class="bi bi-house-add-fill icon-house-add"></i>
                                <div class="item-content">
                                    <p class="font-medium">Properti baru "Studio Cosmo Bright" ditambahkan.</p>
                                    <p class="text-sm">Kemarin</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="mt-10 text-center dashboard-image-showcase">
                        <img src="https://source.unsplash.com/random/1200x400/?green,valley,landscape,modern" alt="Lanskap Lembah Hijau yang Indah dan Modern" class="rounded-xl shadow-2xl mx-auto w-full max-w-4xl object-cover h-64">
                        <p>Nikmati pemandangan Green Valley yang menenangkan dan inspiratif.</p>
                    </div>
                </div>
            `;
        }

        /** Merender Halaman Daftar Properti. */
        function renderPropertiesPage() {
            let contentHTML = `
                <div class="space-y-8 animate-slide-in-up">
                    <header class="properties-page-header">
                        <i class="bi bi-buildings header-icon"></i>
                        <h1>Temukan Properti Impian Anda</h1>
                        <p>Jelajahi daftar properti pilihan kami yang dirancang untuk kenyamanan dan gaya hidup modern Anda.</p>
                    </header>
                    ${renderSearchBarAndFilters()}
            `;

            if (appState.isLoading) {
                contentHTML += renderLoadingState("Mencari properti terbaik untuk Anda...");
            } else if (appState.filteredProperties.length > 0) {
                contentHTML += `<section id="property-list-grid" aria-label="Daftar Properti">
                    ${appState.filteredProperties.map(prop => createPropertyCard(prop)).join('')}
                </section>`;
            } else {
                contentHTML += renderNoResultsState();
            }
            contentHTML += `</div>`;
            pageContentContainer.innerHTML = contentHTML;
            attachDynamicEventListeners();
        }

        /** Merender Halaman Kelola Daftar Properti (Admin CRUD - Mockup). */
        function renderAdminCrudPage() {
            const propertiesForTable = appState.properties.slice(0, 3);

            pageContentContainer.innerHTML = `
                <div class="space-y-8 animate-slide-in-up">
                    <header class="admin-page-header">
                        <div class="admin-header-content">
                            <div>
                                <h1>Kelola Daftar Properti</h1>
                                <p>Tambah, edit, atau hapus daftar properti dari sistem.</p>
                            </div>
                            <button class="admin-add-button">
                                <i class="bi bi-plus-circle-fill"></i> Tambah Properti
                            </button>
                        </div>
                    </header>

                    <div class="admin-table-container">
                        <h2>Daftar Properti Saat Ini</h2>
                        <div class="table-wrapper">
                            <table class="admin-table" aria-label="Tabel Daftar Properti">
                                <thead>
                                    <tr>
                                        <th scope="col">Nama Properti</th>
                                        <th scope="col">Lokasi</th>
                                        <th scope="col">Harga/Bulan</th>
                                        <th scope="col">Status</th>
                                        <th scope="col" class="text-right"><span class="visually-hidden">Tindakan</span>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${propertiesForTable.length > 0 ? propertiesForTable.map(prop => `
                                    <tr>
                                        <td class="cell-property-info">
                                            <div class="cell-property-image-container">
                                                <img class="cell-property-image" src="${sanitizeHTML(prop.imageUrl)}&sig=${sanitizeHTML(prop.id)}_thumb" alt="Thumbnail ${sanitizeHTML(prop.nama)}">
                                            </div>
                                            <div class="cell-property-text">
                                                <div class="cell-property-name">${sanitizeHTML(prop.nama)}</div>
                                                <div class="cell-property-type">${sanitizeHTML(prop.tipe)}</div>
                                            </div>
                                        </td>
                                        <td class="cell-location">${sanitizeHTML(prop.lokasi.split(',')[0])}</td>
                                        <td class="cell-price">${formatCurrency(prop.harga)}</td>
                                        <td>
                                            <span class="status-badge ${new Date(prop.tersediaMulai) <= new Date() ? 'available' : 'soon'}">
                                                ${new Date(prop.tersediaMulai) <= new Date() ? 'Tersedia' : 'Segera Hadir'}
                                            </span>
                                        </td>
                                        <td class="cell-actions">
                                            <a href="#" title="Edit ${sanitizeHTML(prop.nama)}"><i class="bi bi-pencil-fill"></i> <span class="visually-hidden">Edit</span></a>
                                            <a href="#" class="action-delete" title="Hapus ${sanitizeHTML(prop.nama)}"><i class="bi bi-trash-fill"></i> <span class="visually-hidden">Hapus</span></a>
                                        </td>
                                    </tr>
                                    `).join('') : `
                                    <tr class="admin-table-empty-row">
                                        <td colspan="5">
                                            <i class="bi bi-folder-x"></i><br>
                                            Saat ini tidak ada daftar properti untuk ditampilkan. Klik "Tambah Properti" untuk memulai.
                                        </td>
                                    </tr>
                                    `}
                                </tbody>
                            </table>
                        </div>
                         ${propertiesForTable.length > 0 ? `
                        <div class="admin-table-footer">
                            <p>Menampilkan ${propertiesForTable.length} dari ${appState.properties.length} properti.</p>
                            <div class="pagination-mock" role="navigation" aria-label="Navigasi Halaman Tabel">
                                <button aria-label="Halaman Sebelumnya" title="Sebelumnya">¬´</button>
                                <button aria-current="page" class="active" aria-label="Halaman 1">1</button>
                                <button aria-label="Halaman 2" title="Halaman 2">2</button>
                                <button aria-label="Halaman Selanjutnya" title="Selanjutnya">¬ª</button>
                            </div>
                        </div>
                        ` : ''}
                    </div>

                    <div class="mt-10 text-center admin-image-showcase">
                        <img src="https://source.unsplash.com/random/1000x300/?office,control,panel,modern" alt="Panel Kontrol Admin yang Canggih dan Modern" >
                        <p>Kelola portofolio properti Anda dengan mudah dan efisien.</p>
                    </div>
                </div>
            `;
            attachDynamicEventListeners();
        }

        /** Merender halaman default jika path tidak ditemukan */
        function renderNotFoundPage() {
            pageContentContainer.innerHTML = `
                <div class="not-found-container animate-fade-in">
                    <i class="bi bi-compass-fill icon-compass"></i>
                    <h1>404</h1>
                    <h2>Oops! Halaman Tidak Ditemukan</h2>
                    <p>
                        Sepertinya Anda tersesat. Halaman yang Anda cari mungkin telah dipindahkan, dihapus, atau tidak pernah ada.
                    </p>
                    <a href="#/" class="back-to-dashboard-button">
                        <i class="bi bi-house-door-fill"></i> Kembali ke Dasbor
                    </a>
                </div>
            `;
        }

        /** Merender Halaman Detail Properti. */
        function renderPropertyDetailPage(property) {
            pageContentContainer.innerHTML = `
                <article class="property-detail-card animate-slide-in-up">
                    <div class="property-detail-layout">
                        <div class="property-detail-image-container">
                            <img class="property-detail-image" src="${sanitizeHTML(property.imageUrl)}&sig=${sanitizeHTML(property.id)}_detail" alt="Gambar detail ${sanitizeHTML(property.nama)}">
                        </div>
                        <div class="property-detail-info">
                            <div class="property-detail-type">${sanitizeHTML(property.tipe)}</div>
                            <h1 class="property-detail-name">${sanitizeHTML(property.nama)}</h1>
                            <p class="property-detail-location"><i class="bi bi-geo-alt-fill"></i> ${sanitizeHTML(property.lokasi)}</p>
                            
                            <p class="property-detail-price">${formatCurrency(property.harga)}<span class="price-period">/bulan</span></p>
                            
                            <div class="property-detail-specs-grid">
                                <span class="property-detail-spec-item"><i class="bi bi-rulers"></i> ${property.luas} m¬≤ Luas Bangunan</span>
                                <span class="property-detail-spec-item"><i class="bi bi-door-open-fill"></i> ${property.kamarTidur} Kamar Tidur</span>
                                <span class="property-detail-spec-item"><i class="bi bi-droplet-half transform rotate-180"></i> ${Number.isInteger(property.kamarMandi) ? property.kamarMandi : property.kamarMandi.toFixed(1)} Kamar Mandi</span>
                                <span class="property-detail-spec-item"><i class="bi bi-calendar-check-fill"></i> Tersedia Mulai ${new Date(property.tersediaMulai).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' })}</span>
                            </div>

                            <div class="property-detail-rating">
                                ${renderStars(property.rating)}
                            </div>
                        </div>
                    </div>
                    <section class="property-detail-content-section">
                        <h2>Deskripsi Properti</h2>
                        <p class="property-detail-description">${sanitizeHTML(property.deskripsi)}</p>

                        <h2 class="mt-8">Fasilitas Lengkap</h2>
                        <ul class="property-detail-amenities-list">
                            ${property.fasilitas.map(f => `<li class="amenity-list-item"><i class="bi bi-check-lg"></i> ${sanitizeHTML(f)}</li>`).join('')}
                        </ul>
                        
                        <section class="agent-contact-section" aria-labelledby="agent-heading">
                             <h2 id="agent-heading">Hubungi Agen</h2>
                             <div class="agent-contact-card">
                                <i class="bi bi-person-circle agent-icon"></i>
                                <div>
                                    <p class="agent-name">${sanitizeHTML(property.agen.nama)}</p>
                                    <p class="agent-phone"><i class="bi bi-telephone-fill"></i>${sanitizeHTML(property.agen.kontak)}</p>
                                    <a href="https://wa.me/${property.agen.kontak.replace(/\D/g, '')}?text=Halo%2C%20saya%20tertarik%20dengan%20properti%20${encodeURIComponent(property.nama)}%20(ID%3A%20${sanitizeHTML(property.id)})" 
                                       target="_blank" rel="noopener noreferrer"
                                       class="whatsapp-button">
                                        <i class="bi bi-whatsapp"></i> Hubungi via WhatsApp
                                    </a>
                                </div>
                             </div>
                        </section>

                        <div class="back-to-list-link">
                            <a href="#/properti">
                                <i class="bi bi-arrow-left-circle-fill"></i> Kembali ke Daftar Properti
                            </a>
                        </div>
                    </section>
                </article>
            `;
            window.scrollTo(0, 0);
        }


        // --- LOGIKA ROUTING SPA (SINGLE PAGE APPLICATION) ---

        /** Mendapatkan path saat ini dari URL hash. */
        function getCurrentPath() {
            return window.location.hash.slice(1) || '/';
        }

        /** Menangani perubahan route (hash URL). */
        function handleRouteChange() {
            appState.currentPage = getCurrentPath();
            renderCurrentPage();
            renderNavbar();
            window.scrollTo(0, 0);
        }

        /** Merender halaman yang sesuai dengan route saat ini. */
        function renderCurrentPage() {
            pageContentContainer.innerHTML = ''; // Bersihkan konten lama

            // Tampilkan loading sementara sebelum render halaman
            pageContentContainer.innerHTML = renderLoadingState("Memuat halaman...");

            // Simulasi penundaan untuk efek transisi dan memastikan DOM siap
            setTimeout(() => {
                let pageFound = false;
                if (appState.currentPage === '/') {
                    renderDashboardPage();
                    pageFound = true;
                } else if (appState.currentPage === '/properti') {
                    renderPropertiesPage(); // Fungsi ini menangani loading internalnya
                    pageFound = true;
                } else if (appState.currentPage === '/kelola') {
                    renderAdminCrudPage();
                    pageFound = true;
                } else if (appState.currentPage.startsWith('/properti/')) {
                    const propertyId = appState.currentPage.split('/')[2];
                    const property = appState.properties.find(p => p.id === propertyId);
                    if (property) {
                        renderPropertyDetailPage(property);
                        pageFound = true;
                    }
                }

                if (!pageFound) {
                    renderNotFoundPage();
                }
                // Tidak perlu attachDynamicEventListeners di sini karena sudah dipanggil di dalam renderXPage
            }, 50); // Penundaan minimal untuk user experience
        }

        // --- FUNGSI PENANGAN EVENT DINAMIS ---

        /** Memasang event listener ke elemen yang dinamis dirender. */
        function attachDynamicEventListeners() {
            const filterForm = document.getElementById('filter-form');
            if (filterForm) {
                filterForm.addEventListener('submit', handleFilterSubmit);
            }

            // Gunakan event delegation untuk tombol detail properti
            const propertyList = document.getElementById('property-list-grid');
            if (propertyList) {
                propertyList.addEventListener('click', (e) => {
                    const button = e.target.closest('.property-details-button');
                    if (button) {
                        const propertyId = button.dataset.propertyId;
                        window.location.hash = `#/properti/${propertyId}`;
                    }
                });
            }

            const resetFiltersButton = document.getElementById('reset-filters-button');
            if (resetFiltersButton) {
                resetFiltersButton.addEventListener('click', () => {
                    appState.filters = { searchTerm: '', bedrooms: 'semua', propertyType: 'semua', minPrice: '', maxPrice: '' };
                    // Kosongkan field form secara manual
                    const filterForm = document.getElementById('filter-form');
                    if (filterForm) {
                        filterForm.reset(); // Cara mudah untuk reset form fields
                    }
                    applyFiltersAndRenderProperties();
                });
            }
        }

        /** Menangani submit form filter. */
        function handleFilterSubmit(event) {
            event.preventDefault();
            appState.filters.searchTerm = document.getElementById('searchTerm')?.value.trim() || '';
            appState.filters.bedrooms = document.getElementById('bedrooms')?.value || 'semua';
            appState.filters.propertyType = document.getElementById('propertyType')?.value || 'semua';
            appState.filters.minPrice = document.getElementById('minPrice')?.value || '';
            appState.filters.maxPrice = document.getElementById('maxPrice')?.value || '';
            applyFiltersAndRenderProperties();
        }


        // --- FUNGSI LOGIKA APLIKASI ---

        /** Menerapkan filter dan merender ulang daftar properti. */
        function applyFiltersAndRenderProperties() {
            appState.isLoading = true;
            if (appState.currentPage === '/properti') {
                // Render ulang halaman properti dengan spinner aktif
                // Ini akan dipanggil di dalam renderPropertiesPage() jika isLoading true
                // Jadi cukup panggil renderPropertiesPage()
                renderPropertiesPage();
            }

            // Simulasi penundaan panggilan API atau proses filter yang berat
            setTimeout(() => {
                let tempProperties = [...appState.properties];
                const { searchTerm, bedrooms, propertyType, minPrice, maxPrice } = appState.filters;

                if (searchTerm) {
                    const termLower = searchTerm.toLowerCase();
                    tempProperties = tempProperties.filter(p =>
                        p.nama.toLowerCase().includes(termLower) ||
                        p.lokasi.toLowerCase().includes(termLower) ||
                        p.deskripsi.toLowerCase().includes(termLower) ||
                        p.fasilitas.some(f => f.toLowerCase().includes(termLower))
                    );
                }
                if (bedrooms !== 'semua') {
                    tempProperties = tempProperties.filter(p => p.kamarTidur === parseInt(bedrooms));
                }
                if (propertyType !== 'semua') {
                    tempProperties = tempProperties.filter(p => p.tipe === propertyType);
                }

                const numMinPrice = parseFloat(minPrice);
                if (!isNaN(numMinPrice) && minPrice !== '') {
                    tempProperties = tempProperties.filter(p => p.harga >= numMinPrice);
                }
                const numMaxPrice = parseFloat(maxPrice);
                if (!isNaN(numMaxPrice) && maxPrice !== '') {
                    tempProperties = tempProperties.filter(p => p.harga <= numMaxPrice);
                }

                appState.filteredProperties = tempProperties;
                appState.isLoading = false;

                if (appState.currentPage === '/properti') {
                    renderPropertiesPage(); // Render ulang dengan data terfilter
                }
            }, 750); // Durasi simulasi loading
        }

        // --- INISIALISASI APLIKASI ---

        /** Fungsi utama untuk menginisialisasi aplikasi. */
        function initializeApplication() {
            applyTheme();
            renderNavbar();
            renderFooter();

            window.addEventListener('hashchange', handleRouteChange);
            handleRouteChange(); // Render halaman awal saat dimuat
        }

        // Jalankan inisialisasi setelah DOM sepenuhnya dimuat
        document.addEventListener('DOMContentLoaded', initializeApplication);

    </script>
</body>

</html>