<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Platform penyewaan apartemen canggih dengan pencarian intuitif, sistem pembayaran aman (simulasi), dan pengalaman pengguna yang memanjakan mata." />
  <meta name="theme-color" content="#007bff">
  <title>ApartRent | Platform Penyewaan Apartemen Modern</title>

  <!-- Favicon (Contoh menggunakan emoji sebagai favicon - ganti dengan file .ico jika ada) -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">

  <!-- Menggunakan Font Awesome untuk ikon (alternatif jika diizinkan, karena permintaan ikon online gratis) -->
  <!-- Jika ini bertentangan dengan "vanilla native", kita bisa hapus dan gunakan karakter unicode atau CSS-only icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Gaya Kustom Aplikasi -->
  <style>
    /* Variabel CSS untuk Tema dan Konsistensi */
    :root {
      --primary-color: #007bff;
      --primary-hover-color: #0056b3;
      --secondary-color: #6c757d;
      --secondary-hover-color: #5a6268;
      --success-color: #28a745;
      --danger-color: #dc3545;
      --warning-color: #ffc107;
      --info-color: #17a2b8;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
      --text-color: #333;
      --background-color: #f4f4f4;
      --card-background-color: #fff;
      --border-color: #dee2e6;
      --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      --header-height: 60px;
      --nav-height: 50px;
      --box-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
      --box-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
      --border-radius: 8px;
    }

    /* Reset dan Gaya Dasar */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
      /* Basis untuk unit rem */
    }

    body {
      font-family: var(--font-family);
      line-height: 1.6;
      color: var(--text-color);
      background-color: var(--background-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      transition: background-color 0.3s, color 0.3s;
    }

    /* Utilitas Umum */
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .text-center {
      text-align: center;
    }

    .text-primary {
      color: var(--primary-color);
    }

    .mt-1 {
      margin-top: 1rem;
    }

    .mb-1 {
      margin-bottom: 1rem;
    }

    .p-1 {
      padding: 1rem;
    }

    .hidden {
      display: none !important;
    }

    /* Gaya untuk Header */
    .app-header {
      background: linear-gradient(90deg, var(--primary-color), var(--primary-hover-color));
      color: white;
      padding: 0 2rem;
      height: var(--header-height);
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--box-shadow-md);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .app-header .logo {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .app-header .logo .fa-building-columns {
      margin-right: 0.5rem;
    }

    .user-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      background-color: var(--light-color);
      color: var(--primary-color);
      font-weight: bold;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      cursor: default;
    }

    .theme-toggle-btn,
    .logout-btn {
      background: transparent;
      color: white;
      border: 1px solid white;
      padding: 0.5rem 0.75rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
      font-size: 0.9rem;
    }

    .theme-toggle-btn:hover,
    .logout-btn:hover {
      background-color: white;
      color: var(--primary-color);
    }

    /* Gaya untuk Navigasi (SPA) */
    .app-nav {
      background: var(--card-background-color);
      height: var(--nav-height);
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: var(--box-shadow-sm);
      position: sticky;
      top: var(--header-height);
      /* Muncul di bawah header */
      z-index: 999;
    }

    .app-nav ul {
      list-style: none;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      /* Agar responsif di layar kecil */
    }

    .app-nav a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius);
      transition: background-color 0.3s ease, color 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .app-nav a:hover,
    .app-nav a.active {
      background-color: var(--primary-color);
      color: white;
    }

    .app-nav a .fa-solid {
      font-size: 0.9em;
    }

    /* Konten Utama */
    .app-main {
      flex: 1;
      padding: 2rem 0;
      /* Padding vertikal untuk main, horizontal diatur oleh .container */
    }

    /* Setiap Halaman/Section dalam SPA */
    .page-section {
      display: none;
      /* Semua section disembunyikan secara default */
      animation: fadeIn 0.5s ease-in-out;
    }

    .page-section.active {
      display: block;
      /* Section aktif akan ditampilkan */
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gaya Kartu (Card) */
    .card {
      background: var(--card-background-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-md);
      overflow: hidden;
      transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      margin-bottom: 1.5rem;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .card-header {
      padding: 1rem 1.5rem;
      background-color: var(--light-color);
      border-bottom: 1px solid var(--border-color);
      font-size: 1.2rem;
      font-weight: 600;
    }

    .card-body {
      padding: 1.5rem;
    }

    .card-footer {
      padding: 1rem 1.5rem;
      background-color: var(--light-color);
      border-top: 1px solid var(--border-color);
      text-align: right;
    }

    /* Grid System Sederhana */
    .grid-container {
      display: grid;
      gap: 1.5rem;
    }

    .grid-cols-1 {
      grid-template-columns: 1fr;
    }

    .grid-cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    .grid-cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    .grid-cols-autofit {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }


    /* Formulir */
    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-color);
    }

    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group input[type="password"],
    .form-group input[type="date"],
    .form-group input[type="number"],
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      background-color: var(--card-background-color);
      color: var(--text-color);
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }

    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    /* Tombol */
    .btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      text-align: center;
      text-decoration: none;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      white-space: nowrap;
      /* Mencegah teks tombol wrap */
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--primary-hover-color);
    }

    .btn-secondary {
      background-color: var(--secondary-color);
      color: white;
    }

    .btn-secondary:hover {
      background-color: var(--secondary-hover-color);
    }

    .btn-full-width {
      display: block;
      width: 100%;
    }

    .btn .fa-solid {
      margin-right: 0.5rem;
    }

    /* Kartu Apartemen */
    .apartment-card {
      display: flex;
      flex-direction: column;
    }

    .apartment-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
      border-top-left-radius: var(--border-radius);
      border-top-right-radius: var(--border-radius);
    }

    .apartment-card .card-body {
      flex-grow: 1;
      /* Agar body kartu mengisi ruang tersedia */
    }

    .apartment-card h4 {
      margin-bottom: 0.5rem;
      font-size: 1.3rem;
      color: var(--primary-color);
    }

    .apartment-card .price {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .apartment-card .location,
    .apartment-card .type {
      font-size: 0.9rem;
      color: var(--secondary-color);
      margin-bottom: 0.25rem;
    }

    .apartment-card .amenities {
      font-size: 0.9rem;
      margin-bottom: 1rem;
      color: #555;
    }

    .apartment-card .amenities .fa-solid {
      margin-right: 0.3rem;
      color: var(--primary-color);
    }

    /* Placeholder untuk Peta dan Grafik (karena tidak boleh ada library) */
    .map-placeholder,
    .chart-placeholder {
      width: 100%;
      height: 300px;
      background-color: var(--light-color);
      border: 1px dashed var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--secondary-color);
      border-radius: var(--border-radius);
      margin: 1rem 0;
    }

    .chart-placeholder {
      min-height: 250px;
      /* Minimal tinggi untuk chart */
    }

    .chart-placeholder .fa-solid {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    /* Detail Akordion */
    .accordion details {
      margin-bottom: 0.5rem;
    }

    .accordion summary {
      cursor: pointer;
      font-weight: 600;
      padding: 0.75rem;
      background: var(--light-color);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      list-style: none;
      /* Hapus panah default */
      position: relative;
      transition: background-color 0.3s;
    }

    .accordion summary::-webkit-details-marker {
      display: none;
    }

    /* Hapus panah default di Chrome/Safari */
    .accordion summary::after {
      /* Panah kustom */
      content: '\f078';
      /* Font Awesome Angle Down */
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      transition: transform 0.3s;
    }

    .accordion details[open] summary {
      background: var(--primary-color);
      color: white;
    }

    .accordion details[open] summary::after {
      transform: translateY(-50%) rotate(180deg);
      /* Panah ke atas */
      color: white;
    }

    .accordion details p {
      padding: 1rem;
      border: 1px solid var(--border-color);
      border-top: none;
      border-bottom-left-radius: var(--border-radius);
      border-bottom-right-radius: var(--border-radius);
    }


    /* Notifikasi Toast */
    .toast-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: var(--border-radius);
      color: white;
      font-weight: 500;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
      box-shadow: var(--box-shadow-lg);
    }

    .toast-notification.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .toast-notification.success {
      background-color: var(--success-color);
    }

    .toast-notification.error {
      background-color: var(--danger-color);
    }

    .toast-notification.info {
      background-color: var(--info-color);
    }

    /* Modal Konfirmasi */
    .confirmation-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }

    .confirmation-overlay.show {
      opacity: 1;
      visibility: visible;
    }

    .confirmation-dialog {
      background-color: var(--card-background-color);
      padding: 2rem;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-lg);
      width: 90%;
      max-width: 400px;
      text-align: center;
      transform: scale(0.9);
      transition: transform 0.3s;
    }

    .confirmation-overlay.show .confirmation-dialog {
      transform: scale(1);
    }

    .confirmation-dialog h3 {
      margin-bottom: 1rem;
      color: var(--primary-color);
    }

    .confirmation-dialog p {
      margin-bottom: 1.5rem;
    }

    .confirmation-dialog .btn-group {
      display: flex;
      justify-content: space-around;
      gap: 1rem;
    }

    /* Gaya Footer */
    .app-footer {
      background: var(--dark-color);
      color: var(--light-color);
      text-align: center;
      padding: 1.5rem 0;
      margin-top: auto;
      /* Mendorong footer ke bawah jika konten sedikit */
    }

    /* Tema Gelap (Dark Mode) */
    body.dark-mode {
      --text-color: #e0e0e0;
      --background-color: #121212;
      --card-background-color: #1e1e1e;
      --border-color: #444;
      --light-color: #2a2a2a;
      /* Untuk header kartu, dll. */
    }

    body.dark-mode .app-header {
      background: linear-gradient(90deg, #2c3e50, #34495e);
    }

    body.dark-mode .app-nav {
      background-color: #1e1e1e;
    }

    body.dark-mode .app-nav a {
      color: #8ab4f8;
      /* Warna link yang kontras di mode gelap */
    }

    body.dark-mode .app-nav a:hover,
    body.dark-mode .app-nav a.active {
      background-color: #8ab4f8;
      color: #1e1e1e;
    }

    body.dark-mode .form-group input,
    body.dark-mode .form-group select,
    body.dark-mode .form-group textarea {
      background-color: #2a2a2a;
      color: #e0e0e0;
      border-color: #555;
    }

    body.dark-mode .form-group input:focus,
    body.dark-mode .form-group select:focus,
    body.dark-mode .form-group textarea:focus {
      border-color: var(--primary-color);
      /* Tetap gunakan primary color untuk focus */
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }

    body.dark-mode .accordion summary {
      background-color: #2a2a2a;
      border-color: #444;
    }

    body.dark-mode .accordion details[open] summary {
      background: var(--primary-color);
      color: white;
      /* Teks putih tetap jelas di primary color */
    }

    body.dark-mode .accordion details p {
      border-color: #444;
    }

    body.dark-mode .app-footer {
      background-color: #1e1e1e;
      color: #aaa;
    }

    /* Responsif */
    @media (max-width: 768px) {
      html {
        font-size: 15px;
      }

      .app-header {
        padding: 0 1rem;
        flex-direction: column;
        height: auto;
        padding-bottom: 0.5rem;
        padding-top: 0.5rem;
      }

      .app-header .logo {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .user-actions {
        width: 100%;
        justify-content: space-between;
      }

      .app-nav {
        height: auto;
        position: static;
        /* Navigasi tidak sticky di mobile untuk hemat ruang */
      }

      .app-nav ul {
        flex-direction: column;
        /* Tumpuk link navigasi */
        align-items: center;
        padding: 0.5rem 0;
        width: 100%;
      }

      .app-nav a {
        width: 90%;
        text-align: center;
        justify-content: center;
      }

      .grid-cols-2,
      .grid-cols-3 {
        grid-template-columns: 1fr;
        /* Semua grid jadi 1 kolom */
      }

      .container {
        width: 95%;
      }

      .app-main {
        padding: 1rem 0;
      }
    }

    @media (max-width: 480px) {
      html {
        font-size: 14px;
      }

      .btn {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
      }

      .card-body,
      .card-header,
      .card-footer {
        padding: 1rem;
      }

      .user-actions {
        flex-wrap: wrap;
        /* Izinkan wrap jika perlu */
        gap: 0.5rem;
        justify-content: center;
      }

      .theme-toggle-btn,
      .logout-btn {
        flex-grow: 1;
        /* Tombol bisa memenuhi ruang */
        min-width: 120px;
      }
    }
  </style>
</head>

<body>
  <!-- Header Aplikasi -->
  <header class="app-header">
    <div class="logo"><i class="fa-solid fa-building-columns"></i> ApartRent</div>
    <div class="user-actions">
      <div class="user-avatar" title="Admin">AD</div>
      <span class="user-greeting" title="admin@examplerent.com">Halo, Admin!</span>
      <button id="theme-toggle-btn" class="theme-toggle-btn" aria-label="Toggle Dark Mode">
        <i class="fa-solid fa-moon"></i> Mode Gelap
      </button>
      <button id="logout-btn" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Keluar</button>
    </div>
  </header>

  <!-- Navigasi SPA -->
  <nav class="app-nav">
    <ul>
      <li><a href="#dashboard" class="nav-link active" data-section="dashboard"><i class="fa-solid fa-chart-line"></i>
          Beranda</a></li>
      <li><a href="#search" class="nav-link" data-section="search"><i class="fa-solid fa-magnifying-glass"></i>
          Pencarian</a></li>
      <li><a href="#profile" class="nav-link" data-section="profile"><i class="fa-solid fa-user-gear"></i> Profil</a>
      </li>
      <li><a href="#support" class="nav-link" data-section="support"><i class="fa-solid fa-headset"></i> Dukungan</a>
      </li>
    </ul>
  </nav>

  <!-- Kontainer Utama untuk Halaman SPA -->
  <main class="app-main">
    <div class="container">
      <!-- Bagian Beranda (Dashboard) -->
      <section id="dashboard" class="page-section active">
        <h2><i class="fa-solid fa-chart-pie"></i> Ringkasan Dasbor</h2>
        <div class="grid-container grid-cols-autofit mt-1">
          <div class="card">
            <div class="card-body text-center">
              <i class="fa-solid fa-building fa-2x text-primary mb-1"></i>
              <h4>Total Apartemen</h4>
              <p class="text-primary" style="font-size: 2rem; font-weight: bold;" id="total-apartments-stats">0</p>
            </div>
          </div>
          <div class="card">
            <div class="card-body text-center">
              <i class="fa-solid fa-users fa-2x text-primary mb-1"></i>
              <h4>Total Penyewa Aktif</h4>
              <p class="text-primary" style="font-size: 2rem; font-weight: bold;" id="total-tenants-stats">0</p>
            </div>
          </div>
          <div class="card">
            <div class="card-body text-center">
              <i class="fa-solid fa-money-bill-wave fa-2x text-primary mb-1"></i>
              <h4>Pendapatan Bulan Ini</h4>
              <p class="text-primary" style="font-size: 2rem; font-weight: bold;" id="monthly-revenue-stats">Rp 0</p>
            </div>
          </div>
        </div>
        <div class="card mt-1">
          <div class="card-header">Grafik Tingkat Hunian (Simulasi)</div>
          <div class="card-body">
            <div class="chart-placeholder">
              <div>
                <i class="fa-solid fa-chart-bar"></i>
                <p>Representasi grafik akan ditampilkan di sini.<br>(Implementasi grafik vanilla JS kompleks, ini adalah
                  placeholder)</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Bagian Pencarian Apartemen -->
      <section id="search" class="page-section">
        <h2><i class="fa-solid fa-search-location"></i> Cari Apartemen Impian Anda</h2>
        <div class="card mt-1">
          <div class="card-body">
            <form id="search-form" class="search-form grid-container grid-cols-2">
              <div class="form-group">
                <label for="search-location">Lokasi</label>
                <input type="text" id="search-location" placeholder="cth: Jakarta Selatan, Bandung Kota"
                  aria-label="Lokasi apartemen">
              </div>
              <div class="form-group">
                <label for="search-price-range">Rentang Harga (per bulan)</label>
                <select id="search-price-range" aria-label="Rentang harga">
                  <option value="">Semua Harga</option>
                  <option value="0-5000000">Rp 0 - 5.000.000</option>
                  <option value="5000001-10000000">Rp 5.000.001 - 10.000.000</option>
                  <option value="10000001-Infinity">> Rp 10.000.000</option>
                </select>
              </div>
              <div class="form-group">
                <label for="search-type">Tipe Apartemen</label>
                <select id="search-type" aria-label="Tipe apartemen">
                  <option value="">Semua Tipe</option>
                  <option value="Studio">Studio</option>
                  <option value="1BR">1 Kamar Tidur (1BR)</option>
                  <option value="2BR">2 Kamar Tidur (2BR)</option>
                  <option value="3BR+">3+ Kamar Tidur</option>
                  <option value="Penthouse">Penthouse</option>
                </select>
              </div>
              <div class="form-group">
                <label for="search-amenities">Fasilitas (pilih satu atau lebih)</label>
                <select id="search-amenities" multiple
                  aria-label="Fasilitas apartemen (gunakan Ctrl/Cmd untuk memilih banyak)">
                  <option value="WiFi">WiFi Cepat</option>
                  <option value="AC">AC Dingin</option>
                  <option value="Kolam Renang">Kolam Renang</option>
                  <option value="Gym">Gym Lengkap</option>
                  <option value="Parkir">Parkir Aman</option>
                  <option value="Dapur Lengkap">Dapur Lengkap</option>
                </select>
                <small>Gunakan Ctrl/Cmd + Klik untuk memilih banyak fasilitas.</small>
              </div>
              <div class="form-group" style="grid-column: 1 / -1;"> <!-- Tombol mengisi lebar penuh di grid -->
                <button type="submit" class="btn btn-primary btn-full-width"><i class="fa-solid fa-paper-plane"></i>
                  Terapkan Filter & Cari</button>
              </div>
            </form>
          </div>
        </div>
        <div class="map-placeholder">
          <div>
            <i class="fa-solid fa-map-marked-alt"></i>
            <p>Peta Interaktif akan muncul di sini.<br>(Implementasi peta vanilla JS sangat kompleks, ini adalah
              placeholder)</p>
          </div>
        </div>
        <h3 class="mt-1">Hasil Pencarian:</h3>
        <div id="search-results-grid" class="grid-container grid-cols-autofit mt-1">
          <!-- Kartu apartemen akan dirender di sini oleh JavaScript -->
          <p id="no-results-message" class="hidden">Tidak ada apartemen yang cocok dengan kriteria pencarian Anda.</p>
        </div>
      </section>

      <!-- Bagian Profil Pengguna -->
      <section id="profile" class="page-section">
        <h2><i class="fa-solid fa-id-card"></i> Profil Pengguna</h2>
        <div class="card mt-1">
          <div class="card-header">Informasi Akun</div>
          <div class="card-body">
            <p><strong>Nama:</strong> Admin Ganteng</p>
            <p><strong>Email:</strong> admin@examplerent.com</p>
            <p><strong>Status:</strong> <span
                style="color: var(--success-color); font-weight: bold;">Terverifikasi</span></p>
            <button class="btn btn-secondary mt-1"><i class="fa-solid fa-user-pen"></i> Edit Profil (Simulasi)</button>
          </div>
        </div>
        <div class="card mt-1">
          <div class="card-header">Riwayat Pemesanan (Contoh)</div>
          <div class="card-body">
            <ul>
              <li>Apartemen Senayan Indah - Status: <strong style="color: var(--success-color);">Selesai</strong> (1 Jan
                2024 - 31 Des 2024)</li>
              <li>Studio Minimalis Kemang - Status: <strong style="color: var(--info-color);">Aktif</strong> (1 Mei 2025
                - 30 Apr 2026)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Bagian Dukungan Pelanggan -->
      <section id="support" class="page-section">
        <h2><i class="fa-solid fa-life-ring"></i> Bantuan & Dukungan</h2>
        <div class="card mt-1">
          <div class="card-header">Pertanyaan Umum (FAQ)</div>
          <div class="card-body accordion">
            <details>
              <summary>Bagaimana cara menyewa apartemen?</summary>
              <p>Anda dapat mencari apartemen melalui halaman 'Pencarian', pilih unit yang Anda suka, lalu klik tombol
                'Sewa Sekarang' untuk melanjutkan ke proses pemesanan (simulasi).</p>
            </details>
            <details>
              <summary>Metode pembayaran apa saja yang diterima?</summary>
              <p>Saat ini kami mendukung simulasi pembayaran. Dalam aplikasi nyata, kami akan menerima transfer bank,
                kartu kredit, dan e-wallet.</p>
            </details>
            <details>
              <summary>Apakah ada biaya tambahan?</summary>
              <p>Semua biaya akan tertera jelas sebelum Anda melakukan konfirmasi pemesanan. Biasanya mencakup sewa
                bulanan dan deposit keamanan.</p>
            </details>
          </div>
        </div>
        <div class="card mt-1">
          <div class="card-header">Hubungi Kami</div>
          <div class="card-body">
            <form id="contact-support-form">
              <div class="form-group">
                <label for="contact-name">Nama Anda</label>
                <input type="text" id="contact-name" required placeholder="Masukkan nama lengkap Anda">
              </div>
              <div class="form-group">
                <label for="contact-email">Email Anda</label>
                <input type="email" id="contact-email" required placeholder="cth: nama@email.com">
              </div>
              <div class="form-group">
                <label for="contact-subject">Subjek Pesan</label>
                <input type="text" id="contact-subject" required placeholder="cth: Pertanyaan tentang fasilitas">
              </div>
              <div class="form-group">
                <label for="contact-message">Pesan Anda</label>
                <textarea id="contact-message" rows="5" required
                  placeholder="Tuliskan pertanyaan atau masalah Anda di sini..."></textarea>
              </div>
              <button type="submit" class="btn btn-primary"><i class="fa-solid fa-envelope"></i> Kirim Pesan</button>
            </form>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer Aplikasi -->
  <footer class="app-footer">
    <p>¬© <span id="current-year"></span> ApartRent Platform. Hak Cipta Dilindungi Undang-Undang.</p>
    <p>Dibuat dengan <i class="fa-solid fa-heart" style="color: red;"></i> menggunakan HTML, CSS, dan JavaScript Murni.
    </p>
  </footer>

  <!-- Notifikasi Toast (akan dikontrol JS) -->
  <div id="toast-notification" class="toast-notification">Pesan toast di sini</div>

  <!-- Modal Konfirmasi (akan dikontrol JS) -->
  <div id="confirmation-modal" class="confirmation-overlay">
    <div class="confirmation-dialog">
      <h3 id="confirmation-title">Konfirmasi Tindakan</h3>
      <p id="confirmation-message">Apakah Anda yakin ingin melanjutkan?</p>
      <div class="btn-group">
        <button id="confirm-action-btn" class="btn btn-primary">Ya, Lanjutkan</button>
        <button id="cancel-action-btn" class="btn btn-secondary">Batal</button>
      </div>
    </div>
  </div>

  <!-- Skrip Aplikasi (Vanilla JavaScript) -->
  <script>
    // Strict mode untuk penulisan kode yang lebih aman
    'use strict';

    // State Aplikasi Global (Contoh Sederhana)
    const appState = {
      currentUser: {
        name: 'Admin Ganteng',
        email: 'admin@examplerent.com',
        avatarInitials: 'AG', // Diganti jadi AD di HTML, sesuaikan jika perlu
        isLoggedIn: true, // Asumsi sudah login
      },
      currentPage: 'dashboard',
      theme: localStorage.getItem('appTheme') || 'light', // 'light' atau 'dark'
      apartments: [ // Data dummy apartemen
        { id: 1, name: 'Apartemen Mewah Sudirman', location: 'Jakarta Pusat', price: 12000000, type: '2BR', amenities: ['WiFi', 'AC', 'Kolam Renang', 'Gym'], image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXBhcnRtZW50JTIwaW50ZXJpb3J8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60', description: 'Apartemen mewah di jantung kota dengan fasilitas lengkap dan pemandangan spektakuler.' },
        { id: 2, name: 'Studio Nyaman Dago Pakar', location: 'Bandung Kota', price: 4500000, type: 'Studio', amenities: ['WiFi', 'AC', 'Dapur Lengkap'], image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBhcnRtZW50JTIwaW50ZXJpb3J8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60', description: 'Studio modern dan nyaman dengan udara sejuk Bandung, cocok untuk profesional muda.' },
        { id: 3, name: 'Apartemen Keluarga BSD City', location: 'Tangerang Selatan', price: 8000000, type: '3BR+', amenities: ['WiFi', 'AC', 'Kolam Renang', 'Parkir', 'Dapur Lengkap'], image: 'https://images.unsplash.com/photo-1616594039964-ae9021a400a0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGFwYXJ0bWVudCUyMGludGVyaW9yfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60', description: 'Unit luas untuk keluarga dengan lingkungan yang aman dan fasilitas ramah anak.' },
        { id: 4, name: 'Penthouse Eksklusif Kuningan', location: 'Jakarta Selatan', price: 25000000, type: 'Penthouse', amenities: ['WiFi', 'AC', 'Kolam Renang', 'Gym', 'Parkir', 'Dapur Lengkap'], image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YXBhcnRtZW50JTIwaW50ZXJpb3J8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60', description: 'Kemewahan tertinggi dengan pemandangan 360 derajat kota Jakarta.' },
      ],
      notifications: [], // Untuk potensi notifikasi
      // Callback untuk konfirmasi modal
      confirmActionCallback: null,
    };

    // Fungsi Utilitas DOM
    const qs = (selector, parent = document) => parent.querySelector(selector);
    const qsa = (selector, parent = document) => parent.querySelectorAll(selector);

    // Fungsi untuk menampilkan Toast Notification
    function showToast(message, type = 'info', duration = 3000) {
      const toastElement = qs('#toast-notification');
      if (!toastElement) return;

      toastElement.textContent = message;
      toastElement.className = 'toast-notification'; // Reset classes
      toastElement.classList.add(type, 'show');

      setTimeout(() => {
        toastElement.classList.remove('show');
      }, duration);
    }

    // Fungsi untuk Modal Konfirmasi
    function showConfirmationModal(title, message, callback) {
      const modal = qs('#confirmation-modal');
      const modalTitle = qs('#confirmation-title');
      const modalMessage = qs('#confirmation-message');

      if (!modal || !modalTitle || !modalMessage) return;

      modalTitle.textContent = title;
      modalMessage.textContent = message;
      appState.confirmActionCallback = callback;
      modal.classList.add('show');
    }

    function hideConfirmationModal() {
      const modal = qs('#confirmation-modal');
      if (modal) modal.classList.remove('show');
      appState.confirmActionCallback = null;
    }

    // Inisialisasi Aplikasi
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Aplikasi Penyewaan Apartemen Dimuat (Vanilla JS)');

      // Update tahun di footer
      qs('#current-year').textContent = new Date().getFullYear();

      // Setup Navigasi SPA
      setupNavigation();

      // Setup Tema (Gelap/Terang)
      setupTheme();

      // Setup Tombol Logout
      setupLogout();

      // Setup form pencarian
      setupSearchForm();

      // Setup form kontak dukungan
      setupContactForm();

      // Setup tombol modal konfirmasi
      qs('#confirm-action-btn').addEventListener('click', () => {
        if (typeof appState.confirmActionCallback === 'function') {
          appState.confirmActionCallback();
        }
        hideConfirmationModal();
      });
      qs('#cancel-action-btn').addEventListener('click', hideConfirmationModal);

      // Render konten awal (berdasarkan hash atau default ke dashboard)
      handleRouteChange();
      renderApartments(appState.apartments); // Render semua apartemen pada awalnya
      updateDashboardStats();
    });

    // Fungsi Navigasi SPA
    function setupNavigation() {
      const navLinks = qsa('.nav-link');
      navLinks.forEach(link => {
        link.addEventListener('click', (event) => {
          // event.preventDefault(); // Tidak perlu jika menggunakan hash
          const sectionId = link.getAttribute('href').substring(1); // Ambil ID dari href="#sectionId"
          navigateTo(sectionId);
        });
      });

      // Listener untuk perubahan hash (navigasi back/forward browser)
      window.addEventListener('hashchange', handleRouteChange);
    }

    function handleRouteChange() {
      const hash = window.location.hash;
      const sectionId = hash ? hash.substring(1) : 'dashboard'; // Default ke dashboard jika tidak ada hash
      navigateTo(sectionId);
    }

    function navigateTo(sectionId) {
      appState.currentPage = sectionId;
      qsa('.page-section').forEach(section => {
        section.classList.remove('active');
      });
      const targetSection = qs(`#${sectionId}`);
      if (targetSection) {
        targetSection.classList.add('active');
      } else {
        // Jika section tidak ditemukan, arahkan ke dashboard
        qs('#dashboard').classList.add('active');
        window.location.hash = 'dashboard';
      }

      qsa('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${sectionId}`) {
          link.classList.add('active');
        }
      });
      // Scroll ke atas halaman saat navigasi
      window.scrollTo(0, 0);
    }

    // Fungsi Tema Gelap/Terang
    function setupTheme() {
      const themeToggleBtn = qs('#theme-toggle-btn');
      if (appState.theme === 'dark') {
        document.body.classList.add('dark-mode');
        themeToggleBtn.innerHTML = '<i class="fa-solid fa-sun"></i> Mode Terang';
      } else {
        themeToggleBtn.innerHTML = '<i class="fa-solid fa-moon"></i> Mode Gelap';
      }

      themeToggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        if (document.body.classList.contains('dark-mode')) {
          appState.theme = 'dark';
          themeToggleBtn.innerHTML = '<i class="fa-solid fa-sun"></i> Mode Terang';
          showToast('Mode Gelap diaktifkan.', 'info');
        } else {
          appState.theme = 'light';
          themeToggleBtn.innerHTML = '<i class="fa-solid fa-moon"></i> Mode Gelap';
          showToast('Mode Terang diaktifkan.', 'info');
        }
        localStorage.setItem('appTheme', appState.theme);
      });
    }

    // Fungsi Logout
    function setupLogout() {
      qs('#logout-btn').addEventListener('click', () => {
        showConfirmationModal('Konfirmasi Keluar', 'Anda yakin ingin keluar dari aplikasi?', () => {
          appState.currentUser.isLoggedIn = false;
          // Simulasi: kembali ke halaman login atau tampilkan pesan
          showToast('Anda telah berhasil keluar.', 'success');
          // Di aplikasi nyata, ini akan redirect ke halaman login
          // Untuk SPA ini, kita bisa kembali ke dashboard atau menonaktifkan beberapa fitur
          console.log('Pengguna telah keluar.');
          // Update UI jika diperlukan, misal:
          // qs('.user-greeting').textContent = 'Halo, Tamu!';
          // qs('.user-avatar').textContent = 'GU';
        });
      });
    }

    // Fungsi untuk merender kartu apartemen
    function renderApartments(apartmentsToRender) {
      const resultsGrid = qs('#search-results-grid');
      const noResultsMsg = qs('#no-results-message');
      resultsGrid.innerHTML = ''; // Kosongkan hasil sebelumnya

      if (apartmentsToRender.length === 0) {
        noResultsMsg.classList.remove('hidden');
        return;
      }
      noResultsMsg.classList.add('hidden');

      apartmentsToRender.forEach(apt => {
        const card = document.createElement('div');
        card.className = 'card apartment-card';
        // Ambil hanya nama fasilitas, bukan objek
        const amenitiesList = apt.amenities.map(am => `<span class="amenity-tag"><i class="fa-solid fa-check"></i> ${am}</span>`).join(' ');

        card.innerHTML = `
          <img src="${apt.image}" alt="${apt.name}" loading="lazy">
          <div class="card-body">
            <h4>${apt.name}</h4>
            <p class="location"><i class="fa-solid fa-map-marker-alt"></i> ${apt.location}</p>
            <p class="price">Rp ${apt.price.toLocaleString('id-ID')}/bulan</p>
            <p class="type"><i class="fa-solid fa-bed"></i> Tipe: ${apt.type}</p>
            <div class="amenities"><strong>Fasilitas:</strong> ${amenitiesList || 'Tidak ada informasi'}</div>
            <p>${apt.description || 'Deskripsi tidak tersedia.'}</p>
          </div>
          <div class="card-footer">
            <button class="btn btn-primary btn-rent" data-id="${apt.id}"><i class="fa-solid fa-calendar-check"></i> Sewa Sekarang (Simulasi)</button>
          </div>
        `;
        resultsGrid.appendChild(card);
      });

      // Tambahkan event listener untuk tombol "Sewa Sekarang"
      qsa('.btn-rent').forEach(button => {
        button.addEventListener('click', (e) => {
          const apartmentId = e.target.dataset.id;
          const selectedApt = appState.apartments.find(a => a.id == apartmentId);
          showConfirmationModal(
            'Konfirmasi Penyewaan',
            `Anda akan menyewa "${selectedApt.name}". Lanjutkan? (Ini hanya simulasi)`,
            () => {
              showToast(`Proses sewa untuk "${selectedApt.name}" dimulai! (Simulasi)`, 'success');
              // Logika sewa lanjutan (misal, redirect ke halaman pembayaran) akan ada di sini
            }
          );
        });
      });
    }

    // Fungsi untuk filter dan pencarian apartemen
    function setupSearchForm() {
      const form = qs('#search-form');
      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const locationQuery = qs('#search-location').value.toLowerCase();
        const priceRange = qs('#search-price-range').value;
        const typeQuery = qs('#search-type').value;
        const amenitiesQuery = Array.from(qs('#search-amenities').selectedOptions).map(opt => opt.value);

        const filteredApartments = appState.apartments.filter(apt => {
          let matches = true;

          // Filter lokasi
          if (locationQuery && !apt.location.toLowerCase().includes(locationQuery)) {
            matches = false;
          }

          // Filter rentang harga
          if (priceRange) {
            const [minPrice, maxPriceStr] = priceRange.split('-');
            const maxPrice = maxPriceStr === 'Infinity' ? Infinity : parseInt(maxPriceStr);
            if (apt.price < parseInt(minPrice) || apt.price > maxPrice) {
              matches = false;
            }
          }

          // Filter tipe
          if (typeQuery && apt.type !== typeQuery) {
            matches = false;
          }

          // Filter fasilitas
          if (amenitiesQuery.length > 0) {
            const aptAmenities = apt.amenities; // ini adalah array string
            if (!amenitiesQuery.every(queryAmenity => aptAmenities.includes(queryAmenity))) {
              matches = false;
            }
          }
          return matches;
        });
        renderApartments(filteredApartments);
        showToast(`${filteredApartments.length} apartemen ditemukan.`, 'info');
      });
    }

    // Fungsi untuk form kontak dukungan
    function setupContactForm() {
      const form = qs('#contact-support-form');
      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const name = qs('#contact-name').value;
        const email = qs('#contact-email').value;
        const subject = qs('#contact-subject').value;
        const message = qs('#contact-message').value;

        // Validasi sederhana
        if (!name || !email || !subject || !message) {
          showToast('Harap isi semua kolom formulir.', 'error');
          return;
        }
        if (!/\S+@\S+\.\S+/.test(email)) { // Regex email sederhana
          showToast('Format email tidak valid.', 'error');
          return;
        }

        showConfirmationModal(
          'Konfirmasi Pengiriman Pesan',
          'Kirim pesan ini ke tim dukungan kami?',
          () => {
            // Simulasi pengiriman
            console.log('Pesan Dikirim:', { name, email, subject, message });
            showToast('Pesan Anda telah berhasil dikirim! (Simulasi)', 'success');
            form.reset(); // Kosongkan form setelah berhasil
          }
        );
      });
    }

    // Fungsi untuk update statistik di dashboard
    function updateDashboardStats() {
      qs('#total-apartments-stats').textContent = appState.apartments.length;
      // Simulasi data penyewa dan pendapatan
      qs('#total-tenants-stats').textContent = Math.floor(Math.random() * 50) + 20; // Angka acak antara 20-70
      const revenue = (Math.floor(Math.random() * 100) + 50) * 1000000; // Acak Rp 50jt - 150jt
      qs('#monthly-revenue-stats').textContent = `Rp ${revenue.toLocaleString('id-ID')}`;
    }

    // Penanganan Kesalahan Global (Sederhana)
    window.onerror = function (message, source, lineno, colno, error) {
      console.error("Terjadi kesalahan:", { message, source, lineno, colno, error });
      showToast(`Terjadi kesalahan sistem: ${message}. Coba muat ulang halaman.`, 'error', 5000);
      // Di produksi, ini bisa dikirim ke server logging
      return true; // Mencegah browser menampilkan dialog error default
    };
    window.onunhandledrejection = function (event) {
      console.error("Promise ditolak tak tertangani:", event.reason);
      showToast(`Operasi gagal: ${event.reason.message || event.reason}.`, 'error', 5000);
    };

  </script>
</body>

</html>