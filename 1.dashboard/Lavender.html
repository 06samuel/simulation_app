<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Green Valley - Platform penyewaan apartemen modern dengan desain elegan, pengalaman pengguna intuitif, dan layanan terpercaya. Temukan hunian impian Anda di Green Valley.">
    <meta name="keywords"
        content="sewa apartemen, apartemen modern, green valley, properti mewah, hunian elegan, jakarta, surabaya, bandung, cari apartemen, sewa hunian">
    <meta name="author" content="Green Valley Development Team">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#10b981" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1f2937" media="(prefers-color-scheme: dark)">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Green Valley - Sewa Apartemen Modern & Elegan</title>

    <!-- Google Fonts: Poppins & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome Icons (Gratis) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Favicon (PNG, bukan SVG) - Base64 encoded untuk monolith -->
    <link rel="icon"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVR4Ae3SMWpCQBgG4McPIBEEwcQNIBGEIJQgglCCEEIQAhFCQBQRXEF0E0EEQRRBj0sWEWdn2UfwnfPM+f05eZmZ0dG/6A6gNnIA0Bw5AChHDiAOCYBMkANYgKcA8gKkAKgAKIEuACyBqgBSACkAFUAcAApAFoAKAAVgC4AEkAIwBdgCkAGgBDgC6AEwAxoDTgGMAs8AuAAeAs8AnAAuAXYA7AJvAHsBdgCugA8AEoArAFeAFsAvgB/AIsAEsAYsAYsAAgD2ARfI3oPZqAAAAABJRU5ErkJggg=="
        type="image/png">

    <style>
        /* CSS Monolith untuk Green Valley SPA - Fancy, Responsif, dan Dioptimalkan */

        /* -------------------------------------------------- */
        /* 1. Variabel Global untuk Konsistensi Desain        */
        /* -------------------------------------------------- */
        :root {
            --primary-color: #10b981; /* Hijau segar */
            --primary-color-dark: #0d9265;
            --primary-color-light: #e7f8f2;
            --secondary-color: #2c3e50; /* Biru tua keabu-abuan */
            --secondary-color-light: #34495e;
            --accent-color: #f39c12; /* Kuning/Oranye untuk aksen */
            --text-color: #333333;
            --text-color-light: #f8f9fa;
            --text-color-muted: #6c757d;
            --bg-color: #f4f7f6; /* Latar belakang utama yang sedikit off-white */
            --bg-color-alt: #ffffff; /* Latar belakang alternatif (mis. kartu) */
            --border-color: #dee2e6;
            --border-color-light: #e9ecef;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;

            --card-shadow: 0 8px 25px rgba(44, 62, 80, 0.08);
            --card-hover-shadow: 0 12px 35px rgba(44, 62, 80, 0.12);
            --input-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            --focus-ring-color: rgba(16, 185, 129, 0.25);

            --border-radius-sm: 6px;
            --border-radius-md: 10px;
            --border-radius-lg: 16px;

            --font-main: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            --font-secondary: 'Inter', 'Helvetica Neue', Arial, sans-serif;

            --header-height: 70px;
            --sidebar-width: 260px;
            --sidebar-width-collapsed: 80px; /* Untuk potensi sidebar collapsed */

            --transition-speed-fast: 0.2s;
            --transition-speed-normal: 0.3s;
            --transition-speed-slow: 0.5s;

            --max-width-container: 1320px; /* Container yang lebih lebar */

            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--primary-color-dark));
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e67e22);
        }

        /* -------------------------------------------------- */
        /* 2. Tema Gelap                                     */
        /* -------------------------------------------------- */
        [data-theme="dark"] {
            --primary-color: #34d399; /* Hijau yang lebih cerah untuk mode gelap */
            --primary-color-dark: #22c55e;
            --primary-color-light: #1a3c34; /* Latar belakang lebih gelap untuk elemen 'light' */
            --secondary-color: #e5e7eb; /* Teks utama menjadi lebih terang */
            --secondary-color-light: #9ca3af;
            --accent-color: #f59e0b;
            --text-color: #e5e7eb;
            --text-color-muted: #9ca3af;
            --bg-color: #1f2937; /* Latar belakang utama gelap */
            --bg-color-alt: #374151; /* Latar belakang alternatif lebih gelap */
            --border-color: #4b5563;
            --border-color-light: #6b7280;
            --card-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            --card-hover-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
            --input-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            --focus-ring-color: rgba(52, 211, 153, 0.25);
        }

        /* -------------------------------------------------- */
        /* 3. Reset dan Gaya Dasar                           */
        /* -------------------------------------------------- */
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* Menghilangkan highlight biru di mobile */
        }

        html {
            font-size: 16px; /* Basis untuk REM unit */
            scroll-behavior: smooth;
            overflow-x: hidden; /* Mencegah scroll horizontal global */
            -webkit-text-size-adjust: 100%; /* Mencegah zoom font otomatis di iOS */
        }

        body {
            font-family: var(--font-secondary);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden; /* Penting untuk mencegah scroll bar ganda */
            display: flex; /* Untuk struktur dasar SPA */
            flex-direction: column;
            min-height: 100vh;
            transition: background-color var(--transition-speed-normal), color var(--transition-speed-normal);
        }

        /* Wrapper untuk layout sidebar + konten utama */
        .app-container {
            display: flex;
            flex-grow: 1;
            position: relative; /* Untuk overlay sidebar */
        }

        .main-wrapper {
            /* Wrapper konten utama, untuk margin saat sidebar aktif */
            flex-grow: 1;
            padding-top: var(--header-height);
            transition: margin-left var(--transition-speed-normal);
            width: 100%; /* Untuk mencegah penyempitan oleh sidebar */
            overflow-x: hidden; /* Penting untuk main content */
        }

        main {
            /* Kontainer untuk section-section halaman */
            padding: 2rem 1.5rem; /* Padding default untuk konten halaman */
        }

        /* -------------------------------------------------- */
        /* 4. Tipografi                                      */
        /* -------------------------------------------------- */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-main);
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 0.75em;
            line-height: 1.3;
            letter-spacing: -0.02em; /* Sedikit kerning untuk judul */
        }

        [data-theme="dark"] h1,
        [data-theme="dark"] h2,
        [data-theme="dark"] h3,
        [data-theme="dark"] h4,
        [data-theme="dark"] h5,
        [data-theme="dark"] h6 {
            color: var(--text-color-light);
        }

        h1 {
            font-size: clamp(2.2rem, 5vw, 3.2rem);
            font-weight: 800;
        }

        h2 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
        }

        h3 {
            font-size: clamp(1.4rem, 3vw, 1.9rem);
        }

        h4 {
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
        }

        p {
            margin-bottom: 1.25rem;
            color: var(--text-color-muted);
            font-size: 1rem;
        }

        [data-theme="dark"] p {
            color: var(--text-color-muted); /* Tetap, karena variabel sudah di-override di tema gelap */
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-speed-fast), text-decoration-color var(--transition-speed-fast);
        }

        a:hover,
        a:focus-visible {
            color: var(--primary-color-dark);
            text-decoration: underline;
            text-decoration-thickness: 2px;
            text-underline-offset: 4px;
        }

        img,
        picture,
        video,
        canvas {
            /* Responsif dan gaya dasar gambar */
            max-width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
            background-color: var(--border-color-light); /* Placeholder color saat loading */
        }

        /* -------------------------------------------------- */
        /* 5. Aksesibilitas                                  */
        /* -------------------------------------------------- */
        *:focus-visible {
            /* Indikator fokus global yang lebih baik */
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
            box-shadow: 0 0 0 4px var(--focus-ring-color);
            border-radius: var(--border-radius-sm);
        }

        /* Khusus untuk input, select, textarea, button agar outline tidak terpotong oleh border elemen */
        input:focus-visible,
        select:focus-visible,
        textarea:focus-visible,
        button:focus-visible {
            outline: 2px solid var(--primary-color) !important;
            outline-offset: 0 !important;
            box-shadow: 0 0 0 3px var(--focus-ring-color) !important;
        }

        .sr-only {
            /* Untuk menyembunyikan elemen secara visual tapi tetap terbaca oleh screen reader */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* -------------------------------------------------- */
        /* 6. Grid System & Container (Flexbox-based)       */
        /* -------------------------------------------------- */
        .container {
            width: 100%;
            max-width: var(--max-width-container);
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-left: -0.75rem; /* Gutter Ausgleich */
            margin-right: -0.75rem;
        }

        [class*="col-"] {
            width: 100%;
            padding-left: 0.75rem; /* Gutter */
            padding-right: 0.75rem;
            margin-bottom: 1.5rem; /* Spasi antar kolom vertikal */
        }

        /* Small devices (landscape phones, 576px and up) */
        @media (min-width: 576px) {
            .col-sm-1 { flex: 0 0 8.333333%; max-width: 8.333333%; }
            .col-sm-2 { flex: 0 0 16.666667%; max-width: 16.666667%; }
            .col-sm-3 { flex: 0 0 25%; max-width: 25%; }
            .col-sm-4 { flex: 0 0 33.333333%; max-width: 33.333333%; }
            .col-sm-5 { flex: 0 0 41.666667%; max-width: 41.666667%; }
            .col-sm-6 { flex: 0 0 50%; max-width: 50%; }
            .col-sm-7 { flex: 0 0 58.333333%; max-width: 58.333333%; }
            .col-sm-8 { flex: 0 0 66.666667%; max-width: 66.666667%; }
            .col-sm-9 { flex: 0 0 75%; max-width: 75%; }
            .col-sm-10 { flex: 0 0 83.333333%; max-width: 83.333333%; }
            .col-sm-11 { flex: 0 0 91.666667%; max-width: 91.666667%; }
            .col-sm-12 { flex: 0 0 100%; max-width: 100%; }
        }

        /* Medium devices (tablets, 768px and up) */
        @media (min-width: 768px) {
            .col-md-1 { flex: 0 0 8.333333%; max-width: 8.333333%; }
            .col-md-2 { flex: 0 0 16.666667%; max-width: 16.666667%; }
            .col-md-3 { flex: 0 0 25%; max-width: 25%; }
            .col-md-4 { flex: 0 0 33.333333%; max-width: 33.333333%; }
            .col-md-5 { flex: 0 0 41.666667%; max-width: 41.666667%; }
            .col-md-6 { flex: 0 0 50%; max-width: 50%; }
            .col-md-7 { flex: 0 0 58.333333%; max-width: 58.333333%; }
            .col-md-8 { flex: 0 0 66.666667%; max-width: 66.666667%; }
            .col-md-9 { flex: 0 0 75%; max-width: 75%; }
            .col-md-10 { flex: 0 0 83.333333%; max-width: 83.333333%; }
            .col-md-11 { flex: 0 0 91.666667%; max-width: 91.666667%; }
            .col-md-12 { flex: 0 0 100%; max-width: 100%; }
        }

        /* Large devices (desktops, 992px and up) */
        @media (min-width: 992px) {
            .col-lg-1 { flex: 0 0 8.333333%; max-width: 8.333333%; }
            .col-lg-2 { flex: 0 0 16.666667%; max-width: 16.666667%; }
            .col-lg-3 { flex: 0 0 25%; max-width: 25%; }
            .col-lg-4 { flex: 0 0 33.333333%; max-width: 33.333333%; }
            .col-lg-5 { flex: 0 0 41.666667%; max-width: 41.666667%; }
            .col-lg-6 { flex: 0 0 50%; max-width: 50%; }
            .col-lg-7 { flex: 0 0 58.333333%; max-width: 58.333333%; }
            .col-lg-8 { flex: 0 0 66.666667%; max-width: 66.666667%; }
            .col-lg-9 { flex: 0 0 75%; max-width: 75%; }
            .col-lg-10 { flex: 0 0 83.333333%; max-width: 83.333333%; }
            .col-lg-11 { flex: 0 0 91.666667%; max-width: 91.666667%; }
            .col-lg-12 { flex: 0 0 100%; max-width: 100%; }
        }

        /* Extra large devices (large desktops, 1200px and up) */
        @media (min-width: 1200px) {
            .col-xl-1 { flex: 0 0 8.333333%; max-width: 8.333333%; }
            .col-xl-2 { flex: 0 0 16.666667%; max-width: 16.666667%; }
            .col-xl-3 { flex: 0 0 25%; max-width: 25%; }
            .col-xl-4 { flex: 0 0 33.333333%; max-width: 33.333333%; }
            .col-xl-5 { flex: 0 0 41.666667%; max-width: 41.666667%; }
            .col-xl-6 { flex: 0 0 50%; max-width: 50%; }
            /* ... dan seterusnya jika diperlukan */
        }

        /* -------------------------------------------------- */
        /* 7. Utilitas Flexbox dan Spasi                     */
        /* -------------------------------------------------- */
        .d-flex { display: flex !important; }
        .d-inline-flex { display: inline-flex !important; }
        .flex-column { flex-direction: column !important; }
        .flex-row { flex-direction: row !important; }
        .justify-content-start { justify-content: flex-start !important; }
        .justify-content-end { justify-content: flex-end !important; }
        .justify-content-center { justify-content: center !important; }
        .justify-content-between { justify-content: space-between !important; }
        .justify-content-around { justify-content: space-around !important; }
        .align-items-start { align-items: flex-start !important; }
        .align-items-end { align-items: flex-end !important; }
        .align-items-center { align-items: center !important; }
        .align-items-baseline { align-items: baseline !important; }
        .align-items-stretch { align-items: stretch !important; }
        .flex-grow-1 { flex-grow: 1 !important; }
        .flex-wrap { flex-wrap: wrap !important; }

        .gap-1 { gap: 0.25rem !important; } /* 4px */
        .gap-2 { gap: 0.5rem !important; }  /* 8px */
        .gap-3 { gap: 1rem !important; }    /* 16px */
        .gap-4 { gap: 1.5rem !important; }  /* 24px */
        .gap-5 { gap: 3rem !important; }    /* 48px */

        /* Utilitas Spasi (Margin & Padding) - contoh, bisa diperluas */
        .m-0 { margin: 0 !important; } .mt-0 { margin-top: 0 !important; } .mb-0 { margin-bottom: 0 !important; } /* ...dst */
        .m-1 { margin: 0.25rem !important; } .mt-1 { margin-top: 0.25rem !important; } .mb-1 { margin-bottom: 0.25rem !important; }
        .m-2 { margin: 0.5rem !important; } .mt-2 { margin-top: 0.5rem !important; } .mb-2 { margin-bottom: 0.5rem !important; }
        .m-3 { margin: 1rem !important; } .mt-3 { margin-top: 1rem !important; } .mb-3 { margin-bottom: 1rem !important; }
        .m-4 { margin: 1.5rem !important; } .mt-4 { margin-top: 1.5rem !important; } .mb-4 { margin-bottom: 1.5rem !important; }
        .m-5 { margin: 3rem !important; } .mt-5 { margin-top: 3rem !important; } .mb-5 { margin-bottom: 3rem !important; }
        .ms-1 { margin-left: 0.25rem !important; } .ms-2 { margin-left: 0.5rem !important; } /* ...dst */
        .me-1 { margin-right: 0.25rem !important; } .me-2 { margin-right: 0.5rem !important; } /* ...dst */
        .mx-auto { margin-left: auto !important; margin-right: auto !important; }

        .p-0 { padding: 0 !important; } .pt-0 { padding-top: 0 !important; } /* ...dst */
        .p-1 { padding: 0.25rem !important; } .pt-1 { padding-top: 0.25rem !important; }
        .p-2 { padding: 0.5rem !important; } .pt-2 { padding-top: 0.5rem !important; }
        .p-3 { padding: 1rem !important; } .pt-3 { padding-top: 1rem !important; } .pb-3 { padding-bottom: 1rem !important; }
        .p-4 { padding: 1.5rem !important; } .pt-4 { padding-top: 1.5rem !important; }
        .p-5 { padding: 3rem !important; } .pt-5 { padding-top: 3rem !important; }

        /* -------------------------------------------------- */
        /* 8. Utilitas Teks dan Display                      */
        /* -------------------------------------------------- */
        .text-center { text-align: center !important; }
        .text-start { text-align: left !important; text-align: start !important; } /* 'start' untuk LTR/RTL */
        .text-end { text-align: right !important; text-align: end !important; }
        .text-primary { color: var(--primary-color) !important; }
        .text-secondary { color: var(--secondary-color) !important; }
        .text-accent { color: var(--accent-color) !important; }
        .text-success { color: var(--success-color) !important; }
        .text-danger { color: var(--danger-color) !important; }
        .text-warning { color: var(--warning-color) !important; }
        .text-info { color: var(--info-color) !important; }
        .text-light { color: var(--text-color-light) !important; } /* Biasanya digunakan pada bg gelap */
        .text-dark { color: var(--text-color) !important; } /* Biasanya digunakan pada bg terang */
        .text-muted { color: var(--text-color-muted) !important; }
        .text-white { color: #fff !important; }
        .text-black { color: #000 !important; }
        .text-decoration-none { text-decoration: none !important; }

        .fw-light { font-weight: 300 !important; }
        .fw-normal { font-weight: 400 !important; }
        .fw-medium { font-weight: 500 !important; }
        .fw-semibold { font-weight: 600 !important; }
        .fw-bold { font-weight: 700 !important; }
        .fw-extrabold { font-weight: 800 !important; }

        .d-none { display: none !important; }
        .d-inline { display: inline !important; }
        .d-inline-block { display: inline-block !important; }
        .d-block { display: block !important; }
        .d-grid { display: grid !important; }
        .d-table { display: table !important; }
        .d-table-row { display: table-row !important; }
        .d-table-cell { display: table-cell !important; }

        @media (min-width: 576px) {
            .d-sm-none { display: none !important; }
            .d-sm-block { display: block !important; }
            /* ...dst */
        }
        @media (min-width: 768px) {
            .d-md-none { display: none !important; }
            .d-md-block { display: block !important; }
            .d-md-flex { display: flex !important; }
            .d-md-inline { display: inline !important; }
        }
        @media (min-width: 992px) {
            .d-lg-none { display: none !important; }
            .d-lg-block { display: block !important; }
            .d-lg-flex { display: flex !important; }
        }
        @media (min-width: 1200px) {
            .d-xl-none { display: none !important; }
            .d-xl-block { display: block !important; }
            .d-xl-flex { display: flex !important; }
        }

        /* -------------------------------------------------- */
        /* 9. Komponen UI Fancy                              */
        /* -------------------------------------------------- */

        /* Tombol (Button) */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* Spasi antara ikon dan teks */
            padding: 0.75rem 1.75rem; /* Padding yang lebih royal */
            font-family: var(--font-main);
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: var(--border-radius-md);
            border: 2px solid transparent;
            cursor: pointer;
            transition: all var(--transition-speed-normal) ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            line-height: 1.5; /* Untuk konsistensi tinggi */
            text-align: center;
            vertical-align: middle;
            user-select: none; /* Mencegah seleksi teks pada tombol */
        }

        .btn:hover:not(:disabled),
        .btn:focus-visible:not(:disabled) {
            transform: translateY(-2px) scale(1.02); /* Efek angkat yang fancy */
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0px) scale(1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .btn:disabled {
            opacity: 0.65;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: var(--text-color-light);
        }
        .btn-primary:hover:not(:disabled),
        .btn-primary:focus-visible:not(:disabled) {
            background: var(--primary-color-dark); /* Solid color on hover for distinction */
        }

        .btn-secondary {
            background-color: var(--bg-color-alt);
            color: var(--secondary-color);
            border-color: var(--border-color);
        }
        .btn-secondary:hover:not(:disabled),
        .btn-secondary:focus-visible:not(:disabled) {
            background-color: var(--primary-color-light);
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        [data-theme="dark"] .btn-secondary {
            color: var(--text-color);
            border-color: var(--border-color);
        }
        [data-theme="dark"] .btn-secondary:hover:not(:disabled),
        [data-theme="dark"] .btn-secondary:focus-visible:not(:disabled) {
            background-color: var(--primary-color-light); /* Darker shade for light */
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-outline-primary {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .btn-outline-primary:hover:not(:disabled),
        .btn-outline-primary:focus-visible:not(:disabled) {
            background-color: var(--primary-color);
            color: var(--text-color-light);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }
        .btn-lg {
            padding: 1rem 2.25rem;
            font-size: 1.1rem;
        }
        .btn-icon { /* Tombol hanya ikon */
            padding: 0.6rem;
            width: 2.5rem; /* Ukuran tetap */
            height: 2.5rem;
            border-radius: 50%; /* Lingkaran */
        }
        .btn-icon i {
            font-size: 1rem;
            margin: 0; /* Icon di tengah */
        }

        /* Form Input */
        .form-label {
            display: inline-block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .form-control {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-family: var(--font-secondary);
            font-weight: 400;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color-alt);
            background-clip: padding-box;
            border: 1px solid var(--border-color);
            appearance: none; /* Hapus default appearance */
            border-radius: var(--border-radius-md);
            box-shadow: var(--input-shadow);
            transition: border-color var(--transition-speed-fast) ease-in-out, box-shadow var(--transition-speed-fast) ease-in-out;
        }
        .form-control:focus {
            border-color: var(--primary-color);
            background-color: var(--bg-color-alt);
            /* box-shadow sudah dihandle oleh *:focus-visible */
        }
        [data-theme="dark"] .form-control {
            background-color: var(--bg-color-alt);
            color: var(--text-color);
            border-color: var(--border-color);
        }
        [data-theme="dark"] .form-control:focus {
            border-color: var(--primary-color);
        }
        .form-control::placeholder {
            color: var(--text-color-muted);
            opacity: 0.8;
        }
        textarea.form-control {
            min-height: calc(1.6em + 1.5rem + 2px); /* Default tinggi textarea */
            resize: vertical;
        }
        .form-control-sm {
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            border-radius: var(--border-radius-sm);
        }
        .form-text {
            margin-top: 0.25rem;
            font-size: 0.875em;
            color: var(--text-color-muted);
        }

        /* Form Switch (Toggle) */
        .form-check.form-switch {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-left: 0; /* Reset padding default */
        }
        .form-check-input[type="checkbox"] { /* Style dasar checkbox */
            height: 1em;
            width: 1em;
            margin-top: 0.25em;
        }
        .form-switch .form-check-input { /* Style switch */
            width: 2.5em; /* Lebar switch */
            height: 1.25em; /* Tinggi switch */
            border-radius: 1.25em;
            background-color: var(--border-color);
            border: none;
            cursor: pointer;
            position: relative;
            transition: background-color var(--transition-speed-fast);
            appearance: none; /* Hapus default checkbox style */
            background-image: none; /* Hapus background image default */
        }
        .form-switch .form-check-input::before { /* Handle switch */
            content: "";
            position: absolute;
            width: 0.95em;
            height: 0.95em;
            border-radius: 50%;
            background-color: white;
            top: 50%;
            left: 0.15em;
            transform: translateY(-50%);
            transition: transform var(--transition-speed-fast) ease-in-out;
        }
        .form-switch .form-check-input:checked {
            background-color: var(--primary-color);
        }
        .form-switch .form-check-input:checked::before {
            transform: translateY(-50%) translateX(1.25em); /* Geser handle ke kanan */
        }
        .form-check-label {
            cursor: pointer;
            margin-bottom: 0; /* Sejajarkan dengan switch */
        }


        /* Kartu (Card) */
        .card {
            background-color: var(--bg-color-alt);
            border: 1px solid var(--border-color-light);
            border-radius: var(--border-radius-lg); /* Lebih rounded */
            box-shadow: var(--card-shadow);
            padding: 0; /* Padding diatur oleh .card-body, .card-header, dll */
            transition: box-shadow var(--transition-speed-normal), transform var(--transition-speed-normal);
            overflow: hidden; /* Agar gambar di dalam card tidak keluar dari border-radius */
            display: flex;
            flex-direction: column;
            height: 100%; /* Untuk kartu dengan tinggi sama di grid */
        }
        .card:hover {
            box-shadow: var(--card-hover-shadow);
            transform: translateY(-6px); /* Efek angkat yang lebih signifikan */
        }
        .card-header,
        .card-footer {
            padding: 1rem 1.5rem;
            background-color: transparent;
            border-bottom: 1px solid var(--border-color-light);
        }
        .card-footer {
            border-top: 1px solid var(--border-color-light);
            border-bottom: none;
        }
        .card-body {
            padding: 1.5rem;
            flex-grow: 1; /* Agar body mengisi ruang jika card punya tinggi tetap */
        }
        .card-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
        }
        [data-theme="dark"] .card-title {
            color: var(--text-color-light);
        }
        .card-img-top {
            width: 100%;
            height: 220px; /* Tinggi tetap untuk gambar kartu */
            object-fit: cover;
            border-top-left-radius: var(--border-radius-lg); /* Sesuai card */
            border-top-right-radius: var(--border-radius-lg);
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }
        .stretched-link::after { /* Untuk link yang mengisi seluruh card */
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: 1;
            content: "";
            background-color: rgba(0,0,0,0); /* Transparan */
        }


        /* Badge */
        .badge {
            display: inline-block;
            padding: 0.4em 0.75em;
            font-size: 0.75rem;
            font-weight: 600;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: var(--border-radius-sm);
            transition: color var(--transition-speed-fast), background-color var(--transition-speed-fast);
        }
        .badge.terkonfirmasi,
        .badge.confirmed {
            background-color: var(--primary-color-light);
            color: var(--primary-color-dark);
        }
        .badge.menunggu-pembayaran,
        .badge.pending {
            background-color: #fff3cd; /* Warna kuning lembut */
            color: #856404;
        }
        .badge.dibatalkan,
        .badge.cancelled {
            background-color: #f8d7da; /* Warna merah lembut */
            color: #721c24;
        }

        [data-theme="dark"] .badge.terkonfirmasi,
        [data-theme="dark"] .badge.confirmed {
            background-color: var(--primary-color-dark);
            color: var(--text-color-light);
        }
        [data-theme="dark"] .badge.menunggu-pembayaran,
        [data-theme="dark"] .badge.pending {
            background-color: #664d03;
            color: #ffecb5;
        }
        [data-theme="dark"] .badge.dibatalkan,
        [data-theme="dark"] .badge.cancelled {
            background-color: #58151c;
            color: #f8d7da;
        }

        /* -------------------------------------------------- */
        /* 10. Header Aplikasi                               */
        /* -------------------------------------------------- */
        .app-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background-color: var(--bg-color-alt);
            border-bottom: 1px solid var(--border-color-light);
            z-index: 1030;
            box-shadow: 0 2px 8px rgba(44, 62, 80, 0.05);
            display: flex;
            align-items: center;
            padding: 0 1.5rem; /* Padding horizontal header */
            transition: background-color var(--transition-speed-normal), border-color var(--transition-speed-normal);
        }

        .header-content { /* Konten di dalam header */
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: var(--max-width-container);
            margin: 0 auto;
        }

        .brand-logo {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-family: var(--font-main);
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }
        .brand-logo i { font-size: 1.8rem; }
        .brand-logo:hover { color: var(--primary-color-dark); }
        [data-theme="dark"] .brand-logo { color: var(--primary-color); }
        [data-theme="dark"] .brand-logo:hover { color: var(--primary-color-dark); }


        .search-bar {
            position: relative;
            display: flex;
            align-items: center;
            flex-grow: 1;
            max-width: 450px; /* Batasi lebar search bar */
            margin: 0 1.5rem; /* Spasi dari elemen lain */
        }
        .search-bar input[type="search"] {
            padding-left: 2.5rem; /* Ruang untuk ikon search */
            border-radius: var(--border-radius-md);
        }
        .search-bar i.fa-search {
            position: absolute;
            left: 1rem;
            color: var(--text-color-muted);
            font-size: 0.9rem;
            pointer-events: none; /* Agar ikon tidak menghalangi klik input */
        }
        @media (max-width: 767px) {
            .search-bar { display: none; } /* Sembunyikan search bar di mobile, atau buat jadi ikon */
        }


        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-color-muted);
            font-size: 1.3rem;
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            transition: color var(--transition-speed-fast), background-color var(--transition-speed-fast);
        }
        .theme-toggle:hover,
        .theme-toggle:focus-visible {
            color: var(--primary-color);
            background-color: var(--primary-color-light);
        }
        [data-theme="dark"] .theme-toggle {
            color: var(--text-color-muted);
        }
        [data-theme="dark"] .theme-toggle:hover,
        [data-theme="dark"] .theme-toggle:focus-visible {
            color: var(--primary-color);
            background-color: var(--bg-color); /* Sedikit beda dari bg-alt */
        }


        .profile-dropdown { position: relative; }
        .profile-dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: none;
            border: none;
            padding: 0.5rem;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            font-family: var(--font-secondary);
            color: var(--text-color);
            transition: background-color var(--transition-speed-fast);
        }
        .profile-dropdown-toggle:hover,
        .profile-dropdown-toggle.active {
            background-color: var(--primary-color-light);
        }
        [data-theme="dark"] .profile-dropdown-toggle { color: var(--text-color-light); }
        [data-theme="dark"] .profile-dropdown-toggle:hover,
        [data-theme="dark"] .profile-dropdown-toggle.active {
            background-color: var(--bg-color);
        }
        .profile-dropdown-toggle i.fa-user-circle {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        .profile-dropdown-toggle span { font-weight: 500; }
        .profile-dropdown-toggle i.fa-chevron-down {
            font-size: 0.7rem;
            opacity: 0.7;
            transition: transform var(--transition-speed-fast);
        }
        .profile-dropdown-toggle.active i.fa-chevron-down {
            transform: rotate(180deg);
        }

        .profile-dropdown-menu {
            position: absolute;
            top: calc(100% + 10px); /* Jarak dari toggle */
            right: 0;
            background-color: var(--bg-color-alt);
            border: 1px solid var(--border-color-light);
            border-radius: var(--border-radius-md);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            min-width: 200px;
            padding: 0.5rem 0;
            z-index: 1031;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: opacity var(--transition-speed-fast) ease-out, transform var(--transition-speed-fast) ease-out, visibility var(--transition-speed-fast);
        }
        .profile-dropdown-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .profile-dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            color: var(--text-color);
            font-size: 0.9rem;
            text-decoration: none;
            transition: background-color var(--transition-speed-fast), color var(--transition-speed-fast);
        }
        .profile-dropdown-item i {
            color: var(--text-color-muted);
            width: 1.2em; /* Konsistensi ikon */
            transition: color var(--transition-speed-fast);
        }
        .profile-dropdown-item:hover,
        .profile-dropdown-item:focus-visible {
            background-color: var(--primary-color-light);
            color: var(--primary-color);
        }
        .profile-dropdown-item:hover i,
        .profile-dropdown-item:focus-visible i {
            color: var(--primary-color);
        }
        [data-theme="dark"] .profile-dropdown-item { color: var(--text-color-light); }
        [data-theme="dark"] .profile-dropdown-item i { color: var(--text-color-muted); }
        [data-theme="dark"] .profile-dropdown-item:hover,
        [data-theme="dark"] .profile-dropdown-item:focus-visible {
            background-color: var(--bg-color);
            color: var(--primary-color);
        }
        [data-theme="dark"] .profile-dropdown-item:hover i,
        [data-theme="dark"] .profile-dropdown-item:focus-visible i {
            color: var(--primary-color);
        }


        /* -------------------------------------------------- */
        /* 11. Sidebar (Navigasi Utama)                      */
        /* -------------------------------------------------- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-color-alt);
            border-right: 1px solid var(--border-color-light);
            position: fixed; /* Selalu fixed */
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 1020; /* Di bawah header */
            padding-top: var(--header-height); /* Agar konten di bawah header */
            display: flex;
            flex-direction: column;
            transition: transform var(--transition-speed-normal) ease-in-out, width var(--transition-speed-normal) ease-in-out,
                        background-color var(--transition-speed-normal), border-color var(--transition-speed-normal);
            box-shadow: 2px 0 10px rgba(0,0,0,0.03);
        }
        [data-theme="dark"] .sidebar {
            background-color: var(--bg-color-alt); /* Warna sidebar mode gelap */
            border-right-color: var(--border-color);
        }

        /* Brand logo di sidebar TIDAK ADA di desain ini, hanya ada di header.
           Jika ingin di sidebar, bisa uncomment dan sesuaikan.
        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 1.5rem;
            font-family: var(--font-main);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            white-space: nowrap;
            overflow: hidden;
        }
        .sidebar-brand i { font-size: 1.7rem; }
        .sidebar-brand:hover { color: var(--primary-color-dark); }
        [data-theme="dark"] .sidebar-brand { color: var(--primary-color); }
        */

        .nav-menu {
            list-style: none;
            padding: 1rem 0;
            margin: 0;
            overflow-y: auto; /* Jika menu panjang */
            flex-grow: 1; /* Agar menu mengisi ruang */
        }
        .nav-item { margin: 0.25rem 0; }
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.85rem;
            padding: 0.85rem 1.5rem; /* Padding link navigasi */
            color: var(--text-color-muted);
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            border-left: 4px solid transparent; /* Indikator aktif */
            transition: color var(--transition-speed-fast), background-color var(--transition-speed-fast), border-color var(--transition-speed-fast);
            white-space: nowrap;
            overflow: hidden;
        }
        .nav-link i.fa-fw { /* Fixed-width icon */
            font-size: 1.1rem;
            width: 1.3em; /* Konsistensi lebar ikon */
            text-align: center;
            color: var(--text-color-muted);
            transition: color var(--transition-speed-fast);
        }
        .nav-link:hover,
        .nav-link:focus-visible {
            color: var(--primary-color);
            background-color: var(--primary-color-light);
        }
        .nav-link:hover i.fa-fw,
        .nav-link:focus-visible i.fa-fw {
            color: var(--primary-color);
        }
        .nav-link.active {
            color: var(--primary-color);
            font-weight: 600;
            border-left-color: var(--primary-color);
            background-color: var(--primary-color-light);
        }
        .nav-link.active i.fa-fw {
            color: var(--primary-color);
        }

        [data-theme="dark"] .nav-link { color: var(--text-color-muted); }
        [data-theme="dark"] .nav-link i.fa-fw { color: var(--text-color-muted); }
        [data-theme="dark"] .nav-link:hover,
        [data-theme="dark"] .nav-link:focus-visible {
            color: var(--primary-color);
            background-color: var(--bg-color); /* Lebih gelap dari primary-color-light versi dark */
        }
        [data-theme="dark"] .nav-link:hover i.fa-fw,
        [data-theme="dark"] .nav-link:focus-visible i.fa-fw {
            color: var(--primary-color);
        }
        [data-theme="dark"] .nav-link.active {
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            background-color: var(--primary-color-light); /* Warna aktif mode gelap */
        }
        [data-theme="dark"] .nav-link.active i.fa-fw {
            color: var(--primary-color);
        }

        /* Sidebar responsif (Mobile) */
        .sidebar-overlay { /* Overlay saat sidebar mobile aktif */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1010; /* Di bawah sidebar, di atas konten */
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-speed-normal), visibility var(--transition-speed-normal);
        }
        .sidebar-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        @media (max-width: 991.98px) { /* Di bawah LG breakpoint */
            .sidebar {
                transform: translateX(-100%); /* Sembunyikan sidebar */
                z-index: 1040; /* Di atas header saat aktif */
            }
            .sidebar.show {
                transform: translateX(0);
            }
            .main-wrapper {
                margin-left: 0 !important; /* Tidak ada margin kiri di mobile saat sidebar tertutup */
            }
            /* Brand logo di header desktop disembunyikan di mobile jika sidebar-brand ada.
               Tapi karena tidak ada sidebar-brand, brand-logo di header bisa tetap. */
        }

        @media (min-width: 992px) { /* LG breakpoint dan ke atas */
            .main-wrapper {
                margin-left: var(--sidebar-width);
            }
            #sidebarToggle.d-lg-none { /* Sembunyikan tombol toggle sidebar di desktop */
                display: none !important;
            }
            .sidebar-overlay {
                display: none !important; /* Tidak perlu overlay di desktop */
            }
            .sidebar { /* Sidebar selalu terlihat di desktop */
                 transform: translateX(0);
            }
        }


        /* -------------------------------------------------- */
        /* 12. Konten Halaman (Page Sections)                */
        /* -------------------------------------------------- */
        .page-section {
            padding: 1.5rem 0; /* Padding vertikal untuk setiap section */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity var(--transition-speed-slow) ease-out, transform var(--transition-speed-slow) ease-out;
            display: none; /* Awalnya semua section disembunyikan oleh JS */
        }
        .page-section.active {
            opacity: 1;
            transform: translateY(0);
            display: block; /* Hanya section aktif yang ditampilkan */
        }

        .page-title { /* Styling khusus untuk judul halaman */
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color-light);
        }

        /* Contoh styling spesifik untuk halaman */
        /* Dashboard Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Grid responsif */
            gap: 1.5rem;
        }
        .stats-grid .card { text-align: center; }
        .stats-grid .card h3 {
            font-size: 1.1rem;
            color: var(--text-color-muted);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .stats-grid .card p[data-stat] {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }
        [data-theme="dark"] .stats-grid .card p[data-stat] {
            color: var(--primary-color); /* Tetap warna primary untuk kontras */
        }
        .stats-grid .card small {
            font-size: 0.9rem;
        }

        /* Apartments Grid */
        .apartments-grid {
            /* Menggunakan class .row dan .col-* dari grid system */
        }
        .apartment-card .card-body { padding: 1.25rem; }
        .apartment-card h3.card-title { /* Judul apartemen */
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            line-height: 1.4;
            /* Potong teks jika terlalu panjang */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: calc(1.3rem * 1.4 * 2); /* Untuk 2 baris */
        }
        .apartment-card p.text-muted.small { /* Lokasi, fasilitas */
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        .apartment-card .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 1rem; /* Auto tidak selalu bekerja baik jika item lain dinamis */
        }
        .apartment-card .price small {
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-color-muted);
        }
        [data-theme="dark"] .apartment-card .price {
            color: var(--primary-color);
        }

        /* Tabel Booking */
        .table-container {
            overflow-x: auto; /* Scroll horizontal untuk tabel di mobile */
            background-color: var(--bg-color-alt);
            border-radius: var(--border-radius-md);
            box-shadow: var(--card-shadow);
            /* padding: 0.5rem; Dihapus, padding ada di sel */
        }
        table {
            width: 100%;
            border-collapse: collapse; /* Hapus spasi antar border sel */
            min-width: 800px; /* Agar tidak terlalu sempit saat scroll */
        }
        th, td {
            padding: 1rem 1.25rem; /* Padding sel yang nyaman */
            text-align: left;
            border-bottom: 1px solid var(--border-color-light);
            vertical-align: middle;
        }
        th {
            font-family: var(--font-main);
            font-weight: 600;
            color: var(--secondary-color);
            background-color: var(--primary-color-light); /* Header tabel yang berbeda */
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            white-space: nowrap;
        }
        td {
            font-size: 0.95rem;
            color: var(--text-color-muted);
        }
        tbody tr:last-child td {
            border-bottom: none; /* Hapus border bawah baris terakhir */
        }
        tbody tr:hover {
            background-color: var(--bg-color); /* Highlight baris saat hover */
        }
        [data-theme="dark"] th {
            color: var(--text-color-light);
            background-color: var(--bg-color); /* Warna header tabel mode gelap */
        }
        [data-theme="dark"] td {
            color: var(--text-color-muted);
            border-bottom-color: var(--border-color);
        }
        [data-theme="dark"] tbody tr:hover {
            background-color: var(--secondary-color-light); /* Warna hover mode gelap */
        }
        table .btn-sm i { font-size: 0.8rem; } /* Ukuran ikon di tombol aksi tabel */


        /* -------------------------------------------------- */
        /* 13. Footer Aplikasi                               */
        /* -------------------------------------------------- */
        .app-footer {
            background-color: var(--secondary-color);
            color: var(--text-color-light);
            padding: 2.5rem 1rem;
            text-align: center;
            margin-top: auto; /* Mendorong footer ke bawah jika konten pendek */
            border-top: 5px solid var(--primary-color); /* Aksen fancy */
            box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
            transition: background-color var(--transition-speed-normal), border-color var(--transition-speed-normal);
        }
        .app-footer p {
            margin-bottom: 0.25rem;
            color: rgba(255,255,255,0.8); /* Warna teks footer yang lebih lembut */
            font-size: 0.9rem;
        }
        .app-footer a {
            color: var(--primary-color-light); /* Atau var(--accent-color) */
            font-weight: 500;
        }
        .app-footer a:hover { color: #fff; }
        [data-theme="dark"] .app-footer {
            background-color: #111827; /* Warna footer mode gelap yang sangat gelap */
            border-top-color: var(--primary-color); /* Warna aksen tetap primary */
        }
        [data-theme="dark"] .app-footer p { color: rgba(229, 231, 235, 0.7); }
        [data-theme="dark"] .app-footer a { color: var(--primary-color); }
        [data-theme="dark"] .app-footer a:hover { color: var(--primary-color-dark); }


        /* -------------------------------------------------- */
        /* 14. Utilitas Tambahan dan Helper                   */
        /* -------------------------------------------------- */
        .loading-spinner { /* Contoh spinner sederhana */
            border: 4px solid var(--border-color-light);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto; /* Untuk centering jika digunakan sendiri */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notifikasi Aplikasi */
        .app-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            color: white;
            border-radius: var(--border-radius-md);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 9999;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 0.3s ease, transform 0.3s ease;
            font-family: var(--font-secondary);
            font-size: 0.95rem;
        }
        .app-notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        .app-notification-success { background-color: var(--success-color); }
        .app-notification-error { background-color: var(--danger-color); }
        .app-notification-info { background-color: var(--info-color); }
        .app-notification-warning { background-color: var(--warning-color); color: var(--text-color); }

        [data-theme="dark"] .app-notification-warning { color: var(--text-color); }

        /* Helper untuk tinggi 100% jika diperlukan */
        .h-100 { height: 100% !important; }

    </style>
</head>

<body data-theme="light"> <!-- Tema default 'light', bisa diubah oleh JS -->

    <div class="app-container">
        <!-- Sidebar Navigasi Utama -->
        <aside class="sidebar" id="appSidebar" aria-label="Navigasi Utama">
            <!-- Logo di sidebar ditiadakan sesuai keputusan desain, logo utama di header -->
            <nav aria-label="Menu Utama">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link" data-page="dashboard" aria-current="page">
                            <i class="fas fa-tachometer-alt fa-fw"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#apartments" class="nav-link" data-page="apartments">
                            <i class="fas fa-building fa-fw"></i> Apartemen
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#booking" class="nav-link" data-page="booking">
                            <i class="fas fa-calendar-check fa-fw"></i> Booking
                        </a>
                    </li>
                     <li class="nav-item">
                        <a href="#profile" class="nav-link" data-page="profile">
                             <i class="fas fa-user-circle fa-fw"></i> Profil Saya
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" data-page="settings">
                            <i class="fas fa-cog fa-fw"></i> Pengaturan
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        <div class="sidebar-overlay" id="sidebarOverlay" aria-hidden="true"></div>

        <!-- Wrapper Konten Utama -->
        <div class="main-wrapper" id="mainWrapper">
            <!-- Header Aplikasi -->
            <header class="app-header">
                <div class="header-content">
                    <!-- Tombol Toggle Sidebar (Mobile) -->
                    <button class="btn btn-icon btn-secondary d-lg-none" id="sidebarToggle"
                        aria-label="Buka atau Tutup Navigasi" aria-controls="appSidebar" aria-expanded="false">
                        <i class="fas fa-bars"></i>
                    </button>

                    <!-- Brand Logo (Desktop & Mobile jika tidak ada toggle) -->
                    <a href="#dashboard" class="brand-logo" data-page="dashboard"
                        aria-label="Ke Halaman Utama Green Valley">
                        <i class="fas fa-leaf"></i>
                        <span class="d-none d-sm-inline">Green Valley</span> <!-- Teks brand muncul di layar sm ke atas -->
                    </a>

                    <!-- Bar Pencarian (Dipindahkan ke kanan agar layout lebih seimbang) -->
                    <div class="search-bar ms-auto me-3" role="search"> <!-- ms-auto untuk push ke kanan, me-3 untuk spasi -->
                        <i class="fas fa-search text-muted"></i>
                        <input type="search" id="searchInput" class="form-control"
                            placeholder="Cari apartemen..." aria-label="Pencarian">
                    </div>

                    <!-- Aksi Header Kanan -->
                    <div class="d-flex align-items-center gap-2"> <!-- Mengurangi gap sedikit -->
                        <!-- Tombol Ganti Tema -->
                        <button class="theme-toggle" id="themeToggleBtn" aria-label="Ganti Tema">
                            <i class="fas fa-moon"></i> <!-- Ikon default, akan diubah JS -->
                        </button>

                        <!-- Dropdown Profil Pengguna -->
                        <div class="profile-dropdown">
                            <button class="profile-dropdown-toggle" id="profileDropdownToggle" aria-haspopup="true"
                                aria-expanded="false" aria-controls="profileDropdownMenu">
                                <i class="fas fa-user-circle"></i>
                                <span class="d-none d-md-inline">Pengguna</span>
                                <i class="fas fa-chevron-down fa-xs ms-1"></i>
                            </button>
                            <div class="profile-dropdown-menu" id="profileDropdownMenu" role="menu"
                                aria-labelledby="profileDropdownToggle">
                                <a href="#profile" class="profile-dropdown-item" role="menuitem" data-page="profile">
                                    <i class="fas fa-user-edit fa-fw"></i> Profil Saya
                                </a>
                                <a href="#messages" class="profile-dropdown-item" role="menuitem" data-page="messages">
                                    <i class="fas fa-envelope fa-fw"></i> Pesan <span class="badge ms-auto"
                                        style="background-color:var(--danger-color); color:white;">3</span>
                                </a>
                                <a href="#settings" class="profile-dropdown-item" role="menuitem" data-page="settings">
                                    <i class="fas fa-cog fa-fw"></i> Pengaturan
                                </a>
                                <a href="#" class="profile-dropdown-item" role="menuitem" id="logoutBtn">
                                    <i class="fas fa-sign-out-alt fa-fw"></i> Logout
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Konten Utama (SPA) -->
            <main class="main-content container" id="pageContentContainer" role="main">
                <!-- Halaman akan dimuat di sini oleh JavaScript -->

                <section id="dashboard-content" class="page-section" data-title="Dashboard">
                    <h1 class="page-title">Dashboard Analitik</h1>
                    <p class="text-muted mb-4">Ringkasan aktivitas dan performa properti Anda di Green Valley.</p>
                    <div class="stats-grid mb-5">
                        <div class="card">
                            <div class="card-body">
                                <h3>Booking Aktif</h3>
                                <p data-stat="activeBookings" class="display-4 fw-bold">0</p>
                                <small class="text-success"><i class="fas fa-arrow-up"></i> 0 sejak kemarin</small>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h3>Pendapatan Bulan Ini</h3>
                                <p data-stat="monthlyRevenue" class="display-4 fw-bold">Rp 0</p>
                                <small class="text-danger"><i class="fas fa-arrow-down"></i> 0% vs bulan lalu</small>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h3>Apartemen Tersedia</h3>
                                <p data-stat="availableUnits" class="display-4 fw-bold">0</p>
                                <small class="text-muted">Dari total 0 unit</small>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h3>Pengguna Baru</h3>
                                <p data-stat="newUsers" class="display-4 fw-bold">0</p>
                                <small class="text-success"><i class="fas fa-arrow-up"></i> 0 minggu ini</small>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-7 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h3 class="card-title mb-0">Grafik Pendapatan Tahunan</h3>
                                </div>
                                <div class="card-body d-flex align-items-center justify-content-center">
                                    <p class="text-center text-muted p-3"><i>[Placeholder untuk Grafik. Implementasi grafik tanpa library eksternal atau SVG sangat kompleks dan di luar cakupan, sehingga diganti dengan gambar statis.]</i></p>
                                    <img src="https://via.placeholder.com/600x300.png?text=Contoh+Grafik+Pendapatan"
                                        alt="Grafik pendapatan tahunan placeholder" style="border-radius: var(--border-radius-sm); max-height:300px;">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-5 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h3 class="card-title mb-0">Aktivitas Terbaru</h3>
                                </div>
                                <div class="card-body" style="max-height: 380px; overflow-y: auto;">
                                    <ul class="list-unstyled" id="recentActivityList">
                                        <!-- Aktivitas akan dirender JS -->
                                        <li class="text-center p-3 text-muted">Tidak ada aktivitas terbaru.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="apartments-content" class="page-section" data-title="Daftar Apartemen">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h1 class="page-title mb-0">Daftar Apartemen</h1>
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Tambah Apartemen</button>
                    </div>
                    <p class="text-muted mb-4">Kelola semua unit apartemen yang tersedia untuk disewakan.</p>
                    <div class="row apartments-grid" id="apartmentsGridContainer">
                        <!-- Kartu apartemen akan dirender di sini oleh JS -->
                    </div>
                    <div class="loading-spinner d-none" id="apartmentsLoader"></div>
                </section>

                <section id="booking-content" class="page-section" data-title="Manajemen Booking">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h1 class="page-title mb-0">Manajemen Booking</h1>
                    </div>
                    <p class="text-muted mb-4">Lihat dan kelola semua reservasi apartemen.</p>
                    <div class="card">
                        <div class="card-header d-flex flex-wrap justify-content-between align-items-center gap-2">
                            <h3 class="card-title mb-0">Data Booking Terbaru</h3>
                            <input type="search" id="bookingSearchInput" class="form-control form-control-sm" placeholder="Cari ID, Penyewa, Apartemen..."
                                style="max-width: 300px;">
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID Booking</th>
                                        <th>Penyewa</th>
                                        <th>Apartemen</th>
                                        <th>Check-in</th>
                                        <th>Check-out</th>
                                        <th>Status</th>
                                        <th>Total</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="bookingTableBody">
                                    <!-- Baris booking akan dirender di sini oleh JS -->
                                </tbody>
                            </table>
                        </div>
                         <div id="bookingLoaderRow" class="d-none text-center p-4">
                            <div class="loading-spinner mx-auto"></div>
                        </div>
                        <div class="card-footer d-flex flex-wrap justify-content-between align-items-center gap-2">
                            <small class="text-muted" id="bookingTableInfo">Menampilkan 0-0 dari 0 hasil</small>
                            <div class="pagination-controls">
                                <button class="btn btn-sm btn-outline-primary" id="prevPageBtn" disabled><i
                                        class="fas fa-chevron-left"></i> Sebelumnya</button>
                                <button class="btn btn-sm btn-outline-primary ms-2" id="nextPageBtn">Berikutnya <i
                                        class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="profile-content" class="page-section" data-title="Profil Saya">
                    <h1 class="page-title">Profil Saya</h1>
                    <p class="text-muted mb-4">Perbarui informasi pribadi dan preferensi akun Anda.</p>
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title mb-4">Informasi Akun</h3>
                            <form id="profileForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="profileFullName" class="form-label fw-semibold">Nama Lengkap</label>
                                        <input type="text" class="form-control" id="profileFullName"
                                            value="Pengguna Admin" aria-describedby="fullNameHelp">
                                        <small id="fullNameHelp" class="form-text">Nama ini akan ditampilkan
                                            secara publik.</small>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="profileEmail" class="form-label fw-semibold">Alamat Email</label>
                                        <input type="email" class="form-control" id="profileEmail"
                                            value="admin@greenvalley.com" readonly>
                                    </div>
                                </div>
                                <div class="mb-4"> <!-- Tambah margin bottom -->
                                    <label for="profileBio" class="form-label fw-semibold">Bio Singkat</label>
                                    <textarea class="form-control" id="profileBio" rows="3"
                                        placeholder="Ceritakan sedikit tentang diri Anda...">Manajer Properti di Green Valley.</textarea>
                                </div>
                                <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Simpan
                                    Perubahan</button>
                            </form>
                        </div>
                    </div>
                </section>

                <section id="settings-content" class="page-section" data-title="Pengaturan Aplikasi">
                    <h1 class="page-title">Pengaturan Aplikasi</h1>
                    <p class="text-muted mb-4">Konfigurasi preferensi umum aplikasi Green Valley.</p>
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title">Preferensi Tampilan</h3>
                            <div class="mb-3">
                                <label class="form-label fw-semibold d-block mb-2">Tema Aplikasi</label> <!-- d-block agar p di bawahnya -->
                                <p class="text-muted small mb-3">Pilih antara tema terang atau gelap untuk kenyamanan visual
                                    Anda.</p>
                                <div class="d-flex gap-3">
                                    <button class="btn btn-outline-primary theme-picker-btn" data-theme-value="light">
                                        <i class="fas fa-sun me-2"></i> Terang
                                    </button>
                                    <button class="btn btn-outline-primary theme-picker-btn" data-theme-value="dark">
                                        <i class="fas fa-moon me-2"></i> Gelap
                                    </button>
                                </div>
                            </div>
                            <hr class="my-4">
                            <h3 class="card-title">Notifikasi</h3>
                            <div class="form-check form-switch mb-3"> <!-- Tambah margin bottom -->
                                <input class="form-check-input" type="checkbox" role="switch" id="emailNotifications"
                                    checked>
                                <label class="form-check-label" for="emailNotifications">Notifikasi Email untuk Booking
                                    Baru</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="appNotifications">
                                <label class="form-check-label" for="appNotifications">Notifikasi Dalam Aplikasi untuk
                                    Pesan</label>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="messages-content" class="page-section" data-title="Pesan">
                    <h1 class="page-title">Pesan & Notifikasi</h1>
                    <p class="text-muted mb-4">Semua komunikasi dan pemberitahuan penting Anda.</p>
                    <div class="card">
                        <div class="card-body text-center p-5">
                            <i class="fas fa-envelope-open-text fa-4x text-primary mb-3"></i>
                            <h4>Tidak Ada Pesan Baru</h4>
                            <p class="text-muted">Kotak masuk Anda bersih dan rapi!</p>
                        </div>
                    </div>
                </section>

            </main>

            <!-- Footer Aplikasi -->
            <footer class="app-footer">
                <div class="container">
                    <p>&copy; <span id="currentYear"></span> Green Valley Property Management. Semua hak cipta
                        dilindungi.</p>
                    <p>Didesain dengan <i class="fas fa-heart text-danger"></i> oleh Tim Pengembang. <a
                            href="#privacypolicy" data-page="privacypolicy">Kebijakan Privasi</a> | <a href="#terms" data-page="terms">Syarat Layanan</a></p>
                </div>
            </footer>
        </div> <!-- .main-wrapper -->
    </div> <!-- .app-container -->

    <script>
        (function () {
            'use strict';

            // ==================================================
            // KONFIGURASI APLIKASI
            // ==================================================
            const AppConfig = {
                defaultTheme: 'light',
                defaultPage: 'dashboard',
                localStorageKeys: {
                    theme: 'greenValleyTheme_v3',
                    activePage: 'greenValleyActivePage_v3',
                },
                maxApartmentsDisplay: 6, // Jumlah apartemen per halaman/batch
                bookingsPerPage: 5, // Jumlah booking per halaman tabel
                notificationDefaultDuration: 3500, // ms
            };

            // ==================================================
            // STATE MANAGEMENT APLIKASI (Data dan Status UI)
            // ==================================================
            const AppState = {
                currentTheme: localStorage.getItem(AppConfig.localStorageKeys.theme) || AppConfig.defaultTheme,
                activePage: AppConfig.defaultPage, // Akan di-override oleh hash atau localStorage
                isSidebarOpen: window.innerWidth >= 992,
                isProfileDropdownOpen: false,
                apartments: [
                    { id: 'apt001', title: 'Emerald Suite Mewah Tipe A-101', location: 'Jl. Thamrin Kav. 20, Jakarta Pusat', bedrooms: 3, bathrooms: 2, area: 120, price: 25000000, image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=600&auto=format&fit=crop', favorite: false, tags: ['premium', 'pusat kota', 'kolam renang'] },
                    { id: 'apt002', title: 'Ruby Studio Modern C-205', location: 'Jl. Kemang Raya No. 5, Jakarta Selatan', bedrooms: 1, bathrooms: 1, area: 45, price: 12000000, image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=600&auto=format&fit=crop', favorite: true, tags: ['studio', 'modern', 'gym'] },
                    { id: 'apt003', title: 'Sapphire Residence Nyaman B-050', location: 'Jl. Gatsu Barat No. 112, Bandung', bedrooms: 2, bathrooms: 1, area: 75, price: 10000000, image: 'https://images.unsplash.com/photo-1616046229478-9901c5536a45?q=80&w=600&auto=format&fit=crop', favorite: false, tags: ['keluarga', 'tenang'] },
                    { id: 'apt004', title: 'Apartemen Minimalis Jade Tower Lt.15', location: 'Jl. Darmo Permai III, Surabaya', bedrooms: 2, bathrooms: 2, area: 90, price: 18000000, image: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?q=80&w=600&auto=format&fit=crop', favorite: true, tags: ['minimalis', 'pemandangan kota'] },
                    { id: 'apt005', title: 'Diamond Penthouse Eksklusif', location: 'Jl. Sudirman SCBD, Jakarta Selatan', bedrooms: 4, bathrooms: 3, area: 250, price: 55000000, image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=600&auto=format&fit=crop', favorite: false, tags: ['penthouse', 'mewah', 'private lift'] },
                    { id: 'apt006', title: 'Cozy Loft Apartment', location: 'Jl. Cihampelas Walk, Bandung', bedrooms: 1, bathrooms: 1, area: 60, price: 9000000, image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=600&auto=format&fit=crop', favorite: true, tags: ['loft', 'unik', 'view bagus'] },
                ],
                bookings: [
                    { id: 'BK00123', tenant: 'Dr. Adi Pratama', apartmentId: 'apt001', apartmentName: 'Emerald Suite A-101', checkIn: '2025-08-01', checkOut: '2025-08-10', status: 'Terkonfirmasi', totalPrice: 22500000 },
                    { id: 'BK00124', tenant: 'Siti Nurhaliza, S.Kom', apartmentId: 'apt002', apartmentName: 'Ruby Studio C-205', checkIn: '2025-09-15', checkOut: '2025-09-20', status: 'Menunggu Pembayaran', totalPrice: 6000000 },
                    { id: 'BK00125', tenant: 'Bambang Wijaya', apartmentId: 'apt003', apartmentName: 'Sapphire Residence B-050', checkIn: '2025-07-20', checkOut: '2025-07-25', status: 'Dibatalkan', totalPrice: 4500000 },
                    { id: 'BK00126', tenant: 'Rina Martini', apartmentId: 'apt004', apartmentName: 'Jade Tower Lt.15', checkIn: '2025-10-01', checkOut: '2025-10-05', status: 'Terkonfirmasi', totalPrice: 7200000 },
                    { id: 'BK00127', tenant: 'David Lee', apartmentId: 'apt005', apartmentName: 'Diamond Penthouse', checkIn: '2025-11-10', checkOut: '2025-11-17', status: 'Menunggu Pembayaran', totalPrice: 20000000 },
                    { id: 'BK00128', tenant: 'Aisha Putri', apartmentId: 'apt001', apartmentName: 'Emerald Suite A-101', checkIn: '2025-12-01', checkOut: '2025-12-15', status: 'Terkonfirmasi', totalPrice: 33750000 },
                    { id: 'BK00129', tenant: 'Kevin Hartono', apartmentId: 'apt006', apartmentName: 'Cozy Loft Apartment', checkIn: '2026-01-05', checkOut: '2026-01-10', status: 'Menunggu Pembayaran', totalPrice: 4500000 },
                ],
                dashboardStats: {
                    activeBookings: 0, monthlyRevenue: 0, availableUnits: 0, newUsers: 0,
                },
                recentActivities: [
                    { icon: 'fa-calendar-check', color: 'text-primary', text: '<strong>Booking Baru:</strong> Apartemen A-101 oleh John Doe.', time: '2 jam lalu' },
                    { icon: 'fa-star', color: 'text-accent', text: '<strong>Review Baru:</strong> 5 bintang untuk Ruby Studio C-205.', time: '5 jam lalu' },
                    { icon: 'fa-user-plus', color: 'text-success', text: '<strong>Pengguna Baru:</strong> Jane Smith mendaftar.', time: 'Kemarin' },
                    { icon: 'fa-file-invoice-dollar', color: 'text-info', text: '<strong>Pembayaran Diterima:</strong> Booking BK00123 lunas.', time: '3 hari lalu' },
                ],
                bookingTable: {
                    currentPage: 1,
                    searchTerm: '',
                    filteredBookings: [], // Akan diisi oleh fungsi filter
                }
            };

            // ==================================================
            // CACHE ELEMEN DOM (untuk performa)
            // ==================================================
            const DOM = {
                html: document.documentElement,
                body: document.body,
                mainWrapper: document.getElementById('mainWrapper'), // Untuk margin sidebar
                sidebar: document.getElementById('appSidebar'),
                sidebarToggle: document.getElementById('sidebarToggle'),
                sidebarOverlay: document.getElementById('sidebarOverlay'),
                themeToggleBtn: document.getElementById('themeToggleBtn'),
                profileDropdownToggle: document.getElementById('profileDropdownToggle'),
                profileDropdownMenu: document.getElementById('profileDropdownMenu'),
                logoutBtn: document.getElementById('logoutBtn'),
                searchInput: document.getElementById('searchInput'),
                pageContentContainer: document.getElementById('pageContentContainer'),
                pageSections: document.querySelectorAll('.page-section'),
                navLinks: document.querySelectorAll('.sidebar .nav-link, .profile-dropdown-item[data-page], .brand-logo[data-page], .app-footer a[data-page]'),
                apartmentsGridContainer: document.getElementById('apartmentsGridContainer'),
                apartmentsLoader: document.getElementById('apartmentsLoader'),
                bookingTableBody: document.getElementById('bookingTableBody'),
                bookingLoaderRow: document.getElementById('bookingLoaderRow'),
                bookingSearchInput: document.getElementById('bookingSearchInput'),
                bookingTableInfo: document.getElementById('bookingTableInfo'),
                prevPageBtn: document.getElementById('prevPageBtn'),
                nextPageBtn: document.getElementById('nextPageBtn'),
                currentYearSpan: document.getElementById('currentYear'),
                profileForm: document.getElementById('profileForm'),
                themePickerButtons: document.querySelectorAll('.theme-picker-btn'),
                recentActivityList: document.getElementById('recentActivityList'),
                // Statistik Dashboard
                statActiveBookings: document.querySelector('[data-stat="activeBookings"]'),
                statMonthlyRevenue: document.querySelector('[data-stat="monthlyRevenue"]'),
                statAvailableUnits: document.querySelector('[data-stat="availableUnits"]'),
                statNewUsers: document.querySelector('[data-stat="newUsers"]'),
            };

            // ==================================================
            // FUNGSI UTILITIES (Helper Functions)
            // ==================================================
            const Utils = {
                formatCurrency: (amount) => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount),
                formatDate: (dateString) => {
                    if (!dateString) return 'N/A';
                    const options = { year: 'numeric', month: 'short', day: 'numeric' }; // Dibuat lebih pendek
                    return new Date(dateString).toLocaleDateString('id-ID', options);
                },
                debounce: (func, delay) => {
                    let timeout;
                    return function (...args) {
                        const context = this;
                        clearTimeout(timeout);
                        timeout = setTimeout(() => func.apply(context, args), delay);
                    };
                },
                throttle: (func, limit) => {
                    let inThrottle;
                    return function (...args) {
                        const context = this;
                        if (!inThrottle) {
                            func.apply(context, args);
                            inThrottle = true;
                            setTimeout(() => inThrottle = false, limit);
                        }
                    };
                },
                showNotification: (message, type = 'info', duration = AppConfig.notificationDefaultDuration) => {
                    const notification = document.createElement('div');
                    notification.className = `app-notification app-notification-${type}`;
                    notification.textContent = message;
                    DOM.body.appendChild(notification);
                    // Trigger reflow untuk animasi
                    void notification.offsetWidth;
                    notification.classList.add('show');

                    setTimeout(() => {
                        notification.classList.remove('show');
                        setTimeout(() => notification.remove(), 300);
                    }, duration);
                },
                // Fungsi untuk escape HTML (mencegah XSS sederhana jika merender input pengguna)
                escapeHTML: (str) => {
                    if (!str) return '';
                    return str.replace(/[&<>'"]/g, tag => ({
                        '&': '&amp;', '<': '&lt;', '>': '&gt;', "'": '&#39;', '"': '&quot;'
                    }[tag] || tag));
                }
            };

            // ==================================================
            // OBJEK APLIKASI UTAMA (Logika Inti)
            // ==================================================
            const App = {
                init() {
                    console.info("Memulai Aplikasi Green Valley...");
                    this.applyTheme(AppState.currentTheme, true);
                    this.updateCurrentYear();
                    this.setupEventListeners();
                    this.handleResize(); // Atur UI awal berdasarkan ukuran window

                    // Tentukan halaman awal dari localStorage atau hash, baru default
                    const savedPage = localStorage.getItem(AppConfig.localStorageKeys.activePage);
                    const initialHash = window.location.hash;
                    let initialPage = AppConfig.defaultPage;

                    if (initialHash && initialHash !== '#') {
                        initialPage = initialHash;
                    } else if (savedPage) {
                        initialPage = `#${savedPage}`;
                    }

                    this.navigateTo(initialPage, true);
                    this.calculateDashboardStats(); // Hitung statistik setelah data dummy ada
                    console.info("Aplikasi Green Valley berhasil dimulai!");
                },

                setupEventListeners() {
                    DOM.themeToggleBtn.addEventListener('click', () => this.toggleTheme());
                    DOM.themePickerButtons.forEach(button => {
                        button.addEventListener('click', (e) => this.applyTheme(e.currentTarget.dataset.themeValue));
                    });

                    DOM.sidebarToggle.addEventListener('click', () => this.toggleSidebar());
                    DOM.sidebarOverlay.addEventListener('click', () => this.closeSidebar());

                    DOM.profileDropdownToggle.addEventListener('click', (e) => this.toggleProfileDropdown(e));
                    document.addEventListener('click', (e) => this.closeProfileDropdownOnClickOutside(e));

                    DOM.logoutBtn.addEventListener('click', (e) => { e.preventDefault(); this.logout(); });

                    DOM.navLinks.forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const targetPageHash = link.getAttribute('href');
                            this.navigateTo(targetPageHash);
                            if (window.innerWidth < 992 && AppState.isSidebarOpen) this.closeSidebar();
                            if (link.closest('.profile-dropdown-menu')) this.closeProfileDropdown();
                        });
                    });

                    window.addEventListener('hashchange', () => this.navigateTo(window.location.hash || `#${AppConfig.defaultPage}`, true));
                    window.addEventListener('resize', Utils.debounce(() => this.handleResize(), 200));

                    if (DOM.profileForm) {
                        DOM.profileForm.addEventListener('submit', (e) => {
                            e.preventDefault();
                            Utils.showNotification('Profil berhasil diperbarui!', 'success');
                        });
                    }

                    if (DOM.searchInput) {
                        DOM.searchInput.addEventListener('input', Utils.throttle((e) => {
                            const searchTerm = e.target.value.toLowerCase();
                            console.log(`Pencarian global: ${searchTerm}`);
                            if (AppState.activePage === 'apartments') {
                                this.renderApartments(apt => apt.title.toLowerCase().includes(searchTerm) || apt.location.toLowerCase().includes(searchTerm));
                            }
                            // Logika filter lain bisa ditambahkan di sini
                        }, 500));
                    }

                    if (DOM.bookingSearchInput) {
                        DOM.bookingSearchInput.addEventListener('input', Utils.debounce(() => {
                            AppState.bookingTable.searchTerm = DOM.bookingSearchInput.value.toLowerCase();
                            AppState.bookingTable.currentPage = 1; // Reset ke halaman pertama saat search
                            this.renderBookings();
                        }, 300));
                    }
                    if (DOM.prevPageBtn) DOM.prevPageBtn.addEventListener('click', () => this.changeBookingPage(-1));
                    if (DOM.nextPageBtn) DOM.nextPageBtn.addEventListener('click', () => this.changeBookingPage(1));
                },

                applyTheme(theme, instant = false) {
                    DOM.body.setAttribute('data-theme', theme);
                    DOM.themeToggleBtn.innerHTML = `<i class="fas ${theme === 'light' ? 'fa-moon' : 'fa-sun'}"></i>`;
                    DOM.themeToggleBtn.setAttribute('aria-label', `Ganti ke mode ${theme === 'light' ? 'Gelap' : 'Terang'}`);
                    AppState.currentTheme = theme;
                    localStorage.setItem(AppConfig.localStorageKeys.theme, theme);

                    DOM.themePickerButtons.forEach(btn => {
                        const isActive = btn.dataset.themeValue === theme;
                        btn.classList.toggle('active', isActive);
                        btn.classList.toggle('btn-primary', isActive);
                        btn.classList.toggle('btn-outline-primary', !isActive);
                    });

                    if (!instant) {
                        // Utils.showNotification(`Tema ${theme === 'light' ? 'Terang' : 'Gelap'} diaktifkan.`);
                    }
                },
                toggleTheme() { this.applyTheme(AppState.currentTheme === 'light' ? 'dark' : 'light'); },

                toggleSidebar() {
                    AppState.isSidebarOpen = !AppState.isSidebarOpen;
                    DOM.sidebar.classList.toggle('show', AppState.isSidebarOpen);
                    DOM.sidebarToggle.setAttribute('aria-expanded', AppState.isSidebarOpen.toString());
                    if (window.innerWidth < 992) {
                        DOM.sidebarOverlay.classList.toggle('show', AppState.isSidebarOpen);
                        DOM.body.style.overflow = AppState.isSidebarOpen ? 'hidden' : '';
                    }
                },
                openSidebar() { /* ... (implementasi jika diperlukan terpisah) ... */ },
                closeSidebar() {
                    if (!AppState.isSidebarOpen || window.innerWidth >= 992) return; // Hanya tutup jika mobile dan terbuka
                    AppState.isSidebarOpen = false;
                    DOM.sidebar.classList.remove('show');
                    DOM.sidebarOverlay.classList.remove('show');
                    DOM.sidebarToggle.setAttribute('aria-expanded', 'false');
                    DOM.body.style.overflow = '';
                },
                handleResize() {
                    const isDesktop = window.innerWidth >= 992;
                    if (isDesktop) {
                        AppState.isSidebarOpen = true; // Di desktop, sidebar selalu "logikanya" terbuka
                        DOM.sidebar.classList.remove('show'); // Hapus class 'show' jika ada dari mobile
                        DOM.mainWrapper.style.marginLeft = 'var(--sidebar-width)';
                        DOM.sidebarOverlay.classList.remove('show');
                        DOM.body.style.overflow = '';
                        DOM.sidebarToggle.setAttribute('aria-expanded', 'true'); // Secara logis true
                    } else { // Mobile
                        DOM.mainWrapper.style.marginLeft = '0';
                        // Jika sidebar sedang terbuka (misal user buka lalu resize), biarkan terbuka
                        // Jika tertutup, pastikan tetap tertutup
                        if (!AppState.isSidebarOpen) {
                            DOM.sidebar.classList.remove('show');
                            DOM.sidebarToggle.setAttribute('aria-expanded', 'false');
                        } else {
                            DOM.sidebar.classList.add('show');
                            DOM.sidebarOverlay.classList.add('show');
                            DOM.body.style.overflow = 'hidden';
                            DOM.sidebarToggle.setAttribute('aria-expanded', 'true');
                        }
                    }
                },

                toggleProfileDropdown(event) {
                    event.stopPropagation();
                    AppState.isProfileDropdownOpen = !AppState.isProfileDropdownOpen;
                    DOM.profileDropdownMenu.classList.toggle('show', AppState.isProfileDropdownOpen);
                    DOM.profileDropdownToggle.classList.toggle('active', AppState.isProfileDropdownOpen);
                    DOM.profileDropdownToggle.setAttribute('aria-expanded', AppState.isProfileDropdownOpen.toString());
                },
                closeProfileDropdown() {
                    if (!AppState.isProfileDropdownOpen) return;
                    AppState.isProfileDropdownOpen = false;
                    DOM.profileDropdownMenu.classList.remove('show');
                    DOM.profileDropdownToggle.classList.remove('active');
                    DOM.profileDropdownToggle.setAttribute('aria-expanded', 'false');
                },
                closeProfileDropdownOnClickOutside(event) {
                    if (AppState.isProfileDropdownOpen && !DOM.profileDropdownToggle.contains(event.target) && !DOM.profileDropdownMenu.contains(event.target)) {
                        this.closeProfileDropdown();
                    }
                },

                navigateTo(hash, isInitialOrFromHistory = false) {
                    const pageId = (hash && hash.startsWith('#') && hash.length > 1) ? hash.substring(1).split('?')[0] : AppConfig.defaultPage;
                    const targetSection = document.getElementById(`${pageId}-content`);

                    if (!targetSection) {
                        Utils.showNotification(`Halaman "${pageId}" tidak ditemukan. Mengarahkan ke dashboard.`, 'warning');
                        this.navigateTo(`#${AppConfig.defaultPage}`, true);
                        return;
                    }

                    AppState.activePage = pageId;
                    if (!isInitialOrFromHistory) {
                        window.location.hash = pageId;
                    }
                    localStorage.setItem(AppConfig.localStorageKeys.activePage, pageId);

                    DOM.pageSections.forEach(section => {
                        section.classList.remove('active');
                        // section.style.display = 'none'; // Dihapus agar transisi CSS bekerja
                    });

                    targetSection.classList.add('active'); // CSS akan menangani display:block dan animasi

                    const pageTitle = targetSection.dataset.title || pageId.charAt(0).toUpperCase() + pageId.slice(1);
                    document.title = `Green Valley - ${pageTitle}`;

                    DOM.navLinks.forEach(link => {
                        const linkPage = (link.getAttribute('href') || '').substring(1).split('?')[0];
                        const isActive = linkPage === pageId;
                        link.classList.toggle('active', isActive);
                        if (isActive) link.setAttribute('aria-current', 'page');
                        else link.removeAttribute('aria-current');
                    });

                    if (!isInitialOrFromHistory || (isInitialOrFromHistory && hash)) { // Scroll ke atas kecuali initial load tanpa hash
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }

                    this.renderPageSpecificContent(pageId);
                },

                renderPageSpecificContent(pageId) {
                    switch (pageId) {
                        case 'dashboard':
                            this.renderDashboardStats();
                            this.renderRecentActivities();
                            break;
                        case 'apartments':
                            this.renderApartments();
                            break;
                        case 'booking':
                            AppState.bookingTable.currentPage = 1; // Selalu reset ke halaman 1 saat navigasi
                            AppState.bookingTable.searchTerm = ''; // Reset search term
                            if (DOM.bookingSearchInput) DOM.bookingSearchInput.value = '';
                            this.renderBookings();
                            break;
                        // Case untuk 'profile', 'settings', 'messages' tidak perlu render dinamis karena kontennya statis di HTML
                        // atau akan diisi dengan data pengguna yang sudah ada (misal dari `AppState.currentUser`)
                        case 'privacypolicy':
                        case 'terms':
                            // Untuk halaman statis sederhana yang tidak ada di menu utama tapi bisa diakses via link
                            Utils.showNotification(`Menampilkan halaman "${pageId}" (Contoh).`, 'info');
                            break;
                    }
                },

                calculateDashboardStats() {
                    AppState.dashboardStats.activeBookings = AppState.bookings.filter(b => b.status === 'Terkonfirmasi').length;
                    AppState.dashboardStats.monthlyRevenue = AppState.bookings
                        .filter(b => b.status === 'Terkonfirmasi' && new Date(b.checkIn).getMonth() === new Date().getMonth()) // Asumsi pendapatan dihitung saat check-in di bulan ini
                        .reduce((sum, b) => sum + b.totalPrice, 0);
                    AppState.dashboardStats.availableUnits = AppState.apartments.length - AppState.bookings.filter(b => b.status === 'Terkonfirmasi').length; // Simplifikasi, idealnya periksa ketersediaan tanggal
                    AppState.dashboardStats.newUsers = 34; // Dummy
                },

                renderDashboardStats() {
                    const stats = AppState.dashboardStats;
                    if (DOM.statActiveBookings) DOM.statActiveBookings.textContent = stats.activeBookings;
                    if (DOM.statMonthlyRevenue) DOM.statMonthlyRevenue.textContent = Utils.formatCurrency(stats.monthlyRevenue).replace('Rp', 'Rp ');
                    if (DOM.statAvailableUnits) DOM.statAvailableUnits.textContent = stats.availableUnits;
                    if (DOM.statNewUsers) DOM.statNewUsers.textContent = stats.newUsers;
                },

                renderRecentActivities() {
                    if (!DOM.recentActivityList) return;
                    DOM.recentActivityList.innerHTML = ''; // Kosongkan dulu
                    if (AppState.recentActivities.length === 0) {
                        DOM.recentActivityList.innerHTML = `<li class="text-center p-3 text-muted">Tidak ada aktivitas terbaru.</li>`;
                        return;
                    }
                    AppState.recentActivities.forEach(activity => {
                        const li = document.createElement('li');
                        li.className = 'd-flex gap-3 mb-3 pb-3 border-bottom';
                        if (AppState.recentActivities.indexOf(activity) === AppState.recentActivities.length - 1) {
                            li.classList.remove('border-bottom', 'pb-3', 'mb-3'); // Hapus border untuk item terakhir
                        }
                        li.innerHTML = `
                            <i class="fas ${activity.icon} fa-2x ${activity.color} mt-1"></i>
                            <div>
                                ${activity.text}
                                <small class="d-block text-muted">${activity.time}</small>
                            </div>
                        `;
                        DOM.recentActivityList.appendChild(li);
                    });
                },

                renderApartments(filterFn = null) {
                    if (!DOM.apartmentsGridContainer || !DOM.apartmentsLoader) return;

                    DOM.apartmentsLoader.classList.remove('d-none');
                    DOM.apartmentsGridContainer.innerHTML = '';

                    setTimeout(() => {
                        let apartmentsToRender = AppState.apartments;
                        if (typeof filterFn === 'function') {
                            apartmentsToRender = AppState.apartments.filter(filterFn);
                        }

                        if (apartmentsToRender.length === 0) {
                            DOM.apartmentsGridContainer.innerHTML = `<p class="col-12 text-center text-muted p-5">Tidak ada apartemen yang ditemukan.</p>`;
                        } else {
                            apartmentsToRender.slice(0, AppConfig.maxApartmentsDisplay).forEach(apt => {
                                const favoriteIconClass = apt.favorite ? 'fa-solid fa-heart text-danger' : 'fa-regular fa-heart text-primary'; // Updated heart icons
                                const cardHTML = `
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <article class="apartment-card card" data-apartment-id="${apt.id}" role="listitem" tabindex="0" aria-labelledby="apt-title-${apt.id}">
                                        <img src="${apt.image}" alt="Tampilan ${Utils.escapeHTML(apt.title)}" class="card-img-top" loading="lazy">
                                        <div class="card-body d-flex flex-column">
                                            <h3 class="card-title fs-5 mb-2" id="apt-title-${apt.id}"><a href="#apartment-detail?id=${apt.id}" class="stretched-link text-decoration-none text-secondary" data-page="apartment-detail">${Utils.escapeHTML(apt.title)}</a></h3>
                                            <p class="text-muted small mb-2"><i class="fas fa-map-marker-alt fa-fw text-primary"></i> ${Utils.escapeHTML(apt.location)}</p>
                                            <div class="d-flex gap-3 text-muted small mb-3">
                                                <span><i class="fas fa-bed fa-fw"></i> ${apt.bedrooms} KT</span>
                                                <span><i class="fas fa-bath fa-fw"></i> ${apt.bathrooms} KM</span>
                                                <span><i class="fas fa-ruler-combined fa-fw"></i> ${apt.area} m²</span>
                                            </div>
                                            <div class="mt-auto d-flex justify-content-between align-items-center pt-2">
                                                <h4 class="price mb-0 fs-5">${Utils.formatCurrency(apt.price)}<small>/bulan</small></h4>
                                                <button class="btn btn-sm btn-icon btn-light border-0" style="z-index:2; background-color: rgba(255,255,255,0.7);" aria-label="${apt.favorite ? 'Hapus dari favorit' : 'Tambah ke favorit'}" data-apartment-id="${apt.id}" data-action="toggle-favorite">
                                                    <i class="${favoriteIconClass}"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </article>
                                </div>`;
                                DOM.apartmentsGridContainer.insertAdjacentHTML('beforeend', cardHTML);
                            });
                            // Tambahkan event listener untuk tombol favorit setelah dirender
                            DOM.apartmentsGridContainer.querySelectorAll('[data-action="toggle-favorite"]').forEach(btn => {
                                btn.addEventListener('click', (e) => {
                                    e.stopPropagation(); // Mencegah link card terpicu
                                    const aptId = e.currentTarget.dataset.apartmentId;
                                    this.toggleApartmentFavorite(aptId);
                                });
                            });
                        }
                        DOM.apartmentsLoader.classList.add('d-none');
                    }, 300);
                },

                toggleApartmentFavorite(apartmentId) {
                    const apt = AppState.apartments.find(a => a.id === apartmentId);
                    if (apt) {
                        apt.favorite = !apt.favorite;
                        // Re-render hanya kartu yang berubah atau seluruh grid jika lebih mudah
                        this.renderApartments(); // Cara termudah, tapi bisa dioptimalkan untuk re-render 1 kartu
                        Utils.showNotification(apt.favorite ? `"${apt.title}" ditambahkan ke favorit!` : `"${apt.title}" dihapus dari favorit.`, 'info', 2000);
                    }
                },

                renderBookings() {
                    if (!DOM.bookingTableBody || !DOM.bookingLoaderRow) return;

                    DOM.bookingLoaderRow.classList.remove('d-none');
                    DOM.bookingTableBody.innerHTML = '';

                    setTimeout(() => {
                        const term = AppState.bookingTable.searchTerm;
                        AppState.bookingTable.filteredBookings = AppState.bookings.filter(b =>
                            b.id.toLowerCase().includes(term) ||
                            b.tenant.toLowerCase().includes(term) ||
                            b.apartmentName.toLowerCase().includes(term)
                        );

                        const totalFiltered = AppState.bookingTable.filteredBookings.length;
                        const start = (AppState.bookingTable.currentPage - 1) * AppConfig.bookingsPerPage;
                        const end = start + AppConfig.bookingsPerPage;
                        const paginatedBookings = AppState.bookingTable.filteredBookings.slice(start, end);

                        if (paginatedBookings.length === 0) {
                            DOM.bookingTableBody.innerHTML = `<tr><td colspan="8" class="text-center p-4 text-muted">Tidak ada data booking ${term ? 'yang cocok.' : 'tersedia.'}</td></tr>`;
                        } else {
                            paginatedBookings.forEach(booking => {
                                const statusClass = booking.status.toLowerCase().replace(/\s+/g, '-');
                                const rowHTML = `
                                <tr data-booking-id="${booking.id}">
                                    <td><strong>${Utils.escapeHTML(booking.id)}</strong></td>
                                    <td>${Utils.escapeHTML(booking.tenant)}</td>
                                    <td>${Utils.escapeHTML(booking.apartmentName)}</td>
                                    <td>${Utils.formatDate(booking.checkIn)}</td>
                                    <td>${Utils.formatDate(booking.checkOut)}</td>
                                    <td><span class="badge ${statusClass}">${Utils.escapeHTML(booking.status)}</span></td>
                                    <td class="fw-semibold">${Utils.formatCurrency(booking.totalPrice)}</td>
                                    <td>
                                        <button class="btn btn-sm btn-icon btn-outline-primary" aria-label="Lihat Detail Booking ${booking.id}" title="Lihat Detail"><i class="fas fa-eye"></i></button>
                                        <button class="btn btn-sm btn-icon btn-outline-primary ms-1" aria-label="Edit Booking ${booking.id}" title="Edit"><i class="fas fa-edit"></i></button>
                                    </td>
                                </tr>`;
                                DOM.bookingTableBody.insertAdjacentHTML('beforeend', rowHTML);
                            });
                        }
                        DOM.bookingLoaderRow.classList.add('d-none');
                        this.updateBookingPagination(totalFiltered, start, paginatedBookings.length);
                    }, 500);
                },

                updateBookingPagination(totalFiltered, start, countOnPage) {
                    DOM.bookingTableInfo.textContent = `Menampilkan ${totalFiltered > 0 ? start + 1 : 0}-${start + countOnPage} dari ${totalFiltered} hasil`;
                    DOM.prevPageBtn.disabled = AppState.bookingTable.currentPage === 1;
                    DOM.nextPageBtn.disabled = (start + countOnPage) >= totalFiltered;
                },

                changeBookingPage(direction) {
                    const newPage = AppState.bookingTable.currentPage + direction;
                    const totalPages = Math.ceil(AppState.bookingTable.filteredBookings.length / AppConfig.bookingsPerPage);
                    if (newPage >= 1 && newPage <= totalPages) {
                        AppState.bookingTable.currentPage = newPage;
                        this.renderBookings();
                    }
                },

                updateCurrentYear() {
                    if (DOM.currentYearSpan) DOM.currentYearSpan.textContent = new Date().getFullYear();
                },
                logout() {
                    console.log("Pengguna melakukan logout.");
                    Utils.showNotification('Anda telah berhasil logout.', 'info');
                    this.navigateTo(`#${AppConfig.defaultPage}`);
                    this.closeProfileDropdown();
                    // Di aplikasi nyata: hapus token, clear session, dll.
                },
            };

            // ==================================================
            // INISIALISASI APLIKASI
            // ==================================================
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => App.init());
            } else {
                App.init();
            }

        })();
    </script>

</body>
</html>