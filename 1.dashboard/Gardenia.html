<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="RentEase - Sewa apartemen impian Anda dengan mudah dan cepat. Temukan properti ideal melalui platform intuitif kami.">
  <meta name="keywords" content="sewa apartemen, apartemen, RentEase, properti, sewa properti, cari apartemen">
  <meta name="author" content="RentEase">
  <title>RentEase - Platform Penyewaan Apartemen Modern</title>

  <!-- Preload Google Fonts -->
  <link rel="preload" as="style"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"
    media="all">

  <!-- Favicon (contoh, ganti dengan favicon Anda) -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">

  <style>
    :root {
      /* Palet Warna yang Harmonis dan Profesional */
      --color-primary-h: 210;
      --color-primary-s: 85%;
      --color-primary-l: 50%;
      --color-primary: hsl(var(--color-primary-h), var(--color-primary-s), var(--color-primary-l));
      --color-primary-dark: hsl(var(--color-primary-h), var(--color-primary-s), 40%);
      --color-primary-light: hsl(var(--color-primary-h), var(--color-primary-s), 95%);
      --color-accent-h: 30;
      --color-accent-s: 90%;
      --color-accent-l: 55%;
      --color-accent: hsl(var(--color-accent-h), var(--color-accent-s), var(--color-accent-l));
      --color-success: hsl(130, 65%, 45%);
      --color-warning: hsl(40, 90%, 60%);
      --color-danger: hsl(0, 70%, 55%);
      --color-bg: hsl(220, 25%, 98%);
      --color-surface: hsl(0, 0%, 100%);
      --color-text: hsl(215, 20%, 15%);
      --color-text-light: hsl(215, 15%, 45%);
      --color-text-lighter: hsl(215, 15%, 65%);
      --color-border: hsl(210, 20%, 88%);
      --color-shadow-rgb: 210, 20%, 15%;
      /* Untuk hsla */

      /* Tipografi yang Mudah Dibaca */
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --font-size-xs: 0.75rem;
      /* 12px */
      --font-size-sm: 0.875rem;
      /* 14px */
      --font-size-md: 1rem;
      /* 16px */
      --font-size-lg: 1.125rem;
      /* 18px */
      --font-size-xl: 1.25rem;
      /* 20px */
      --font-size-2xl: 1.5rem;
      /* 24px */
      --font-size-3xl: 2rem;
      /* 32px */
      --font-size-4xl: 2.5rem;
      /* 40px */
      --line-height-base: 1.6;
      --line-height-heading: 1.3;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 600;
      --font-weight-bold: 700;

      /* Spasi dan Grid System */
      --space-unit: 0.25rem;
      /* 4px */
      --space-1: calc(1 * var(--space-unit));
      --space-2: calc(2 * var(--space-unit));
      --space-3: calc(3 * var(--space-unit));
      --space-4: calc(4 * var(--space-unit));
      --space-5: calc(5 * var(--space-unit));
      --space-6: calc(6 * var(--space-unit));
      --space-8: calc(8 * var(--space-unit));
      --space-10: calc(10 * var(--space-unit));
      --space-12: calc(12 * var(--space-unit));
      --space-16: calc(16 * var(--space-unit));
      --space-20: calc(20 * var(--space-unit));
      --space-24: calc(24 * var(--space-unit));

      /* Border Radius dan Shadow */
      --radius-sm: 0.25rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --shadow-sm: 0 1px 2px hsla(var(--color-shadow-rgb), 0.07);
      --shadow-md: 0 3px 6px hsla(var(--color-shadow-rgb), 0.1), 0 1px 2px hsla(var(--color-shadow-rgb), 0.06);
      --shadow-lg: 0 10px 20px hsla(var(--color-shadow-rgb), 0.1), 0 3px 6px hsla(var(--color-shadow-rgb), 0.08);

      /* Transisi yang Halus */
      --transition-duration-fast: 150ms;
      --transition-duration-normal: 250ms;
      --transition-duration-slow: 400ms;
      --transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      --transition-base: all var(--transition-duration-normal) var(--transition-timing-function);

      /* Z-index Layer */
      --z-index-dropdown: 1000;
      --z-index-sticky: 1020;
      --z-index-modal-backdrop: 1040;
      --z-index-modal: 1050;
      --z-index-popover: 1060;
      --z-index-tooltip: 1070;

      /* Ukuran Kontainer */
      --container-max-width: 75rem;
      /* 1200px */
      --navbar-height: 4.5rem;
      /* 72px */
    }

    /* CSS Reset dan Base Styles */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    html {
      font-size: 100%;
      /* 16px */
      scroll-behavior: smooth;
      height: 100%;
    }

    body {
      font-family: var(--font-sans);
      font-weight: var(--font-weight-normal);
      line-height: var(--line-height-base);
      color: var(--color-text);
      background-color: var(--color-bg);
      min-height: 100%;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      /* Mencegah horizontal scroll */
    }

    main {
      flex-grow: 1;
      padding-top: var(--navbar-height);
      /* Memberi ruang untuk navbar fixed */
    }

    /* Tipografi Dasar */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-weight: var(--font-weight-bold);
      line-height: var(--line-height-heading);
      color: var(--color-text);
      margin-bottom: var(--space-4);
    }

    h1 {
      font-size: var(--font-size-4xl);
    }

    h2 {
      font-size: var(--font-size-3xl);
    }

    h3 {
      font-size: var(--font-size-2xl);
    }

    p {
      margin-bottom: var(--space-4);
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
      transition: var(--transition-base);
    }

    a:hover {
      color: var(--color-primary-dark);
      text-decoration: underline;
    }

    img,
    svg {
      max-width: 100%;
      height: auto;
      display: block;
    }

    ul,
    ol {
      list-style-position: inside;
      padding-left: var(--space-4);
      margin-bottom: var(--space-4);
    }

    /* Utility Classes (Dipilih dengan hati-hati agar tidak berlebihan) */
    .container {
      width: 100%;
      max-width: var(--container-max-width);
      margin-left: auto;
      margin-right: auto;
      padding-left: var(--space-4);
      padding-right: var(--space-4);
    }

    .d-flex {
      display: flex;
    }

    .flex-column {
      flex-direction: column;
    }

    .align-items-center {
      align-items: center;
    }

    .justify-content-center {
      justify-content: center;
    }

    .justify-content-between {
      justify-content: space-between;
    }

    .gap-1 {
      gap: var(--space-1);
    }

    .gap-2 {
      gap: var(--space-2);
    }

    .gap-3 {
      gap: var(--space-3);
    }

    .gap-4 {
      gap: var(--space-4);
    }

    .gap-6 {
      gap: var(--space-6);
    }

    .gap-8 {
      gap: var(--space-8);
    }

    .p-section {
      padding-top: var(--space-12);
      padding-bottom: var(--space-12);
    }

    .text-center {
      text-align: center;
    }

    .text-primary {
      color: var(--color-primary);
    }

    .text-light {
      color: var(--color-text-light);
    }

    .font-semibold {
      font-weight: var(--font-weight-semibold);
    }

    .font-bold {
      font-weight: var(--font-weight-bold);
    }

    .rounded-md {
      border-radius: var(--radius-md);
    }

    .rounded-lg {
      border-radius: var(--radius-lg);
    }

    .shadow-md {
      box-shadow: var(--shadow-md);
    }

    .shadow-lg {
      box-shadow: var(--shadow-lg);
    }

    .w-full {
      width: 100%;
    }

    .hidden {
      display: none !important;
    }

    /* Penting untuk SPA */
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Komponen Dasar */
    /* Tombol (Button) */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-2);
      padding: var(--space-3) var(--space-6);
      font-size: var(--font-size-md);
      font-weight: var(--font-weight-semibold);
      border-radius: var(--radius-md);
      border: 1px solid transparent;
      cursor: pointer;
      transition: var(--transition-base);
      text-align: center;
      white-space: nowrap;
    }

    .btn-primary {
      background-color: var(--color-primary);
      color: var(--color-surface);
      border-color: var(--color-primary);
    }

    .btn-primary:hover,
    .btn-primary:focus {
      background-color: var(--color-primary-dark);
      border-color: var(--color-primary-dark);
      box-shadow: var(--shadow-sm);
      color: var(--color-surface);
    }

    .btn-outline {
      background-color: transparent;
      color: var(--color-primary);
      border-color: var(--color-primary);
    }

    .btn-outline:hover,
    .btn-outline:focus {
      background-color: var(--color-primary-light);
      color: var(--color-primary-dark);
    }

    .btn-icon {
      padding: var(--space-2);
      font-size: var(--font-size-xl);
      /* Ukuran icon lebih besar */
      line-height: 1;
      /* Pastikan icon center */
    }

    /* Form */
    .form-group {
      margin-bottom: var(--space-6);
      display: flex;
      flex-direction: column;
    }

    .form-label {
      display: block;
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-2);
      color: var(--color-text);
    }

    .form-control {
      display: block;
      width: 100%;
      padding: var(--space-3) var(--space-4);
      font-size: var(--font-size-md);
      line-height: var(--line-height-base);
      color: var(--color-text);
      background-color: var(--color-surface);
      background-clip: padding-box;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      transition: border-color var(--transition-duration-fast) ease-in-out, box-shadow var(--transition-duration-fast) ease-in-out;
    }

    .form-control:focus {
      border-color: var(--color-primary);
      outline: 0;
      box-shadow: 0 0 0 0.2rem hsla(var(--color-primary-h), var(--color-primary-s), var(--color-primary-l), 0.25);
    }

    .form-control::placeholder {
      color: var(--color-text-lighter);
      opacity: 1;
    }

    textarea.form-control {
      min-height: calc(3 * (var(--line-height-base) * var(--font-size-md)) + 2 * var(--space-3) + 2px);
      /* Approx 3 rows */
      resize: vertical;
    }

    .amenities-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: var(--space-3);
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-size: var(--font-size-sm);
      color: var(--color-text);
      cursor: pointer;
      padding: var(--space-2) 0;
      /* Lebih mudah di-tap */
    }

    .checkbox-label input[type="checkbox"] {
      flex-shrink: 0;
      width: 1.25em;
      height: 1.25em;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      background-color: var(--color-surface);
      transition: var(--transition-base);
      position: relative;
      /* For custom checkmark */
    }

    .checkbox-label input[type="checkbox"]:checked {
      background-color: var(--color-primary);
      border-color: var(--color-primary);
    }

    .checkbox-label input[type="checkbox"]:checked::before {
      content: '‚úî';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 0.8em;
      line-height: 1;
    }

    .form-select-icon {
      /* Untuk select dengan emoji */
      display: inline-block;
      margin-right: var(--space-2);
    }

    /* Navigasi */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: var(--z-index-sticky);
      background-color: hsla(0, 0%, 100%, 0.85);
      /* Semi-transparent white */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: var(--shadow-sm);
      height: var(--navbar-height);
      padding: 0 var(--space-4);
    }

    .navbar .container {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar-brand {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-primary);
    }

    .navbar-brand:hover {
      text-decoration: none;
      color: var(--color-primary-dark);
    }

    .nav-links {
      display: flex;
      gap: var(--space-2);
    }

    .nav-link {
      padding: var(--space-2) var(--space-4);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text);
      border-radius: var(--radius-sm);
      position: relative;
    }

    .nav-link:hover,
    .nav-link.active {
      color: var(--color-primary);
      background-color: var(--color-primary-light);
      text-decoration: none;
    }

    .nav-link.active::after {
      /* Indikator aktif yang lebih subtil */
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 3px;
      background-color: var(--color-primary);
      border-radius: 2px 2px 0 0;
    }

    .navbar-toggler {
      display: none;
      /* Sembunyi di desktop */
      background: none;
      border: none;
      font-size: var(--font-size-2xl);
      color: var(--color-text);
      cursor: pointer;
      padding: var(--space-2);
    }

    /* Property Grid dan Card */
    .property-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(100%, 320px), 1fr));
      gap: var(--space-8);
    }

    .property-card {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-md);
      transition: transform var(--transition-duration-normal) ease-out, box-shadow var(--transition-duration-normal) ease-out;
      display: flex;
      flex-direction: column;
    }

    .property-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-lg);
    }

    .property-card-figure {
      position: relative;
      padding-top: 66.67%;
      /* Aspect ratio 3:2 */
      overflow: hidden;
      background-color: var(--color-border);
      /* Placeholder color */
    }

    .property-card-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-duration-slow) ease-out;
    }

    .property-card:hover .property-card-image {
      transform: scale(1.05);
    }

    .property-card-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: var(--space-3) var(--space-4);
      background: linear-gradient(to top, hsla(var(--color-shadow-rgb), 0.7) 0%, hsla(var(--color-shadow-rgb), 0) 100%);
      color: var(--color-surface);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
    }

    .property-card-content {
      padding: var(--space-6);
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .property-card-title {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-2);
    }

    .property-card-location {
      font-size: var(--font-size-sm);
      color: var(--color-text-light);
      margin-bottom: var(--space-4);
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }

    .property-card-price {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-bold);
      color: var(--color-primary);
      margin-bottom: var(--space-4);
    }

    .property-card-features {
      font-size: var(--font-size-sm);
      color: var(--color-text-light);
      margin-bottom: var(--space-6);
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-3);
    }

    .property-card-feature-item {
      background-color: var(--color-bg);
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-sm);
    }

    .property-card-actions {
      margin-top: auto;
      /* Mendorong tombol ke bawah */
      display: flex;
      gap: var(--space-3);
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: hsla(var(--color-shadow-rgb), 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: var(--z-index-modal-backdrop);
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-duration-normal), visibility 0s var(--transition-duration-normal);
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
      transition-delay: 0s;
    }

    .modal-content {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      max-width: 600px;
      width: calc(100% - var(--space-8));
      /* 90% with margin */
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      transform: scale(0.95) translateY(10px);
      transition: transform var(--transition-duration-normal) var(--transition-timing-function);
    }

    .modal-overlay.active .modal-content {
      transform: scale(1) translateY(0);
    }

    .modal-header {
      padding: var(--space-4) var(--space-6);
      border-bottom: 1px solid var(--color-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: 0;
    }

    .modal-close-btn {
      background: none;
      border: none;
      font-size: var(--font-size-2xl);
      line-height: 1;
      color: var(--color-text-light);
      cursor: pointer;
      padding: var(--space-1);
    }

    .modal-close-btn:hover {
      color: var(--color-text);
    }

    .modal-body {
      padding: var(--space-6);
      overflow-y: auto;
      flex-grow: 1;
    }

    .modal-body img {
      border-radius: var(--radius-md);
      margin-bottom: var(--space-4);
    }

    .modal-footer {
      padding: var(--space-4) var(--space-6);
      border-top: 1px solid var(--color-border);
      display: flex;
      justify-content: flex-end;
      gap: var(--space-3);
    }

    /* Footer */
    .site-footer {
      background-color: var(--color-text);
      color: var(--color-bg);
      padding: var(--space-8) 0;
      text-align: center;
    }

    .site-footer p {
      margin-bottom: 0;
      font-size: var(--font-size-sm);
    }

    .site-footer a {
      color: var(--color-accent);
    }

    .site-footer a:hover {
      color: hsl(var(--color-accent-h), var(--color-accent-s), calc(var(--color-accent-l) + 10%));
    }


    /* Hero Section Specifics */
    .hero-section {
      background: linear-gradient(to right, var(--color-primary-light), hsl(var(--color-primary-h), var(--color-primary-s), 92%));
      padding: var(--space-16) 0 var(--space-20) 0;
      text-align: center;
    }

    .hero-section h1 {
      color: var(--color-primary-dark);
      font-size: clamp(var(--font-size-3xl), 5vw, var(--font-size-4xl));
      /* Responsive font size */
    }

    .hero-section .lead {
      font-size: var(--font-size-lg);
      color: var(--color-text-light);
      max-width: 60ch;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: var(--space-8);
    }

    /* Search Filters Section */
    .search-filters-wrapper {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-md);
      padding: var(--space-6) var(--space-8);
    }

    .search-filters-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-6);
      align-items: end;
      /* Align form groups to bottom if heights differ */
    }

    .search-filters-form .form-group {
      margin-bottom: 0;
    }

    /* Remove default margin from form-group */
    .search-filters-form button[type="submit"] {
      grid-column: 1 / -1;
      /* Span full width on its own row for smaller screens */
      margin-top: var(--space-6);
    }

    @media (min-width: 992px) {

      /* Larger screens, button can be inline */
      .search-filters-form {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) auto;
        /* last column for button */
      }

      .search-filters-form button[type="submit"] {
        grid-column: auto;
        margin-top: 0;
        align-self: end;
        /* ensure it aligns with other inputs */
        height: calc(2 * var(--space-3) + var(--line-height-base) * var(--font-size-md) + 2px);
        /* Match input height */
      }
    }

    /* Loading State */
    .loading-indicator {
      text-align: center;
      padding: var(--space-8);
      font-size: var(--font-size-lg);
      color: var(--color-text-light);
    }


    /* Animasi */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in {
      animation: fadeIn var(--transition-duration-slow) var(--transition-timing-function) both;
    }

    .page-section {
      /* Untuk transisi antar halaman SPA */
      animation: fadeIn var(--transition-duration-normal) var(--transition-timing-function);
    }


    /* Responsivitas */
    @media (max-width: 768px) {
      .navbar-toggler {
        display: block;
        /* Tampilkan tombol menu di mobile */
      }

      .nav-links {
        position: absolute;
        top: var(--navbar-height);
        left: 0;
        right: 0;
        background-color: var(--color-surface);
        flex-direction: column;
        padding: var(--space-4);
        box-shadow: var(--shadow-md);
        border-top: 1px solid var(--color-border);
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: transform var(--transition-duration-normal) var(--transition-timing-function),
          opacity var(--transition-duration-normal) var(--transition-timing-function),
          visibility 0s var(--transition-duration-normal);
      }

      .nav-links.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
        transition-delay: 0s;
      }

      .nav-link {
        padding: var(--space-3) var(--space-2);
        width: 100%;
        text-align: left;
      }

      .nav-link.active::after {
        /* Sembunyikan indikator bawah di mobile, karena background sudah beda */
        display: none;
      }

      .property-grid {
        grid-template-columns: 1fr;
        /* Satu kolom di mobile */
        gap: var(--space-6);
      }

      .hero-section {
        padding: var(--space-12) 0 var(--space-16) 0;
      }

      .modal-content {
        max-height: 85vh;
        /* Sedikit lebih kecil di mobile */
      }
    }

    /* Aksesibilitas: Preferensi Gerakan Dikurangi */
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }

      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>

<body>
  <!-- Header dan Navigasi Utama -->
  <header class="navbar" role="banner">
    <div class="container">
      <a href="#/" class="navbar-brand spa-link">RentEase</a>
      <nav class="nav-links" id="navLinks" aria-label="Navigasi Utama">
        <a href="#/" class="nav-link spa-link">Beranda</a>
        <a href="#/search" class="nav-link spa-link">Cari Apartemen</a>
        <a href="#/about" class="nav-link spa-link">Tentang Kami</a>
        <a href="#/contact" class="nav-link spa-link">Hubungi Kami</a>
      </nav>
      <button class="navbar-toggler" id="navbarToggler" aria-label="Toggle navigasi" aria-expanded="false"
        aria-controls="navLinks">
        <span aria-hidden="true">‚ò∞</span>
      </button>
    </div>
  </header>

  <!-- Konten Utama (SPA akan merender halaman di sini) -->
  <main id="appRoot" role="main">
    <!-- Halaman-halaman akan dimuat di sini oleh JavaScript -->
  </main>

  <!-- Footer Situs -->
  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <p>¬© <span id="currentYear"></span> RentEase. Semua hak cipta dilindungi.</p>
      <p>Dibuat dengan ‚ù§Ô∏è untuk kemudahan Anda.</p>
    </div>
  </footer>

  <!-- Modal untuk Detail Properti (Struktur) -->
  <div class="modal-overlay" id="propertyModal" aria-labelledby="modalTitle" aria-modal="true" role="dialog">
    <div class="modal-content">
      <header class="modal-header">
        <h2 id="modalTitle" class="modal-title">Detail Properti</h2>
        <button class="modal-close-btn" id="closeModalBtn" aria-label="Tutup modal">
          <span aria-hidden="true">√ó</span>
        </button>
      </header>
      <section class="modal-body" id="modalBodyContent">
        <!-- Konten detail properti akan diisi oleh JavaScript -->
      </section>
      <footer class="modal-footer">
        <button class="btn btn-outline" id="modalCloseFooterBtn">Tutup</button>
        <button class="btn btn-primary" id="modalBookNowBtn">Pesan Sekarang</button>
      </footer>
    </div>
  </div>

  <!-- Template untuk Halaman (digunakan oleh JavaScript) -->
  <template id="homePageTemplate">
    <section id="home-page" class="page-section hero-section animate-fade-in">
      <div class="container">
        <h1 class="font-bold mb-6">Sewa Apartemen Impian Anda, <span class="text-primary">Lebih Mudah</span> Bersama
          RentEase</h1>
        <p class="lead">
          Temukan apartemen ideal dengan mudah dan cepat melalui platform kami yang intuitif, modern, dan ramah
          pengguna. Mulai perjalanan Anda menuju kenyamanan hari ini!
        </p>
        <a href="#/search" class="btn btn-primary btn-lg spa-link">Mulai Cari Sekarang</a>
      </div>
    </section>
    <section class="p-section">
      <div class="container">
        <h2 class="text-center mb-10">Mengapa Memilih RentEase?</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-8);">
          <article class="text-center">
            <div style="font-size: 3rem; color: var(--color-accent); margin-bottom: var(--space-4);">üîç</div>
            <h3 style="font-size: var(--font-size-xl);">Pencarian Cerdas</h3>
            <p class="text-light">Filter lanjutan untuk menemukan properti yang sesuai dengan kebutuhan dan gaya hidup
              Anda.</p>
          </article>
          <article class="text-center">
            <div style="font-size: 3rem; color: var(--color-accent); margin-bottom: var(--space-4);">üè°</div>
            <h3 style="font-size: var(--font-size-xl);">Pilihan Terkurasi</h3>
            <p class="text-light">Apartemen berkualitas di lokasi strategis, diverifikasi untuk kenyamanan Anda.</p>
          </article>
          <article class="text-center">
            <div style="font-size: 3rem; color: var(--color-accent); margin-bottom: var(--space-4);">‚ú®</div>
            <h3 style="font-size: var(--font-size-xl);">Pengalaman Mulus</h3>
            <p class="text-light">Antarmuka yang bersih dan proses pemesanan yang transparan dari awal hingga akhir.</p>
          </article>
        </div>
      </div>
    </section>
  </template>

  <template id="searchPageTemplate">
    <section id="search-page" class="page-section p-section animate-fade-in">
      <div class="container">
        <h2 class="text-center font-bold mb-10">Temukan Apartemen Ideal Anda</h2>
        <div class="search-filters-wrapper mb-12">
          <form id="searchForm" class="search-filters-form">
            <div class="form-group">
              <label class="form-label" for="locationFilter">Lokasi</label>
              <input type="text" class="form-control" id="locationFilter" placeholder="Kota, daerah, atau nama gedung"
                aria-label="Filter lokasi apartemen">
            </div>
            <div class="form-group">
              <label class="form-label" for="priceRangeFilter">Rentang Harga</label>
              <select class="form-control" id="priceRangeFilter" aria-label="Filter rentang harga">
                <option value="any"><span class="form-select-icon">üí∏</span>Semua Harga</option>
                <option value="0-1000000"><span class="form-select-icon">üí∞</span>Rp 0 - Rp 1.000.000</option>
                <option value="1000000-5000000"><span class="form-select-icon">üí∞üí∞</span>Rp 1.000.000 - Rp 5.000.000
                </option>
                <option value="5000000-10000000"><span class="form-select-icon">üí∞üí∞üí∞</span>Rp 5.000.000 - Rp
                  10.000.000</option>
                <option value="10000000-plus"><span class="form-select-icon">üíé</span>Diatas Rp 10.000.000</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="propertyTypeFilter">Tipe Properti</label>
              <select class="form-control" id="propertyTypeFilter" aria-label="Filter tipe properti">
                <option value="any"><span class="form-select-icon">üè†</span>Semua Tipe</option>
                <option value="Studio"><span class="form-select-icon">üõãÔ∏è</span>Studio</option>
                <option value="1 Bedroom"><span class="form-select-icon">üõèÔ∏è</span>1 Kamar Tidur</option>
                <option value="2 Bedrooms"><span class="form-select-icon">üõèÔ∏èüõèÔ∏è</span>2 Kamar Tidur</option>
                <option value="3+ Bedrooms"><span class="form-select-icon">üèòÔ∏è</span>3+ Kamar Tidur</option>
                <option value="Penthouse"><span class="form-select-icon">üèôÔ∏è</span>Penthouse</option>
              </select>
            </div>
            <div class="form-group" style="grid-column: 1 / -1;"> {/* Span full width on smaller grid */
              <label class="form-label">Fasilitas Utama</label>
              <div class="amenities-grid">
                <label class="checkbox-label"><input type="checkbox" name="amenitiesFilter" value="pool"> Kolam
                  Renang</label>
                <label class="checkbox-label"><input type="checkbox" name="amenitiesFilter" value="gym"> Gym</label>
                <label class="checkbox-label"><input type="checkbox" name="amenitiesFilter" value="parking">
                  Parkir</label>
                <label class="checkbox-label"><input type="checkbox" name="amenitiesFilter" value="wifi"> WiFi
                  Cepat</label>
                <label class="checkbox-label"><input type="checkbox" name="amenitiesFilter" value="pet-friendly"> Ramah
                  Peliharaan</label>
                <label class="checkbox-label"><input type="checkbox" name="amenitiesFilter" value="furnished"> Full
                  Furnished</label>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"
                style="margin-right: var(--space-2);">
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
              </svg>
              Cari Properti
            </button>
          </form>
        </div>
        <div id="propertyGridContainer" class="property-grid">
          <!-- Kartu properti akan dirender di sini -->
        </div>
        <div id="noResultsMessage" class="hidden text-center text-light p-section">
          <h3>Oops! Tidak ada properti yang cocok.</h3>
          <p>Coba ubah kriteria pencarian Anda atau <a href="#/contact" class="spa-link text-primary">hubungi kami</a>
            untuk bantuan.</p>
        </div>
        <div id="loadingIndicator" class="loading-indicator hidden">Memuat properti...</div>
      </div>
    </section>
  </template>

  <template id="aboutPageTemplate">
    <section id="about-page" class="page-section p-section animate-fade-in">
      <div class="container">
        <h2 class="text-center font-bold mb-10">Tentang RentEase</h2>
        <div style="max-width: 70ch; margin: auto; text-align: justify;">
          <p class="text-light" style="font-size: var(--font-size-lg); margin-bottom: var(--space-8);">
            RentEase lahir dari keinginan untuk menyederhanakan proses pencarian dan penyewaan apartemen. Kami percaya
            bahwa menemukan tempat tinggal ideal seharusnya menjadi pengalaman yang menyenangkan, bukan membebani.
          </p>
          <h3 style="font-size: var(--font-size-xl); margin-bottom: var(--space-3);">Misi Kami</h3>
          <p>Misi kami adalah menghubungkan penyewa dengan properti idaman mereka melalui platform yang transparan,
            efisien, dan terpercaya. Kami berkomitmen untuk menyediakan informasi akurat, antarmuka pengguna yang
            intuitif, dan layanan pelanggan yang responsif.</p>
          <h3 style="font-size: var(--font-size-xl); margin-bottom: var(--space-3);">Visi Kami</h3>
          <p>Menjadi platform penyewaan apartemen pilihan utama di Indonesia, yang dikenal karena inovasi, kualitas
            layanan, dan kontribusi positif terhadap komunitas penyewa dan pemilik properti.</p>
          <h3 style="font-size: var(--font-size-xl); margin-bottom: var(--space-3);">Tim Kami</h3>
          <p>RentEase didukung oleh tim profesional yang bersemangat tentang teknologi dan real estat. Kami bekerja
            keras setiap hari untuk meningkatkan platform kami dan memberikan nilai terbaik bagi pengguna kami.</p>
        </div>
      </div>
    </section>
  </template>

  <template id="contactPageTemplate">
    <section id="contact-page" class="page-section p-section animate-fade-in">
      <div class="container">
        <h2 class="text-center font-bold mb-10">Hubungi Tim RentEase</h2>
        <div class="d-flex" style="gap: var(--space-12); flex-wrap: wrap;">
          <div style="flex: 1; min-width: 300px;">
            <h3 style="font-size: var(--font-size-xl); margin-bottom: var(--space-4);">Kirimkan Pesan Kepada Kami</h3>
            <p class="text-light mb-6">Punya pertanyaan, saran, atau butuh bantuan? Jangan ragu untuk menghubungi kami
              melalui formulir di samping, atau detail kontak di bawah ini.</p>
            <div class="contact-info">
              <p><strong>Email:</strong> <a href="mailto:support@rentease.com"
                  class="text-primary">support@rentease.com</a></p>
              <p><strong>Telepon:</strong> <a href="tel:+62215550123" class="text-primary">+62 21 555 0123</a></p>
              <p><strong>Alamat:</strong> RentEase Tower, Jl. Sudirman Kav. 1, Jakarta Pusat, Indonesia</p>
            </div>
          </div>
          <form id="contactForm"
            style="flex: 1.5; min-width: 320px; background-color: var(--color-surface); padding: var(--space-8); border-radius: var(--radius-lg); box-shadow: var(--shadow-md);">
            <div class="form-group">
              <label class="form-label" for="contactName">Nama Lengkap Anda</label>
              <input type="text" class="form-control" id="contactName" name="name" placeholder="Contoh: Budi Santoso"
                required aria-label="Nama lengkap Anda">
            </div>
            <div class="form-group">
              <label class="form-label" for="contactEmail">Alamat Email Anda</label>
              <input type="email" class="form-control" id="contactEmail" name="email"
                placeholder="Contoh: budi.santoso@example.com" required aria-label="Alamat email Anda">
            </div>
            <div class="form-group">
              <label class="form-label" for="contactSubject">Subjek Pesan</label>
              <input type="text" class="form-control" id="contactSubject" name="subject"
                placeholder="Contoh: Pertanyaan tentang properti X" required aria-label="Subjek pesan Anda">
            </div>
            <div class="form-group">
              <label class="form-label" for="contactMessage">Isi Pesan Anda</label>
              <textarea class="form-control" id="contactMessage" name="message" rows="5"
                placeholder="Tuliskan pesan Anda di sini..." required aria-label="Isi pesan Anda"></textarea>
            </div>
            <button type="submit" class="btn btn-primary w-full">Kirim Pesan</button>
            <p id="contactFormStatus" class="text-center mt-4"
              style="font-size: var(--font-size-sm); min-height: 1.5em;"></p>
          </form>
        </div>
      </div>
    </section>
  </template>


  <script>
    // Scope Aplikasi Utama (Monolith)
    (function RentEaseApp() {
      "use strict";

      // STATE APLIKASI
      const appState = {
        currentPage: null,
        properties: [],
        filteredProperties: [],
        activeFilters: {},
        isLoading: false,
        modalOpen: false,
        currentModalPropertyId: null,
      };

      // DATA DUMMY (Idealnya dari API)
      const dummyProperties = [
        {
          id: 1,
          title: "Apartemen Mewah Skyline",
          image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60",
          caption: "Pemandangan Kota Spektakuler",
          location: "Pusat Bisnis Jakarta Selatan",
          price: 8500000, // Harga dalam Rupiah
          features: ["2 Kamar Tidur", "2 Kamar Mandi", "120 m¬≤"],
          description: "Rasakan kemewahan urban di apartemen modern dengan pemandangan kota yang menakjubkan. Dilengkapi fasilitas kelas atas, termasuk kolam renang infinity, gym lengkap, dan akses eksklusif ke lounge. Lokasi strategis dekat pusat perbelanjaan dan transportasi publik.",
          amenities: ["pool", "gym", "wifi", "parking", "furnished"],
          type: "2 Bedrooms"
        },
        {
          id: 2,
          title: "Penthouse Eksklusif The Peak",
          image: "https://images.unsplash.com/photo-1616594039964-ae9197a7c583?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8bHV4dXJ5JTIwYXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60",
          caption: "Kemewahan Tertinggi di Kota",
          location: "Segitiga Emas, Jakarta Pusat",
          price: 25000000,
          features: ["3 Kamar Tidur", "4 Kamar Mandi", "350 m¬≤", "Private Lift"],
          description: "Penthouse super mewah dengan desain interior kustom, pemandangan 360 derajat kota Jakarta, dan lift pribadi. Fasilitas termasuk kolam renang pribadi, home theater, dan layanan concierge 24 jam. Pengalaman tinggal tak tertandingi bagi mereka yang menginginkan yang terbaik.",
          amenities: ["pool", "gym", "parking", "wifi", "pet-friendly", "furnished"],
          type: "Penthouse"
        },
        {
          id: 3,
          title: "Studio Modern Urban Nest",
          image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60",
          caption: "Kompak dan Bergaya di Pusat Kota",
          location: "Kuningan, Jakarta Selatan",
          price: 5500000,
          features: ["Studio", "1 Kamar Mandi", "45 m¬≤"],
          description: "Studio modern dan fungsional, ideal untuk profesional muda atau pasangan. Desain interior minimalis dengan perabotan berkualitas tinggi. Gedung apartemen dilengkapi gym, kolam renang, dan area co-working.",
          amenities: ["gym", "wifi", "furnished"],
          type: "Studio"
        },
        {
          id: 4,
          title: "Apartemen Keluarga Nyaman",
          image: "https://images.unsplash.com/photo-1493809842364-78817add7ffb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60",
          caption: "Ruang Luas untuk Keluarga",
          location: "Kelapa Gading, Jakarta Utara",
          price: 12000000,
          features: ["3+ Kamar Tidur", "2 Kamar Mandi", "150 m¬≤"],
          description: "Apartemen luas dengan tiga kamar tidur, cocok untuk keluarga. Lingkungan ramah anak dengan taman bermain dan kolam renang anak. Dekat dengan sekolah internasional dan pusat perbelanjaan ternama.",
          amenities: ["pool", "parking", "pet-friendly", "furnished"],
          type: "3+ Bedrooms"
        },
        {
          id: 5,
          title: "Loft Artistik di Kemang",
          image: "https://images.unsplash.com/photo-1580037220943-7013de800a3f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGxvZnQlMjBhcGFydG1lbnR8ZW5wwGZ8MHx8fHw%3D&auto=format&fit=crop&w=800&q=60",
          caption: "Gaya Industrial Chic",
          location: "Kemang, Jakarta Selatan",
          price: 7500000,
          features: ["1 Kamar Tidur", "1 Kamar Mandi", "80 m¬≤", "Mezzanine"],
          description: "Apartemen tipe loft dengan desain industrial yang unik dan artistik. Langit-langit tinggi, jendela besar, dan area mezzanine serbaguna. Terletak di jantung Kemang yang trendi, dikelilingi kafe dan galeri seni.",
          amenities: ["wifi", "parking", "pet-friendly"],
          type: "1 Bedroom"
        }
      ];

      // ELEMEN DOM UTAMA
      const appRoot = document.getElementById('appRoot');
      const navLinksContainer = document.getElementById('navLinks');
      const navbarToggler = document.getElementById('navbarToggler');
      const propertyModalElement = document.getElementById('propertyModal');
      const modalCloseBtn = document.getElementById('closeModalBtn');
      const modalCloseFooterBtn = document.getElementById('modalCloseFooterBtn');
      const modalBookNowBtn = document.getElementById('modalBookNowBtn');
      const modalBodyContent = document.getElementById('modalBodyContent');
      const modalTitleElement = document.getElementById('modalTitle');


      // UTILITIES
      const formatCurrency = (amount) => {
        return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
      };

      // FUNGSI RENDER HALAMAN
      const renderPage = (pageName) => {
        if (appState.currentPage === pageName && appRoot.firstChild) return; // Jangan render ulang jika halaman sama

        appState.currentPage = pageName;
        appRoot.innerHTML = ''; // Bersihkan konten lama
        let templateId;

        switch (pageName) {
          case 'home': templateId = 'homePageTemplate'; break;
          case 'search': templateId = 'searchPageTemplate'; break;
          case 'about': templateId = 'aboutPageTemplate'; break;
          case 'contact': templateId = 'contactPageTemplate'; break;
          default: templateId = 'homePageTemplate'; // Fallback
        }

        const template = document.getElementById(templateId);
        if (template) {
          const pageContent = template.content.cloneNode(true);
          appRoot.appendChild(pageContent);
          // Inisialisasi spesifik halaman
          if (pageName === 'search') initSearchPage();
          if (pageName === 'contact') initContactPage();
        } else {
          appRoot.innerHTML = '<p class="text-center p-section">Halaman tidak ditemukan.</p>';
        }
        updateActiveNavLink();
        window.scrollTo(0, 0); // Scroll ke atas setiap pindah halaman
      };

      // ROUTING (Vanilla SPA Router Sederhana)
      const routes = {
        '/': 'home',
        '/search': 'search',
        '/about': 'about',
        '/contact': 'contact',
      };

      const handleRouteChange = () => {
        const path = window.location.hash.slice(1) || '/'; // slice(1) untuk hapus #
        const pageName = routes[path] || 'home'; // default ke home jika path tidak dikenal
        renderPage(pageName);
      };

      // Update link navigasi aktif
      const updateActiveNavLink = () => {
        const currentPath = window.location.hash || '#/';
        document.querySelectorAll('.nav-link.spa-link').forEach(link => {
          if (link.getAttribute('href') === currentPath) {
            link.classList.add('active');
            link.setAttribute('aria-current', 'page');
          } else {
            link.classList.remove('active');
            link.removeAttribute('aria-current');
          }
        });
        // Tutup menu mobile jika terbuka
        if (navLinksContainer.classList.contains('active')) {
          navLinksContainer.classList.remove('active');
          navbarToggler.setAttribute('aria-expanded', 'false');
        }
      };

      // Navigasi SPA
      document.body.addEventListener('click', (e) => {
        if (e.target.matches('.spa-link, .spa-link *')) {
          e.preventDefault();
          const targetLink = e.target.closest('.spa-link');
          const path = targetLink.getAttribute('href');
          if (window.location.hash !== path) {
            window.location.hash = path;
          } else { // Jika klik link yang sama, scroll ke atas
            window.scrollTo(0, 0);
          }
        }
      });


      // FUNGSI-FUNGSI TERKAIT PENCARIAN PROPERTI
      const renderPropertyCard = (property) => {
        const card = document.createElement('article');
        card.className = 'property-card animate-fade-in';
        card.innerHTML = `
          <figure class="property-card-figure">
            <img src="${property.image}" alt="Gambar ${property.title}" class="property-card-image" loading="lazy">
            <figcaption class="property-card-caption">${property.caption}</figcaption>
          </figure>
          <div class="property-card-content">
            <h3 class="property-card-title">${property.title}</h3>
            <p class="property-card-location">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a5.53 5.53 0 0 0-5.536 5.536c0 3.603 5.536 9.464 5.536 9.464s5.536-5.861 5.536-9.464A5.53 5.53 0 0 0 8 0Zm0 7.512A1.976 1.976 0 1 1 8 3.56a1.976 1.976 0 0 1 0 3.952Z"/></svg>
              ${property.location}
            </p>
            <p class="property-card-price">${formatCurrency(property.price)}<span style="font-size: var(--font-size-sm); color: var(--color-text-light); font-weight: normal;">/bulan</span></p>
            <div class="property-card-features">
              ${property.features.map(f => `<span class="property-card-feature-item">${f}</span>`).join('')}
            </div>
            <div class="property-card-actions">
              <button class="btn btn-primary view-details-btn" data-id="${property.id}">Lihat Detail</button>
            </div>
          </div>
        `;
        card.querySelector('.view-details-btn').addEventListener('click', () => openPropertyModal(property.id));
        return card;
      };

      const displayProperties = (propertiesToDisplay) => {
        const gridContainer = document.getElementById('propertyGridContainer');
        const noResultsMessage = document.getElementById('noResultsMessage');
        if (!gridContainer || !noResultsMessage) return;

        gridContainer.innerHTML = ''; // Bersihkan grid
        if (propertiesToDisplay.length === 0) {
          noResultsMessage.classList.remove('hidden');
        } else {
          noResultsMessage.classList.add('hidden');
          propertiesToDisplay.forEach(prop => {
            gridContainer.appendChild(renderPropertyCard(prop));
          });
        }
      };

      const setLoadingState = (isLoading) => {
        appState.isLoading = isLoading;
        const indicator = document.getElementById('loadingIndicator');
        const grid = document.getElementById('propertyGridContainer');
        const noResults = document.getElementById('noResultsMessage');

        if (indicator) indicator.classList.toggle('hidden', !isLoading);
        if (grid) grid.classList.toggle('hidden', isLoading);
        if (noResults) noResults.classList.toggle('hidden', isLoading || appState.filteredProperties.length > 0);
      };


      const filterProperties = () => {
        setLoadingState(true);

        // Simulasi delay untuk loading
        setTimeout(() => {
          const { location, priceRange, propertyType, amenities } = appState.activeFilters;

          appState.filteredProperties = appState.properties.filter(property => {
            const matchesLocation = !location || property.location.toLowerCase().includes(location.toLowerCase()) || property.title.toLowerCase().includes(location.toLowerCase());

            let matchesPrice = true;
            if (priceRange && priceRange !== 'any') {
              const [minStr, maxStr] = priceRange.split('-');
              const minPrice = parseInt(minStr);
              const maxPrice = maxStr === 'plus' ? Infinity : parseInt(maxStr);
              matchesPrice = property.price >= minPrice && (maxStr === 'plus' ? true : property.price <= maxPrice);
            }

            const matchesType = !propertyType || propertyType === 'any' || property.type === propertyType;

            const matchesAmenities = !amenities || amenities.length === 0 || amenities.every(amenity => property.amenities.includes(amenity));

            return matchesLocation && matchesPrice && matchesType && matchesAmenities;
          });

          displayProperties(appState.filteredProperties);
          setLoadingState(false);
        }, 500); // Delay 0.5 detik
      };

      const initSearchPage = () => {
        // Pastikan elemen ada sebelum menambahkan event listener
        const searchForm = document.getElementById('searchForm');
        if (!searchForm) return;

        // Isi data properti awal jika belum ada
        if (appState.properties.length === 0) {
          appState.properties = [...dummyProperties];
          appState.filteredProperties = [...dummyProperties]; // Awalnya tampilkan semua
        }

        displayProperties(appState.filteredProperties); // Tampilkan properti yang sudah difilter (atau semua jika filter kosong)

        searchForm.addEventListener('submit', (e) => {
          e.preventDefault();
          // Update state filter dari nilai form
          appState.activeFilters.location = document.getElementById('locationFilter').value;
          appState.activeFilters.priceRange = document.getElementById('priceRangeFilter').value;
          appState.activeFilters.propertyType = document.getElementById('propertyTypeFilter').value;
          appState.activeFilters.amenities = Array.from(document.querySelectorAll('input[name="amenitiesFilter"]:checked')).map(cb => cb.value);

          filterProperties();
        });
        // Untuk filter instan saat select atau checkbox berubah (opsional)
        // ['locationFilter', 'priceRangeFilter', 'propertyTypeFilter'].forEach(id => {
        //     document.getElementById(id)?.addEventListener('change', () => searchForm.requestSubmit());
        // });
        // document.querySelectorAll('input[name="amenitiesFilter"]')?.forEach(cb => {
        //     cb.addEventListener('change', () => searchForm.requestSubmit());
        // });
      };


      // FUNGSI-FUNGSI MODAL
      const openPropertyModal = (propertyId) => {
        const property = appState.properties.find(p => p.id === propertyId);
        if (!property) return;

        appState.currentModalPropertyId = propertyId;
        modalTitleElement.textContent = property.title;
        modalBodyContent.innerHTML = `
          <img src="${property.image}" alt="Gambar ${property.title}" class="w-full rounded-lg mb-4" loading="lazy">
          <p class="text-sm text-light mb-2">${property.location}</p>
          <p class="text-2xl font-bold text-primary mb-4">${formatCurrency(property.price)}<span style="font-size: var(--font-size-sm); color: var(--color-text-light); font-weight: normal;">/bulan</span></p>
          <h4 class="font-semibold text-md mb-2">Fitur Utama:</h4>
          <ul class="list-disc list-inside mb-4 text-light">
            ${property.features.map(f => `<li>${f}</li>`).join('')}
          </ul>
          <h4 class="font-semibold text-md mb-2">Deskripsi:</h4>
          <p class="text-md text-light">${property.description}</p>
          <h4 class="font-semibold text-md mt-4 mb-2">Fasilitas:</h4>
          <div class="flex flex-wrap gap-2">
            ${property.amenities.map(a => `<span class="bg-primary-light text-primary text-xs font-semibold px-2 py-1 rounded-full">${a.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>`).join('')}
          </div>
        `;
        propertyModalElement.classList.add('active');
        document.body.style.overflow = 'hidden'; // Cegah scroll background
        appState.modalOpen = true;
        modalCloseBtn.focus(); // Fokus ke tombol tutup untuk aksesibilitas
      };

      const closePropertyModal = () => {
        propertyModalElement.classList.remove('active');
        document.body.style.overflow = '';
        appState.modalOpen = false;
        appState.currentModalPropertyId = null;
      };

      // Event listener untuk modal
      modalCloseBtn.addEventListener('click', closePropertyModal);
      modalCloseFooterBtn.addEventListener('click', closePropertyModal);
      modalBookNowBtn.addEventListener('click', () => {
        alert(`Fitur pemesanan untuk properti ID: ${appState.currentModalPropertyId} akan segera tersedia!`);
        closePropertyModal();
      });
      propertyModalElement.addEventListener('click', (e) => { // Tutup jika klik di luar konten modal
        if (e.target === propertyModalElement) closePropertyModal();
      });
      document.addEventListener('keydown', (e) => { // Tutup dengan tombol Escape
        if (e.key === 'Escape' && appState.modalOpen) closePropertyModal();
      });


      // FUNGSI HALAMAN KONTAK
      const initContactPage = () => {
        const contactForm = document.getElementById('contactForm');
        const formStatus = document.getElementById('contactFormStatus');
        if (!contactForm || !formStatus) return;

        contactForm.addEventListener('submit', (e) => {
          e.preventDefault();
          formStatus.textContent = 'Mengirim pesan...';
          formStatus.style.color = 'var(--color-text-light)';

          // Simulasi pengiriman
          setTimeout(() => {
            // Ambil data form (jika perlu dikirim ke server)
            // const formData = new FormData(contactForm);
            // const name = formData.get('name');
            // console.log(`Pesan dari ${name} diterima.`);

            formStatus.textContent = 'Pesan Anda telah berhasil terkirim! Kami akan segera menghubungi Anda.';
            formStatus.style.color = 'var(--color-success)';
            contactForm.reset();

            setTimeout(() => { // Hapus pesan status setelah beberapa detik
              formStatus.textContent = '';
            }, 5000);
          }, 1500);
        });
      };


      // INISIALISASI APLIKASI
      const initApp = () => {
        // Set tahun copyright di footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Navbar toggler untuk mobile
        navbarToggler.addEventListener('click', () => {
          const isActive = navLinksContainer.classList.toggle('active');
          navbarToggler.setAttribute('aria-expanded', isActive.toString());
        });

        // Handle route change on load and hash change
        window.addEventListener('hashchange', handleRouteChange);
        window.addEventListener('load', () => {
          // Isi data properti awal jika belum ada
          if (appState.properties.length === 0) {
            appState.properties = [...dummyProperties];
            appState.filteredProperties = [...dummyProperties];
          }
          handleRouteChange(); // Render halaman awal berdasarkan hash atau default
        });
      };

      // Jalankan Inisialisasi Aplikasi
      initApp();

    })(); // Akhir dari IIFE RentEaseApp
  </script>
</body>

</html>