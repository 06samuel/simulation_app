<!DOCTYPE html>
<html lang="id" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Rentelindo - Platform manajemen properti sewa dengan fitur lengkap untuk pemilik dan pengelola properti di Indonesia">
    <meta name="keywords"
        content="sewa apartemen, manajemen properti, sistem penyewaan, laporan keuangan, tur virtual, Rentelindo">
    <meta name="author" content="Tim Rentelindo">
    <title>Rentelindo - Manajemen Properti Sewa</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        as="style" onload="this.rel='stylesheet'">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    </noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            /* Sistem Warna */
            --color-primary: hsl(214, 100%, 54%);
            --color-primary-dark: hsl(214, 100%, 42%);
            --color-primary-light: hsl(214, 100%, 92%);
            --color-accent: hsl(40, 90%, 60%);
            --color-success: hsl(140, 60%, 45%);
            --color-success-light: hsl(140, 60%, 95%);
            --color-danger: hsl(0, 80%, 56%);
            --color-danger-light: hsl(0, 80%, 95%);
            --color-warning: hsl(40, 90%, 60%);
            --color-warning-light: hsl(40, 90%, 95%);
            --color-info: hsl(200, 90%, 60%);
            --color-info-light: hsl(200, 90%, 95%);

            /* Warna Background */
            --color-bg: hsl(220, 16%, 98%);
            --color-bg-alt: hsl(0, 0%, 100%);
            --color-bg-card: hsl(0, 0%, 100%);

            /* Warna Teks */
            --color-text: hsl(220, 24%, 16%);
            --color-text-muted: hsl(220, 10%, 50%);
            --color-text-light: hsl(0, 0%, 100%);

            /* Warna Border */
            --color-border: hsl(220, 20%, 90%);
            --color-border-dark: hsl(220, 20%, 80%);

            /* Warna Interaksi */
            --color-focus: hsl(214, 100%, 85%);
            --color-hover: hsl(214, 100%, 96%);

            /* Tipografi */
            --font-main: 'Inter', system-ui, sans-serif;
            --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;

            /* Ukuran Font Responsif */
            --font-xs: clamp(0.75rem, 2vw, 0.875rem);
            --font-sm: clamp(0.875rem, 2.5vw, 1rem);
            --font-md: clamp(1rem, 3vw, 1.125rem);
            --font-lg: clamp(1.25rem, 3.5vw, 1.375rem);
            --font-xl: clamp(1.5rem, 4vw, 1.75rem);
            --font-display: clamp(2rem, 5vw, 2.5rem);

            /* Spasi */
            --space-xxs: 0.25rem;
            --space-xs: 0.5rem;
            --space-sm: 0.75rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;

            /* Border Radius */
            --radius-xs: 0.25rem;
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            --radius-full: 9999px;

            /* Bayangan */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.16);
            --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.06);

            /* Transisi */
            --transition-fast: all 0.15s ease-in-out;
            --transition-normal: all 0.3s ease-in-out;
            --transition-slow: all 0.5s ease-in-out;

            /* Z-index */
            --z-index-dropdown: 1000;
            --z-index-sticky: 1020;
            --z-index-fixed: 1030;
            --z-index-modal-backdrop: 1040;
            --z-index-modal: 1050;
            --z-index-popover: 1060;
            --z-index-tooltip: 1070;
            --z-index-toast: 1080;
        }

        /* Dark Mode */
        [data-theme="dark"] {
            --color-bg: hsl(220, 24%, 16%);
            --color-bg-alt: hsl(224, 29%, 14%);
            --color-bg-card: hsl(224, 29%, 18%);
            --color-text: hsl(210, 40%, 98%);
            --color-text-muted: hsl(215, 20%, 65%);
            --color-border: hsl(217, 33%, 20%);
            --color-border-dark: hsl(217, 33%, 30%);
            --color-hover: hsl(214, 100%, 20%);
        }

        /* Reset dan Dasar */
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        body {
            font-family: var(--font-main);
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Tata Letak */
        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: var(--space-md);
            width: 100%;
        }

        .container-narrow {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-md);
            width: 100%;
        }

        /* Utility Classes */
        .l-flex {
            display: flex;
            gap: var(--space-md);
        }

        .l-grid {
            display: grid;
            gap: var(--space-md);
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .align-center {
            align-items: center;
        }

        .align-start {
            align-items: flex-start;
        }

        .flex-col {
            flex-direction: column;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .flex-1 {
            flex: 1;
        }

        .flex-grow {
            flex-grow: 1;
        }

        .gap-xs {
            gap: var(--space-xs);
        }

        .gap-sm {
            gap: var(--space-sm);
        }

        .gap-md {
            gap: var(--space-md);
        }

        .gap-lg {
            gap: var(--space-lg);
        }

        .gap-xl {
            gap: var(--space-xl);
        }

        .w-full {
            width: 100%;
        }

        .h-full {
            height: 100%;
        }

        .text-center {
            text-align: center;
        }

        .text-left {
            text-align: left;
        }

        .text-right {
            text-align: right;
        }

        .text-uppercase {
            text-transform: uppercase;
        }

        .text-bold {
            font-weight: 700;
        }

        .text-semibold {
            font-weight: 600;
        }

        .text-muted {
            color: var(--color-text-muted);
        }

        .text-success {
            color: var(--color-success);
        }

        .text-danger {
            color: var(--color-danger);
        }

        .text-warning {
            color: var(--color-warning);
        }

        .text-info {
            color: var(--color-info);
        }

        .mt-auto {
            margin-top: auto;
        }

        .mb-auto {
            margin-bottom: auto;
        }

        .hidden {
            display: none !important;
        }

        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Komponen Header */
        .c-header {
            background: linear-gradient(to right, var(--color-primary), var(--color-primary-dark));
            padding: var(--space-sm) 0;
            position: sticky;
            top: 0;
            z-index: var(--z-index-sticky);
            box-shadow: var(--shadow-sm);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-md);
        }

        .logo {
            font-size: var(--font-xl);
            font-weight: 700;
            color: var(--color-text-light);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .logo-icon {
            font-size: var(--font-lg);
        }

        /* Komponen Button */
        .c-button {
            padding: var(--space-sm) var(--space-lg);
            background: var(--color-primary);
            color: var(--color-text-light);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 500;
            font-size: var(--font-sm);
            transition: var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            min-height: 40px;
            white-space: nowrap;
        }

        .c-button:hover {
            background: var(--color-primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .c-button:active {
            transform: translateY(0);
            box-shadow: none;
        }

        .c-button:focus-visible {
            outline: 2px solid var(--color-focus);
            outline-offset: 2px;
        }

        .c-button.btn-outline {
            background: transparent;
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
        }

        .c-button.btn-outline:hover {
            background: var(--color-primary-light);
            color: var(--color-primary-dark);
            border-color: var(--color-primary-dark);
        }

        .c-button.btn-success {
            background: var(--color-success);
        }

        .c-button.btn-success:hover {
            background: hsl(140, 60%, 40%);
        }

        .c-button.btn-danger {
            background: var(--color-danger);
        }

        .c-button.btn-danger:hover {
            background: hsl(0, 80%, 50%);
        }

        .c-button.btn-warning {
            background: var(--color-warning);
        }

        .c-button.btn-warning:hover {
            background: hsl(40, 90%, 55%);
        }

        .c-button.btn-sm {
            padding: var(--space-xs) var(--space-md);
            font-size: var(--font-xs);
            min-height: 32px;
        }

        .c-button.btn-lg {
            padding: var(--space-md) var(--space-xl);
            font-size: var(--font-md);
            min-height: 48px;
        }

        .c-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .c-button .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Komponen Sidebar */
        .sidebar {
            background: var(--color-primary-dark);
            color: var(--color-text-light);
            min-width: 280px;
            height: 100vh;
            position: sticky;
            top: 0;
            padding: var(--space-xl);
            overflow-y: auto;
            transition: var(--transition-normal);
        }

        .sidebar-collapsed {
            min-width: 80px;
            padding: var(--space-lg);
        }

        .sidebar-collapsed .logo-text,
        .sidebar-collapsed .nav-text {
            display: none;
        }

        .sidebar-collapsed .logo-icon {
            font-size: var(--font-xl);
        }

        .sidebar-collapsed .nav-item {
            justify-content: center;
        }

        .sidebar .logo {
            display: flex;
            text-align: center;
            margin-bottom: var(--space-xl);
            justify-content: center;
        }

        .sidebar .logo-icon {
            font-size: var(--font-xl);
        }

        .sidebar nav ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .sidebar nav a {
            color: var(--color-text-light);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
            text-decoration: none;
        }

        .sidebar nav a:hover,
        .sidebar nav a.active {
            background: var(--color-primary);
            transform: translateX(4px);
        }

        .sidebar nav a:focus-visible {
            outline: 2px solid var(--color-text-light);
            outline-offset: 2px;
        }

        .sidebar-toggle {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            background: none;
            border: none;
            color: var(--color-text-light);
            cursor: pointer;
            font-size: var(--font-md);
            z-index: 1;
        }

        /* Komponen Main Content */
        .main-content {
            flex: 1;
            padding: var(--space-xl);
            background: var(--color-bg-alt);
            transition: var(--transition-normal);
        }

        .main-content-expanded {
            margin-left: 0;
        }

        /* Komponen Hero */
        .c-hero {
            min-height: 320px;
            border-radius: var(--radius-lg);
            background: linear-gradient(120deg, var(--color-primary-light) 0%, var(--color-primary) 100%);
            display: flex;
            align-items: center;
            box-shadow: var(--shadow-md);
            overflow: hidden;
            position: relative;
        }

        .hero-content {
            padding: var(--space-xl);
            color: var(--color-text-light);
            max-width: 600px;
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: var(--font-display);
            font-weight: 800;
            margin-bottom: var(--space-md);
            line-height: 1.2;
        }

        .hero-desc {
            font-size: var(--font-lg);
            margin-bottom: var(--space-lg);
            color: hsla(0, 0%, 100%, 0.9);
        }

        .hero-image {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            object-fit: cover;
            opacity: 0.1;
            width: 50%;
        }

        /* Komponen Card */
        .c-card {
            background: var(--color-bg-card);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-fast);
            border: 1px solid var(--color-border);
        }

        .c-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .c-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid var(--color-border);
        }

        .c-card-title {
            font-size: var(--font-lg);
            font-weight: 600;
            margin: 0;
        }

        .c-card-body {
            margin-top: var(--space-md);
        }

        /* Komponen Tabs */
        .c-tabs {
            display: flex;
            gap: var(--space-xs);
            flex-wrap: wrap;
            margin-bottom: var(--space-lg);
            border-bottom: 1px solid var(--color-border);
            padding-bottom: var(--space-xs);
        }

        .c-tab {
            padding: var(--space-sm) var(--space-lg);
            background: transparent;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-fast);
            border: none;
            color: var(--color-text-muted);
            position: relative;
        }

        .c-tab:after {
            content: '';
            position: absolute;
            bottom: calc(-1 * var(--space-xs) - 1px);
            left: 0;
            width: 100%;
            height: 2px;
            background: transparent;
            transition: var(--transition-fast);
        }

        .c-tab.active,
        .c-tab:hover {
            color: var(--color-primary);
        }

        .c-tab.active:after {
            background: var(--color-primary);
        }

        /* Komponen Table */
        .c-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            background: var(--color-bg-card);
        }

        .c-table thead {
            background: var(--color-primary-light);
        }

        .c-table th {
            padding: var(--space-md);
            text-align: left;
            font-weight: 600;
            color: var(--color-primary-dark);
            white-space: nowrap;
        }

        .c-table tbody tr {
            border-top: 1px solid var(--color-border);
            transition: var(--transition-fast);
        }

        .c-table tbody tr:hover {
            background: var(--color-hover);
        }

        .c-table td {
            padding: var(--space-md);
            vertical-align: middle;
        }

        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* Komponen Badge */
        .c-badge {
            display: inline-flex;
            align-items: center;
            padding: var(--space-xxs) var(--space-sm);
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: 500;
            white-space: nowrap;
        }

        .badge-success {
            background: var(--color-success-light);
            color: var(--color-success);
        }

        .badge-warning {
            background: var(--color-warning-light);
            color: var(--color-warning);
        }

        .badge-danger {
            background: var(--color-danger-light);
            color: var(--color-danger);
        }

        .badge-info {
            background: var(--color-info-light);
            color: var(--color-info);
        }

        /* Komponen Form */
        .c-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .form-row {
            display: flex;
            gap: var(--space-md);
        }

        .form-row .form-group {
            flex: 1;
        }

        .form-label {
            font-weight: 500;
            font-size: var(--font-sm);
        }

        .form-required:after {
            content: '*';
            color: var(--color-danger);
            margin-left: var(--space-xxs);
        }

        .c-input,
        .c-select,
        .c-textarea {
            padding: var(--space-sm);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            font-size: var(--font-sm);
            transition: var(--transition-fast);
            width: 100%;
            font-family: var(--font-main);
        }

        .c-input:focus,
        .c-select:focus,
        .c-textarea:focus {
            border-color: var(--color-primary);
            outline: none;
            box-shadow: 0 0 0 3px hsla(214, 100%, 85%, 0.2);
        }

        .c-input[aria-invalid="true"],
        .c-select[aria-invalid="true"],
        .c-textarea[aria-invalid="true"] {
            border-color: var(--color-danger);
        }

        .c-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-error {
            color: var(--color-danger);
            font-size: var(--font-xs);
            margin-top: var(--space-xxs);
        }

        .form-hint {
            color: var(--color-text-muted);
            font-size: var(--font-xs);
            margin-top: var(--space-xxs);
        }

        /* Komponen Modal */
        .c-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: var(--z-index-modal);
            opacity: 0;
            transition: var(--transition-normal);
        }

        .c-modal.open {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: var(--color-bg-card);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(20px);
            transition: var(--transition-normal);
            box-shadow: var(--shadow-lg);
        }

        .c-modal.open .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .modal-title {
            font-size: var(--font-lg);
            font-weight: 600;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            cursor: pointer;
            font-size: var(--font-lg);
            color: var(--color-text-muted);
            transition: var(--transition-fast);
            padding: var(--space-xs);
            line-height: 1;
        }

        .modal-close:hover {
            color: var(--color-danger);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--space-md);
            margin-top: var(--space-lg);
            padding-top: var(--space-md);
            border-top: 1px solid var(--color-border);
        }

        /* Komponen Toast */
        .c-toast {
            position: fixed;
            bottom: var(--space-lg);
            right: var(--space-lg);
            padding: var(--space-md);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-lg);
            z-index: var(--z-index-toast);
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            max-width: 400px;
        }

        .c-toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-success {
            background: var(--color-success);
            color: var(--color-text-light);
        }

        .toast-error {
            background: var(--color-danger);
            color: var(--color-text-light);
        }

        .toast-warning {
            background: var(--color-warning);
            color: var(--color-text);
        }

        .toast-info {
            background: var(--color-info);
            color: var(--color-text-light);
        }

        .toast-close {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            margin-left: auto;
            opacity: 0.8;
        }

        .toast-close:hover {
            opacity: 1;
        }

        /* Komponen Loading */
        .c-loading {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-xs);
        }

        .loading-spinner {
            width: 1em;
            height: 1em;
            border: 2px solid currentColor;
            border-radius: var(--radius-full);
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        /* Komponen Empty State */
        .c-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-md);
            padding: var(--space-xl);
            text-align: center;
            color: var(--color-text-muted);
        }

        .empty-icon {
            font-size: var(--space-2xl);
            opacity: 0.5;
        }

        .empty-title {
            font-size: var(--font-lg);
            font-weight: 600;
        }

        /* Komponen Pagination */
        .c-pagination {
            display: flex;
            justify-content: center;
            gap: var(--space-xs);
            margin-top: var(--space-lg);
        }

        .page-item {
            list-style: none;
        }

        .page-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
            background: var(--color-bg-card);
            color: var(--color-text);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition-fast);
        }

        .page-link:hover {
            background: var(--color-primary-light);
            color: var(--color-primary);
        }

        .page-link.active {
            background: var(--color-primary);
            color: var(--color-text-light);
        }

        .page-link.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        /* Komponen Tooltip */
        .c-tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip-text {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-text);
            color: var(--color-bg);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-xs);
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-fast);
            margin-bottom: var(--space-xs);
            z-index: var(--z-index-tooltip);
        }

        .tooltip-text:after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 5px;
            border-style: solid;
            border-color: var(--color-text) transparent transparent transparent;
        }

        .c-tooltip:hover .tooltip-text {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                position: fixed;
                z-index: var(--z-index-modal);
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .mobile-menu-toggle {
                display: flex;
            }
        }

        @media (max-width: 768px) {
            .hero-content {
                padding: var(--space-lg);
            }

            .hero-title {
                font-size: var(--font-xl);
            }

            .hero-desc {
                font-size: var(--font-md);
            }

            .form-row {
                flex-direction: column;
                gap: var(--space-lg);
            }
        }

        @media (max-width: 480px) {
            .c-button {
                padding: var(--space-xs) var(--space-md);
                font-size: var(--font-xs);
            }

            .modal-content {
                width: 95%;
                padding: var(--space-md);
            }
        }

        /* Animasi */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Aksesibilitas */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Print Styles */
        @media print {

            .sidebar,
            .c-header,
            .c-hero,
            .modal-close,
            .c-button {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
            }

            .main-content {
                padding: 0 !important;
                margin: 0 !important;
            }

            .c-card {
                box-shadow: none !important;
                border: none !important;
                page-break-inside: avoid;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="c-header" role="banner">
        <div class="container header-container">
            <button class="c-button btn-outline mobile-menu-toggle hidden" aria-label="Toggle menu"
                aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            <a href="#" class="logo" aria-label="Rentelindo Beranda">
                <span class="logo-icon">üè†</span>
                <span class="logo-text">Rentelindo</span>
            </a>
            <div class="l-flex gap-sm">
                <button class="c-button btn-outline theme-toggle" aria-label="Toggle mode gelap">
                    <i class="fas fa-moon"></i> <span class="theme-text">Mode Gelap</span>
                </button>
                <div class="c-tooltip">
                    <button class="c-button btn-outline" aria-label="Notifikasi">
                        <i class="fas fa-bell"></i>
                    </button>
                    <span class="tooltip-text">Notifikasi</span>
                </div>
                <div class="c-tooltip">
                    <button class="c-button btn-outline" aria-label="Profil">
                        <i class="fas fa-user"></i>
                    </button>
                    <span class="tooltip-text">Profil</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Layout -->
    <div class="dashboard l-flex">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" aria-label="Menu Navigasi">
            <button class="sidebar-toggle" aria-label="Toggle sidebar">
                <i class="fas fa-chevron-left"></i>
            </button>
            <a href="#" class="logo">
                <span class="logo-icon">üè†</span>
                <span class="logo-text">Rentelindo</span>
            </a>
            <nav>
                <ul>
                    <li>
                        <a href="#dashboard" class="active nav-item" data-section="dashboard">
                            <i class="fas fa-home nav-icon"></i>
                            <span class="nav-text">Beranda</span>
                        </a>
                    </li>
                    <li>
                        <a href="#penyewa" class="nav-item" data-section="penyewa">
                            <i class="fas fa-users nav-icon"></i>
                            <span class="nav-text">Penyewa</span>
                        </a>
                    </li>
                    <li>
                        <a href="#unit" class="nav-item" data-section="unit">
                            <i class="fas fa-building nav-icon"></i>
                            <span class="nav-text">Unit</span>
                        </a>
                    </li>
                    <li>
                        <a href="#pembayaran" class="nav-item" data-section="pembayaran">
                            <i class="fas fa-credit-card nav-icon"></i>
                            <span class="nav-text">Pembayaran</span>
                        </a>
                    </li>
                    <li>
                        <a href="#kontrak" class="nav-item" data-section="kontrak">
                            <i class="fas fa-file-contract nav-icon"></i>
                            <span class="nav-text">Kontrak</span>
                        </a>
                    </li>
                    <li>
                        <a href="#pemeliharaan" class="nav-item" data-section="pemeliharaan">
                            <i class="fas fa-tools nav-icon"></i>
                            <span class="nav-text">Pemeliharaan</span>
                        </a>
                    </li>
                    <li>
                        <a href="#laporan" class="nav-item" data-section="laporan">
                            <i class="fas fa-chart-line nav-icon"></i>
                            <span class="nav-text">Laporan</span>
                        </a>
                    </li>
                    <li>
                        <a href="#pengaturan" class="nav-item" data-section="pengaturan">
                            <i class="fas fa-cog nav-icon"></i>
                            <span class="nav-text">Pengaturan</span>
                        </a>
                    </li>
                    <li class="mt-auto">
                        <a href="#" class="nav-item" onclick="logout()">
                            <i class="fas fa-sign-out-alt nav-icon"></i>
                            <span class="nav-text">Keluar</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="main-content" tabindex="-1">
            <!-- Hero Section -->
            <section class="c-hero fade-in">
                <div class="container hero-content">
                    <h1 class="hero-title">Kelola Properti dengan Mudah dan Efisien</h1>
                    <p class="hero-desc">Sistem manajemen properti sewa terintegrasi untuk memudahkan pengelolaan unit,
                        penyewa, pembayaran, dan laporan keuangan.</p>
                    <div class="l-flex gap-sm flex-wrap">
                        <button class="c-button" onclick="openModal('add-tenant')">
                            <i class="fas fa-user-plus"></i> Tambah Penyewa
                        </button>
                        <button class="c-button btn-outline" onclick="openModal('add-unit')">
                            <i class="fas fa-building"></i> Tambah Unit
                        </button>
                        <button class="c-button btn-outline" onclick="exportData()">
                            <i class="fas fa-download"></i> Ekspor Data
                        </button>
                    </div>
                </div>
                <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                    alt="Properti" class="hero-image">
            </section>

            <div class="container">
                <!-- Dashboard Section -->
                <section id="dashboard" class="fade-in">
                    <h2 class="text-center">Ringkasan Dashboard</h2>
                    <p class="text-center text-muted mb-4">Tinjau statistik dan aktivitas terbaru properti Anda</p>

                    <!-- Statistik Cepat -->
                    <div class="l-grid" style="grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));">
                        <div class="c-card">
                            <div class="l-flex align-center justify-between">
                                <div>
                                    <h3 class="text-muted">Total Unit</h3>
                                    <p id="total-units" class="text-xl text-bold">0</p>
                                </div>
                                <div class="c-badge badge-info">
                                    <i class="fas fa-building"></i>
                                </div>
                            </div>
                        </div>
                        <div class="c-card">
                            <div class="l-flex align-center justify-between">
                                <div>
                                    <h3 class="text-muted">Unit Ditempati</h3>
                                    <p id="rented-units" class="text-xl text-bold">0</p>
                                </div>
                                <div class="c-badge badge-success">
                                    <i class="fas fa-check"></i>
                                </div>
                            </div>
                        </div>
                        <div class="c-card">
                            <div class="l-flex align-center justify-between">
                                <div>
                                    <h3 class="text-muted">Unit Tersedia</h3>
                                    <p id="vacant-units" class="text-xl text-bold">0</p>
                                </div>
                                <div class="c-badge badge-warning">
                                    <i class="fas fa-home"></i>
                                </div>
                            </div>
                        </div>
                        <div class="c-card">
                            <div class="l-flex align-center justify-between">
                                <div>
                                    <h3 class="text-muted">Penyewa Baru</h3>
                                    <p id="new-tenants" class="text-xl text-bold">0</p>
                                </div>
                                <div class="c-badge badge-info">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Grafik dan Data -->
                    <div class="l-grid mt-4" style="grid-template-columns: 2fr 1fr; gap: var(--space-lg);">
                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Status Unit</h3>
                                <select class="c-select" id="chart-period" style="width: auto;">
                                    <option value="month">Bulan Ini</option>
                                    <option value="year">Tahun Ini</option>
                                    <option value="all">Semua</option>
                                </select>
                            </div>
                            <div class="c-card-body">
                                <canvas id="unit-chart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>

                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Aktivitas Terkini</h3>
                            </div>
                            <div class="c-card-body">
                                <div id="recent-activity" class="l-flex flex-col gap-sm">
                                    <div class="c-loading">
                                        <div class="loading-spinner"></div>
                                        <span>Memuat aktivitas...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pembayaran Terakhir -->
                    <div class="c-card mt-4">
                        <div class="c-card-header">
                            <h3 class="c-card-title">Pembayaran Terakhir</h3>
                            <button class="c-button btn-sm" onclick="navigateTo('pembayaran')">
                                Lihat Semua <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="c-table" aria-label="Pembayaran terakhir">
                                <thead>
                                    <tr>
                                        <th>ID Penyewa</th>
                                        <th>Nama</th>
                                        <th>Jumlah</th>
                                        <th>Tanggal</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-payments">
                                    <tr>
                                        <td colspan="5">
                                            <div class="c-loading">
                                                <div class="loading-spinner"></div>
                                                <span>Memuat data pembayaran...</span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Penyewa Section -->
                <section id="penyewa" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Manajemen Penyewa</h2>
                            <p class="text-muted">Kelola data penyewa dan status hunian</p>
                        </div>
                        <button class="c-button" onclick="openModal('add-tenant')">
                            <i class="fas fa-user-plus"></i> Tambah Penyewa
                        </button>
                    </div>

                    <div class="c-card">
                        <div class="c-card-header">
                            <div class="l-flex align-center gap-md flex-wrap" style="flex-grow: 1;">
                                <div class="l-flex align-center gap-sm" style="flex-grow: 1; max-width: 400px;">
                                    <div class="l-flex align-center" style="position: relative; flex-grow: 1;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: var(--space-sm); color: var(--color-text-muted);"></i>
                                        <input type="text" class="c-input" id="tenant-filter"
                                            placeholder="Cari penyewa..."
                                            style="padding-left: var(--space-xl); width: 100%;"
                                            aria-label="Cari penyewa">
                                    </div>
                                </div>
                                <div class="l-flex gap-sm">
                                    <select class="c-select" id="tenant-status-filter" style="width: 160px;"
                                        aria-label="Filter status penyewa">
                                        <option value="">Semua Status</option>
                                        <option value="Aktif">Aktif</option>
                                        <option value="Menunggu">Menunggu</option>
                                        <option value="Nonaktif">Nonaktif</option>
                                    </select>
                                    <button class="c-button btn-outline" id="tenant-export-btn">
                                        <i class="fas fa-file-export"></i> Ekspor
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="c-table" aria-label="Daftar penyewa">
                                <thead>
                                    <tr>
                                        <th>ID Penyewa</th>
                                        <th>Nama</th>
                                        <th>Kontak</th>
                                        <th>Unit</th>
                                        <th>Harga Sewa</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="tenants-tbody">
                                    <tr>
                                        <td colspan="7">
                                            <div class="c-empty">
                                                <div class="empty-icon">
                                                    <i class="fas fa-users"></i>
                                                </div>
                                                <h3 class="empty-title">Tidak ada penyewa</h3>
                                                <p>Tambahkan penyewa baru untuk memulai</p>
                                                <button class="c-button" onclick="openModal('add-tenant')">
                                                    <i class="fas fa-user-plus"></i> Tambah Penyewa
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="c-card-footer"
                            style="padding: var(--space-md); border-top: 1px solid var(--color-border);">
                            <div class="l-flex justify-between align-center">
                                <div class="text-muted" id="tenant-count">Menampilkan 0 dari 0 penyewa</div>
                                <div class="c-pagination" id="tenant-pagination">
                                    <ul class="l-flex gap-xs">
                                        <li class="page-item">
                                            <a href="#" class="page-link disabled">
                                                <i class="fas fa-chevron-left"></i>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a href="#" class="page-link active">1</a>
                                        </li>
                                        <li class="page-item">
                                            <a href="#" class="page-link disabled">
                                                <i class="fas fa-chevron-right"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Unit Section -->
                <section id="unit" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Manajemen Unit</h2>
                            <p class="text-muted">Kelola unit properti dan status ketersediaan</p>
                        </div>
                        <button class="c-button" onclick="openModal('add-unit')">
                            <i class="fas fa-building"></i> Tambah Unit
                        </button>
                    </div>

                    <div class="c-card">
                        <div class="c-card-header">
                            <div class="l-flex align-center gap-md flex-wrap" style="flex-grow: 1;">
                                <div class="l-flex align-center gap-sm" style="flex-grow: 1; max-width: 400px;">
                                    <div class="l-flex align-center" style="position: relative; flex-grow: 1;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: var(--space-sm); color: var(--color-text-muted);"></i>
                                        <input type="text" class="c-input" id="unit-filter" placeholder="Cari unit..."
                                            style="padding-left: var(--space-xl); width: 100%;" aria-label="Cari unit">
                                    </div>
                                </div>
                                <div class="l-flex gap-sm">
                                    <select class="c-select" id="unit-status-filter" style="width: 160px;"
                                        aria-label="Filter status unit">
                                        <option value="">Semua Status</option>
                                        <option value="Tersedia">Tersedia</option>
                                        <option value="Ditempati">Ditempati</option>
                                        <option value="Perbaikan">Perbaikan</option>
                                    </select>
                                    <button class="c-button btn-outline" id="unit-export-btn">
                                        <i class="fas fa-file-export"></i> Ekspor
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="c-table" aria-label="Daftar unit">
                                <thead>
                                    <tr>
                                        <th>Kode Unit</th>
                                        <th>Nama Unit</th>
                                        <th>Tipe</th>
                                        <th>Status</th>
                                        <th>Penyewa</th>
                                        <th>Harga Sewa</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="units-tbody">
                                    <tr>
                                        <td colspan="7">
                                            <div class="c-empty">
                                                <div class="empty-icon">
                                                    <i class="fas fa-building"></i>
                                                </div>
                                                <h3 class="empty-title">Tidak ada unit</h3>
                                                <p>Tambahkan unit baru untuk memulai</p>
                                                <button class="c-button" onclick="openModal('add-unit')">
                                                    <i class="fas fa-building"></i> Tambah Unit
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="c-card-footer"
                            style="padding: var(--space-md); border-top: 1px solid var(--color-border);">
                            <div class="l-flex justify-between align-center">
                                <div class="text-muted" id="unit-count">Menampilkan 0 dari 0 unit</div>
                                <div class="c-pagination" id="unit-pagination">
                                    <ul class="l-flex gap-xs">
                                        <li class="page-item">
                                            <a href="#" class="page-link disabled">
                                                <i class="fas fa-chevron-left"></i>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a href="#" class="page-link active">1</a>
                                        </li>
                                        <li class="page-item">
                                            <a href="#" class="page-link disabled">
                                                <i class="fas fa-chevron-right"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pembayaran Section -->
                <section id="pembayaran" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Manajemen Pembayaran</h2>
                            <p class="text-muted">Kelola pembayaran sewa dan tagihan</p>
                        </div>
                        <button class="c-button" onclick="openModal('add-payment')">
                            <i class="fas fa-plus"></i> Tambah Pembayaran
                        </button>
                    </div>

                    <div class="l-grid" style="grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Pembayaran Baru</h3>
                            </div>
                            <div class="c-card-body">
                                <form id="payment-form" class="c-form">
                                    <div class="form-group">
                                        <label for="payment-tenant" class="form-label form-required">Penyewa</label>
                                        <select id="payment-tenant" class="c-select" required>
                                            <option value="">Pilih Penyewa</option>
                                        </select>
                                        <div class="form-error" id="payment-tenant-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="payment-amount" class="form-label form-required">Jumlah (Rp)</label>
                                        <input type="number" id="payment-amount" class="c-input"
                                            placeholder="Masukkan jumlah" required>
                                        <div class="form-error" id="payment-amount-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="payment-date" class="form-label form-required">Tanggal
                                            Pembayaran</label>
                                        <input type="date" id="payment-date" class="c-input" required>
                                        <div class="form-error" id="payment-date-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label form-required">Metode Pembayaran</label>
                                        <div class="l-grid"
                                            style="grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: var(--space-sm);">
                                            <button type="button" class="payment-method active" data-method="transfer">
                                                <i class="fas fa-university"></i> Transfer
                                            </button>
                                            <button type="button" class="payment-method" data-method="qris">
                                                <i class="fas fa-qrcode"></i> QRIS
                                            </button>
                                            <button type="button" class="payment-method" data-method="tunai">
                                                <i class="fas fa-money-bill-wave"></i> Tunai
                                            </button>
                                        </div>
                                        <input type="hidden" id="payment-method" value="transfer" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="payment-note" class="form-label">Catatan</label>
                                        <textarea id="payment-note" class="c-textarea"
                                            placeholder="Tambahkan catatan (opsional)"></textarea>
                                    </div>

                                    <button type="submit" class="c-button">
                                        <i class="fas fa-check"></i> Simpan Pembayaran
                                    </button>
                                </form>
                            </div>
                        </div>

                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Riwayat Pembayaran</h3>
                                <div class="l-flex gap-sm">
                                    <select class="c-select" id="payment-period-filter" style="width: 120px;">
                                        <option value="all">Semua</option>
                                        <option value="today">Hari Ini</option>
                                        <option value="week">Minggu Ini</option>
                                        <option value="month">Bulan Ini</option>
                                    </select>
                                    <button class="c-button btn-outline btn-sm" id="payment-export-btn">
                                        <i class="fas fa-file-export"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="c-card-body">
                                <div class="table-responsive">
                                    <table class="c-table" aria-label="Riwayat pembayaran">
                                        <thead>
                                            <tr>
                                                <th>Tanggal</th>
                                                <th>Penyewa</th>
                                                <th>Jumlah</th>
                                                <th>Metode</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="payments-tbody">
                                            <tr>
                                                <td colspan="5">
                                                    <div class="c-empty">
                                                        <div class="empty-icon">
                                                            <i class="fas fa-credit-card"></i>
                                                        </div>
                                                        <h3 class="empty-title">Tidak ada pembayaran</h3>
                                                        <p>Belum ada riwayat pembayaran yang tercatat</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="c-card-footer"
                                    style="padding: var(--space-md); border-top: 1px solid var(--color-border);">
                                    <div class="l-flex justify-between align-center">
                                        <div class="text-muted" id="payment-count">Menampilkan 0 dari 0 pembayaran</div>
                                        <div class="c-pagination" id="payment-pagination">
                                            <ul class="l-flex gap-xs">
                                                <li class="page-item">
                                                    <a href="#" class="page-link disabled">
                                                        <i class="fas fa-chevron-left"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a href="#" class="page-link active">1</a>
                                                </li>
                                                <li class="page-item">
                                                    <a href="#" class="page-link disabled">
                                                        <i class="fas fa-chevron-right"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="c-card mt-4">
                        <div class="c-card-header">
                            <h3 class="c-card-title">Tagihan Belum Lunas</h3>
                        </div>
                        <div class="c-card-body">
                            <div class="table-responsive">
                                <table class="c-table" aria-label="Tagihan belum lunas">
                                    <thead>
                                        <tr>
                                            <th>Penyewa</th>
                                            <th>Unit</th>
                                            <th>Jatuh Tempo</th>
                                            <th>Jumlah</th>
                                            <th>Keterlambatan</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="unpaid-bills">
                                        <tr>
                                            <td colspan="6">
                                                <div class="c-empty">
                                                    <div class="empty-icon">
                                                        <i class="fas fa-check-circle"></i>
                                                    </div>
                                                    <h3 class="empty-title">Semua tagihan lunas</h3>
                                                    <p>Tidak ada tagihan yang tertunggak</p>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Kontrak Section -->
                <section id="kontrak" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Manajemen Kontrak</h2>
                            <p class="text-muted">Kelola dokumen kontrak sewa menyewa</p>
                        </div>
                        <button class="c-button" onclick="openModal('add-contract')">
                            <i class="fas fa-file-contract"></i> Buat Kontrak Baru
                        </button>
                    </div>

                    <div class="c-card">
                        <div class="c-card-header">
                            <div class="l-flex align-center gap-md flex-wrap" style="flex-grow: 1;">
                                <div class="l-flex align-center gap-sm" style="flex-grow: 1; max-width: 400px;">
                                    <div class="l-flex align-center" style="position: relative; flex-grow: 1;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: var(--space-sm); color: var(--color-text-muted);"></i>
                                        <input type="text" class="c-input" id="contract-filter"
                                            placeholder="Cari kontrak..."
                                            style="padding-left: var(--space-xl); width: 100%;"
                                            aria-label="Cari kontrak">
                                    </div>
                                </div>
                                <div class="l-flex gap-sm">
                                    <select class="c-select" id="contract-status-filter" style="width: 160px;"
                                        aria-label="Filter status kontrak">
                                        <option value="">Semua Status</option>
                                        <option value="Aktif">Aktif</option>
                                        <option value="Akan Berakhir">Akan Berakhir</option>
                                        <option value="Selesai">Selesai</option>
                                    </select>
                                    <button class="c-button btn-outline" id="contract-export-btn">
                                        <i class="fas fa-file-export"></i> Ekspor
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="c-table" aria-label="Daftar kontrak">
                                <thead>
                                    <tr>
                                        <th>No. Kontrak</th>
                                        <th>Penyewa</th>
                                        <th>Unit</th>
                                        <th>Mulai</th>
                                        <th>Selesai</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="contracts-tbody">
                                    <tr>
                                        <td colspan="7">
                                            <div class="c-empty">
                                                <div class="empty-icon">
                                                    <i class="fas fa-file-contract"></i>
                                                </div>
                                                <h3 class="empty-title">Tidak ada kontrak</h3>
                                                <p>Buat kontrak baru untuk memulai</p>
                                                <button class="c-button" onclick="openModal('add-contract')">
                                                    <i class="fas fa-file-contract"></i> Buat Kontrak
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="c-card-footer"
                            style="padding: var(--space-md); border-top: 1px solid var(--color-border);">
                            <div class="l-flex justify-between align-center">
                                <div class="text-muted" id="contract-count">Menampilkan 0 dari 0 kontrak</div>
                                <div class="c-pagination" id="contract-pagination">
                                    <ul class="l-flex gap-xs">
                                        <li class="page-item">
                                            <a href="#" class="page-link disabled">
                                                <i class="fas fa-chevron-left"></i>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a href="#" class="page-link active">1</a>
                                        </li>
                                        <li class="page-item">
                                            <a href="#" class="page-link disabled">
                                                <i class="fas fa-chevron-right"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pemeliharaan Section -->
                <section id="pemeliharaan" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Manajemen Pemeliharaan</h2>
                            <p class="text-muted">Kelola permintaan perbaikan dan pemeliharaan unit</p>
                        </div>
                        <button class="c-button" onclick="openModal('add-maintenance')">
                            <i class="fas fa-tools"></i> Tambah Permintaan
                        </button>
                    </div>

                    <div class="l-grid" style="grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Permintaan Baru</h3>
                            </div>
                            <div class="c-card-body">
                                <form id="maintenance-form" class="c-form">
                                    <div class="form-group">
                                        <label for="maintenance-unit" class="form-label form-required">Unit</label>
                                        <select id="maintenance-unit" class="c-select" required>
                                            <option value="">Pilih Unit</option>
                                        </select>
                                        <div class="form-error" id="maintenance-unit-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="maintenance-type" class="form-label form-required">Jenis
                                            Perbaikan</label>
                                        <select id="maintenance-type" class="c-select" required>
                                            <option value="">Pilih Jenis</option>
                                            <option value="Elektrik">Elektrik</option>
                                            <option value="Plumbing">Plumbing</option>
                                            <option value="Struktural">Struktural</option>
                                            <option value="Lainnya">Lainnya</option>
                                        </select>
                                        <div class="form-error" id="maintenance-type-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="maintenance-description"
                                            class="form-label form-required">Deskripsi</label>
                                        <textarea id="maintenance-description" class="c-textarea"
                                            placeholder="Jelaskan masalahnya" required></textarea>
                                        <div class="form-error" id="maintenance-description-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="maintenance-priority"
                                            class="form-label form-required">Prioritas</label>
                                        <select id="maintenance-priority" class="c-select" required>
                                            <option value="Rendah">Rendah</option>
                                            <option value="Sedang">Sedang</option>
                                            <option value="Tinggi">Tinggi</option>
                                            <option value="Darurat">Darurat</option>
                                        </select>
                                    </div>

                                    <button type="submit" class="c-button">
                                        <i class="fas fa-check"></i> Kirim Permintaan
                                    </button>
                                </form>
                            </div>
                        </div>

                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Daftar Perbaikan</h3>
                                <div class="l-flex gap-sm">
                                    <select class="c-select" id="maintenance-status-filter" style="width: 140px;">
                                        <option value="">Semua Status</option>
                                        <option value="Baru">Baru</option>
                                        <option value="Proses">Proses</option>
                                        <option value="Selesai">Selesai</option>
                                    </select>
                                    <button class="c-button btn-outline btn-sm" id="maintenance-export-btn">
                                        <i class="fas fa-file-export"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="c-card-body">
                                <div class="table-responsive">
                                    <table class="c-table" aria-label="Daftar perbaikan">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Unit</th>
                                                <th>Jenis</th>
                                                <th>Prioritas</th>
                                                <th>Status</th>
                                                <th>Tanggal</th>
                                                <th>Aksi</th>
                                            </tr>
                                        </thead>
                                        <tbody id="maintenance-tbody">
                                            <tr>
                                                <td colspan="7">
                                                    <div class="c-empty">
                                                        <div class="empty-icon">
                                                            <i class="fas fa-tools"></i>
                                                        </div>
                                                        <h3 class="empty-title">Tidak ada perbaikan</h3>
                                                        <p>Tidak ada permintaan perbaikan yang tercatat</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="c-card-footer"
                                    style="padding: var(--space-md); border-top: 1px solid var(--color-border);">
                                    <div class="l-flex justify-between align-center">
                                        <div class="text-muted" id="maintenance-count">Menampilkan 0 dari 0 perbaikan
                                        </div>
                                        <div class="c-pagination" id="maintenance-pagination">
                                            <ul class="l-flex gap-xs">
                                                <li class="page-item">
                                                    <a href="#" class="page-link disabled">
                                                        <i class="fas fa-chevron-left"></i>
                                                    </a>
                                                </li>
                                                <li class="page-item">
                                                    <a href="#" class="page-link active">1</a>
                                                </li>
                                                <li class="page-item">
                                                    <a href="#" class="page-link disabled">
                                                        <i class="fas fa-chevron-right"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Laporan Section -->
                <section id="laporan" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Laporan dan Analisis</h2>
                            <p class="text-muted">Tinjau laporan keuangan dan statistik properti</p>
                        </div>
                        <div class="l-flex gap-sm">
                            <button class="c-button btn-outline" onclick="generateReport('financial')">
                                <i class="fas fa-file-invoice-dollar"></i> Laporan Keuangan
                            </button>
                            <button class="c-button btn-outline" onclick="generateReport('occupancy')">
                                <i class="fas fa-home"></i> Laporan Hunian
                            </button>
                        </div>
                    </div>

                    <div class="l-grid" style="grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Pendapatan Bulanan</h3>
                                <select class="c-select" id="income-year" style="width: 100px;">
                                    <option value="2023">2023</option>
                                    <option value="2024" selected>2024</option>
                                </select>
                            </div>
                            <div class="c-card-body">
                                <canvas id="income-chart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>

                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Tingkat Hunian</h3>
                                <select class="c-select" id="occupancy-period" style="width: 140px;">
                                    <option value="year">Tahunan</option>
                                    <option value="month" selected>Bulanan</option>
                                    <option value="week">Mingguan</option>
                                </select>
                            </div>
                            <div class="c-card-body">
                                <canvas id="occupancy-chart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="c-card mt-4">
                        <div class="c-card-header">
                            <h3 class="c-card-title">Ringkasan Keuangan</h3>
                            <div class="l-flex gap-sm">
                                <select class="c-select" id="report-period" style="width: 140px;">
                                    <option value="today">Hari Ini</option>
                                    <option value="week">Minggu Ini</option>
                                    <option value="month" selected>Bulan Ini</option>
                                    <option value="year">Tahun Ini</option>
                                </select>
                                <button class="c-button btn-outline" onclick="exportFinancialReport()">
                                    <i class="fas fa-download"></i> Unduh
                                </button>
                            </div>
                        </div>
                        <div class="c-card-body">
                            <div class="l-grid" style="grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));">
                                <div class="c-card" style="box-shadow: none; border: 1px solid var(--color-border);">
                                    <div class="l-flex align-center justify-between">
                                        <div>
                                            <h3 class="text-muted">Total Pendapatan</h3>
                                            <p id="total-income" class="text-xl text-bold">Rp 0</p>
                                        </div>
                                        <div class="c-badge badge-success">
                                            <i class="fas fa-arrow-up"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-card" style="box-shadow: none; border: 1px solid var(--color-border);">
                                    <div class="l-flex align-center justify-between">
                                        <div>
                                            <h3 class="text-muted">Pembayaran Tertunda</h3>
                                            <p id="pending Payments" class="text-xl text-bold">Rp 0</p>
                                        </div>
                                        <div class="c-badge badge-warning">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-card" style="box-shadow: none; border: 1px solid var(--color-border);">
                                    <div class="l-flex align-center justify-between">
                                        <div>
                                            <h3 class="text-muted">Biaya Pemeliharaan</h3>
                                            <p id="maintenance-cost" class="text-xl text-bold">Rp 0</p>
                                        </div>
                                        <div class="c-badge badge-danger">
                                            <i class="fas fa-tools"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-card" style="box-shadow: none; border: 1px solid var(--color-border);">
                                    <div class="l-flex align-center justify-between">
                                        <div>
                                            <h3 class="text-muted">Pendapatan Bersih</h3>
                                            <p id="net-income" class="text-xl text-bold">Rp 0</p>
                                        </div>
                                        <div class="c-badge badge-info">
                                            <i class="fas fa-coins"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="c-card mt-4">
                        <div class="c-card-header">
                            <h3 class="c-card-title">Laporan Penyewa</h3>
                            <div class="l-flex gap-sm">
                                <button class="c-button btn-outline" onclick="exportTenantReport()">
                                    <i class="fas fa-file-export"></i> Ekspor Data Penyewa
                                </button>
                                <button class="c-button btn-outline" onclick="exportUnitReport()">
                                    <i class="fas fa-file-export"></i> Ekspor Data Unit
                                </button>
                            </div>
                        </div>
                        <div class="c-card-body">
                            <div class="l-flex flex-col gap-md">
                                <div class="l-flex gap-md">
                                    <div class="c-card" style="flex: 1;">
                                        <h3>Penyewa Aktif</h3>
                                        <p id="active-tenants" class="text-xl">0</p>
                                    </div>
                                    <div class="c-card" style="flex: 1;">
                                        <h3>Penyewa Baru (30 hari)</h3>
                                        <p id="new-tenants-report" class="text-xl">0</p>
                                    </div>
                                    <div class="c-card" style="flex: 1;">
                                        <h3>Penyewa Akan Berakhir</h3>
                                        <p id="ending-tenants" class="text-xl">0</p>
                                    </div>
                                </div>

                                <div class="l-flex gap-md">
                                    <div class="c-card" style="flex: 1;">
                                        <h3>Unit Tersedia</h3>
                                        <p id="available-units-report" class="text-xl">0</p>
                                    </div>
                                    <div class="c-card" style="flex: 1;">
                                        <h3>Unit Dalam Perbaikan</h3>
                                        <p id="maintenance-units" class="text-xl">0</p>
                                    </div>
                                    <div class="c-card" style="flex: 1;">
                                        <h3>Tingkat Hunian</h3>
                                        <p id="occupancy-rate" class="text-xl">0%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pengaturan Section -->
                <section id="pengaturan" class="fade-in" hidden>
                    <div class="l-flex justify-between align-center mb-4">
                        <div>
                            <h2>Pengaturan Sistem</h2>
                            <p class="text-muted">Kelola preferensi dan konfigurasi sistem</p>
                        </div>
                    </div>

                    <div class="l-grid" style="grid-template-columns: 1fr 2fr; gap: var(--space-lg);">
                        <div class="c-card">
                            <div class="c-card-header">
                                <h3 class="c-card-title">Menu Pengaturan</h3>
                            </div>
                            <div class="c-card-body">
                                <nav class="l-flex flex-col gap-xs">
                                    <button class="c-button btn-outline text-left setting-tab active"
                                        data-tab="profile">
                                        <i class="fas fa-user"></i> Profil Pengguna
                                    </button>
                                    <button class="c-button btn-outline text-left setting-tab" data-tab="property">
                                        <i class="fas fa-home"></i> Pengaturan Properti
                                    </button>
                                    <button class="c-button btn-outline text-left setting-tab" data-tab="payment">
                                        <i class="fas fa-credit-card"></i> Metode Pembayaran
                                    </button>
                                    <button class="c-button btn-outline text-left setting-tab" data-tab="notification">
                                        <i class="fas fa-bell"></i> Notifikasi
                                    </button>
                                    <button class="c-button btn-outline text-left setting-tab" data-tab="security">
                                        <i class="fas fa-shield-alt"></i> Keamanan
                                    </button>
                                </nav>
                            </div>
                        </div>

                        <div class="c-card">
                            <div id="profile-settings" class="setting-content active">
                                <div class="c-card-header">
                                    <h3 class="c-card-title">Profil Pengguna</h3>
                                </div>
                                <div class="c-card-body">
                                    <form id="profile-form" class="c-form">
                                        <div class="form-group">
                                            <label for="profile-name" class="form-label form-required">Nama
                                                Lengkap</label>
                                            <input type="text" id="profile-name" class="c-input" required>
                                            <div class="form-error" id="profile-name-error"></div>
                                        </div>

                                        <div class="form-group">
                                            <label for="profile-email" class="form-label form-required">Email</label>
                                            <input type="email" id="profile-email" class="c-input" required>
                                            <div class="form-error" id="profile-email-error"></div>
                                        </div>

                                        <div class="form-group">
                                            <label for="profile-phone" class="form-label">Nomor Telepon</label>
                                            <input type="tel" id="profile-phone" class="c-input">
                                        </div>

                                        <div class="form-group">
                                            <label for="profile-avatar" class="form-label">Foto Profil</label>
                                            <input type="file" id="profile-avatar" class="c-input" accept="image/*">
                                        </div>

                                        <button type="submit" class="c-button">
                                            <i class="fas fa-save"></i> Simpan Perubahan
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <div id="property-settings" class="setting-content" hidden>
                                <div class="c-card-header">
                                    <h3 class="c-card-title">Pengaturan Properti</h3>
                                </div>
                                <div class="c-card-body">
                                    <form id="property-form" class="c-form">
                                        <div class="form-group">
                                            <label for="property-name" class="form-label form-required">Nama
                                                Properti</label>
                                            <input type="text" id="property-name" class="c-input" required>
                                            <div class="form-error" id="property-name-error"></div>
                                        </div>

                                        <div class="form-group">
                                            <label for="property-address"
                                                class="form-label form-required">Alamat</label>
                                            <textarea id="property-address" class="c-textarea" required></textarea>
                                            <div class="form-error" id="property-address-error"></div>
                                        </div>

                                        <div class="form-group">
                                            <label for="property-type" class="form-label form-required">Jenis
                                                Properti</label>
                                            <select id="property-type" class="c-select" required>
                                                <option value="Apartemen">Apartemen</option>
                                                <option value="Rumah">Rumah</option>
                                                <option value="Kantor">Kantor</option>
                                                <option value="Lainnya">Lainnya</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="property-units" class="form-label">Jumlah Unit</label>
                                            <input type="number" id="property-units" class="c-input" min="1">
                                        </div>

                                        <button type="submit" class="c-button">
                                            <i class="fas fa-save"></i> Simpan Perubahan
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <div id="payment-settings" class="setting-content" hidden>
                                <div class="c-card-header">
                                    <h3 class="c-card-title">Metode Pembayaran</h3>
                                </div>
                                <div class="c-card-body">
                                    <form id="payment-method-form" class="c-form">
                                        <div class="form-group">
                                            <label class="form-label">Metode Pembayaran yang Tersedia</label>
                                            <div class="l-flex flex-col gap-sm">
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="payment-methods" value="transfer"
                                                        checked>
                                                    <span>Transfer Bank</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="payment-methods" value="qris" checked>
                                                    <span>QRIS</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="payment-methods" value="tunai">
                                                    <span>Tunai</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="bank-name" class="form-label">Nama Bank</label>
                                            <input type="text" id="bank-name" class="c-input">
                                        </div>

                                        <div class="form-group">
                                            <label for="account-number" class="form-label">Nomor Rekening</label>
                                            <input type="text" id="account-number" class="c-input">
                                        </div>

                                        <div class="form-group">
                                            <label for="account-name" class="form-label">Nama Pemilik Rekening</label>
                                            <input type="text" id="account-name" class="c-input">
                                        </div>

                                        <button type="submit" class="c-button">
                                            <i class="fas fa-save"></i> Simpan Perubahan
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <div id="notification-settings" class="setting-content" hidden>
                                <div class="c-card-header">
                                    <h3 class="c-card-title">Pengaturan Notifikasi</h3>
                                </div>
                                <div class="c-card-body">
                                    <form id="notification-form" class="c-form">
                                        <div class="form-group">
                                            <label class="form-label">Jenis Notifikasi</label>
                                            <div class="l-flex flex-col gap-sm">
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-types" value="payment"
                                                        checked>
                                                    <span>Pembayaran</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-types" value="contract"
                                                        checked>
                                                    <span>Kontrak</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-types" value="maintenance"
                                                        checked>
                                                    <span>Pemeliharaan</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-types" value="promo">
                                                    <span>Promo dan Update</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Metode Notifikasi</label>
                                            <div class="l-flex flex-col gap-sm">
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-methods" value="email"
                                                        checked>
                                                    <span>Email</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-methods" value="whatsapp">
                                                    <span>WhatsApp</span>
                                                </label>
                                                <label class="l-flex align-center gap-sm">
                                                    <input type="checkbox" name="notification-methods" value="sms">
                                                    <span>SMS</span>
                                                </label>
                                            </div>
                                        </div>

                                        <button type="submit" class="c-button">
                                            <i class="fas fa-save"></i> Simpan Perubahan
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <div id="security-settings" class="setting-content" hidden>
                                <div class="c-card-header">
                                    <h3 class="c-card-title">Pengaturan Keamanan</h3>
                                </div>
                                <div class="c-card-body">
                                    <form id="security-form" class="c-form">
                                        <div class="form-group">
                                            <label for="current-password" class="form-label form-required">Password Saat
                                                Ini</label>
                                            <input type="password" id="current-password" class="c-input" required>
                                            <div class="form-error" id="current-password-error"></div>
                                        </div>

                                        <div class="form-group">
                                            <label for="new-password" class="form-label form-required">Password
                                                Baru</label>
                                            <input type="password" id="new-password" class="c-input" required>
                                            <div class="form-error" id="new-password-error"></div>
                                            <div class="form-hint">Minimal 8 karakter, mengandung huruf besar, kecil,
                                                dan angka</div>
                                        </div>

                                        <div class="form-group">
                                            <label for="confirm-password" class="form-label form-required">Konfirmasi
                                                Password Baru</label>
                                            <input type="password" id="confirm-password" class="c-input" required>
                                            <div class="form-error" id="confirm-password-error"></div>
                                        </div>

                                        <div class="form-group">
                                            <label class="l-flex align-center gap-sm">
                                                <input type="checkbox" id="two-factor">
                                                <span>Aktifkan Two-Factor Authentication</span>
                                            </label>
                                        </div>

                                        <button type="submit" class="c-button">
                                            <i class="fas fa-save"></i> Perbarui Password
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        <div class="c-card mt-4">
            <div class="c-card-header">
                <h3 class="c-card-title">Laporan Penyewa</h3>
                <div class="l-flex gap-sm">
                    <button class="c-button btn-outline" onclick="exportTenantReport()">
                        <i class="fas fa-file-export"></i> Ekspor Data Penyewa
                    </button>
                    <button class="c-button btn-outline" onclick="exportUnitReport()">
                        <i class="fas fa-file-export"></i> Ekspor Data Unit
                    </button>
                </div>
            </div>
            <div class="c-card-body">
                <div class="l-flex flex-col gap-md">
                    <div class="l-flex gap-md">
                        <div class="c-card" style="flex: 1;">
                            <h3>Penyewa Aktif</h3>
                            <p id="active-tenants" class="text-xl">0</p>
                        </div>
                        <div class="c-card" style="flex: 1;">
                            <h3>Penyewa Baru (30 hari)</h3>
                            <p id="new-tenants-report" class="text-xl">0</p>
                        </div>
                        <div class="c-card" style="flex: 1;">
                            <h3>Penyewa Akan Berakhir</h3>
                            <p id="ending-tenants" class="text-xl">0</p>
                        </div>
                    </div>

                    <div class="l-flex gap-md">
                        <div class="c-card" style="flex: 1;">
                            <h3>Unit Tersedia</h3>
                            <p id="available-units-report" class="text-xl">0</p>
                        </div>
                        <div class="c-card" style="flex: 1;">
                            <h3>Unit Dalam Perbaikan</h3>
                            <p id="maintenance-units" class="text-xl">0</p>
                        </div>
                        <div class="c-card" style="flex: 1;">
                            <h3>Tingkat Hunian</h3>
                            <p id="occupancy-rate" class="text-xl">0%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </section>

        <!-- Pengaturan Section -->
        <section id="pengaturan" class="fade-in" hidden>
            <div class="l-flex justify-between align-center mb-4">
                <div>
                    <h2>Pengaturan Sistem</h2>
                    <p class="text-muted">Kelola preferensi dan konfigurasi sistem</p>
                </div>
            </div>

            <div class="l-grid" style="grid-template-columns: 1fr 2fr; gap: var(--space-lg);">
                <div class="c-card">
                    <div class="c-card-header">
                        <h3 class="c-card-title">Menu Pengaturan</h3>
                    </div>
                    <div class="c-card-body">
                        <nav class="l-flex flex-col gap-xs">
                            <button class="c-button btn-outline text-left setting-tab active" data-tab="profile">
                                <i class="fas fa-user"></i> Profil Pengguna
                            </button>
                            <button class="c-button btn-outline text-left setting-tab" data-tab="property">
                                <i class="fas fa-home"></i> Pengaturan Properti
                            </button>
                            <button class="c-button btn-outline text-left setting-tab" data-tab="payment">
                                <i class="fas fa-credit-card"></i> Metode Pembayaran
                            </button>
                            <button class="c-button btn-outline text-left setting-tab" data-tab="notification">
                                <i class="fas fa-bell"></i> Notifikasi
                            </button>
                            <button class="c-button btn-outline text-left setting-tab" data-tab="security">
                                <i class="fas fa-shield-alt"></i> Keamanan
                            </button>
                        </nav>
                    </div>
                </div>

                <div class="c-card">
                    <div id="profile-settings" class="setting-content active">
                        <div class="c-card-header">
                            <h3 class="c-card-title">Profil Pengguna</h3>
                        </div>
                        <div class="c-card-body">
                            <form id="profile-form" class="c-form">
                                <div class="form-group">
                                    <label for="profile-name" class="form-label form-required">Nama Lengkap</label>
                                    <input type="text" id="profile-name" class="c-input" required>
                                    <div class="form-error" id="profile-name-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="profile-email" class="form-label form-required">Email</label>
                                    <input type="email" id="profile-email" class="c-input" required>
                                    <div class="form-error" id="profile-email-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="profile-phone" class="form-label">Nomor Telepon</label>
                                    <input type="tel" id="profile-phone" class="c-input">
                                </div>

                                <div class="form-group">
                                    <label for="profile-avatar" class="form-label">Foto Profil</label>
                                    <input type="file" id="profile-avatar" class="c-input" accept="image/*">
                                </div>

                                <button type="submit" class="c-button">
                                    <i class="fas fa-save"></i> Simpan Perubahan
                                </button>
                            </form>
                        </div>
                    </div>

                    <div id="property-settings" class="setting-content" hidden>
                        <div class="c-card-header">
                            <h3 class="c-card-title">Pengaturan Properti</h3>
                        </div>
                        <div class="c-card-body">
                            <form id="property-form" class="c-form">
                                <div class="form-group">
                                    <label for="property-name" class="form-label form-required">Nama Properti</label>
                                    <input type="text" id="property-name" class="c-input" required>
                                    <div class="form-error" id="property-name-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="property-address" class="form-label form-required">Alamat</label>
                                    <textarea id="property-address" class="c-textarea" required></textarea>
                                    <div class="form-error" id="property-address-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="property-type" class="form-label form-required">Jenis Properti</label>
                                    <select id="property-type" class="c-select" required>
                                        <option value="Apartemen">Apartemen</option>
                                        <option value="Rumah">Rumah</option>
                                        <option value="Kantor">Kantor</option>
                                        <option value="Lainnya">Lainnya</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="property-units" class="form-label">Jumlah Unit</label>
                                    <input type="number" id="property-units" class="c-input" min="1">
                                </div>

                                <button type="submit" class="c-button">
                                    <i class="fas fa-save"></i> Simpan Perubahan
                                </button>
                            </form>
                        </div>
                    </div>

                    <div id="payment-settings" class="setting-content" hidden>
                        <div class="c-card-header">
                            <h3 class="c-card-title">Metode Pembayaran</h3>
                        </div>
                        <div class="c-card-body">
                            <form id="payment-method-form" class="c-form">
                                <div class="form-group">
                                    <label class="form-label">Metode Pembayaran yang Tersedia</label>
                                    <div class="l-flex flex-col gap-sm">
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="payment-methods" value="transfer" checked>
                                            <span>Transfer Bank</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="payment-methods" value="qris" checked>
                                            <span>QRIS</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="payment-methods" value="tunai">
                                            <span>Tunai</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="bank-name" class="form-label">Nama Bank</label>
                                    <input type="text" id="bank-name" class="c-input">
                                </div>

                                <div class="form-group">
                                    <label for="account-number" class="form-label">Nomor Rekening</label>
                                    <input type="text" id="account-number" class="c-input">
                                </div>

                                <div class="form-group">
                                    <label for="account-name" class="form-label">Nama Pemilik Rekening</label>
                                    <input type="text" id="account-name" class="c-input">
                                </div>

                                <button type="submit" class="c-button">
                                    <i class="fas fa-save"></i> Simpan Perubahan
                                </button>
                            </form>
                        </div>
                    </div>

                    <div id="notification-settings" class="setting-content" hidden>
                        <div class="c-card-header">
                            <h3 class="c-card-title">Pengaturan Notifikasi</h3>
                        </div>
                        <div class="c-card-body">
                            <form id="notification-form" class="c-form">
                                <div class="form-group">
                                    <label class="form-label">Jenis Notifikasi</label>
                                    <div class="l-flex flex-col gap-sm">
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-types" value="payment" checked>
                                            <span>Pembayaran</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-types" value="contract" checked>
                                            <span>Kontrak</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-types" value="maintenance"
                                                checked>
                                            <span>Pemeliharaan</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-types" value="promo">
                                            <span>Promo dan Update</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Metode Notifikasi</label>
                                    <div class="l-flex flex-col gap-sm">
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-methods" value="email" checked>
                                            <span>Email</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-methods" value="whatsapp">
                                            <span>WhatsApp</span>
                                        </label>
                                        <label class="l-flex align-center gap-sm">
                                            <input type="checkbox" name="notification-methods" value="sms">
                                            <span>SMS</span>
                                        </label>
                                    </div>
                                </div>

                                <button type="submit" class="c-button">
                                    <i class="fas fa-save"></i> Simpan Perubahan
                                </button>
                            </form>
                        </div>
                    </div>

                    <div id="security-settings" class="setting-content" hidden>
                        <div class="c-card-header">
                            <h3 class="c-card-title">Pengaturan Keamanan</h3>
                        </div>
                        <div class="c-card-body">
                            <form id="security-form" class="c-form">
                                <div class="form-group">
                                    <label for="current-password" class="form-label form-required">Password Saat
                                        Ini</label>
                                    <input type="password" id="current-password" class="c-input" required>
                                    <div class="form-error" id="current-password-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="new-password" class="form-label form-required">Password Baru</label>
                                    <input type="password" id="new-password" class="c-input" required>
                                    <div class="form-error" id="new-password-error"></div>
                                    <div class="form-hint">Minimal 8 karakter, mengandung huruf besar, kecil, dan angka
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="confirm-password" class="form-label form-required">Konfirmasi Password
                                        Baru</label>
                                    <input type="password" id="confirm-password" class="c-input" required>
                                    <div class="form-error" id="confirm-password-error"></div>
                                </div>

                                <div class="form-group">
                                    <label class="l-flex align-center gap-sm">
                                        <input type="checkbox" id="two-factor">
                                        <span>Aktifkan Two-Factor Authentication</span>
                                    </label>
                                </div>

                                <button type="submit" class="c-button">
                                    <i class="fas fa-save"></i> Perbarui Password
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    </main>
    </div> <!-- Modal Tambah Penyewa -->
    <div class="c-modal" id="add-tenant-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('add-tenant')">
                <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Tambah Penyewa Baru</h2>
            </div>
            <form id="add-tenant-form" class="c-form">
                <div class="form-row">
                    <div class="form-group"> <label for="tenant-id" class="form-label form-required">ID Penyewa</label>
                        <input type="text" id="tenant-id" class="c-input" placeholder="T001" required
                            pattern="[A-Za-z0-9]+">
                        <div class="form-error" id="tenant-id-error"></div>
                    </div>
                    <div class="form-group"> <label for="tenant-status" class="form-label form-required">Status</label>
                        <select id="tenant-status" class="c-select" required>
                            <option value="Aktif">Aktif</option>
                            <option value="Menunggu">Menunggu</option>
                            <option value="Nonaktif">Nonaktif</option>
                        </select>
                        <div class="form-error" id="tenant-status-error"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="tenant-name" class="form-label form-required">Nama Lengkap</label>
                    <input type="text" id="tenant-name" class="c-input" placeholder="Masukkan nama lengkap" required>
                    <div class="form-error" id="tenant-name-error"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="tenant-email" class="form-label form-required">Email</label>
                        <input type="email" id="tenant-email" class="c-input" placeholder="contoh@email.com" required>
                        <div class="form-error" id="tenant-email-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="tenant-phone" class="form-label form-required">Telepon</label>
                        <input type="tel" id="tenant-phone" class="c-input" placeholder="081234567890" required
                            pattern="[0-9]{10,15}">
                        <div class="form-error" id="tenant-phone-error"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="tenant-unit" class="form-label">Unit</label>
                        <select id="tenant-unit" class="c-select">
                            <option value="">Pilih Unit</option>
                        </select>
                        <div class="form-error" id="tenant-unit-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="tenant-rent" class="form-label">Harga Sewa (Rp)</label>
                        <input type="number" id="tenant-rent" class="c-input" placeholder="5000000" min="0">
                        <div class="form-error" id="tenant-rent-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="tenant-notes" class="form-label">Catatan</label>
                    <textarea id="tenant-notes" class="c-textarea"
                        placeholder="Tambahkan catatan (opsional)"></textarea>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('add-tenant')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-save"></i> Simpan Penyewa
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Edit Penyewa -->
    <div class="c-modal" id="edit-tenant-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('edit-tenant')"> <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Edit Data Penyewa</h2>
            </div>
            <form id="edit-tenant-form" class="c-form"> <input type="hidden" id="edit-tenant-id">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-tenant-id-display" class="form-label">ID Penyewa</label>
                        <input type="text" id="edit-tenant-id-display" class="c-input" disabled>
                    </div>
                    <div class="form-group">
                        <label for="edit-tenant-status" class="form-label form-required">Status</label>
                        <select id="edit-tenant-status" class="c-select" required>
                            <option value="Aktif">Aktif</option>
                            <option value="Menunggu">Menunggu</option>
                            <option value="Nonaktif">Nonaktif</option>
                        </select>
                        <div class="form-error" id="edit-tenant-status-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-tenant-name" class="form-label form-required">Nama Lengkap</label>
                    <input type="text" id="edit-tenant-name" class="c-input" required>
                    <div class="form-error" id="edit-tenant-name-error"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-tenant-email" class="form-label form-required">Email</label>
                        <input type="email" id="edit-tenant-email" class="c-input" required>
                        <div class="form-error" id="edit-tenant-email-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="edit-tenant-phone" class="form-label form-required">Telepon</label>
                        <input type="tel" id="edit-tenant-phone" class="c-input" required pattern="[0-9]{10,15}">
                        <div class="form-error" id="edit-tenant-phone-error"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-tenant-unit" class="form-label">Unit</label>
                        <select id="edit-tenant-unit" class="c-select">
                            <option value="">Pilih Unit</option>
                        </select>
                        <div class="form-error" id="edit-tenant-unit-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="edit-tenant-rent" class="form-label">Harga Sewa (Rp)</label>
                        <input type="number" id="edit-tenant-rent" class="c-input" min="0">
                        <div class="form-error" id="edit-tenant-rent-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-tenant-notes" class="form-label">Catatan</label>
                    <textarea id="edit-tenant-notes" class="c-textarea"></textarea>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('edit-tenant')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-save"></i> Simpan Perubahan
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Tambah Unit -->
    <div class="c-modal" id="add-unit-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('add-unit')">
                <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Tambah Unit Baru</h2>
            </div>
            <form id="add-unit-form" class="c-form">
                <div class="form-row">
                    <div class="form-group"> <label for="unit-code" class="form-label form-required">Kode Unit</label>
                        <input type="text" id="unit-code" class="c-input" placeholder="A101" required>
                        <div class="form-error" id="unit-code-error"></div>
                    </div>
                    <div class="form-group"> <label for="unit-type" class="form-label form-required">Tipe Unit</label>
                        <select id="unit-type" class="c-select" required>
                            <option value="Studio">Studio</option>
                            <option value="1BR">1 Kamar Tidur</option>
                            <option value="2BR">2 Kamar Tidur</option>
                            <option value="3BR">3 Kamar Tidur</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                        <div class="form-error" id="unit-type-error"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="unit-name" class="form-label form-required">Nama Unit</label>
                    <input type="text" id="unit-name" class="c-input" placeholder="Sky Suite" required>
                    <div class="form-error" id="unit-name-error"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="unit-status" class="form-label form-required">Status</label>
                        <select id="unit-status" class="c-select" required>
                            <option value="Tersedia">Tersedia</option>
                            <option value="Ditempati">Ditempati</option>
                            <option value="Perbaikan">Perbaikan</option>
                        </select>
                        <div class="form-error" id="unit-status-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="unit-rent" class="form-label form-required">Harga Sewa (Rp)</label>
                        <input type="number" id="unit-rent" class="c-input" placeholder="5000000" required min="0">
                        <div class="form-error" id="unit-rent-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="unit-description" class="form-label">Deskripsi</label>
                    <textarea id="unit-description" class="c-textarea"
                        placeholder="Tambahkan deskripsi unit (opsional)"></textarea>
                </div>

                <div class="form-group">
                    <label for="unit-images" class="form-label">Gambar Unit</label>
                    <input type="file" id="unit-images" class="c-input" accept="image/*" multiple>
                    <div class="form-hint">Unggah maksimal 5 gambar (JPEG/PNG)</div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('add-unit')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-save"></i> Simpan Unit
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Edit Unit -->
    <div class="c-modal" id="edit-unit-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('edit-unit')">
                <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Edit Data Unit</h2>
            </div>
            <form id="edit-unit-form" class="c-form"> <input type="hidden" id="edit-unit-id">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-unit-code" class="form-label form-required">Kode Unit</label>
                        <input type="text" id="edit-unit-code" class="c-input" required>
                        <div class="form-error" id="edit-unit-code-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="edit-unit-type" class="form-label form-required">Tipe Unit</label>
                        <select id="edit-unit-type" class="c-select" required>
                            <option value="Studio">Studio</option>
                            <option value="1BR">1 Kamar Tidur</option>
                            <option value="2BR">2 Kamar Tidur</option>
                            <option value="3BR">3 Kamar Tidur</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                        <div class="form-error" id="edit-unit-type-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-unit-name" class="form-label form-required">Nama Unit</label>
                    <input type="text" id="edit-unit-name" class="c-input" required>
                    <div class="form-error" id="edit-unit-name-error"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-unit-status" class="form-label form-required">Status</label>
                        <select id="edit-unit-status" class="c-select" required>
                            <option value="Tersedia">Tersedia</option>
                            <option value="Ditempati">Ditempati</option>
                            <option value="Perbaikan">Perbaikan</option>
                        </select>
                        <div class="form-error" id="edit-unit-status-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="edit-unit-rent" class="form-label form-required">Harga Sewa (Rp)</label>
                        <input type="number" id="edit-unit-rent" class="c-input" required min="0">
                        <div class="form-error" id="edit-unit-rent-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-unit-description" class="form-label">Deskripsi</label>
                    <textarea id="edit-unit-description" class="c-textarea"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Gambar Unit</label>
                    <div id="edit-unit-images-preview" class="l-flex gap-sm flex-wrap"></div>
                    <input type="file" id="edit-unit-images" class="c-input mt-2" accept="image/*" multiple>
                    <div class="form-hint">Unggah maksimal 5 gambar (JPEG/PNG)</div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('edit-unit')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-save"></i> Simpan Perubahan
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Tambah Pembayaran -->
    <div class="c-modal" id="add-payment-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('add-payment')"> <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Tambah Pembayaran Baru</h2>
            </div>
            <form id="add-payment-form" class="c-form">
                <div class="form-group"> <label for="payment-tenant" class="form-label form-required">Penyewa</label>
                    <select id="payment-tenant" class="c-select" required>
                        <option value="">Pilih Penyewa</option>
                    </select>
                    <div class="form-error" id="payment-tenant-error"></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="payment-amount" class="form-label form-required">Jumlah (Rp)</label>
                        <input type="number" id="payment-amount" class="c-input" required min="0">
                        <div class="form-error" id="payment-amount-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="payment-date" class="form-label form-required">Tanggal</label>
                        <input type="date" id="payment-date" class="c-input" required>
                        <div class="form-error" id="payment-date-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label form-required">Metode Pembayaran</label>
                    <div class="l-grid"
                        style="grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: var(--space-sm);">
                        <button type="button" class="payment-method active" data-method="transfer">
                            <i class="fas fa-university"></i> Transfer
                        </button>
                        <button type="button" class="payment-method" data-method="qris">
                            <i class="fas fa-qrcode"></i> QRIS
                        </button>
                        <button type="button" class="payment-method" data-method="tunai">
                            <i class="fas fa-money-bill-wave"></i> Tunai
                        </button>
                    </div>
                    <input type="hidden" id="payment-method" value="transfer" required>
                </div>

                <div class="form-group">
                    <label for="payment-note" class="form-label">Catatan</label>
                    <textarea id="payment-note" class="c-textarea"
                        placeholder="Tambahkan catatan (opsional)"></textarea>
                </div>

                <div class="form-group">
                    <label for="payment-receipt" class="form-label">Bukti Pembayaran</label>
                    <input type="file" id="payment-receipt" class="c-input" accept="image/*,.pdf">
                    <div class="form-hint">Unggah bukti transfer atau pembayaran (JPEG/PNG/PDF)</div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('add-payment')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-check"></i> Simpan Pembayaran
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Tambah Kontrak -->
    <div class="c-modal" id="add-contract-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('add-contract')"> <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Buat Kontrak Baru</h2>
            </div>
            <form id="add-contract-form" class="c-form">
                <div class="form-row">
                    <div class="form-group"> <label for="contract-number" class="form-label form-required">Nomor
                            Kontrak</label> <input type="text" id="contract-number" class="c-input" required>
                        <div class="form-error" id="contract-number-error"></div>
                    </div>
                    <div class="form-group"> <label for="contract-type" class="form-label form-required">Jenis
                            Kontrak</label> <select id="contract-type" class="c-select" required>
                            <option value="Tahunan">Tahunan</option>
                            <option value="Bulanan">Bulanan</option>
                            <option value="Harian">Harian</option>
                        </select>
                        <div class="form-error" id="contract-type-error"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="contract-tenant" class="form-label form-required">Penyewa</label>
                    <select id="contract-tenant" class="c-select" required>
                        <option value="">Pilih Penyewa</option>
                    </select>
                    <div class="form-error" id="contract-tenant-error"></div>
                </div>
                <div class="form-group">
                    <label for="contract-unit" class="form-label form-required">Unit</label>
                    <select id="contract-unit" class="c-select" required>
                        <option value="">Pilih Unit</option>
                    </select>
                    <div class="form-error" id="contract-unit-error"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="contract-start" class="form-label form-required">Tanggal Mulai</label>
                        <input type="date" id="contract-start" class="c-input" required>
                        <div class="form-error" id="contract-start-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="contract-end" class="form-label form-required">Tanggal Selesai</label>
                        <input type="date" id="contract-end" class="c-input" required>
                        <div class="form-error" id="contract-end-error"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="contract-rent" class="form-label form-required">Harga Sewa (Rp)</label>
                        <input type="number" id="contract-rent" class="c-input" required min="0">
                        <div class="form-error" id="contract-rent-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="contract-deposit" class="form-label">Deposit (Rp)</label>
                        <input type="number" id="contract-deposit" class="c-input" min="0">
                    </div>
                </div>

                <div class="form-group">
                    <label for="contract-terms" class="form-label">Syarat dan Ketentuan</label>
                    <textarea id="contract-terms" class="c-textarea" rows="5"></textarea>
                </div>

                <div class="form-group">
                    <label for="contract-file" class="form-label">Unggah Dokumen Kontrak</label>
                    <input type="file" id="contract-file" class="c-input" accept=".pdf,.doc,.docx">
                    <div class="form-hint">Format: PDF atau DOC/DOCX</div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('add-contract')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-file-contract"></i> Simpan Kontrak
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Tambah Pemeliharaan -->
    <div class="c-modal" id="add-maintenance-modal">
        <div class="modal-content"> <button class="modal-close" aria-label="Tutup modal"
                onclick="closeModal('add-maintenance')"> <i class="fas fa-times"></i> </button>
            <div class="modal-header">
                <h2 class="modal-title">Tambah Permintaan Pemeliharaan</h2>
            </div>
            <form id="add-maintenance-form" class="c-form">
                <div class="form-group"> <label for="maintenance-unit" class="form-label form-required">Unit</label>
                    <select id="maintenance-unit" class="c-select" required>
                        <option value="">Pilih Unit</option>
                    </select>
                    <div class="form-error" id="maintenance-unit-error"></div>
                </div>
                <div class="form-group">
                    <label for="maintenance-type" class="form-label form-required">Jenis Perbaikan</label>
                    <select id="maintenance-type" class="c-select" required>
                        <option value="">Pilih Jenis</option>
                        <option value="Elektrik">Elektrik</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Struktural">Struktural</option>
                        <option value="Lainnya">Lainnya</option>
                    </select>
                    <div class="form-error" id="maintenance-type-error"></div>
                </div>

                <div class="form-group">
                    <label for="maintenance-description" class="form-label form-required">Deskripsi Masalah</label>
                    <textarea id="maintenance-description" class="c-textarea" required></textarea>
                    <div class="form-error" id="maintenance-description-error"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="maintenance-priority" class="form-label form-required">Prioritas</label>
                        <select id="maintenance-priority" class="c-select" required>
                            <option value="Rendah">Rendah</option>
                            <option value="Sedang">Sedang</option>
                            <option value="Tinggi">Tinggi</option>
                            <option value="Darurat">Darurat</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maintenance-requested-date" class="form-label form-required">Tanggal
                            Permintaan</label>
                        <input type="date" id="maintenance-requested-date" class="c-input" required>
                        <div class="form-error" id="maintenance-requested-date-error"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="maintenance-images" class="form-label">Foto Kerusakan</label>
                    <input type="file" id="maintenance-images" class="c-input" accept="image/*" multiple>
                    <div class="form-hint">Unggah foto kerusakan (maks. 5 gambar)</div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="c-button btn-outline" onclick="closeModal('add-maintenance')">
                        Batal
                    </button>
                    <button type="submit" class="c-button">
                        <i class="fas fa-tools"></i> Kirim Permintaan
                    </button>
                </div>
            </form>
        </div>
    </div> <!-- Modal Konfirmasi -->
    <div class="c-modal" id="confirm-modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title" id="confirm-title">Konfirmasi</h2>
            </div>
            <div class="c-card-body">
                <p id="confirm-message">Apakah Anda yakin ingin melakukan tindakan ini?</p>
            </div>
            <div class="modal-footer"> <button type="button" class="c-button btn-outline"
                    onclick="closeModal('confirm')">
                    Batal </button> <button type="button" class="c-button" id="confirm-action-btn"> Ya, Lanjutkan
                </button>
            </div>
        </div>
    </div> <!-- Toast Notification -->
    <div class="c-toast" id="toast"> <span id="toast-message">Pesan notifikasi</span> <button class="toast-close"
            aria-label="Tutup notifikasi"> <i class="fas fa-times"></i> </button> </div>
    <script>
        // State Ma]'), // Dashboard totalUnits: document.getElementById('total-units'), rentedUnits: document.getElementById('rented-units'), vacantUnits: document.getElementById('vacant-units'), newTenants: document.getElementById('new-tenants'), unitChart: document.getElementById('unit-chart'), recentActivity: document.getElementById('recent-activity'), recentPayments: document.getElementById('recent-payments'), // Penyewa tenantFilter: document.getElementById('tenant-filter'), tenantStatusFilter: document.getElementById('tenant-status-filter'), tenantsTbody: document.getElementById('tenants-tbody'), tenantCount: document.getElementById('tenant-count'), tenantPagination: document.getElementById('tenant-pagination'), // Unit unitFilter: document.getElementById('unit-filter'), unitStatusFilter: document.getElementById('unit-status-filter'), unitsTbody: document.getElementById('units-tbody'), unitCount: document.getElementById('unit-count'), unitPagination: document.getElementById('unit-pagination'), // Pembayaran paymentForm: document.getElementById('payment-form'), paymentMethods: document.querySelectorAll('.payment-method'), paymentFilter: document.getElementById('payment-filter'), paymentDateFilter: document.getElementById('payment-date-filter'), paymentsTbody: document.getElementById('payments-tbody'), paymentCount: document.getElementById('payment-count'), paymentPagination: document.getElementById('payment-pagination'), unpaidBills: document.getElementById('unpaid-bills'), // Kontrak contractFilter: document.getElementById('contract-filter'), contractStatusFilter: document.getElementById('contract-status-filter'), contractsTbody: document.getElementById('contracts-tbody'), contractCount: document.getElementById('contract-count'), contractPagination: document.getElementById('contract-pagination'), // Pemeliharaan maintenanceForm: document.getElementById('maintenance-form'), maintenanceStatusFilter: document.getElementById('maintenance-status-filter'), maintenanceTbody: document.getElementById('maintenance-tbody'), maintenanceCount: document.getElementById('maintenance-count'), maintenancePagination: document.getElementById('maintenance-pagination'), // Laporan incomeChart: document.getElementById('income-chart'), occupancyChart: document.getElementById('occupancy-chart'), totalIncome: document.getElementById('total-income'), pendingPayments: document.getElementById('pending-payments'), maintenanceCost: document.getElementById('maintenance-cost'), netIncome: document.getElementById('net-income'), activeTenants: document.getElementById('active-tenants'), newTenantsReport: document.getElementById('new-tenants-report'), endingTenants: document.getElementById('ending-tenants'), availableUnitsReport: document.getElementById('available-units-report'), maintenanceUnits: document.getElementById('maintenance-units'), occupancyRate: document.getElementById('occupancy-rate'), // Pengaturan settingTabs: document.querySelectorAll('.setting-tab'), settingContents: document.querySelectorAll('.setting-content'), // Modals modals: document.querySelectorAll('.c-modal'), // Toast toast: document.getElementById('toast'), toastMessage: document.getElementById('toast-message'), // Confirm Modal confirmModal: document.getElementById('confirm-modal'), confirmTitle: document.getElementById('confirm-title'), confirmMessage: document.getElementById('confirm-message'), confirmActionBtn: document.getElementById('confirm-action-btn') }; // Initialize the application function init() { loadData(); initTheme(); initSidebar(); initNavigation(); initForms(); initModals(); initToast(); renderDashboard(); // Set active section based on URL hash if (window.location.hash) { navigateTo(window.location.hash.substring(1)); } else { navigateTo('dashboard'); } } // Load sample data function loadData() { // Sample tenants data state.tenants = [ { id: 'T001', name: 'Budi Santoso', email: 'budi@example.com', phone: '081234567890', unit: 'A101', rent: 5000000, status: 'Aktif', joinDate: '2023-01-15', notes: 'Penyewa tetap, selalu membayar tepat waktu' }, { id: 'T002', name: 'Siti Rahayu', email: 'siti@example.com', phone: '082345678901', unit: 'B202', rent: 7500000, status: 'Aktif', joinDate: '2023-03-10', notes: 'Memiliki 1 anak, membutuhkan parkir tambahan' }, { id: 'T003', name: 'Andi Wijaya', email: 'andi@example.com', phone: '083456789012', unit: '', rent: 0, status: 'Menunggu', joinDate: '2023-05-20', notes: 'Menunggu unit A102 tersedia' } ]; // Sample units data state.units = [ { id: 'A101', name: 'Sky Suite', type: '1BR', status: 'Ditempati', tenant: 'Budi Santoso', rent: 5000000, size: '45m¬≤', facilities: ['AC', 'TV', 'Dapur', 'WiFi'], description: 'Unit menghadap utara dengan pemandangan kota' }, { id: 'B202', name: 'Green Tower', type: '2BR', status: 'Ditempati', tenant: 'Siti Rahayu', rent: 7500000, size: '75m¬≤', facilities: ['AC', 'TV', 'Dapur', 'WiFi', 'Parkir'], description: 'Unit lantai tinggi dengan balkon' }, { id: 'A102', name: 'Urban Loft', type: 'Studio', status: 'Tersedia', tenant: '', rent: 4500000, size: '35m¬≤', facilities: ['AC', 'WiFi'], description: 'Unit studio minimalis untuk single occupant' }, { id: 'C303', name: 'Royal Suite', type: '3BR', status: 'Perbaikan', tenant: '', rent: 9000000, size: '100m¬≤', facilities: ['AC', 'TV', 'Dapur', 'WiFi', 'Parkir', 'Balkon'], description: 'Unit mewah dengan 3 kamar tidur' } ]; // Sample payments data state.payments = [ { id: 'P001', tenantId: 'T001', tenantName: 'Budi Santoso', amount: 5000000, date: '2023-06-01', method: 'transfer', status: 'Lunas', receipt: 'receipt001.pdf' }, { id: 'P002', tenantId: 'T002', tenantName: 'Siti Rahayu', amount: 7500000, date: '2023-06-03', method: 'qris', status: 'Lunas', receipt: 'receipt002.pdf' }, { id: 'P003', tenantId: 'T001', tenantName: 'Budi Santoso', amount: 5000000, date: '2023-05-01', method: 'transfer', status: 'Lunas', receipt: 'receipt003.pdf' } ]; // Sample contracts data state.contracts = [ { id: 'C001', number: 'CONT/2023/001', tenantId: 'T001', tenantName: 'Budi Santoso', unitId: 'A101', unitName: 'Sky Suite', type: 'Tahunan', startDate: '2023-01-15', endDate: '2024-01-14', rent: 5000000, deposit: 10000000, status: 'Aktif', file: 'contract001.pdf' }, { id: 'C002', number: 'CONT/2023/002', tenantId: 'T002', tenantName: 'Siti Rahayu', unitId: 'B202', unitName: 'Green Tower', type: 'Tahunan', startDate: '2023-03-10', endDate: '2024-03-09', rent: 7500000, deposit: 15000000, status: 'Aktif', file: 'contract002.pdf' } ]; // Sample maintenance requests state.maintenanceRequests = [ { id: 'M001', unitId: 'A101', unitName: 'Sky Suite', type: 'Plumbing', description: 'Keran air di kamar mandi bocor', priority: 'Sedang', status: 'Selesai', requestedDate: '2023-05-10', completedDate: '2023-05-12', cost: 350000, technician: 'PT Jaya Abadi' }, { id: 'M002', unitId: 'B202', unitName: 'Green Tower', type: 'Elektrik', description: 'Lampu di ruang tamu mati', priority: 'Rendah', status: 'Proses', requestedDate: '2023-06-05', completedDate: '', cost: 0, technician: '' } ]; } // Theme Management function initTheme() { const savedTheme = localStorage.getItem('theme') || 'light'; setTheme(savedTheme); } function setTheme(theme) { state.theme = theme; document.documentElement.setAttribute('data-theme', theme); localStorage.setItem('theme', theme); // Update theme toggle button if (theme === 'dark') { elements.themeText.textContent = 'Mode Terang'; elements.themeToggle.innerHTML = '<i class="fas fa-sun"></i> Mode Terang'; } else { elements.themeText.textContent = 'Mode Gelap'; elements.themeToggle.innerHTML = '<i class="fas fa-moon"></i> Mode Gelap'; } } function toggleTheme() { const newTheme = state.theme === 'light' ? 'dark' : 'light'; setTheme(newTheme); } // Sidebar Management function initSidebar() { // Toggle sidebar collapse elements.sidebarToggle.addEventListener('click', () => { state.sidebarCollapsed = !state.sidebarCollapsed; if (state.sidebarCollapsed) { elements.sidebar.classList.add('sidebar-collapsed'); elements.mainContent.classList.add('main-content-expanded'); } else { elements.sidebar.classList.remove('sidebar-collapsed'); elements.mainContent.classList.remove('main-content-expanded'); } }); // Responsive sidebar for mobile if (window.innerWidth < 1024) { state.sidebarCollapsed = true; elements.sidebar.classList.add('sidebar-collapsed'); elements.mainContent.classList.add('main-content-expanded'); // Show mobile menu toggle document.querySelector('.mobile-menu-toggle').classList.remove('hidden'); document.querySelector('.mobile-menu-toggle').addEventListener('click', () => { elements.sidebar.classList.toggle('open'); }); } } // Navigation Management function initNavigation() { // Handle navigation clicks elements.navItems.forEach(item => { item.addEventListener('click', (e) => { e.preventDefault(); const section = item.getAttribute('data-section') || item.getAttribute('href').substring(1); navigateTo(section); // Close sidebar on mobile if (window.innerWidth < 1024) { elements.sidebar.classList.remove('open'); } }); }); // Handle theme toggle elements.themeToggle.addEventListener('click', toggleTheme); } function navigateTo(section) { // Hide all sections elements.sections.forEach(sec => { sec.hidden = true; }); // Show selected section const targetSection = document.getElementById(section); if (targetSection) { targetSection.hidden = false; state.activeSection = section; window.location.hash = section; // Update active nav item elements.navItems.forEach(item => { if (item.getAttribute('data-section') === section || item.getAttribute('href') === `#${section}`) { item.classList.add('active'); } else { item.classList.remove('active'); } }); // Render section content switch(section) { case 'dashboard': renderDashboard(); break; case 'penyewa': renderTenants(); break; case 'unit': renderUnits(); break; case 'pembayaran': renderPayments(); break; case 'kontrak': renderContracts(); break; case 'pemeliharaan': renderMaintenance(); break; case 'laporan': renderReports(); break; case 'pengaturan': renderSettings(); break; } } } // Form Management function initForms() { // Tenant form document.getElementById('add-tenant-form')?.addEventListener('submit', handleAddTenant); document.getElementById('edit-tenant-form')?.addEventListener('submit', handleEditTenant); // Unit form document.getElementById('add-unit-form')?.addEventListener('submit', handleAddUnit); document.getElementById('edit-unit-form')?.addEventListener('submit', handleEditUnit); // Payment form document.getElementById('payment-form')?.addEventListener('submit', handleAddPayment); // Contract form document.getElementById('add-contract-form')?.addEventListener('submit', handleAddContract); // Maintenance form document.getElementById('add-maintenance-form')?.addEventListener('submit', handleAddMaintenance); // Settings forms document.getElementById('profile-form')?.addEventListener('submit', handleSaveProfile); document.getElementById('property-form')?.addEventListener('submit', handleSaveProperty); document.getElementById('payment-method-form')?.addEventListener('submit', handleSavePaymentMethods); document.getElementById('notification-form')?.addEventListener('submit', handleSaveNotifications); document.getElementById('security-form')?.addEventListener('submit', handleSaveSecurity); // Payment method selection elements.paymentMethods?.forEach(method => { method.addEventListener('click', () => { elements.paymentMethods.forEach(m => m.classList.remove('active')); method.classList.add('active'); document.getElementById('payment-method').value = method.dataset.method; }); }); // Setting tabs elements.settingTabs?.forEach(tab => { tab.addEventListener('click', () => { const tabName = tab.dataset.tab; showSettingTab(tabName); }); }); } function showSettingTab(tabName) { // Update active tab elements.settingTabs.forEach(tab => { if (tab.dataset.tab === tabName) { tab.classList.add('active'); } else { tab.classList.remove('active'); } }); // Show corresponding content elements.settingContents.forEach(content => { if (content.id === `${tabName}-settings`) { content.hidden = false; } else { content.hidden = true; } }); } // Modal Management function initModals() { // Close modals when clicking outside elements.modals.forEach(modal => { modal.addEventListener('click', (e) => { if (e.target === modal) { closeModal(); } }); }); // Confirm modal action elements.confirmActionBtn?.addEventListener('click', () => { if (state.confirmAction) { state.confirmAction(); } closeModal('confirm'); }); } function openModal(modalId, data = null) { state.currentModal = modalId; const modal = document.getElementById(`${modalId}-modal`); if (modal) { modal.classList.add('open'); document.body.style.overflow = 'hidden'; // Focus first input const firstInput = modal.querySelector('input, select, textarea, button'); if (firstInput) { setTimeout(() => firstInput.focus(), 100); } // Initialize modal data if provided if (data) { initModalData(modalId, data); } } } function initModalData(modalId, data) { switch(modalId) { case 'edit-tenant': document.getElementById('edit-tenant-id').value = data.id; document.getElementById('edit-tenant-id-display').value = data.id; document.getElementById('edit-tenant-name').value = data.name; document.getElementById('edit-tenant-email').value = data.email; document.getElementById('edit-tenant-phone').value = data.phone; document.getElementById('edit-tenant-unit').value = data.unit; document.getElementById('edit-tenant-rent').value = data.rent; document.getElementById('edit-tenant-status').value = data.status; document.getElementById('edit-tenant-notes').value = data.notes || ''; break; case 'edit-unit': document.getElementById('edit-unit-id').value = data.id; document.getElementById('edit-unit-code').value = data.id; document.getElementById('edit-unit-name').value = data.name; document.getElementById('edit-unit-type').value = data.type; document.getElementById('edit-unit-status').value = data.status; document.getElementById('edit-unit-rent').value = data.rent; document.getElementById('edit-unit-description').value = data.description || ''; // TODO: Handle unit images break; } } function closeModal(modalId = null) { const modalToClose = modalId || state.currentModal; if (modalToClose) { const modal = document.getElementById(`${modalToClose}-modal`); if (modal) { modal.classList.remove('open'); } } state.currentModal = null; document.body.style.overflow = ''; } function showConfirm(title, message, action) { elements.confirmTitle.textContent = title; elements.confirmMessage.textContent = message; state.confirmAction = action; openModal('confirm'); } // Toast Notification function initToast() { // Close toast when clicking close button document.querySelector('.toast-close')?.addEventListener('click', hideToast); } function showToast(message, type = 'success', duration = 5000) { elements.toast.className = `c-toast toast-${type}`; elements.toastMessage.textContent = message; elements.toast.classList.add('show'); // Auto hide after duration if (duration > 0) { setTimeout(hideToast, duration); } } function hideToast() { elements.toast.classList.remove('show'); } // Data Rendering function renderDashboard() { // Update stats elements.totalUnits.textContent = state.units.length; elements.rentedUnits.textContent = state.units.filter(u => u.status === 'Ditempati').length; elements.vacantUnits.textContent = state.units.filter(u => u.status === 'Tersedia').length; elements.newTenants.textContent = state.tenants.filter(t => t.status === 'Menunggu').length; // Render unit chart renderUnitChart(); // Render recent activity renderRecentActivity(); // Render recent payments renderRecentPayments(); } function renderUnitChart() { const ctx = elements.unitChart.getContext('2d'); const rented = state.units.filter(u => u.status === 'Ditempati').length; const vacant = state.units.filter(u => u.status === 'Tersedia').length; const maintenance = state.units.filter(u => u.status === 'Perbaikan').length; if (window.unitChart) { window.unitChart.destroy(); } window.unitChart = new Chart(ctx, { type: 'doughnut', data: { labels: ['Ditempati', 'Tersedia', 'Perbaikan'], datasets: [{ data: [rented, vacant, maintenance], backgroundColor: [ 'hsl(140, 60%, 45%)', 'hsl(214, 100%, 54%)', 'hsl(40, 90%, 60%)' ], borderWidth: 1 }] }, options: { responsive: true, plugins: { legend: { position: 'bottom' } } } }); } function renderRecentActivity() { // Combine all activities (payments, contracts, maintenance) const activities = [ ...state.payments.map(p => ({ type: 'payment', date: p.date, message: `${p.tenantName} membayar sewa Rp${formatNumber(p.amount)}`, icon: 'fa-credit-card' })), ...state.contracts.map(c => ({ type: 'contract', date: c.startDate, message: `Kontrak baru untuk ${c.tenantName} di ${c.unitName}`, icon: 'fa-file-contract' })), ...state.maintenanceRequests.map(m => ({ type: 'maintenance', date: m.requestedDate, message: `Permintaan perbaikan untuk ${m.unitName} (${m.type})`, icon: 'fa-tools' })) ]; // Sort by date (newest first) activities.sort((a, b) => new Date(b.date) - new Date(a.date)); // Display last 5 activities const recentActivities = activities.slice(0, 5); elements.recentActivity.innerHTML = recentActivities.map(activity => ` <div class="l-flex gap-sm align-start"> <div class="c-badge badge-${activity.type === 'payment' ? 'success' : activity.type === 'contract' ? 'info' : 'warning'}"> <i class="fas ${activity.icon}"></i> </div> <div> <p style="font-weight: 500;">${activity.message}</p> <small class="text-muted">${formatDate(activity.date)}</small> </div> </div> `).join(''); } function renderRecentPayments() { // Sort payments by date (newest first) const sortedPayments = [...state.payments].sort((a, b) => new Date(b.date) - new Date(a.date)); // Display last 5 payments const recentPayments = sortedPayments.slice(0, 5); if (recentPayments.length > 0) { elements.recentPayments.innerHTML = recentPayments.map(payment => ` <tr> <td>${payment.tenantId}</td> <td>${payment.tenantName}</td> <td>Rp${formatNumber(payment.amount)}</td> <td>${formatDate(payment.date)}</td> <td><span class="c-badge badge-success">${payment.status}</span></td> </tr> `).join(''); } } function renderTenants() { // Filter tenants based on search and status const searchTerm = elements.tenantFilter?.value.toLowerCase() || ''; const statusFilter = elements.tenantStatusFilter?.value || ''; const filteredTenants = state.tenants.filter(tenant => { const matchesSearch = tenant.name.toLowerCase().includes(searchTerm) || tenant.email.toLowerCase().includes(searchTerm) || tenant.phone.includes(searchTerm) || tenant.id.toLowerCase().includes(searchTerm); const matchesStatus = !statusFilter || tenant.status === statusFilter; return matchesSearch && matchesStatus; }); // Update count elements.tenantCount.textContent = `Menampilkan ${filteredTenants.length} dari ${state.tenants.length} penyewa`; // Render tenants table if (filteredTenants.length > 0) { elements.tenantsTbody.innerHTML = filteredTenants.map(tenant => ` <tr> <td>${tenant.id}</td> <td> <div class="l-flex flex-col"> <span style="font-weight: 500;">${tenant.name}</span> <small class="text-muted">${tenant.email}</small> </div> </td> <td>${tenant.phone}</td> <td>${tenant.unit || '-'}</td> <td>Rp${formatNumber(tenant.rent)}</td> <td> <span class="c-badge ${tenant.status === 'Aktif' ? 'badge-success' : tenant.status === 'Menunggu' ? 'badge-warning' : 'badge-danger'}"> ${tenant.status} </span> </td> <td> <div class="l-flex gap-xs"> <button class="c-button btn-outline btn-sm" onclick="openModal('edit-tenant', ${escapeHtml(JSON.stringify(tenant))})"> <i class="fas fa-edit"></i> </button> <button class="c-button btn-outline btn-sm" onclick="showConfirm('Hapus Penyewa', 'Apakah Anda yakin ingin menghapus penyewa ${tenant.name}?', () => deleteTenant('${tenant.id}'))"> <i class="fas fa-trash"></i> </button> </div> </td> </tr> `).join(''); } } function renderUnits() { // Filter units based on search and status const searchTerm = elements.unitFilter?.value.toLowerCase() || ''; const statusFilter = elements.unitStatusFilter?.value || ''; const filteredUnits = state.units.filter(unit => { const matchesSearch = unit.name.toLowerCase().includes(searchTerm) || unit.id.toLowerCase().includes(searchTerm); const matchesStatus = !statusFilter || unit.status === statusFilter; return matchesSearch && matchesStatus; }); // Update count elements.unitCount.textContent = `Menampilkan ${filteredUnits.length} dari ${state.units.length} unit`; // Render units table if (filteredUnits.length > 0) { elements.unitsTbody.innerHTML = filteredUnits.map(unit => ` <tr> <td>${unit.id}</td> <td>${unit.name}</td> <td>${unit.type}</td> <td> <span class="c-badge ${unit.status === 'Ditempati' ? 'badge-success' : unit.status === 'Tersedia' ? 'badge-info' : 'badge-warning'}"> ${unit.status} </span> </td> <td>${unit.tenant || '-'}</td> <td>Rp${formatNumber(unit.rent)}</td> <td> <div class="l-flex gap-xs"> <button class="c-button btn-outline btn-sm" onclick="openModal('edit-unit', ${escapeHtml(JSON.stringify(unit))})"> <i class="fas fa-edit"></i> </button> <button class="c-button btn-outline btn-sm" onclick="showConfirm('Hapus Unit', 'Apakah Anda yakin ingin menghapus unit ${unit.name}?', () => deleteUnit('${unit.id}'))"> <i class="fas fa-trash"></i> </button> </div> </td>       </tr>
        const state = {
            theme: 'light',
            tenants: [],
            units: [],
            payments: [],
            contracts: [],
            maintenanceRequests: [],
            currentUser: {
                name: 'Admin Rentelindo',
                email: 'admin@rentelindo.com',
                role: 'Administrator',
                permissions: ['all'] // Added permissions
            },
            settings: {
                propertyName: 'Apartemen Green Residence',
                propertyAddress: 'Jl. Sudirman No. 123, Jakarta Selatan',
                paymentMethods: ['transfer', 'qris', 'cash'], // Added cash option
                notifications: {
                    types: ['payment', 'contract', 'maintenance', 'tenant'], // Added tenant notifications
                    methods: ['email', 'sms', 'whatsapp'] // Added more notification methods
                },
                security: {
                    requireTwoFactor: true,
                    sessionTimeout: 30, // minutes
                    passwordPolicy: {
                        minLength: 8,
                        requireNumbers: true,
                        requireSymbols: true
                    }
                }
            },
            activeSection: 'dashboard',
            sidebarCollapsed: false,
            currentModal: null,
            confirmAction: null,
            pagination: {
                itemsPerPage: 10,
                currentPage: 1
            },
            filters: {
                tenant: {
                    search: '',
                    status: '',
                    sortBy: 'name',
                    sortOrder: 'asc'
                },
                unit: {
                    search: '',
                    status: '',
                    type: '',
                    sortBy: 'id',
                    sortOrder: 'asc'
                },
                payment: {
                    search: '',
                    dateRange: {
                        start: '',
                        end: ''
                    },
                    method: '',
                    status: ''
                }
            }
        };
        // DOM Elements with additional elements for enhanced functionality
        function renderPayments() {
            // Filter payments based on search and date
            const searchTerm = elements.paymentFilter?.value.toLowerCase() || '';
            const dateFilter = elements.paymentDateFilter?.value || '';

            const filteredPayments = state.payments.filter(payment => {
                const matchesSearch = payment.tenantId.toLowerCase().includes(searchTerm) ||
                    payment.tenantName.toLowerCase().includes(searchTerm);
                const matchesDate = !dateFilter || payment.date === dateFilter;
                return matchesSearch && matchesDate;
            });

            // Update count
            elements.paymentCount.textContent = `Menampilkan ${filteredPayments.length} dari ${state.payments.length} pembayaran`;

            // Render payments table
            if (filteredPayments.length > 0) {
                elements.paymentsTbody.innerHTML = filteredPayments.map(payment => `
            < tr >
        <td>${formatDate(payment.date)}</td>
        <td>${payment.tenantName}</td>
        <td>Rp${formatNumber(payment.amount)}</td>
        <td>${payment.method === 'transfer' ? 'Transfer' : payment.method === 'qris' ? 'QRIS' : 'Tunai'}</td>
        <td>
          <span class="c-badge badge-success">${payment.status}</span>
        </td>
      </tr >
            `).join('');
            }

            // Render unpaid bills
            const unpaidBills = getUnpaidBills();
            if (unpaidBills.length > 0) {
                elements.unpaidBills.innerHTML = unpaidBills.map(bill => `
            < tr >
        <td>${bill.tenantName}</td>
        <td>${bill.unitName}</td>
        <td>${formatDate(bill.dueDate)}</td>
        <td>Rp${formatNumber(bill.amount)}</td>
        <td>${bill.daysOverdue} hari</td>
        <td>
          <button class="c-button btn-sm" onclick="openModal('add-payment', { tenantId: '${bill.tenantId}' })">
            <i class="fas fa-money-bill-wave"></i> Bayar
          </button>
        </td>
      </tr >
            `).join('');
            }
        }

        function renderContracts() {
            // Filter contracts based on search and status
            const searchTerm = elements.contractFilter?.value.toLowerCase() || '';
            const statusFilter = elements.contractStatusFilter?.value || '';

            const filteredContracts = state.contracts.filter(contract => {
                const matchesSearch = contract.tenantName.toLowerCase().includes(searchTerm) ||
                    contract.unitName.toLowerCase().includes(searchTerm) ||
                    contract.number.toLowerCase().includes(searchTerm);

                let matchesStatus = true;
                if (statusFilter) {
                    if (statusFilter === 'Aktif') {
                        matchesStatus = contract.status === 'Aktif';
                    } else if (statusFilter === 'Akan Berakhir') {
                        // Contracts ending in the next 30 days
                        const endDate = new Date(contract.endDate);
                        const today = new Date();
                        const timeDiff = endDate.getTime() - today.getTime();
                        const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
                        matchesStatus = contract.status === 'Aktif' && daysDiff <= 30;
                    } else if (statusFilter === 'Selesai') {
                        matchesStatus = contract.status === 'Selesai';
                    }
                }

                return matchesSearch && matchesStatus;
            });
            // Update contract count
            elements.contractCount.textContent = `Menampilkan ${filteredContracts.length} dari ${state.contracts.length} kontrak`;

            // Render contracts table
            if (filteredContracts.length > 0) {
                elements.contractsTbody.innerHTML = filteredContracts.map(contract => {
                    const endDate = new Date(contract.endDate);
                    const today = new Date();
                    const timeDiff = endDate.getTime() - today.getTime();
                    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));

                    let statusBadge = '';
                    if (contract.status === 'Aktif') {
                        statusBadge = daysDiff <= 30 ?
                            `<span class="c-badge badge-warning">Akan Berakhir (${daysDiff} hari)</span>` :
                            `<span class="c-badge badge-success">Aktif</span>`;
                    } else {
                        statusBadge = `<span class="c-badge badge-secondary">Selesai</span>`;
                    }

                    return `
      <tr>
        <td>${contract.number}</td>
        <td>${contract.tenantName}</td>
        <td>${contract.unitName}</td>
        <td>${formatDate(contract.startDate)}</td>
        <td>${formatDate(contract.endDate)}</td>
        <td>${statusBadge}</td>
        <td>
          <div class="l-flex gap-xs">
            <button class="c-button btn-outline btn-sm" onclick="viewContract('${contract.id}')">
              <i class="fas fa-eye"></i>
            </button>
            <button class="c-button btn-outline btn-sm" onclick="downloadContract('${contract.id}')">
              <i class="fas fa-download"></i>
            </button>
            <button class="c-button btn-outline btn-sm" onclick="renewContract('${contract.id}')">
              <i class="fas fa-sync-alt"></i>
            </button>
          </div>
        </td>
      </tr>
    `;
                }).join('');
            }

            // Render maintenance table
            function renderMaintenance() {
                const statusFilter = elements.maintenanceStatusFilter?.value || '';

                // Filter maintenance requests based on status
                const filteredRequests = statusFilter ?
                    state.maintenanceRequests.filter(r => r.status === statusFilter) :
                    state.maintenanceRequests;

                if (filteredRequests.length > 0) {
                    elements.maintenanceTbody.innerHTML = filteredRequests.map(request => {
                        let priorityBadge = '';
                        switch (request.priority) {
                            case 'Rendah':
                                priorityBadge = '<span class="c-badge badge-info">Rendah</span>';
                                break;
                            case 'Sedang':
                                priorityBadge = '<span class="c-badge badge-warning">Sedang</span>';
                                break;
                            case 'Tinggi':
                                priorityBadge = '<span class="c-badge badge-danger">Tinggi</span>';
                                break;
                            case 'Darurat':
                                priorityBadge = '<span class="c-badge badge-danger">Darurat</span>';
                                break;
                        }

                        let statusBadge = '';
                        switch (request.status) {
                            case 'Baru':
                                statusBadge = '<span class="c-badge badge-secondary">Baru</span>';
                                break;
                            case 'Proses':
                                statusBadge = '<span class="c-badge badge-warning">Proses</span>';
                                break;
                            case 'Selesai':
                                statusBadge = '<span class="c-badge badge-success">Selesai</span>';
                                break;
                        }

                        return `
        <tr>
          <td>${request.id}</td>
          <td>${request.unitName}</td>
          <td>${request.type}</td>
          <td>${priorityBadge}</td>
          <td>${statusBadge}</td>
          <td>${formatDate(request.requestedDate)}</td>
          <td>
            <div class="l-flex gap-xs">
              <button class="c-button btn-outline btn-sm" onclick="viewMaintenance('${request.id}')">
                <i class="fas fa-eye"></i>
              </button>
              <button class="c-button btn-outline btn-sm" onclick="updateMaintenanceStatus('${request.id}')">
                <i class="fas fa-edit"></i>
              </button>
            </div>
          </td>
        </tr>
      `;
                    }).join('');
                } else {
                    elements.maintenanceTbody.innerHTML = `
      <tr>
        <td colspan="7" class="text-center text-muted">
          No maintenance requests found
        </td>
      </tr>
    `;
                }

                // Update maintenance summary
                updateMaintenanceSummary();
            }

            // Update maintenance summary stats
            function updateMaintenanceSummary() {
                const totalRequests = state.maintenanceRequests.length;
                const newRequests = state.maintenanceRequests.filter(r => r.status === 'Baru').length;
                const inProgress = state.maintenanceRequests.filter(r => r.status === 'Proses').length;
                const completed = state.maintenanceRequests.filter(r => r.status === 'Selesai').length;

                // Update summary elements if they exist
                if (elements.totalMaintenance) elements.totalMaintenance.textContent = totalRequests;
                if (elements.newMaintenance) elements.newMaintenance.textContent = newRequests;
                if (elements.inProgressMaintenance) elements.inProgressMaintenance.textContent = inProgress;
                if (elements.completedMaintenance) elements.completedMaintenance.textContent = completed;
            }
            function renderReports() {
                // Render income chart
                renderIncomeChart();

                // Render occupancy chart
                renderOccupancyChart();

                // Update financial summary
                updateFinancialSummary();

                // Update tenant and unit reports
                updateTenantUnitReports();
            }

            function renderIncomeChart() {
                const ctx = elements.incomeChart.getContext('2d');
                const year = document.getElementById('income-year').value;

                // Sample data - in a real app, this would come from your data
                const monthlyIncome = Array(12).fill(0);
                state.payments.forEach(payment => {
                    const paymentDate = new Date(payment.date);
                    if (paymentDate.getFullYear() == year) {
                        const month = paymentDate.getMonth();
                        monthlyIncome[month] += payment.amount;
                    }
                });

                if (window.incomeChart) {
                    window.incomeChart.destroy();
                }

                window.incomeChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Ags', 'Sep', 'Okt', 'Nov', 'Des'],
                        datasets: [{
                            label: 'Pendapatan (Rp)',
                            data: monthlyIncome,
                            backgroundColor: 'hsl(214, 100%, 54%)',
                            borderColor: 'hsl(214, 100%, 42%)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function (value) {
                                        return 'Rp' + formatNumber(value);
                                    }
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        return 'Rp' + formatNumber(context.raw);
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function renderOccupancyChart() {
                const ctx = elements.occupancyChart.getContext('2d');
                const period = document.getElementById('occupancy-period').value;

                // Sample data - in a real app, this would come from your data
                let labels, occupancyRates;

                if (period === 'year') {
                    labels = ['2020', '2021', '2022', '2023'];
                    occupancyRates = [75, 80, 85, 90]; // percentages
                } else if (period === 'month') {
                    labels = ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Ags', 'Sep', 'Okt', 'Nov', 'Des'];
                    occupancyRates = [85, 87, 88, 89, 90, 91, 92, 93, 92, 91, 90, 89]; // percentages
                } else { // week
                    labels = ['Minggu 1', 'Minggu 2', 'Minggu 3', 'Minggu 4'];
                    occupancyRates = [88, 89, 90, 91]; // percentages
                }

                if (window.occupancyChart) {
                    window.occupancyChart.destroy();
                }

                window.occupancyChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Tingkat Hunian (%)',
                            data: occupancyRates,
                            backgroundColor: 'hsla(140, 60%, 45%, 0.2)',
                            borderColor: 'hsl(140, 60%, 45%)',
                            borderWidth: 2,
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: Math.max(0, Math.min(...occupancyRates) - 10),
                                max: Math.min(100, Math.max(...occupancyRates) + 5),
                                ticks: {
                                    callback: function (value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function updateFinancialSummary() {
                const period = document.getElementById('report-period').value;

                // Calculate totals based on period
                let totalIncome = 0;
                let pendingPayments = 0;
                let maintenanceCost = 0;

                // Sample calculations - in a real app, this would filter by date
                state.payments.forEach(payment => {
                    totalIncome += payment.amount;
                });

                state.maintenanceRequests.forEach(request => {
                    maintenanceCost += request.cost || 0;
                });

                // Calculate pending payments (unpaid bills)
                const unpaidBills = getUnpaidBills();
                unpaidBills.forEach(bill => {
                    pendingPayments += bill.amount;
                });

                // Update UI
                elements.totalIncome.textContent = 'Rp' + formatNumber(totalIncome);
                elements.pendingPayments.textContent = 'Rp' + formatNumber(pendingPayments);
                elements.maintenanceCost.textContent = 'Rp' + formatNumber(maintenanceCost);
                elements.netIncome.textContent = 'Rp' + formatNumber(totalIncome - maintenanceCost);
            }

            function updateTenantUnitReports() {
                // Active tenants (with active contracts)
                const activeTenants = state.tenants.filter(tenant =>
                    state.contracts.some(contract =>
                        contract.tenantId === tenant.id && contract.status === 'Aktif'
                    )
                ).length;

                // New tenants (joined in last 30 days)
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

                const newTenants = state.tenants.filter(tenant => {
                    const joinDate = new Date(tenant.joinDate);
                    return joinDate >= thirtyDaysAgo;
                }).length;

                // Ending contracts (ending in next 30 days)
                const endingContracts = state.contracts.filter(contract => {
                    if (contract.status !== 'Aktif') return false;

                    const endDate = new Date(contract.endDate);
                    const today = new Date();
                    const timeDiff = endDate.getTime() - today.getTime();
                    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));

                    return daysDiff <= 30;
                }).length;

                // Available units
                const availableUnits = state.units.filter(unit => unit.status === 'Tersedia').length;

                // Units under maintenance
                const maintenanceUnits = state.units.filter(unit => unit.status === 'Perbaikan').length;

                // Occupancy rate
                const totalUnits = state.units.length;
                const occupiedUnits = state.units.filter(unit => unit.status === 'Ditempati').length;
                const occupancyRate = totalUnits > 0 ? Math.round((occupiedUnits / totalUnits) * 100) : 0;

                // Update UI
                elements.activeTenants.textContent = activeTenants;
                elements.newTenantsReport.textContent = newTenants;
                elements.endingTenants.textContent = endingContracts;
                elements.availableUnitsReport.textContent = availableUnits;
                elements.maintenanceUnits.textContent = maintenanceUnits;
                elements.occupancyRate.textContent = occupancyRate + '%';
            }

            function renderSettings() {
                // Load current settings into forms
                document.getElementById('profile-name').value = state.currentUser.name;
                document.getElementById('profile-email').value = state.currentUser.email;
                document.getElementById('profile-phone').value = '08123456789'; // sample

                document.getElementById('property-name').value = state.settings.propertyName;
                document.getElementById('property-address').value = state.settings.propertyAddress;
                document.getElementById('property-type').value = 'Apartemen'; // sample
                document.getElementById('property-units').value = state.units.length;

                // Payment methods
                document.querySelectorAll('input[name="payment-methods"]').forEach(input => {
                    input.checked = state.settings.paymentMethods.includes(input.value);
                });

                document.getElementById('bank-name').value = 'Bank Central Asia'; // sample
                document.getElementById('account-number').value = '1234567890'; // sample
                document.getElementById('account-name').value = 'PT Rentelindo'; // sample

                // Notifications
                document.querySelectorAll('input[name="notification-types"]').forEach(input => {
                    input.checked = state.settings.notifications.types.includes(input.value);
                });

                document.querySelectorAll('input[name="notification-methods"]').forEach(input => {
                    input.checked = state.settings.notifications.methods.includes(input.value);
                });

                // Show profile tab by default
                showSettingTab('profile');
            }

            // Data Helpers
            function getUnpaidBills() {
                // In a real app, this would calculate based on contracts and payment history
                // For demo purposes, we'll return some sample data
                return [
                    {
                        tenantId: 'T003',
                        tenantName: 'Andi Wijaya',
                        unitName: 'A102',
                        dueDate: '2023-06-15',
                        amount: 4500000,
                        daysOverdue: 5
                    },
                    {
                        tenantId: 'T004',
                        tenantName: 'Dewi Kusuma',
                        unitName: 'B201',
                        dueDate: '2023-06-10',
                        amount: 6000000,
                        daysOverdue: 10
                    }
                ];
            }

            function formatNumber(num) {
                return new Intl.NumberFormat('id-ID').format(num);
            }

            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('id-ID', options);
            }

            function escapeHtml(unsafe) {
                return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
            }

            // Event Handlers
            function handleAddTenant(e) {
                e.preventDefault();

                // Validate form
                const form = e.target;
                const formData = new FormData(form);
                const errors = {};

                // Simple validation - in a real app, you'd want more robust validation
                if (!formData.get('tenant-id')) errors['tenant-id'] = 'ID Penyewa diperlukan';
                if (!formData.get('tenant-name')) errors['tenant-name'] = 'Nama lengkap diperlukan';
                if (!formData.get('tenant-email') || !/^\S+@\S+\.\S+$/.test(formData.get('tenant-email'))) {
                    errors['tenant-email'] = 'Email valid diperlukan';
                }
                if (!formData.get('tenant-phone') || !/^\d{10,15}$/.test(formData.get('tenant-phone'))) {
                    errors['tenant-phone'] = 'Nomor telepon valid diperlukan (10-15 digit)';
                }

                // Show errors if any
                Object.keys(errors).forEach(key => {
                    const errorElement = document.getElementById(`${key} -error`);
                    if (errorElement) {
                        errorElement.textContent = errors[key];
                        document.getElementById(key).classList.add('error');
                    }
                });

                if (Object.keys(errors).length > 0) return;

                // Create new tenant
                const newTenant = {
                    id: formData.get('tenant-id'),
                    name: formData.get('tenant-name'),
                    email: formData.get('tenant-email'),
                    phone: formData.get('tenant-phone'),
                    unit: formData.get('tenant-unit') || '',
                    rent: formData.get('tenant-rent') ? parseInt(formData.get('tenant-rent')) : 0,
                    status: formData.get('tenant-status'),
                    joinDate: new Date().toISOString().split('T')[0],
                    notes: formData.get('tenant-notes') || ''
                };

                // Add to state
                state.tenants.push(newTenant);

                // Update unit status if assigned
                if (newTenant.unit) {
                    const unit = state.units.find(u => u.id === newTenant.unit);
                    if (unit) {
                        unit.status = 'Ditempati';
                        unit.tenant = newTenant.name;
                    }
                }

                // Show success message
                showToast('Penyewa berhasil ditambahkan', 'success');

                // Close modal and refresh
                closeModal('add-tenant');
                renderTenants();
                renderDashboard();
            }

            function handleEditTenant(e) {
                e.preventDefault();

                // Similar to add tenant, but with existing ID
                // Implementation would be similar to handleAddTenant
                showToast('Data penyewa berhasil diperbarui', 'success');
                closeModal('edit-tenant');
                renderTenants();
            }

            function handleAddUnit(e) {
                e.preventDefault();

                // Validate form
                const form = e.target;
                const formData = new FormData(form);
                const errors = {};

                if (!formData.get('unit-code')) errors['unit-code'] = 'Kode unit diperlukan';
                if (!formData.get('unit-name')) errors['unit-name'] = 'Nama unit diperlukan';
                if (!formData.get('unit-type')) errors['unit-type'] = 'Tipe unit diperlukan';
                if (!formData.get('unit-rent') || isNaN(formData.get('unit-rent'))) {
                    errors['unit-rent'] = 'Harga sewa valid diperlukan';
                }

                // Show errors if any
                Object.keys(errors).forEach(key => {
                    const errorElement = document.getElementById(`${key} -error`);
                    if (errorElement) {
                        errorElement.textContent = errors[key];
                        document.getElementById(key).classList.add('error');
                    }
                });

                if (Object.keys(errors).length > 0) return;

                // Create new unit
                const newUnit = {
                    id: formData.get('unit-code'),
                    name: formData.get('unit-name'),
                    type: formData.get('unit-type'),
                    status: formData.get('unit-status'),
                    rent: parseInt(formData.get('unit-rent')),
                    size: '', // would come from form in real app
                    facilities: [], // would come from form in real app
                    description: formData.get('unit-description') || '',
                    tenant: '',
                    images: [] // would handle file upload in real app
                };

                // Add to state
                state.units.push(newUnit);

                // Show success message
                showToast('Unit berhasil ditambahkan', 'success');

                // Close modal and refresh
                closeModal('add-unit');
                renderUnits();
                renderDashboard();
            }

            function handleEditUnit(e) {
                e.preventDefault();

                // Similar to add unit, but with existing ID
                // Implementation would be similar to handleAddUnit
                showToast('Data unit berhasil diperbarui', 'success');
                closeModal('edit-unit');
                renderUnits();
            }

            function handleAddPayment(e) {
                e.preventDefault();

                // Validate form
                const form = e.target;
                const formData = new FormData(form);
                const errors = {};

                if (!formData.get('payment-tenant')) errors['payment-tenant'] = 'Penyewa diperlukan';
                if (!formData.get('payment-amount') || isNaN(formData.get('payment-amount'))) {
                    errors['payment-amount'] = 'Jumlah valid diperlukan';
                }
                if (!formData.get('payment-date')) errors['payment-date'] = 'Tanggal diperlukan';

                // Show errors if any
                Object.keys(errors).forEach(key => {
                    const errorElement = document.getElementById(`${key} -error`);
                    if (errorElement) {
                        errorElement.textContent = errors[key];
                        document.getElementById(key).classList.add('error');
                    }
                });

                if (Object.keys(errors).length > 0) return;

                // Get tenant info
                const tenantId = formData.get('payment-tenant');
                const tenant = state.tenants.find(t => t.id === tenantId);

                if (!tenant) {
                    showToast('Penyewa tidak ditemukan', 'error');
                    return;
                }

                // Create new payment
                const newPayment = {
                    id: 'P' + (state.payments.length + 1).toString().padStart(3, '0'),
                    tenantId: tenantId,
                    tenantName: tenant.name,
                    amount: parseInt(formData.get('payment-amount')),
                    date: formData.get('payment-date'),
                    method: formData.get('payment-method'),
                    status: 'Lunas',
                    receipt: '' // would handle file upload in real app
                };

                // Add to state
                state.payments.push(newPayment);

                // Show success message
                showToast('Pembayaran berhasil dicatat', 'success');

                // Close modal and refresh
                closeModal('add-payment');
                renderPayments();
                renderDashboard();
            }

            function handleAddContract(e) {
                e.preventDefault();

                // Validate form
                const form = e.target;
                const formData = new FormData(form);
                const errors = {};

                if (!formData.get('contract-number')) errors['contract-number'] = 'Nomor kontrak diperlukan';
                if (!formData.get('contract-tenant')) errors['contract-tenant'] = 'Penyewa diperlukan';
                if (!formData.get('contract-unit')) errors['contract-unit'] = 'Unit diperlukan';
                if (!formData.get('contract-start')) errors['contract-start'] = 'Tanggal mulai diperlukan';
                if (!formData.get('contract-end')) errors['contract-end'] = 'Tanggal selesai diperlukan';
                if (!formData.get('contract-rent') || isNaN(formData.get('contract-rent'))) {
                    errors['contract-rent'] = 'Harga sewa valid diperlukan';
                }

                // Show errors if any
                Object.keys(errors).forEach(key => {
                    const errorElement = document.getElementById(`${key} -error`);
                    if (errorElement) {
                        errorElement.textContent = errors[key];
                        document.getElementById(key).classList.add('error');
                    }
                });

                if (Object.keys(errors).length > 0) return;

                // Get tenant and unit info
                const tenantId = formData.get('contract-tenant');
                const tenant = state.tenants.find(t => t.id === tenantId);
                const unitId = formData.get('contract-unit');
                const unit = state.units.find(u => u.id === unitId);

                if (!tenant || !unit) {
                    showToast('Penyewa atau unit tidak ditemukan', 'error');
                    return;
                }

                // Create new contract
                const newContract = {
                    id: 'C' + (state.contracts.length + 1).toString().padStart(3, '0'),
                    number: formData.get('contract-number'),
                    tenantId: tenantId,
                    tenantName: tenant.name,
                    unitId: unitId,
                    unitName: unit.name,
                    type: formData.get('contract-type'),
                    startDate: formData.get('contract-start'),
                    endDate: formData.get('contract-end'),
                    rent: parseInt(formData.get('contract-rent')),
                    deposit: formData.get('contract-deposit') ? parseInt(formData.get('contract-deposit')) : 0,
                    status: 'Aktif',
                    file: '' // would handle file upload in real app
                };

                // Add to state
                state.contracts.push(newContract);

                // Update tenant's unit assignment
                tenant.unit = unitId;
                tenant.rent = newContract.rent;
                tenant.status = 'Aktif';

                // Update unit status
                unit.status = 'Ditempati';
                unit.tenant = tenant.name;

                // Show success message
                showToast('Kontrak berhasil dibuat', 'success');

                // Close modal and refresh
                closeModal('add-contract');
                renderContracts();
                renderTenants();
                renderUnits();
                renderDashboard();
            }

            function handleAddMaintenance(e) {
                e.preventDefault();

                // Validate form
                const form = e.target;
                const formData = new FormData(form);
                const errors = {};

                if (!formData.get('maintenance-unit')) errors['maintenance-unit'] = 'Unit diperlukan';
                if (!formData.get('maintenance-type')) errors['maintenance-type'] = 'Jenis perbaikan diperlukan';
                if (!formData.get('maintenance-description')) errors['maintenance-description'] = 'Deskripsi masalah diperlukan';

                // Show errors if any
                Object.keys(errors).forEach(key => {
                    const errorElement = document.getElementById(`${key} -error`);
                    if (errorElement) {
                        errorElement.textContent = errors[key];
                        document.getElementById(key).classList.add('error');
                    }
                });

                if (Object.keys(errors).length > 0) return;

                // Get unit info
                const unitId = formData.get('maintenance-unit');
                const unit = state.units.find(u => u.id === unitId);

                if (!unit) {
                    showToast('Unit tidak ditemukan', 'error');
                    return;
                }

                // Create new maintenance request
                const newRequest = {
                    id: 'M' + (state.maintenanceRequests.length + 1).toString().padStart(3, '0'),
                    unitId: unitId,
                    unitName: unit.name,
                    type: formData.get('maintenance-type'),
                    description: formData.get('maintenance-description'),
                    priority: formData.get('maintenance-priority'),
                    status: 'Baru',
                    requestedDate: formData.get('maintenance-requested-date'),
                    completedDate: '',
                    cost: 0,
                    technician: '',
                    images: [] // would handle file upload in real app
                };

                // Add to state
                state.maintenanceRequests.push(newRequest);

                // Update unit status if needed
                if (unit.status !== 'Perbaikan') {
                    unit.status = 'Perbaikan';
                    renderUnits();
                }

                // Show success message
                showToast('Permintaan perbaikan berhasil dikirim', 'success');

                // Close modal and refresh
                closeModal('add-maintenance');
                renderMaintenance();
                renderDashboard();
            }

            function handleSaveProfile(e) {
                e.preventDefault();
                // Save profile logic
                showToast('Profil berhasil diperbarui', 'success');
            }

            function handleSaveProperty(e) {
                e.preventDefault();
                // Save property settings logic
                showToast('Pengaturan properti berhasil diperbarui', 'success');
            }

            function handleSavePaymentMethods(e) {
                e.preventDefault();
                // Save payment methods logic
                showToast('Metode pembayaran berhasil diperbarui', 'success');
            }

            function handleSaveNotifications(e) {
                e.preventDefault();
                // Save notification settings logic
                showToast('Pengaturan notifikasi berhasil diperbarui', 'success');
            }

            function handleSaveSecurity(e) {
                e.preventDefault();
                // Save security settings logic
                showToast('Pengaturan keamanan berhasil diperbarui', 'success');
            }

            // Data Operations
            function deleteTenant(id) {
                const tenantIndex = state.tenants.findIndex(t => t.id === id);
                if (tenantIndex >= 0) {
                    const tenant = state.tenants[tenantIndex];

                    // Check if tenant has active contract
                    const hasActiveContract = state.contracts.some(c =>
                        c.tenantId === id && c.status === 'Aktif'
                    );

                    if (hasActiveContract) {
                        showToast('Tidak dapat menghapus penyewa dengan kontrak aktif', 'error');
                        return;
                    }

                    // Free up the unit if assigned
                    if (tenant.unit) {
                        const unit = state.units.find(u => u.id === tenant.unit);
                        if (unit) {
                            unit.status = 'Tersedia';
                            unit.tenant = '';
                        }
                    }

                    // Remove tenant
                    state.tenants.splice(tenantIndex, 1);

                    // Show success message
                    showToast('Penyewa berhasil dihapus', 'success');

                    // Refresh views
                    renderTenants();
                    renderUnits();
                    renderDashboard();
                }
            }

            function deleteUnit(id) {
                const unitIndex = state.units.findIndex(u => u.id === id);
                if (unitIndex >= 0) {
                    const unit = state.units[unitIndex];

                    // Check if unit is occupied
                    if (unit.status === 'Ditempati') {
                        showToast('Tidak dapat menghapus unit yang sedang ditempati', 'error');
                        return;
                    }

                    // Remove unit
                    state.units.splice(unitIndex, 1);

                    // Show success message
                    showToast('Unit berhasil dihapus', 'success');

                    // Refresh views
                    renderUnits();
                    renderDashboard();
                }
            }

            function viewContract(id) {
                // In a real app, this would open a modal or page to view contract details
                const contract = state.contracts.find(c => c.id === id);
                if (contract) {
                    showToast(`Melihat kontrak ${contract.number} `, 'info');
                }
            }

            function downloadContract(id) {
                // In a real app, this would initiate a file download
                const contract = state.contracts.find(c => c.id === id);
                if (contract) {
                    showToast(`Mengunduh kontrak ${contract.number} `, 'info');
                }
            }

            function renewContract(id) {
                // In a real app, this would open a modal to renew the contract
                const contract = state.contracts.find(c => c.id === id);
                if (contract) {
                    showToast(`Memperbarui kontrak ${contract.number} `, 'info');
                }
            }

            function viewMaintenance(id) {
                // In a real app, this would open a modal to view maintenance details
                const request = state.maintenanceRequests.find(m => m.id === id);
                if (request) {
                    showToast(`Melihat permintaan perbaikan ${request.id} `, 'info');
                }
            }

            function updateMaintenanceStatus(id) {
                // In a real app, this would open a modal to update status
                const request = state.maintenanceRequests.find(m => m.id === id);
                if (request) {
                    showToast(`Memperbarui status perbaikan ${request.id} `, 'info');
                }
            }

            function generateReport(type) {
                // In a real app, this would generate and download a report
                if (type === 'financial') {
                    showToast('Laporan keuangan berhasil dihasilkan', 'success');
                } else {
                    showToast('Laporan hunian berhasil dihasilkan', 'success');
                }
            }

            function exportFinancialReport() {
                // In a real app, this would export financial data
                showToast('Laporan keuangan berhasil diekspor', 'success');
            }

            function exportTenantReport() {
                // In a real app, this would export tenant data
                showToast('Data penyewa berhasil diekspor', 'success');
            }

            function exportUnitReport() {
                // In a real app, this would export unit data
                showToast('Data unit berhasil diekspor', 'success');
            }

            function exportData() {
                // In a real app, this would export all data
                showToast('Data berhasil diekspor', 'success');
            }

            function logout() {
                // In a real app, this would clear session and redirect to login
                showToast('Anda telah keluar', 'success');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1500);
            }

            // Initialize the application
            document.addEventListener('DOMContentLoaded', init);}
            
            </script>
</body>


</html>