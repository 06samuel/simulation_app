<!DOCTYPE html>
<html lang="id" data-bs-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentalApartemen - Manajemen Apartemen</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Aplikasi manajemen penyewaan apartemen Green Valley. Kelola penyewa, apartemen, pembayaran, dan perawatan dengan mudah.">
    <meta name="keywords"
        content="rental apartemen, sewa apartemen, manajemen properti, green valley, apartemen, penyewaan">
    <meta name="author" content="RentalApartemen Team">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">

    <!-- Google Fonts: Inter & Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Custom Properties for Theming */
        :root {
            --primary-color: #0d6efd;
            /* Bootstrap Primary */
            --secondary-color: #6c757d;
            /* Bootstrap Secondary */
            --success-color: #198754;
            /* Bootstrap Success */
            --danger-color: #dc3545;
            /* Bootstrap Danger */
            --warning-color: #ffc107;
            /* Bootstrap Warning */
            --info-color: #0dcaf0;
            /* Bootstrap Info */

            --body-bg-light: #f8f9fa;
            --body-color-light: #212529;
            --card-bg-light: #ffffff;
            --border-color-light: #dee2e6;

            --body-bg-dark: #212529;
            --body-color-dark: #f8f9fa;
            --card-bg-dark: #343a40;
            --border-color-dark: #495057;

            --font-primary: 'Poppins', sans-serif;
            --font-secondary: 'Inter', sans-serif;
        }

        [data-bs-theme="dark"] {
            --bs-body-bg: var(--body-bg-dark);
            --bs-body-color: var(--body-color-dark);
            --bs-border-color: var(--border-color-dark);
        }

        [data-bs-theme="dark"] .card {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
        }

        [data-bs-theme="dark"] .table {
            --bs-table-color: var(--body-color-dark);
            --bs-table-bg: var(--card-bg-dark);
            --bs-table-border-color: var(--border-color-dark);
            --bs-table-striped-color: var(--body-color-dark);
            --bs-table-striped-bg: rgba(255, 255, 255, 0.07);
            --bs-table-active-color: var(--body-color-dark);
            --bs-table-active-bg: rgba(255, 255, 255, 0.1);
            --bs-table-hover-color: var(--body-color-dark);
            --bs-table-hover-bg: rgba(255, 255, 255, 0.09);
        }

        [data-bs-theme="dark"] .modal-content {
            background-color: var(--card-bg-dark);
        }

        [data-bs-theme="dark"] .form-control,
        [data-bs-theme="dark"] .form-select {
            background-color: var(--body-bg-dark);
            color: var(--body-color-dark);
            border-color: var(--border-color-dark);
        }

        [data-bs-theme="dark"] .form-control:focus,
        [data-bs-theme="dark"] .form-select:focus {
            background-color: var(--body-bg-dark);
            color: var(--body-color-dark);
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
            /* Adjust focus color if needed */
        }

        [data-bs-theme="dark"] .list-group-item {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
        }


        body {
            font-family: var(--font-secondary);
            background-color: var(--bs-body-bg);
            color: var(--bs-body-color);
            display: flex;
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .navbar-brand,
        .nav-link-title {
            font-family: var(--font-primary);
        }

        .sidebar {
            width: 280px;
            min-height: 100vh;
            background-color: var(--primary-color);
            /* Darker sidebar */
            color: #fff;
            padding-top: 1rem;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 1030;
            /* Higher than navbar-fixed */
            transition: transform 0.3s ease-in-out;
        }

        [data-bs-theme="dark"] .sidebar {
            background-color: #0a58ca;
            /* Slightly different dark primary */
        }


        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
        }

        .sidebar .nav-link .fa-fw {
            margin-right: 0.75rem;
        }

        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 3px solid #ffc107;
            /* Accent color */
            padding-left: calc(1.5rem - 3px);
        }

        .sidebar .sidebar-heading {
            font-size: 0.75rem;
            text-transform: uppercase;
            padding: 0.5rem 1.5rem;
            color: rgba(255, 255, 255, 0.5);
        }


        .main-content {
            margin-left: 280px;
            padding: 20px;
            width: calc(100% - 280px);
            transition: margin-left 0.3s ease-in-out, width 0.3s ease-in-out;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--bs-border-color);
        }

        .content-header h1 {
            font-size: 1.75rem;
            margin-bottom: 0;
        }

        .page-section {
            display: none;
            /* Hidden by default, JS will show active page */
        }

        .page-section.active {
            display: block;
        }

        /* Card component styling */
        .apartment-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .apartment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }

        .apartment-card img {
            height: 200px;
            object-fit: cover;
        }

        .badge-availability {
            font-size: 0.9em;
        }

        /* Filter bar styles */
        .filter-bar .form-select,
        .filter-bar .form-control {
            margin-right: 10px;
            margin-bottom: 10px;
            /* For mobile stacking */
        }

        /* Dashboard specific */
        .stat-card {
            border-left: 5px solid var(--primary-color);
        }

        .stat-card.success {
            border-left-color: var(--success-color);
        }

        .stat-card.warning {
            border-left-color: var(--warning-color);
        }

        .stat-card.info {
            border-left-color: var(--info-color);
        }

        .stat-card .card-title {
            font-size: 1rem;
            color: var(--secondary-color);
        }

        .stat-card .card-text {
            font-size: 1.75rem;
            font-weight: bold;
        }

        [data-bs-theme="dark"] .stat-card .card-title {
            color: #adb5bd;
        }


        /* Responsive adjustments */
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 255, 255, 0.8)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }

        .sidebar-toggler {
            display: none;
            /* Hidden on larger screens */
            color: #fff;
            background: var(--primary-color);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        [data-bs-theme="dark"] .sidebar-toggler {
            background: #0a58ca;
        }


        @media (max-width: 991.98px) {
            .sidebar {
                transform: translateX(-280px);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                width: 100%;
            }

            .sidebar-toggler {
                display: block;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Custom component simulation: Notification */
        #notification-area {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            width: 300px;
        }

        /* Small loading spinner */
        .loader-sm {
            border: 4px solid #f3f3f3;
            /* Light grey */
            border-top: 4px solid var(--primary-color);
            /* Blue */
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>

    <!-- Sidebar Navigation -->
    <aside class="sidebar d-flex flex-column flex-shrink-0" id="sidebar">
        <a href="#landing"
            class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none p-3 router-link">
            <i class="fas fa-building fa-2x me-2"></i>
            <span class="fs-4 nav-link-title">RentalApartemen</span>
        </a>
        <hr class="text-white">
        <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item">
                <a href="#landing" class="nav-link active router-link" aria-current="page" data-page="landing">
                    <i class="fas fa-home fa-fw"></i> Landing Page
                </a>
            </li>
            <li class="sidebar-heading mt-2">Utama</li>
            <li>
                <a href="#dashboard" class="nav-link router-link" data-page="dashboard">
                    <i class="fas fa-tachometer-alt fa-fw"></i> Dashboard
                </a>
            </li>
            <li>
                <a href="#apartments" class="nav-link router-link" data-page="apartments">
                    <i class="fas fa-city fa-fw"></i> Galeri Apartemen
                </a>
            </li>
            <li>
                <a href="#crud" class="nav-link router-link" data-page="crud">
                    <i class="fas fa-users-cog fa-fw"></i> Manajemen Data
                </a>
            </li>
            <li class="sidebar-heading mt-2">Lainnya</li>
            <li>
                <a href="#documentation" class="nav-link router-link" data-page="documentation">
                    <i class="fas fa-book fa-fw"></i> Dokumentasi
                </a>
            </li>
            <li>
                <a href="#dashboard_2" class="nav-link router-link" data-page="dashboard_2">
                    <i class="fas fa-chart-line fa-fw"></i> Dashboard Stat v2
                </a>
            </li>
            <!-- Add dashboard_3 to dashboard_7 similarly if content differs significantly -->
        </ul>
        <hr class="text-white">
        <div class="p-3">
            <button class="btn btn-sm btn-outline-light w-100" id="theme-toggle-btn">
                <i class="fas fa-moon me-1"></i> Ganti Tema
            </button>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
        <header class="content-header">
            <button class="btn sidebar-toggler me-3" type="button" id="sidebarToggleBtn" aria-label="Toggle sidebar">
                <i class="fas fa-bars"></i>
            </button>
            <h1 id="page-title">Landing Page</h1>
            <div>
                <!-- Potential user dropdown or quick actions here -->
                <span class="me-2 d-none d-md-inline" id="currentUserDisplay">Halo, Admin!</span>
                <button class="btn btn-sm btn-outline-secondary" onclick="alert('Logout belum diimplementasikan.')">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

        <!-- Page Sections (SPA Content) -->
        <section id="landing-page" class="page-section active">
            <!-- Landing Page Content -->
            <div class="container py-5">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-4 fw-bold lh-1 mb-3">Selamat Datang di RentalApartemen</h1>
                        <p class="lead">Solusi manajemen penyewaan apartemen Green Valley yang modern dan komprehensif.
                            Kelola properti Anda dengan mudah dan efisien.</p>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                            <a href="#apartments" class="btn btn-primary btn-lg px-4 me-md-2 router-link"
                                data-page="apartments">Lihat Apartemen</a>
                            <a href="#dashboard" class="btn btn-outline-secondary btn-lg px-4 router-link"
                                data-page="dashboard">Masuk Dashboard</a>
                        </div>
                    </div>
                    <div class="col-lg-6 text-center mt-4 mt-lg-0">
                        <img src="https://via.placeholder.com/500x350/0d6efd/fff?text=Apartemen+Modern"
                            class="img-fluid rounded shadow" alt="Ilustrasi Apartemen Modern">
                    </div>
                </div>

                <hr class="my-5">

                <h2 class="text-center mb-4">Fitur Unggulan</h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-users fa-3x text-primary mb-3"></i>
                                <h5 class="card-title">Manajemen Penyewa</h5>
                                <p class="card-text">Kelola data penyewa dan status sewa dengan mudah.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-list-alt fa-3x text-primary mb-3"></i>
                                <h5 class="card-title">Daftar Apartemen</h5>
                                <p class="card-text">Lihat fasilitas dan ketersediaan unit apartemen.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-credit-card fa-3x text-primary mb-3"></i>
                                <h5 class="card-title">Pembayaran Otomatis</h5>
                                <p class="card-text">Integrasi pembayaran dan pelacakan pendapatan.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="dashboard-page" class="page-section">
            <!-- Dashboard Content (Version 1) -->
            <div class="row">
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card h-100">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="card-title text-xs font-weight-bold text-uppercase mb-1">Total Apartemen
                                    </div>
                                    <div id="total-apartments-stat" class="card-text h5 mb-0 font-weight-bold">150</div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-building fa-2x text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card success h-100">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="card-title text-xs font-weight-bold text-uppercase mb-1">Apartemen
                                        Disewa</div>
                                    <div id="rented-apartments-stat" class="card-text h5 mb-0 font-weight-bold">120
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-house-user fa-2x text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card info h-100">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="card-title text-xs font-weight-bold text-uppercase mb-1">Pendapatan
                                        (Bulan Ini)</div>
                                    <div id="monthly-revenue-stat" class="card-text h5 mb-0 font-weight-bold">Rp
                                        125.000.000</div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card warning h-100">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="card-title text-xs font-weight-bold text-uppercase mb-1">Total Penyewa
                                        Aktif</div>
                                    <div id="total-tenants-stat" class="card-text h5 mb-0 font-weight-bold">115</div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-users fa-2x text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-7 mb-4">
                    <div class="card shadow">
                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                            <h6 class="m-0 font-weight-bold">Grafik Pendapatan (Contoh)</h6>
                        </div>
                        <div class="card-body">
                            <p><em>Placeholder untuk grafik (misalnya, Chart.js). Bayangkan grafik garis atau batang di
                                    sini.</em></p>
                            <img src="https://via.placeholder.com/600x300/6c757d/fff?text=Grafik+Pendapatan"
                                class="img-fluid" alt="Grafik Pendapatan Placeholder">
                        </div>
                    </div>
                </div>
                <div class="col-lg-5 mb-4">
                    <div class="card shadow">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold">Aktivitas Terbaru</h6>
                        </div>
                        <div class="card-body">
                            <ul class="list-group list-group-flush" id="recent-activity-list">
                                <li class="list-group-item">Penyewa baru: John Doe, Apt 101</li>
                                <li class="list-group-item">Pembayaran diterima: Jane Smith, Apt 203</li>
                                <li class="list-group-item">Permintaan perbaikan: Apt 305, AC Rusak</li>
                                <li class="list-group-item">Sewa berakhir: Mike Lee, Apt 102</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="apartments-page" class="page-section">
            <!-- Card/Gallery Page Content -->
            <div class="filter-bar d-flex flex-wrap align-items-center mb-4">
                <select class="form-select form-select-sm w-auto me-2" id="filter-category"
                    aria-label="Filter Kategori Apartemen">
                    <option selected value="">Semua Kategori</option>
                    <option value="studio">Studio</option>
                    <option value="1br">1 Kamar Tidur</option>
                    <option value="2br">2 Kamar Tidur</option>
                    <option value="penthouse">Penthouse</option>
                </select>
                <select class="form-select form-select-sm w-auto me-2" id="filter-availability"
                    aria-label="Filter Ketersediaan Apartemen">
                    <option selected value="">Semua Status</option>
                    <option value="tersedia">Tersedia</option>
                    <option value="disewa">Disewa</option>
                    <option value="perbaikan">Dalam Perbaikan</option>
                </select>
                <input type="text" class="form-control form-control-sm w-auto me-2" id="filter-search"
                    placeholder="Cari nama/unit..." aria-label="Cari Apartemen">
                <button class="btn btn-sm btn-outline-secondary" id="reset-filters-btn"><i class="fas fa-times"></i>
                    Reset</button>
            </div>

            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="apartment-gallery">
                <!-- Apartment cards will be injected here by JavaScript -->
            </div>
            <p id="no-apartments-message" class="text-center mt-4" style="display:none;">Tidak ada apartemen yang sesuai
                dengan filter Anda.</p>
        </section>

        <section id="crud-page" class="page-section">
            <!-- CRUD Page Content -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 id="crud-title">Manajemen Penyewa</h4>
                <div>
                    <div class="btn-group me-2" role="group" aria-label="Pilihan Data CRUD">
                        <button type="button" class="btn btn-sm btn-primary active"
                            data-crud-target="tenants">Penyewa</button>
                        <button type="button" class="btn btn-sm btn-outline-primary"
                            data-crud-target="apartments_crud">Apartemen</button>
                    </div>
                    <button class="btn btn-sm btn-success" id="addItemBtn" data-bs-toggle="modal"
                        data-bs-target="#crudModal">
                        <i class="fas fa-plus"></i> Tambah Baru
                    </button>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead id="crud-table-head">
                        <!-- Table headers will be injected by JavaScript -->
                    </thead>
                    <tbody id="crud-table-body">
                        <!-- Table rows will be injected by JavaScript -->
                    </tbody>
                </table>
            </div>
            <p id="no-data-message" class="text-center mt-3" style="display:none;">Belum ada data.</p>
        </section>

        <section id="documentation-page" class="page-section">
            <!-- Documentation Page Content -->
            <h2>Dokumentasi Aplikasi</h2>
            <p>Selamat datang di dokumentasi RentalApartemen. Aplikasi ini dirancang untuk membantu Anda mengelola
                penyewaan apartemen dengan efisien.</p>

            <article class="mb-4">
                <h3 id="doc-dashboard">Dashboard</h3>
                <p>Halaman Dashboard menampilkan ringkasan statistik penting seperti total apartemen, unit yang disewa,
                    pendapatan bulanan, dan jumlah penyewa. Anda juga dapat melihat grafik pendapatan dan aktivitas
                    terbaru.</p>
            </article>
            <article class="mb-4">
                <h3 id="doc-gallery">Galeri Apartemen</h3>
                <p>Di halaman Galeri Apartemen, Anda dapat melihat daftar semua unit apartemen yang tersedia beserta
                    detailnya. Gunakan fitur filter untuk mencari berdasarkan kategori, ketersediaan, atau kata kunci.
                </p>
            </article>
            <article class="mb-4">
                <h3 id="doc-management">Manajemen Data (CRUD)</h3>
                <p>Halaman Manajemen Data memungkinkan Anda untuk melakukan operasi Create, Read, Update, dan Delete
                    (CRUD) untuk data penyewa dan data apartemen. Klik tombol "Tambah Baru" untuk menambahkan entri
                    baru, atau gunakan tombol aksi pada setiap baris untuk mengedit atau menghapus data.</p>
            </article>
            <article class="mb-4">
                <h3 id="doc-features">Fitur Utama</h3>
                <ul>
                    <li><strong>Manajemen Penyewa:</strong> Catat dan kelola informasi penyewa, kontrak, dan riwayat
                        sewa.</li>
                    <li><strong>Daftar Apartemen:</strong> Kelola detail unit apartemen, termasuk fasilitas, harga sewa,
                        dan status ketersediaan.</li>
                    <li><strong>Otomatisasi Pembayaran:</strong> (Simulasi) Lacak pembayaran, kirim pengingat, dan
                        hasilkan laporan pendapatan. Integrasi dengan Midtrans, Xendit, atau PayPal dapat ditambahkan.
                    </li>
                    <li><strong>Permintaan Perbaikan:</strong> Penyewa dapat mengajukan permintaan perbaikan, dan Anda
                        dapat melacak status maintenance.</li>
                    <li><strong>Booking & Jadwal:</strong> (Simulasi) Kelola proses booking apartemen dan jadwal
                        ketersediaan.</li>
                </ul>
            </article>
            <article class="mb-4">
                <h3 id="doc-tech">Teknologi</h3>
                <p>Frontend aplikasi ini dibangun menggunakan:</p>
                <ul>
                    <li>HTML5 (Struktur Semantik)</li>
                    <li>CSS3 (Styling dengan Custom Properties untuk tema)</li>
                    <li>JavaScript (Vanilla JS untuk interaktivitas, validasi, DOM manipulation, simulasi CRUD)</li>
                    <li>Bootstrap 5.3 (Framework UI/UX)</li>
                    <li>Font Awesome (Ikon)</li>
                    <li>Google Fonts (Inter & Poppins)</li>
                </ul>
                <p>Desain responsif untuk mobile dan desktop, serta memperhatikan praktik aksesibilitas (ARIA).</p>
            </article>
            <article>
                <h3 id="doc-dev">Potensi Pengembangan</h3>
                <ul>
                    <li>Implementasi autentikasi login/logout pengguna.</li>
                    <li>Pengembangan backend dengan database (misalnya, Node.js + Express + MongoDB/PostgreSQL) dan API.
                    </li>
                    <li>Integrasi nyata dengan payment gateway.</li>
                    <li>Notifikasi real-time (misalnya, menggunakan WebSockets).</li>
                    <li>Pemisahan file CSS/JS menjadi modul eksternal untuk optimasi.</li>
                </ul>
            </article>
        </section>

        <section id="dashboard_2-page" class="page-section">
            <!-- Dashboard Version 2 Content -->
            <h4>Dashboard Statistik v2</h4>
            <p>Ini adalah contoh tampilan dashboard alternatif. Mungkin dengan fokus pada grafik yang berbeda atau
                metrik khusus.</p>
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">Tingkat Hunian per Tipe Unit</div>
                        <div class="card-body">
                            <p><em>Placeholder untuk diagram lingkaran (Pie Chart)</em></p>
                            <img src="https://via.placeholder.com/400x250/ffc107/000?text=Pie+Chart+Hunian"
                                class="img-fluid" alt="Pie Chart Hunian Placeholder">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">Status Permintaan Perbaikan</div>
                        <div class="card-body">
                            <p><em>Placeholder untuk grafik batang (Bar Chart)</em></p>
                            <img src="https://via.placeholder.com/400x250/198754/fff?text=Bar+Chart+Perbaikan"
                                class="img-fluid" alt="Bar Chart Perbaikan Placeholder">
                        </div>
                    </div>
                </div>
            </div>
            <p class="mt-3">Dashboard_3.html hingga dashboard_7.html dapat mengikuti pola ini dengan variasi konten/tata
                letak yang berbeda sesuai kebutuhan.</p>
        </section>

        <!-- Footer -->
        <footer class="mt-auto py-3 border-top">
            <div class="container-fluid text-center">
                <small>¬© <span id="currentYear"></span> RentalApartemen Green Valley. Hak Cipta Dilindungi.</small>
            </div>
        </footer>

    </main>

    <!-- Notification Area (Simulated SFC) -->
    <div id="notification-area">
        <!-- Notifications will be appended here by JS -->
    </div>

    <!-- Modal for CRUD operations (Simulated SFC) -->
    <div class="modal fade" id="crudModal" tabindex="-1" aria-labelledby="crudModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form id="crudForm">
                    <div class="modal-header">
                        <h5 class="modal-title" id="crudModalLabel">Form Data</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" id="editItemId">
                        <div id="formFieldsContainer">
                            <!-- Form fields will be injected by JavaScript -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn-primary" id="saveCrudBtn">Simpan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Templates for "Single File Components" (SFC) like behavior -->
    <template id="apartment-card-template">
        <div class="col">
            <div class="card h-100 apartment-card">
                <img src="https://via.placeholder.com/300x200/6c757d/fff?text=Apartemen" class="card-img-top"
                    alt="Apartemen">
                <div class="card-body">
                    <h5 class="card-title">Nama Apartemen</h5>
                    <p class="card-text text-muted">Tipe Unit - Lokasi</p>
                    <p class="card-text small">Fasilitas: AC, WiFi, Dapur Lengkap.</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-bold price">Rp X.XXX.XXX / bulan</span>
                        <span class="badge availability-badge">Tersedia</span>
                    </div>
                </div>
                <div class="card-footer text-center">
                    <button class="btn btn-sm btn-primary rent-now-btn" data-id="">Sewa Sekarang</button>
                    <button class="btn btn-sm btn-outline-secondary view-details-btn" data-id="">Detail</button>
                </div>
            </div>
        </div>
    </template>

    <template id="notification-template">
        <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true"
            data-bs-delay="5000">
            <div class="toast-header">
                <i class="fas fa-bell me-2"></i>
                <strong class="me-auto toast-title">Notifikasi</strong>
                <small class="text-muted toast-time">baru saja</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                <!-- Message here -->
            </div>
        </div>
    </template>


    <!-- Bootstrap 5.3 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- THEME TOGGLE ---
            const themeToggleBtn = document.getElementById('theme-toggle-btn');
            const htmlElement = document.documentElement;

            const savedTheme = localStorage.getItem('theme') || 'light';
            htmlElement.setAttribute('data-bs-theme', savedTheme);
            themeToggleBtn.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun me-1"></i> Ganti Tema Terang' : '<i class="fas fa-moon me-1"></i> Ganti Tema Gelap';

            themeToggleBtn.addEventListener('click', () => {
                const currentTheme = htmlElement.getAttribute('data-bs-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                htmlElement.setAttribute('data-bs-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                themeToggleBtn.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun me-1"></i> Ganti Tema Terang' : '<i class="fas fa-moon me-1"></i> Ganti Tema Gelap';
                showNotification(`Tema diubah menjadi ${newTheme === 'dark' ? 'Gelap' : 'Terang'}.`, 'info');
            });

            // --- SPA ROUTING SIMULATION ---
            const pageSections = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('.router-link');
            const pageTitleElement = document.getElementById('page-title');
            const sidebarNavLinks = document.querySelectorAll('.sidebar .nav-link.router-link');

            function updateActiveNav(pageId) {
                sidebarNavLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.page === pageId) {
                        link.classList.add('active');
                    }
                });
            }

            function showPage(pageId) {
                pageSections.forEach(section => section.classList.remove('active'));
                const targetPage = document.getElementById(pageId + '-page');
                if (targetPage) {
                    targetPage.classList.add('active');
                    const pageName = pageId.charAt(0).toUpperCase() + pageId.slice(1).replace(/_/g, ' ');
                    pageTitleElement.textContent = pageName.replace('Page', '').trim(); // Clean up title
                    updateActiveNav(pageId);
                    document.title = `RentalApartemen - ${pageName.replace('Page', '').trim()}`;

                    // Scroll to top of page
                    document.querySelector('.main-content').scrollTop = 0;

                    // Close sidebar on mobile after navigation
                    if (window.innerWidth < 992) {
                        document.getElementById('sidebar').classList.remove('active');
                    }

                } else {
                    console.warn(`Page with ID ${pageId}-page not found. Showing landing page.`);
                    showPage('landing'); // Fallback
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                    const pageId = this.dataset.page;
                    if (pageId) {
                        location.hash = pageId; // Update hash for history and direct linking
                    }
                });
            });

            function handleHashChange() {
                const hash = location.hash.substring(1);
                const pageId = hash || 'landing'; // Default to landing if no hash
                showPage(pageId);
            }

            window.addEventListener('hashchange', handleHashChange);
            handleHashChange(); // Initial page load based on hash or default

            // --- SIDEBAR TOGGLE FOR MOBILE ---
            const sidebarToggleBtn = document.getElementById('sidebarToggleBtn');
            const sidebar = document.getElementById('sidebar');
            if (sidebarToggleBtn) {
                sidebarToggleBtn.addEventListener('click', () => {
                    sidebar.classList.toggle('active');
                });
            }

            // --- FOOTER YEAR ---
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // --- NOTIFICATION SYSTEM (Simulated SFC) ---
            const notificationArea = document.getElementById('notification-area');
            const notificationTemplate = document.getElementById('notification-template').content.firstElementChild;

            function showNotification(message, type = 'success', title = 'Notifikasi') {
                const notificationElement = notificationTemplate.cloneNode(true);
                notificationElement.querySelector('.toast-title').textContent = title;
                notificationElement.querySelector('.toast-body').innerHTML = message; // Use innerHTML for potential icon usage

                // Set icon and color based on type
                const iconElement = notificationElement.querySelector('.toast-header > .fas');
                notificationElement.classList.remove('bg-success', 'bg-danger', 'bg-warning', 'bg-info', 'text-white'); // Clear previous

                let headerClass = '';
                switch (type) {
                    case 'success':
                        iconElement.className = 'fas fa-check-circle me-2 text-success';
                        headerClass = 'bg-success text-white';
                        break;
                    case 'error':
                    case 'danger':
                        iconElement.className = 'fas fa-exclamation-triangle me-2 text-danger';
                        headerClass = 'bg-danger text-white';
                        break;
                    case 'warning':
                        iconElement.className = 'fas fa-exclamation-circle me-2 text-warning';
                        headerClass = 'bg-warning text-dark'; // Dark text for warning
                        break;
                    case 'info':
                        iconElement.className = 'fas fa-info-circle me-2 text-info';
                        headerClass = 'bg-info text-white';
                        break;
                    default:
                        iconElement.className = 'fas fa-bell me-2';
                }
                if (headerClass) {
                    notificationElement.querySelector('.toast-header').classList.add(...headerClass.split(' '));
                }


                notificationArea.appendChild(notificationElement);
                const toast = new bootstrap.Toast(notificationElement);
                toast.show();
                notificationElement.addEventListener('hidden.bs.toast', () => {
                    notificationElement.remove();
                });
            }
            window.showNotification = showNotification; // Make it globally accessible for demo

            // --- APARTMENT GALLERY (Simulated SFC & Data) ---
            const apartmentGallery = document.getElementById('apartment-gallery');
            const apartmentCardTemplate = document.getElementById('apartment-card-template').content.firstElementChild;
            const noApartmentsMessage = document.getElementById('no-apartments-message');

            let apartmentsData = [
                { id: 1, name: 'Apartemen Melati Tower A', type: 'studio', location: 'Lantai 5', facilities: 'AC, WiFi, TV Kabel', price: 3500000, availability: 'tersedia', image: 'https://via.placeholder.com/300x200/0d6efd/fff?text=Melati+A' },
                { id: 2, name: 'Apartemen Anggrek Residence', type: '1br', location: 'Lantai 10', facilities: 'Full Furnished, Balkon', price: 5000000, availability: 'disewa', image: 'https://via.placeholder.com/300x200/198754/fff?text=Anggrek+Res' },
                { id: 3, name: 'Apartemen Mawar Deluxe', type: '2br', location: 'Lantai 12', facilities: '2 Kamar Mandi, View Kota', price: 8000000, availability: 'tersedia', image: 'https://via.placeholder.com/300x200/ffc107/000?text=Mawar+DX' },
                { id: 4, name: 'Penthouse Green Valley', type: 'penthouse', location: 'Lantai 20', facilities: 'Private Lift, Kolam Renang Mini', price: 25000000, availability: 'perbaikan', image: 'https://via.placeholder.com/300x200/dc3545/fff?text=Penthouse+GV' },
                { id: 5, name: 'Studio Cozy Corner', type: 'studio', location: 'Lantai 2', facilities: 'Dapur Mini, Meja Kerja', price: 3000000, availability: 'tersedia', image: 'https://via.placeholder.com/300x200/6c757d/fff?text=Cozy+Corner' },
                { id: 6, name: 'Apartemen Tulip Indah', type: '1br', location: 'Lantai 7', facilities: 'AC, WiFi, Balkon Luas', price: 5200000, availability: 'tersedia', image: 'https://via.placeholder.com/300x200/0dcaf0/000?text=Tulip+Indah' },
            ];

            function renderApartmentCard(apartment) {
                const card = apartmentCardTemplate.cloneNode(true);
                card.querySelector('img').src = apartment.image;
                card.querySelector('img').alt = apartment.name;
                card.querySelector('.card-title').textContent = apartment.name;
                card.querySelector('.text-muted').textContent = `${apartment.type.toUpperCase()} - ${apartment.location}`;
                card.querySelector('.small').textContent = `Fasilitas: ${apartment.facilities}`;
                card.querySelector('.price').textContent = `Rp ${apartment.price.toLocaleString('id-ID')} / bulan`;

                const availabilityBadge = card.querySelector('.availability-badge');
                availabilityBadge.textContent = apartment.availability.charAt(0).toUpperCase() + apartment.availability.slice(1);
                availabilityBadge.classList.remove('bg-success', 'bg-warning', 'bg-secondary', 'bg-danger'); // Clear existing
                if (apartment.availability === 'tersedia') {
                    availabilityBadge.classList.add('bg-success');
                } else if (apartment.availability === 'disewa') {
                    availabilityBadge.classList.add('bg-secondary');
                } else if (apartment.availability === 'perbaikan') {
                    availabilityBadge.classList.add('bg-warning', 'text-dark');
                }

                card.querySelector('.rent-now-btn').dataset.id = apartment.id;
                card.querySelector('.view-details-btn').dataset.id = apartment.id;
                if (apartment.availability !== 'tersedia') {
                    card.querySelector('.rent-now-btn').disabled = true;
                    card.querySelector('.rent-now-btn').classList.replace('btn-primary', 'btn-outline-secondary');
                }

                return card;
            }

            function displayApartments(filteredApartments) {
                apartmentGallery.innerHTML = ''; // Clear existing cards
                if (filteredApartments.length === 0) {
                    noApartmentsMessage.style.display = 'block';
                } else {
                    noApartmentsMessage.style.display = 'none';
                    filteredApartments.forEach(apt => {
                        apartmentGallery.appendChild(renderApartmentCard(apt));
                    });
                }
            }

            displayApartments(apartmentsData); // Initial display

            // Apartment Gallery Filtering
            const filterCategory = document.getElementById('filter-category');
            const filterAvailability = document.getElementById('filter-availability');
            const filterSearch = document.getElementById('filter-search');
            const resetFiltersBtn = document.getElementById('reset-filters-btn');

            function filterApartments() {
                const category = filterCategory.value;
                const availability = filterAvailability.value;
                const searchTerm = filterSearch.value.toLowerCase();

                const filtered = apartmentsData.filter(apt => {
                    const matchesCategory = category ? apt.type === category : true;
                    const matchesAvailability = availability ? apt.availability === availability : true;
                    const matchesSearch = searchTerm ? (apt.name.toLowerCase().includes(searchTerm) || apt.location.toLowerCase().includes(searchTerm)) : true;
                    return matchesCategory && matchesAvailability && matchesSearch;
                });
                displayApartments(filtered);
            }

            filterCategory.addEventListener('change', filterApartments);
            filterAvailability.addEventListener('change', filterApartments);
            filterSearch.addEventListener('input', filterApartments);
            resetFiltersBtn.addEventListener('click', () => {
                filterCategory.value = '';
                filterAvailability.value = '';
                filterSearch.value = '';
                filterApartments();
                showNotification('Filter direset.', 'info');
            });

            // Event delegation for apartment card buttons
            apartmentGallery.addEventListener('click', function (event) {
                if (event.target.classList.contains('rent-now-btn')) {
                    const apartmentId = event.target.dataset.id;
                    const apartment = apartmentsData.find(apt => apt.id == apartmentId);
                    // Simulate booking
                    showNotification(`Permintaan sewa untuk ${apartment.name} telah dikirim. (Simulasi)`, 'success');
                } else if (event.target.classList.contains('view-details-btn')) {
                    const apartmentId = event.target.dataset.id;
                    const apartment = apartmentsData.find(apt => apt.id == apartmentId);
                    alert(`Detail ${apartment.name}:\n Tipe: ${apartment.type}\n Lokasi: ${apartment.location}\n Fasilitas: ${apartment.facilities}\n Harga: Rp ${apartment.price.toLocaleString('id-ID')}\n Status: ${apartment.availability}`);
                }
            });


            // --- CRUD SYSTEM (Simulated SFC & Data) ---
            const crudTableHead = document.getElementById('crud-table-head');
            const crudTableBody = document.getElementById('crud-table-body');
            const crudModal = new bootstrap.Modal(document.getElementById('crudModal'));
            const crudForm = document.getElementById('crudForm');
            const formFieldsContainer = document.getElementById('formFieldsContainer');
            const crudModalLabel = document.getElementById('crudModalLabel');
            const editItemIdInput = document.getElementById('editItemId');
            const crudTitle = document.getElementById('crud-title');
            const noDataMessage = document.getElementById('no-data-message');
            const crudTargetButtons = document.querySelectorAll('[data-crud-target]');
            const addItemBtn = document.getElementById('addItemBtn');

            let currentCrudTarget = 'tenants'; // 'tenants' or 'apartments_crud'

            const dataStore = {
                tenants: [
                    { id: 1, name: 'John Doe', apartmentUnit: 'Melati A-101', phone: '081234567890', rentStartDate: '2023-01-15', rentEndDate: '2024-01-15', status: 'Aktif' },
                    { id: 2, name: 'Jane Smith', apartmentUnit: 'Anggrek R-203', phone: '087654321098', rentStartDate: '2023-05-01', rentEndDate: '2024-05-01', status: 'Aktif' },
                ],
                apartments_crud: [ // Use a different name to avoid conflict with gallery data
                    { id: 1, unitNumber: 'Melati A-101', type: 'Studio', floor: 5, rentPrice: 3500000, status: 'Disewa' },
                    { id: 2, unitNumber: 'Anggrek R-203', type: '1BR', floor: 10, rentPrice: 5000000, status: 'Disewa' },
                    { id: 3, unitNumber: 'Mawar D-305', type: '2BR', floor: 12, rentPrice: 8000000, status: 'Tersedia' },
                ]
            };

            const crudSchemas = {
                tenants: {
                    title: 'Penyewa',
                    headers: ['ID', 'Nama', 'Unit Apartemen', 'Telepon', 'Mulai Sewa', 'Selesai Sewa', 'Status', 'Aksi'],
                    fields: [
                        { name: 'name', label: 'Nama Penyewa', type: 'text', required: true },
                        { name: 'apartmentUnit', label: 'Unit Apartemen', type: 'text', required: true },
                        { name: 'phone', label: 'Nomor Telepon', type: 'tel', required: true },
                        { name: 'rentStartDate', label: 'Tanggal Mulai Sewa', type: 'date', required: true },
                        { name: 'rentEndDate', label: 'Tanggal Selesai Sewa', type: 'date', required: true },
                        { name: 'status', label: 'Status Sewa', type: 'select', options: ['Aktif', 'Tidak Aktif', 'Menunggu Pembayaran'], required: true }
                    ]
                },
                apartments_crud: {
                    title: 'Apartemen',
                    headers: ['ID', 'Nomor Unit', 'Tipe', 'Lantai', 'Harga Sewa', 'Status', 'Aksi'],
                    fields: [
                        { name: 'unitNumber', label: 'Nomor Unit', type: 'text', required: true },
                        { name: 'type', label: 'Tipe Apartemen', type: 'select', options: ['Studio', '1BR', '2BR', '3BR', 'Penthouse'], required: true },
                        { name: 'floor', label: 'Lantai', type: 'number', required: true },
                        { name: 'rentPrice', label: 'Harga Sewa (Rp)', type: 'number', required: true },
                        { name: 'status', label: 'Status Unit', type: 'select', options: ['Tersedia', 'Disewa', 'Dalam Perbaikan', 'Tidak Tersedia'], required: true }
                    ]
                }
            };

            function switchCrudTarget(target) {
                currentCrudTarget = target;
                crudTitle.textContent = `Manajemen ${crudSchemas[target].title}`;
                crudTargetButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.crudTarget === target);
                    btn.classList.toggle('btn-primary', btn.dataset.crudTarget === target);
                    btn.classList.toggle('btn-outline-primary', btn.dataset.crudTarget !== target);
                });
                renderCrudTable();
            }

            crudTargetButtons.forEach(button => {
                button.addEventListener('click', () => {
                    switchCrudTarget(button.dataset.crudTarget);
                });
            });

            function renderCrudTable() {
                const schema = crudSchemas[currentCrudTarget];
                const data = dataStore[currentCrudTarget];

                // Render headers
                crudTableHead.innerHTML = `<tr>${schema.headers.map(h => `<th>${h}</th>`).join('')}</tr>`;

                // Render body
                crudTableBody.innerHTML = '';
                if (data.length === 0) {
                    noDataMessage.style.display = 'block';
                    crudTableBody.innerHTML = `<tr><td colspan="${schema.headers.length}" class="text-center">Tidak ada data.</td></tr>`;
                } else {
                    noDataMessage.style.display = 'none';
                    data.forEach(item => {
                        const row = crudTableBody.insertRow();
                        // Data columns
                        Object.keys(item).forEach(key => {
                            if (key !== 'id') { // Assuming 'id' is not directly displayed or handled differently
                                let value = item[key];
                                if (key === 'rentPrice') value = `Rp ${Number(value).toLocaleString('id-ID')}`;
                                if (key === 'rentStartDate' || key === 'rentEndDate') {
                                    value = new Date(value).toLocaleDateString('id-ID', { day: '2-digit', month: 'short', year: 'numeric' });
                                }
                                row.insertCell().textContent = value;
                            }
                        });
                        // ID column first (if using, else adjust colspan and headers)
                        row.insertCell(0).textContent = item.id;

                        // Action buttons column
                        const actionsCell = row.insertCell();
                        actionsCell.innerHTML = `
                        <button class="btn btn-sm btn-warning edit-btn me-1" data-id="${item.id}" aria-label="Edit item ${item.id}"><i class="fas fa-edit"></i></button>
                        <button class="btn btn-sm btn-danger delete-btn" data-id="${item.id}" aria-label="Hapus item ${item.id}"><i class="fas fa-trash"></i></button>
                    `;
                    });
                }
            }

            function populateCrudForm(item = null) {
                const schema = crudSchemas[currentCrudTarget];
                formFieldsContainer.innerHTML = '';
                editItemIdInput.value = item ? item.id : '';
                crudModalLabel.textContent = `${item ? 'Edit' : 'Tambah'} Data ${schema.title}`;

                schema.fields.forEach(field => {
                    const formGroup = document.createElement('div');
                    formGroup.className = 'mb-3';

                    const label = document.createElement('label');
                    label.htmlFor = `field-${field.name}`;
                    label.className = 'form-label';
                    label.textContent = field.label;
                    formGroup.appendChild(label);

                    let input;
                    if (field.type === 'select') {
                        input = document.createElement('select');
                        input.className = 'form-select';
                        field.options.forEach(opt => {
                            const option = document.createElement('option');
                            option.value = opt;
                            option.textContent = opt;
                            input.appendChild(option);
                        });
                    } else {
                        input = document.createElement('input');
                        input.type = field.type;
                        input.className = 'form-control';
                    }
                    input.id = `field-${field.name}`;
                    input.name = field.name;
                    if (field.required) input.required = true;
                    if (item && item[field.name] !== undefined) {
                        input.value = item[field.name];
                    }
                    formGroup.appendChild(input);
                    formFieldsContainer.appendChild(formGroup);
                });
            }

            addItemBtn.addEventListener('click', () => {
                populateCrudForm();
            });

            crudTableBody.addEventListener('click', function (event) {
                const target = event.target.closest('button');
                if (!target) return;

                const id = target.dataset.id;
                if (target.classList.contains('edit-btn')) {
                    const item = dataStore[currentCrudTarget].find(i => i.id == id);
                    populateCrudForm(item);
                    crudModal.show();
                } else if (target.classList.contains('delete-btn')) {
                    if (confirm(`Anda yakin ingin menghapus item #${id} dari data ${crudSchemas[currentCrudTarget].title}?`)) {
                        dataStore[currentCrudTarget] = dataStore[currentCrudTarget].filter(i => i.id != id);
                        renderCrudTable();
                        showNotification(`Item #${id} berhasil dihapus.`, 'success');
                    }
                }
            });

            crudForm.addEventListener('submit', function (event) {
                event.preventDefault();
                const formData = new FormData(this);
                const itemData = {};
                const schema = crudSchemas[currentCrudTarget];

                let isValid = true;
                schema.fields.forEach(field => {
                    const value = formData.get(field.name);
                    if (field.required && !value) {
                        isValid = false;
                        const inputElement = document.getElementById(`field-${field.name}`);
                        inputElement.classList.add('is-invalid'); // Bootstrap validation class
                        if (!inputElement.nextElementSibling || !inputElement.nextElementSibling.classList.contains('invalid-feedback')) {
                            const errorMsg = document.createElement('div');
                            errorMsg.className = 'invalid-feedback';
                            errorMsg.textContent = `${field.label} wajib diisi.`;
                            inputElement.parentNode.appendChild(errorMsg);
                        }
                    } else {
                        const inputElement = document.getElementById(`field-${field.name}`);
                        inputElement.classList.remove('is-invalid');
                        if (inputElement.nextElementSibling && inputElement.nextElementSibling.classList.contains('invalid-feedback')) {
                            inputElement.nextElementSibling.remove();
                        }
                    }
                    itemData[field.name] = (field.type === 'number' || field.name === 'rentPrice') ? parseFloat(value) || 0 : value;
                });

                if (!isValid) {
                    showNotification('Harap isi semua field yang wajib diisi.', 'danger', 'Validasi Gagal');
                    return;
                }


                const id = editItemIdInput.value;
                if (id) { // Update
                    const index = dataStore[currentCrudTarget].findIndex(i => i.id == id);
                    dataStore[currentCrudTarget][index] = { ...dataStore[currentCrudTarget][index], ...itemData };
                    showNotification(`Data ${schema.title} #${id} berhasil diperbarui.`, 'success');
                } else { // Create
                    itemData.id = dataStore[currentCrudTarget].length > 0 ? Math.max(...dataStore[currentCrudTarget].map(i => i.id)) + 1 : 1;
                    dataStore[currentCrudTarget].push(itemData);
                    showNotification(`Data ${schema.title} baru berhasil ditambahkan.`, 'success');
                }
                renderCrudTable();
                crudModal.hide();
                this.reset();
            });

            // Initial CRUD table render
            renderCrudTable(); // Based on default currentCrudTarget ('tenants')

            // --- Update dashboard stats (simple example) ---
            function updateDashboardStats() {
                document.getElementById('total-apartments-stat').textContent = dataStore.apartments_crud.length;
                document.getElementById('rented-apartments-stat').textContent = dataStore.apartments_crud.filter(apt => apt.status === 'Disewa').length;
                // Pendapatan and Total Penyewa would need more complex logic or dummy data
                document.getElementById('total-tenants-stat').textContent = dataStore.tenants.filter(t => t.status === 'Aktif').length;
            }
            updateDashboardStats(); // Call initially and after CRUD operations affecting these stats

            // Re-update stats when CRUD changes data
            const originalRenderCrudTable = renderCrudTable;
            renderCrudTable = function () {
                originalRenderCrudTable();
                updateDashboardStats();
            }

            // Example of interactive notification
            // setTimeout(() => {
            //     showNotification('<strong>Promo Spesial!</strong> Diskon 10% untuk sewa tahunan. <a href="#apartments" class="alert-link router-link" data-page="apartments">Lihat unit!</a>', 'info', 'Pengumuman');
            // }, 5000);

        }); // End DOMContentLoaded
    </script>

</body>

</html>