<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Headers Keamanan -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; 
                   font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; 
                   script-src 'self' 'unsafe-inline'; 
                   img-src 'self' data: https://i.pravatar.cc https://images.unsplash.com https://via.placeholder.com;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), camera=(), microphone=()">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

    <!-- Meta Informasi SEO & Aplikasi -->
    <meta name="description"
        content="RentEase - Platform sewa apartemen terintegrasi untuk manajemen properti yang efisien dan modern.">
    <meta name="keywords"
        content="sewa apartemen, manajemen properti, aplikasi properti, rentease, property management system">
    <meta name="author" content="RentEase Development Team">
    <meta name="theme-color" content="#3b82f6"> <!-- Warna tema untuk UI browser di mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph / Social Media Sharing -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="RentEase - Platform Sewa Apartemen Modern">
    <meta property="og:description" content="Kelola properti sewa Anda dengan mudah menggunakan RentEase.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630?text=RentEase+Logo">
    <meta property="og:url" content="https://rentease.example.com"> <!-- Ganti dengan URL sebenarnya -->

    <!-- Favicon & App Icons (Placeholder, ganti dengan ikon asli) -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://via.placeholder.com/32x32?text=RE">
    <link rel="icon" type="image/png" sizes="16x16" href="https://via.placeholder.com/16x16?text=RE">
    <link rel="apple-touch-icon" sizes="180x180" href="https://via.placeholder.com/180x180?text=RentEase">

    <title>RentEase - Platform Sewa Apartemen Modern</title>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Font Awesome untuk ikon (Gratis) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap Icons (Gratis, alternatif atau pelengkap Font Awesome) -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /*
         * RentEase - Gaya Kustom Aplikasi
         * Penulis: Tim Pengembang RentEase
         * Versi: 1.0.0
         * Lisensi: MIT (contoh)
         *
         * Deskripsi:
         * File CSS ini berisi semua gaya yang dibutuhkan untuk aplikasi RentEase.
         * Ditulis dengan pendekatan vanilla CSS, memanfaatkan CSS Custom Properties (Design Tokens)
         * untuk tema terang dan gelap, serta prinsip desain modern, responsif, dan aksesibel.
         */

        /* ==========================================================================
           Design Tokens & Reset Global
           ========================================================================== */
        :root {
            /* Skala Font (Fluid Typography) */
            --font-size-xs: clamp(0.75rem, calc(0.7rem + 0.25vw), 0.875rem);
            /* 12px - 14px */
            --font-size-sm: clamp(0.875rem, calc(0.8rem + 0.375vw), 1rem);
            /* 14px - 16px */
            --font-size-base: clamp(1rem, calc(0.9rem + 0.5vw), 1.125rem);
            /* 16px - 18px */
            --font-size-md: clamp(1.125rem, calc(1rem + 0.625vw), 1.25rem);
            /* 18px - 20px */
            --font-size-lg: clamp(1.25rem, calc(1.1rem + 0.75vw), 1.5rem);
            /* 20px - 24px */
            --font-size-xl: clamp(1.5rem, calc(1.3rem + 1vw), 2rem);
            /* 24px - 32px */
            --font-size-2xl: clamp(2rem, calc(1.8rem + 1.25vw), 3rem);
            /* 32px - 48px */
            --font-size-3xl: clamp(2.5rem, calc(2.3rem + 1.5vw), 4rem);
            /* 40px - 64px */

            /* Skala Spasi (Fluid Spacing) */
            --spacing-px: 1px;
            --spacing-0: 0;
            --spacing-1: clamp(0.25rem, calc(0.2rem + 0.25vw), 0.5rem);
            /* 4px - 8px */
            --spacing-2: clamp(0.5rem, calc(0.4rem + 0.5vw), 0.75rem);
            /* 8px - 12px */
            --spacing-3: clamp(0.75rem, calc(0.65rem + 0.5vw), 1rem);
            /* 12px - 16px */
            --spacing-4: clamp(1rem, calc(0.85rem + 0.75vw), 1.5rem);
            /* 16px - 24px */
            --spacing-5: clamp(1.5rem, calc(1.25rem + 1.25vw), 2rem);
            /* 24px - 32px */
            --spacing-6: clamp(2rem, calc(1.75rem + 1.25vw), 3rem);
            /* 32px - 48px */
            --spacing-8: clamp(3rem, calc(2.75rem + 1.25vw), 4rem);
            /* 48px - 64px */
            --spacing-10: clamp(4rem, calc(3.75rem + 1.25vw), 5rem);
            /* 64px - 80px */

            /* Sistem Warna - Tema Terang (Default) */
            --background: #f8fafc;
            /* slate-50 */
            --foreground: #0f172a;
            /* slate-900 */
            --card: #ffffff;
            --card-foreground: #0f172a;
            --popover: #ffffff;
            --popover-foreground: #0f172a;
            --primary: #3b82f6;
            /* blue-500 */
            --primary-foreground: #ffffff;
            --primary-hover: #2563eb;
            /* blue-600 */
            --secondary: #f1f5f9;
            /* slate-100 */
            --secondary-foreground: #0f172a;
            --secondary-hover: #e2e8f0;
            /* slate-200 */
            --muted: #f1f5f9;
            /* slate-100 */
            --muted-foreground: #64748b;
            /* slate-500 */
            --accent: #e0f2fe;
            /* sky-100 */
            --accent-foreground: #0c4a6e;
            /* sky-800 */
            --accent-hover: #bae6fd;
            /* sky-200 */
            --destructive: #ef4444;
            /* red-500 */
            --destructive-foreground: #ffffff;
            --destructive-hover: #dc2626;
            /* red-600 */
            --border: #e2e8f0;
            /* slate-200 */
            --input: #e2e8f0;
            /* slate-200 */
            --input-focus: #cbd5e1;
            /* slate-300 */
            --ring: #3b82f6;
            /* blue-500 */
            --success: #22c55e;
            /* green-500 */
            --success-foreground: #ffffff;
            --warning: #f59e0b;
            /* amber-500 */
            --warning-foreground: #ffffff;
            --info: #0ea5e9;
            /* sky-500 */
            --info-foreground: #ffffff;

            /* Properti Layout */
            --radius-sm: 0.25rem;
            /* 4px */
            --radius: 0.5rem;
            /* 8px */
            --radius-md: 0.75rem;
            /* 12px */
            --radius-lg: 1rem;
            /* 16px */
            --radius-full: 9999px;
            --sidebar-width: 280px;
            --sidebar-width-collapsed: 80px;
            /* Untuk tampilan ikon saja jika diperlukan */
            --header-height: 70px;
            --footer-height: 60px;
            --container-max-width: 1280px;

            /* Bayangan (Shadows) */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);

            /* Transisi */
            --transition-all: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-colors: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s cubic-bezier(0.4, 0, 0.2, 1), fill 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-opacity: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-shadow: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-transform: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);

            /* Z-index (untuk mengatur tumpukan elemen) */
            --z-0: 0;
            --z-10: 10;
            /* Konten dasar */
            --z-20: 20;
            /* Elemen di atas konten */
            --z-30: 30;
            /* Dropdown, tooltip */
            --z-40: 40;
            /* Header, sidebar sticky */
            --z-50: 50;
            /* Modal, overlay */
            --z-dropdown: 1000;
            --z-sticky: 1100;
            --z-fixed: 1200;
            --z-modal-backdrop: 1290;
            --z-modal: 1300;
            --z-toast: 1600;
            --z-overlay: 1700;
            /* Overlay loading global */
        }

        /* Tema Gelap */
        .dark {
            --background: #020617;
            /* slate-950 */
            --foreground: #f1f5f9;
            /* slate-100 */
            --card: #0f172a;
            /* slate-900 */
            --card-foreground: #f1f5f9;
            --popover: #0f172a;
            --popover-foreground: #f1f5f9;
            --primary: #60a5fa;
            /* blue-400 */
            --primary-foreground: #0f172a;
            --primary-hover: #3b82f6;
            /* blue-500 */
            --secondary: #1e293b;
            /* slate-800 */
            --secondary-foreground: #f1f5f9;
            --secondary-hover: #334155;
            /* slate-700 */
            --muted: #1e293b;
            --muted-foreground: #94a3b8;
            /* slate-400 */
            --accent: #1e3a8a;
            /* blue-900 */
            --accent-foreground: #bfdbfe;
            /* blue-200 */
            --accent-hover: #1e40af;
            /* blue-800 */
            --destructive: #f87171;
            /* red-400 */
            --destructive-foreground: #0f172a;
            --destructive-hover: #ef4444;
            /* red-500 */
            --border: #1e293b;
            /* slate-800 */
            --input: #1e293b;
            --input-focus: #334155;
            /* slate-700 */
            --ring: #60a5fa;
            --success: #4ade80;
            /* green-400 */
            --success-foreground: #0f172a;
            --warning: #fbbf24;
            /* amber-400 */
            --warning-foreground: #0f172a;
            --info: #38bdf8;
            /* sky-400 */
            --info-foreground: #0f172a;
        }

        /* Reset & Gaya Dasar */
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
            /* Menghilangkan highlight biru pada tap di mobile */
        }

        html {
            font-size: 16px;
            /* Basis untuk REM */
            scroll-behavior: smooth;
            height: 100%;
            overflow-x: hidden;
            /* Mencegah scroll horizontal yang tidak diinginkan */
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            color: var(--foreground);
            background-color: var(--background);
            min-height: 100vh;
            transition: var(--transition-colors);
            text-rendering: optimizeLegibility;
            /* Meningkatkan keterbacaan teks */
            display: flex;
            /* Untuk struktur dasar aplikasi (sidebar + main) */
            flex-direction: row;
            /* Konten utama bersebelahan dengan sidebar */
        }

        /* Tipografi */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-weight: 700;
            /* Lebih tebal untuk judul */
            line-height: 1.2;
            letter-spacing: -0.025em;
            margin-bottom: var(--spacing-3);
            color: var(--foreground);
            /* Mengikuti warna teks utama */
        }

        h1 {
            font-size: var(--font-size-2xl);
        }

        h2 {
            font-size: var(--font-size-xl);
        }

        h3 {
            font-size: var(--font-size-lg);
        }

        h4 {
            font-size: var(--font-size-md);
        }

        h5 {
            font-size: var(--font-size-base);
        }

        h6 {
            font-size: var(--font-size-sm);
        }

        p {
            margin-bottom: var(--spacing-4);
            font-size: var(--font-size-base);
            color: var(--muted-foreground);
            /* Warna lebih soft untuk paragraf */
        }

        p.lead {
            font-size: var(--font-size-md);
            color: var(--foreground);
        }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition-colors);
        }

        a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
        }

        /* Elemen Form */
        button,
        input,
        select,
        textarea {
            font-family: inherit;
            font-size: var(--font-size-base);
            line-height: inherit;
            color: inherit;
            border-radius: var(--radius);
        }

        button {
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            display: inline-flex;
            /* Agar ikon dan teks sejajar */
            align-items: center;
            justify-content: center;
            gap: var(--spacing-2);
            font-weight: 500;
        }

        button:disabled,
        input:disabled,
        select:disabled,
        textarea:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        input,
        select,
        textarea {
            padding: var(--spacing-2) var(--spacing-3);
            border: 1px solid var(--input);
            background-color: var(--background);
            /* Atau var(--card) jika form di dalam card */
            transition: var(--transition-all);
            width: 100%;
            /* Default form controls to full width */
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: var(--ring);
            box-shadow: 0 0 0 2px var(--ring);
        }

        select {
            appearance: none;
            /* Hapus tampilan default browser */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%2364748b'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--spacing-2) center;
            background-size: 1.5em 1.5em;
            padding-right: var(--spacing-8);
            /* Ruang untuk ikon panah */
        }

        /* Style untuk dark mode select arrow */
        .dark select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%2394a3b8'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
        }


        /* Elemen Media */
        img,
        picture,
        video,
        canvas {
            /* Tidak ada SVG */
            display: block;
            max-width: 100%;
            height: auto;
        }

        /* Utilitas Aksesibilitas */
        .sr-only {
            /* Screen-reader only */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* ==========================================================================
           Struktur Layout Utama
           ========================================================================== */
        /* .app-container sudah ada di <body> */

        .sidebar {
            width: var(--sidebar-width);
            background: var(--card);
            padding: var(--spacing-5) var(--spacing-4);
            border-right: 1px solid var(--border);
            /* Dulu position: fixed, sekarang bagian dari flex body */
            height: 100vh;
            /* Tinggi penuh viewport */
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
            overflow-y: auto;
            /* Scroll jika konten sidebar panjang */
            z-index: var(--z-sticky);
            /* Agar di atas konten lain */
        }

        .sidebar.collapsed {
            width: 0;
            /* Atau var(--sidebar-width-collapsed) jika ingin ikon saja */
            padding-left: 0;
            padding-right: 0;
            transform: translateX(-100%);
            /* Sembunyikan sepenuhnya */
            overflow: hidden;
        }

        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            margin-bottom: var(--spacing-6);
            padding: 0 var(--spacing-2);
            /* Padding agar tidak terlalu mepet jika sidebar collapsed */
        }

        .sidebar-brand__icon {
            font-size: var(--font-size-2xl);
            color: var(--primary);
            transition: var(--transition-all);
        }

        .sidebar-brand__text {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--primary);
            transition: var(--transition-opacity);
            white-space: nowrap;
            /* Agar teks tidak wrap */
        }

        .sidebar.collapsed .sidebar-brand__text {
            opacity: 0;
            pointer-events: none;
        }


        .nav-menu {
            list-style: none;
            flex-grow: 1;
            /* Mengisi sisa ruang di sidebar */
        }

        .nav-item {
            margin-bottom: var(--spacing-1);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            padding: var(--spacing-2) var(--spacing-3);
            color: var(--muted-foreground);
            /* Warna default untuk link navigasi */
            border-radius: var(--radius-md);
            transition: var(--transition-all);
            font-size: var(--font-size-base);
            font-weight: 500;
            white-space: nowrap;
        }

        .nav-link i {
            /* Ikon di navigasi */
            width: 20px;
            /* Menjaga lebar ikon konsisten */
            text-align: center;
            font-size: var(--font-size-md);
        }

        .nav-link:hover {
            background: var(--accent);
            color: var(--accent-foreground);
            text-decoration: none;
        }

        .nav-link.active {
            background: var(--primary);
            color: var(--primary-foreground);
            box-shadow: var(--shadow-sm);
        }

        .sidebar.collapsed .nav-link span {
            /* Sembunyikan teks link saat collapsed */
            opacity: 0;
            width: 0;
            overflow: hidden;
            pointer-events: none;
        }

        .sidebar.collapsed .nav-link {
            justify-content: center;
            /* Pusatkan ikon */
        }


        .main-wrapper {
            flex-grow: 1;
            /* Mengisi sisa ruang di body */
            display: flex;
            flex-direction: column;
            height: 100vh;
            /* Memastikan wrapper utama mengisi tinggi viewport */
            overflow-y: auto;
            /* Scroll utama aplikasi ada di sini */
            transition: margin-left 0.3s ease-in-out;
            /* Jika sidebar fixed */
        }

        .app-header {
            height: var(--header-height);
            background: var(--card);
            border-bottom: 1px solid var(--border);
            padding: 0 var(--spacing-5);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            /* Membuat header tetap di atas saat scroll */
            top: 0;
            z-index: var(--z-sticky);
            box-shadow: var(--shadow-sm);
        }

        .header-left,
        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--secondary);
            padding: var(--spacing-1) var(--spacing-3);
            border-radius: var(--radius-full);
            /* Membuatnya lebih rounded */
            border: 1px solid var(--border);
            max-width: 400px;
            flex-grow: 1;
            /* Agar bisa mengisi ruang jika ada */
        }

        .search-bar i {
            color: var(--muted-foreground);
            margin-right: var(--spacing-2);
        }

        .search-bar input {
            border: none;
            background: transparent;
            outline: none;
            flex-grow: 1;
            padding: var(--spacing-2) 0;
            font-size: var(--font-size-sm);
        }

        .search-bar input::placeholder {
            color: var(--muted-foreground);
        }

        .profile-dropdown {
            position: relative;
        }

        .profile-dropdown__toggle {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            cursor: pointer;
            padding: var(--spacing-1);
            border-radius: var(--radius-full);
            /* Avatar bulat */
            transition: var(--transition-all);
        }

        .profile-dropdown__toggle:hover {
            background: var(--secondary-hover);
        }

        .profile-dropdown__toggle img {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            object-fit: cover;
            border: 2px solid var(--border);
        }

        .profile-dropdown__toggle span {
            font-weight: 500;
            font-size: var(--font-size-sm);
        }

        .profile-dropdown__menu {
            position: absolute;
            top: calc(100% + var(--spacing-2));
            /* Jarak dari toggle */
            right: 0;
            background: var(--popover);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 220px;
            z-index: var(--z-dropdown);
            opacity: 0;
            transform: translateY(-10px);
            visibility: hidden;
            transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
        }

        .profile-dropdown__menu.show {
            opacity: 1;
            transform: translateY(0);
            visibility: visible;
        }

        .profile-dropdown__item {
            display: flex;
            /* Untuk ikon dan teks */
            align-items: center;
            gap: var(--spacing-2);
            padding: var(--spacing-2) var(--spacing-3);
            color: var(--popover-foreground);
            transition: var(--transition-all);
            font-size: var(--font-size-sm);
        }

        .profile-dropdown__item i {
            width: 16px;
            text-align: center;
            color: var(--muted-foreground);
        }

        .profile-dropdown__item:hover {
            background: var(--primary);
            color: var(--primary-foreground);
            text-decoration: none;
        }

        .profile-dropdown__item:hover i {
            color: var(--primary-foreground);
        }

        .profile-dropdown__divider {
            height: 1px;
            background-color: var(--border);
            margin: var(--spacing-1) 0;
        }

        .theme-toggle {
            padding: var(--spacing-2);
            border-radius: var(--radius-full);
            /* Bulat */
            background: transparent;
            /* Lebih subtle */
            color: var(--muted-foreground);
            font-size: var(--font-size-lg);
            transition: var(--transition-all);
            line-height: 1;
            /* Menghindari perubahan tinggi saat ikon berubah */
        }

        .theme-toggle:hover {
            background: var(--secondary-hover);
            color: var(--foreground);
        }

        .theme-toggle i {
            margin: 0;
        }

        /* Reset gap default dari button */

        .main-content {
            padding: var(--spacing-5);
            flex-grow: 1;
            /* Mengisi sisa ruang di main-wrapper */
        }

        .page-section {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


        /* ==========================================================================
           Komponen UI Kustom
           ========================================================================== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-4);
            margin-bottom: var(--spacing-5);
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            /* Radius lebih besar untuk card */
            box-shadow: var(--shadow);
            padding: var(--spacing-5);
            transition: var(--transition-all);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-3px);
        }

        .card-header {
            padding-bottom: var(--spacing-3);
            margin-bottom: var(--spacing-3);
            border-bottom: 1px solid var(--border);
        }

        .card-header h3 {
            margin-bottom: var(--spacing-1);
        }

        .card-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-1);
        }

        .card-description {
            font-size: var(--font-size-sm);
            color: var(--muted-foreground);
            margin-bottom: var(--spacing-3);
        }

        .card-footer {
            padding-top: var(--spacing-3);
            margin-top: var(--spacing-3);
            border-top: 1px solid var(--border);
        }


        .apartments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-5);
        }

        .apartment-card {
            /* adalah .card */
            overflow: hidden;
            /* Agar gambar tidak keluar dari border-radius */
        }

        .apartment-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-bottom: 1px solid var(--border);
            margin: calc(var(--spacing-5) * -1) calc(var(--spacing-5) * -1) var(--spacing-3) calc(var(--spacing-5) * -1);
            /* Negatif margin untuk full-width image */
            border-top-left-radius: var(--radius-lg);
            /* Sesuaikan dengan card */
            border-top-right-radius: var(--radius-lg);
        }

        .apartment-card .card-body {
            /* Wrapper jika diperlukan untuk konten setelah gambar */
            padding-top: 0;
            /* Karena gambar sudah ada margin bawah */
        }

        .apartment-card h3 {
            font-size: var(--font-size-md);
            margin-bottom: var(--spacing-2);
        }

        .apartment-card p {
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-1);
        }

        .apartment-actions {
            display: flex;
            gap: var(--spacing-2);
            margin-top: var(--spacing-4);
            flex-wrap: wrap;
            /* Agar tombol wrap di layar kecil */
        }


        .filter-section {
            display: flex;
            gap: var(--spacing-3);
            margin-bottom: var(--spacing-5);
            flex-wrap: wrap;
            /* Agar filter wrap */
            align-items: center;
            padding: var(--spacing-4);
            background-color: var(--card);
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
        }

        .filter-section select,
        .filter-section button {
            /* Ukuran sudah diatur oleh elemen form dasar */
            flex-grow: 1;
            /* Agar elemen filter mengisi ruang */
            min-width: 180px;
            /* Lebar minimum sebelum wrap */
        }


        .table-container {
            overflow-x: auto;
            /* Penting untuk tabel responsif */
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card);
        }

        th,
        td {
            padding: var(--spacing-3) var(--spacing-4);
            text-align: left;
            border-bottom: 1px solid var(--border);
            font-size: var(--font-size-sm);
        }

        th {
            background: var(--secondary);
            /* Header tabel lebih soft */
            color: var(--secondary-foreground);
            font-weight: 600;
            text-transform: uppercase;
            /* Teks header kapital */
            letter-spacing: 0.05em;
        }

        tbody tr:last-child td {
            border-bottom: none;
            /* Hapus border bawah baris terakhir */
        }

        tbody tr:hover {
            background-color: var(--accent);
        }


        .badge {
            padding: var(--spacing-1) var(--spacing-2);
            border-radius: var(--radius-full);
            /* Badge bulat */
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: capitalize;
        }

        .badge--active {
            background: var(--success);
            color: var(--success-foreground);
        }

        .badge--pending {
            background: var(--warning);
            color: var(--warning-foreground);
        }

        .badge--due,
        .badge--inactive {
            background: var(--destructive);
            color: var(--destructive-foreground);
        }

        .badge--info {
            background: var(--info);
            color: var(--info-foreground);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            /* Lebih gelap */
            backdrop-filter: blur(4px);
            /* Efek blur modern */
            display: none;
            /* Default tersembunyi */
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal-backdrop);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        .modal {
            /* Ganti nama .modal jadi .modal-dialog */
            /* max-width: 600px; Sudah diatur di .modal__dialog */
            /* width: 90%; */
            transform: scale(0.95) translateY(20px);
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }

        .modal-overlay.show .modal {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .modal__dialog {
            /* Ini menjadi container untuk modal content */
            max-width: 600px;
            width: calc(100% - var(--spacing-8));
            /* Memberi sedikit margin di layar kecil */
            background: var(--card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            display: flex;
            flex-direction: column;
        }

        .modal__content {
            /* Konten utama modal, padding di sini */
            padding: var(--spacing-5);
            overflow-y: auto;
            /* Jika konten modal panjang */
            max-height: 80vh;
            /* Batas tinggi modal */
        }

        .modal__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: var(--spacing-3);
            border-bottom: 1px solid var(--border);
            margin-bottom: var(--spacing-4);
        }

        .modal__header .modal-title {
            /* Judul modal */
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: 0;
        }

        .modal__footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-3);
            padding-top: var(--spacing-4);
            border-top: 1px solid var(--border);
            margin-top: var(--spacing-4);
        }

        .form-group {
            margin-bottom: var(--spacing-4);
        }

        .form-label {
            font-weight: 500;
            margin-bottom: var(--spacing-2);
            display: block;
            font-size: var(--font-size-sm);
        }

        .form-control {
            /* Sudah ada style dasar, ini hanya jika perlu override */
        }

        .form-control.is-invalid {
            border-color: var(--destructive);
            box-shadow: 0 0 0 2px var(--destructive_hover);
            /* Atau ring warna destructive */
        }

        .invalid-feedback {
            color: var(--destructive);
            font-size: var(--font-size-sm);
            margin-top: var(--spacing-1);
            display: none;
        }

        .form-control.is-invalid+.invalid-feedback,
        /* Jika feedback setelah input */
        .is-invalid~.invalid-feedback

        /* Jika feedback di dalam group */
            {
            display: block;
        }


        /* Tombol (Buttons) */
        .btn {
            padding: var(--spacing-2) var(--spacing-4);
            border-radius: var(--radius-md);
            font-weight: 500;
            transition: var(--transition-all);
            line-height: 1.5;
            /* Pastikan tinggi konsisten */
            border: 1px solid transparent;
            /* Untuk outline button */
        }

        .btn i {
            /* Ikon di dalam tombol */
            font-size: var(--font-size-base);
            /* Sesuaikan ukuran ikon */
        }

        .btn--primary {
            background: var(--primary);
            color: var(--primary-foreground);
            border-color: var(--primary);
        }

        .btn--primary:hover {
            background: var(--primary-hover);
            border-color: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn--secondary {
            background: var(--secondary);
            color: var(--secondary-foreground);
            border-color: var(--border);
        }

        .btn--secondary:hover {
            background: var(--secondary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn--danger {
            background: var(--destructive);
            color: var(--destructive-foreground);
            border-color: var(--destructive);
        }

        .btn--danger:hover {
            background: var(--destructive-hover);
            border-color: var(--destructive-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn--outline-primary {
            background: transparent;
            color: var(--primary);
            border-color: var(--primary);
        }

        .btn--outline-primary:hover {
            background: var(--primary);
            color: var(--primary-foreground);
        }

        .btn-sm {
            /* Tombol ukuran kecil */
            padding: var(--spacing-1) var(--spacing-2);
            font-size: var(--font-size-sm);
        }

        .btn-lg {
            /* Tombol ukuran besar */
            padding: var(--spacing-3) var(--spacing-5);
            font-size: var(--font-size-md);
        }

        .btn-close {
            /* Tombol close untuk modal, notifikasi */
            background: transparent;
            color: var(--muted-foreground);
            font-size: var(--font-size-xl);
            padding: var(--spacing-1);
            border-radius: var(--radius-full);
        }

        .btn-close:hover {
            color: var(--foreground);
            background: var(--secondary-hover);
        }

        .btn-close i {
            margin: 0;
        }


        .notification-toast {
            position: fixed;
            bottom: var(--spacing-5);
            /* Ubah ke bawah */
            right: var(--spacing-5);
            background: var(--card);
            border: 1px solid var(--border);
            border-left-width: 4px;
            /* Border kiri sebagai indikator tipe */
            padding: var(--spacing-3) var(--spacing-4);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            z-index: var(--z-toast);
            max-width: 400px;
            width: calc(100% - var(--spacing-10));
            display: none;
            /* Default tersembunyi */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .notification-toast.show {
            display: flex;
            /* Menggunakan flex untuk align item */
            align-items: flex-start;
            /* Konten dan tombol close */
            gap: var(--spacing-3);
            opacity: 1;
            transform: translateY(0);
        }

        .notification-toast__icon {
            font-size: var(--font-size-lg);
            padding-top: var(--spacing-px);
            /* Penyesuaian alignment kecil */
        }

        .notification-toast__content {
            flex-grow: 1;
        }

        .notification-toast__title {
            font-weight: 600;
            margin-bottom: var(--spacing-1);
            display: block;
            /* Agar margin bottom bekerja */
        }

        .notification-toast__body {
            font-size: var(--font-size-sm);
            color: var(--muted-foreground);
        }

        .notification-toast__close-btn {
            /* Menggunakan .btn-close styling */
            margin-left: auto;
            /* Dorong ke kanan */
            align-self: flex-start;
        }

        .notification-toast--success {
            border-left-color: var(--success);
        }

        .notification-toast--success .notification-toast__icon {
            color: var(--success);
        }

        .notification-toast--warning {
            border-left-color: var(--warning);
        }

        .notification-toast--warning .notification-toast__icon {
            color: var(--warning);
        }

        .notification-toast--error {
            border-left-color: var(--destructive);
        }

        .notification-toast--error .notification-toast__icon {
            color: var(--destructive);
        }

        .notification-toast--info {
            border-left-color: var(--info);
        }

        .notification-toast--info .notification-toast__icon {
            color: var(--info);
        }


        .app-footer {
            background: var(--background);
            /* Footer lebih menyatu dengan background utama */
            border-top: 1px solid var(--border);
            padding: var(--spacing-4);
            text-align: center;
            height: var(--footer-height);
            color: var(--muted-foreground);
            font-size: var(--font-size-sm);
            margin-top: auto;
            /* Mendorong footer ke bawah jika konten pendek */
        }


        /* ==========================================================================
           Desain Responsif
           ========================================================================== */
        /* Tablet dan layar lebih kecil */
        @media (max-width: 1024px) {
            .sidebar {
                position: fixed;
                /* Kembali ke fixed untuk mobile overlay */
                left: 0;
                top: 0;
                transform: translateX(-100%);
                /* Default tersembunyi */
                z-index: var(--z-fixed);
                /* Di atas segalanya kecuali modal */
            }

            .sidebar.show {
                /* Kelas untuk menampilkan sidebar di mobile */
                transform: translateX(0);
            }

            .main-wrapper {
                /* margin-left: 0; Tidak perlu karena sidebar fixed */
            }

            .app-header .search-bar {
                display: none;
                /* Sembunyikan search bar di header tablet untuk ruang */
            }
        }

        /* Mobile */
        @media (max-width: 768px) {
            :root {
                --header-height: 60px;
                /* Header lebih kecil di mobile */
            }

            .app-header {
                padding: 0 var(--spacing-3);
            }

            .profile-dropdown__toggle span {
                /* Sembunyikan nama pengguna, tampilkan avatar saja */
                display: none;
            }

            .main-content {
                padding: var(--spacing-4);
            }

            .stats-grid {
                grid-template-columns: 1fr;
                /* Satu kolom di mobile */
            }

            .apartments-grid {
                grid-template-columns: 1fr;
                /* Satu kolom di mobile */
            }

            .filter-section {
                flex-direction: column;
                gap: var(--spacing-3);
            }

            .filter-section select,
            .filter-section button {
                width: 100%;
            }

            .modal__dialog {
                max-width: calc(100% - var(--spacing-4));
                /* Modal lebih sempit di mobile */
                margin: var(--spacing-2);
            }

            .notification-toast {
                right: var(--spacing-2);
                left: var(--spacing-2);
                bottom: var(--spacing-2);
                width: auto;
                /* Mengisi lebar dengan margin */
                max-width: none;
            }

            .btn-sm {
                /* Ukuran tombol kecil lebih sering dipakai di mobile */
                padding: var(--spacing-2) var(--spacing-3);
            }
        }

        /* Untuk sidebar collapsed yang menampilkan ikon saja, bisa ditambahkan style di sini */
        /* @media (min-width: 1025px) {
            .sidebar.collapsed {
                width: var(--sidebar-width-collapsed);
                transform: translateX(0);
            }
            .sidebar.collapsed .sidebar-brand__icon {
                margin: 0 auto; 
            }
            .sidebar.collapsed .nav-link {
                justify-content: center;
            }
            .main-wrapper.sidebar-collapsed {
                margin-left: var(--sidebar-width-collapsed);
            }
        } */


        /* ==========================================================================
           Aksesibilitas Tambahan & Preferensi Pengguna
           ========================================================================== */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                /* Hanya sekali animasi */
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
                /* Nonaktifkan smooth scrolling */
            }
        }

        /* Fokus terlihat jelas untuk pengguna keyboard */
        :focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
            box-shadow: 0 0 0 4px var(--background), 0 0 0 6px var(--primary) !important;
            /* !important untuk override */
            border-radius: var(--radius-sm);
        }

        /* Khusus untuk input yang sudah punya style fokus sendiri */
        input:focus-visible,
        select:focus-visible,
        textarea:focus-visible {
            box-shadow: 0 0 0 2px var(--ring) !important;
        }


        /* ==========================================================================
           Gaya Cetak (Print Styles)
           ========================================================================== */
        @media print {
            body {
                background-color: #fff;
                /* Background putih untuk cetak */
                color: #000;
                /* Teks hitam */
                display: block;
                /* Reset flex display */
            }

            .sidebar,
            .app-header,
            .app-footer,
            .no-print,
            .theme-toggle,
            #sidebarToggle,
            .profile-dropdown {
                display: none !important;
                /* Sembunyikan elemen yang tidak perlu dicetak */
            }

            .main-wrapper {
                /* margin-left: 0; Tidak relevan karena display block */
                height: auto;
                overflow-y: visible;
            }

            .main-content {
                padding: 0;
            }

            .card,
            .table-container {
                box-shadow: none;
                border: 1px solid #ccc;
            }

            a {
                color: #000;
                text-decoration: underline;
            }

            a[href^="http"]::after {
                content: " (" attr(href) ")";
                /* Tampilkan URL untuk link eksternal */
                font-size: 0.8em;
            }
        }
    </style>
</head>

<body>
    <!-- Sidebar Navigasi Utama -->
    <aside class="sidebar" id="sidebar" aria-label="Navigasi Utama">
        <div class="sidebar-brand">
            <i class="fas fa-home-lg-alt sidebar-brand__icon" aria-hidden="true"></i>
            <!-- Menggunakan ikon yang lebih relevan -->
            <span class="sidebar-brand__text">RentEase</span>
        </div>
        <nav aria-label="Menu Aplikasi">
            <ul class="nav-menu">
                <li class="nav-item"><a href="#dashboard" class="nav-link active" data-page="dashboard"><i
                            class="fas fa-tachometer-alt fa-fw" aria-hidden="true"></i>
                        <span>Dashboard</span></a></li>
                <li class="nav-item"><a href="#properties" class="nav-link" data-page="properties"><i
                            class="fas fa-building fa-fw" aria-hidden="true"></i> <span>Properti</span></a></li>
                <li class="nav-item"><a href="#bookings" class="nav-link" data-page="bookings"><i
                            class="fas fa-calendar-check fa-fw" aria-hidden="true"></i> <span>Booking</span></a>
                </li>
                <li class="nav-item"><a href="#favorites" class="nav-link" data-page="favorites"><i
                            class="fas fa-heart fa-fw" aria-hidden="true"></i> <span>Favorit</span></a></li>
                <li class="nav-item"><a href="#payments" class="nav-link" data-page="payments"><i
                            class="fas fa-credit-card fa-fw" aria-hidden="true"></i> <span>Pembayaran</span></a>
                </li>
                <li class="nav-item"><a href="#maintenance" class="nav-link" data-page="maintenance"><i
                            class="fas fa-tools fa-fw" aria-hidden="true"></i> <span>Maintenance</span></a></li>
                <li class="nav-item"><a href="#messages" class="nav-link" data-page="messages"><i
                            class="fas fa-envelope fa-fw" aria-hidden="true"></i> <span>Pesan</span></a></li>
                <li class="nav-item"><a href="#profile" class="nav-link" data-page="profile"><i
                            class="fas fa-user-circle fa-fw" aria-hidden="true"></i> <span>Profil
                            Saya</span></a></li>
            </ul>
        </nav>
    </aside>

    <!-- Kontainer Utama Aplikasi -->
    <div class="main-wrapper" id="mainWrapper">
        <!-- Header Aplikasi -->
        <header class="app-header">
            <div class="header-left">
                <button type="button" class="btn btn--secondary btn-icon no-print" id="sidebarToggle"
                    aria-label="Buka atau Tutup Navigasi" aria-expanded="true">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="search-bar">
                    <i class="fas fa-search" aria-hidden="true"></i>
                    <input type="search" id="searchInput" placeholder="Cari properti, penyewa..."
                        aria-label="Pencarian global">
                </div>
            </div>
            <div class="header-right">
                <button type="button" class="theme-toggle no-print" id="themeToggleBtn"
                    aria-label="Ganti Tema Gelap/Terang">
                    <i class="fas fa-moon"></i> <!-- Ikon akan diubah oleh JS -->
                </button>
                <div class="profile-dropdown">
                    <button type="button" class="profile-dropdown__toggle" id="profileDropdownToggle"
                        aria-haspopup="true" aria-expanded="false" aria-controls="profileDropdownMenu">
                        <img src="https://i.pravatar.cc/40?u=renteaseuser" alt="Avatar Pengguna" width="40"
                            height="40">
                        <span>Pengguna Terhormat</span>
                        <i class="fas fa-chevron-down fa-xs" aria-hidden="true"></i>
                    </button>
                    <div class="profile-dropdown__menu" id="profileDropdownMenu" role="menu"
                        aria-labelledby="profileDropdownToggle">
                        <a href="#profile" class="profile-dropdown__item" role="menuitem"
                            data-page-nav="profile"><i class="fas fa-user-edit fa-fw" aria-hidden="true"></i>
                            Edit Profil</a>
                        <a href="#settings" class="profile-dropdown__item" role="menuitem"
                            data-page-nav="settings"><i class="fas fa-cog fa-fw" aria-hidden="true"></i>
                            Pengaturan Akun</a>
                        <div class="profile-dropdown__divider" role="separator"></div>
                        <a href="#logout" id="logoutButton" class="profile-dropdown__item" role="menuitem"><i
                                class="fas fa-sign-out-alt fa-fw" aria-hidden="true"></i> Logout</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Konten Utama Halaman -->
        <main class="main-content" id="pageContentContainer" role="main" aria-live="polite">
            <!-- Konten halaman akan dimuat di sini oleh JavaScript -->
            <section id="dashboard-content" class="page-section active" aria-labelledby="dashboard-title">
                <h1 id="dashboard-title">Dashboard</h1>
                <div class="stats-grid">
                    <div class="card">
                        <h3 class="card-title">Booking Aktif</h3>
                        <p class="lead" data-stat="activeBookings">12</p>
                        <small class="text-muted">Total booking yang sedang berjalan.</small>
                    </div>
                    <div class="card">
                        <h3 class="card-title">Pembayaran Tertunda</h3>
                        <p class="lead" data-stat="pendingPayments">3</p>
                        <small class="text-muted">Jumlah tagihan yang belum dibayar.</small>
                    </div>
                    <div class="card">
                        <h3 class="card-title">Permintaan Maintenance</h3>
                        <p class="lead" data-stat="maintenanceRequests">5</p>
                        <small class="text-muted">Laporan kerusakan yang perlu ditangani.</small>
                    </div>
                    <div class="card">
                        <h3 class="card-title">Properti Favorit</h3>
                        <p class="lead" data-stat="favoriteProperties">8</p>
                        <small class="text-muted">Properti yang Anda simpan.</small>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Aktivitas Terbaru</h2>
                        <p class="card-description">Monitor kegiatan penting dalam sistem.</p>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tanggal</th>
                                    <th>Aktivitas</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="activityTableBody">
                                <tr>
                                    <td>2025-05-27</td>
                                    <td>Booking Properti "Apartemen Harmoni A-101" oleh Budi Santoso</td>
                                    <td><span class="badge badge--active">Aktif</span></td>
                                </tr>
                                <tr>
                                    <td>2025-05-26</td>
                                    <td>Pembayaran sewa untuk "Villa Damai Blok C2" telah diterima</td>
                                    <td><span class="badge badge--info">Selesai</span></td>
                                </tr>
                                <tr>
                                    <td>2025-05-25</td>
                                    <td>Jatuh tempo sewa Unit 12A "Residensi Mentari"</td>
                                    <td><span class="badge badge--due">Jatuh Tempo</span></td>
                                </tr>
                                <tr>
                                    <td>2025-05-24</td>
                                    <td>Permintaan perbaikan AC di "Apartemen Sejahtera Lt.5"</td>
                                    <td><span class="badge badge--pending">Tertunda</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="properties-content" class="page-section" style="display: none;"
                aria-labelledby="properties-title">
                <h1 id="properties-title">Daftar Properti</h1>
                <div class="filter-section">
                    <select id="priceRange" aria-label="Filter berdasarkan rentang harga">
                        <option value="">Semua Harga</option>
                        <option value="5-10">Rp 5jt - 10jt</option>
                        <option value="10-20">Rp 10jt - 20jt</option>
                        <option value="20+">Diatas Rp 20jt</option>
                    </select>
                    <select id="bedrooms" aria-label="Filter berdasarkan jumlah kamar tidur">
                        <option value="">Semua Kamar</option>
                        <option value="1">1 Kamar Tidur</option>
                        <option value="2">2 Kamar Tidur</option>
                        <option value="3">3+ Kamar Tidur</option>
                    </select>
                    <select id="amenities" aria-label="Filter berdasarkan fasilitas">
                        <option value="">Semua Fasilitas</option>
                        <option value="parking">Parkir</option>
                        <option value="gym">Gym</option>
                        <option value="pool">Kolam Renang</option>
                        <option value="furnished">Full Furnished</option>
                    </select>
                    <button type="button" class="btn btn--primary" id="applyFilterBtn"><i
                            class="fas fa-filter"></i> Terapkan Filter</button>
                </div>
                <div class="apartments-grid" id="propertiesGrid">
                    <!-- Contoh Card Properti -->
                    <div class="apartment-card card">
                        <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60"
                            alt="Apartemen Mewah dengan Pemandangan Kota">
                        <div class="card-body">
                            <h3>Apartemen Modern di Pusat Kota</h3>
                            <p><i class="fas fa-bed"></i> 2 Kamar Tidur <i class="fas fa-bath ml-2"></i> 1 Kamar
                                Mandi</p>
                            <p><i class="fas fa-ruler-combined"></i> Luas: 60 m²</p>
                            <p class="font-weight-bold text-primary">Harga: Rp 10.000.000/bulan</p>
                            <div class="apartment-actions">
                                <button type="button" class="btn btn--primary btn-sm" data-action="detail"
                                    data-property-id="prop001"><i class="fas fa-info-circle"></i>
                                    Detail</button>
                                <button type="button" class="btn btn--secondary btn-sm" data-action="favorite"
                                    data-property-id="prop001" aria-pressed="false"><i class="far fa-heart"></i>
                                    Simpan</button>
                            </div>
                        </div>
                    </div>
                    <div class="apartment-card card">
                        <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60"
                            alt="Studio Nyaman Dekat Kampus">
                        <div class="card-body">
                            <h3>Studio Nyaman Dekat Kampus</h3>
                            <p><i class="fas fa-bed"></i> 1 Kamar Tidur <i class="fas fa-bath ml-2"></i> 1 Kamar
                                Mandi</p>
                            <p><i class="fas fa-ruler-combined"></i> Luas: 35 m²</p>
                            <p class="font-weight-bold text-primary">Harga: Rp 5.500.000/bulan</p>
                            <div class="apartment-actions">
                                <button type="button" class="btn btn--primary btn-sm" data-action="detail"
                                    data-property-id="prop002"><i class="fas fa-info-circle"></i>
                                    Detail</button>
                                <button type="button" class="btn btn--secondary btn-sm" data-action="favorite"
                                    data-property-id="prop002" aria-pressed="false"><i class="far fa-heart"></i>
                                    Simpan</button>
                            </div>
                        </div>
                    </div>
                    <!-- Properti lain akan dimuat di sini -->
                </div>
                <div class="card mt-5">
                    <h2 class="card-title">Riwayat Penelusuran</h2>
                    <div class="apartments-grid" id="recentlyViewedGrid">
                        <p>Anda belum melihat properti apa pun baru-baru ini.</p>
                    </div>
                </div>
            </section>

            <section id="profile-content" class="page-section" style="display: none;"
                aria-labelledby="profile-title">
                <h1 id="profile-title">Profil Pengguna</h1>
                <div class="card">
                    <h2 class="card-title">Informasi Pengguna</h2>
                    <p><strong>Nama:</strong> Pengguna Terhormat</p>
                    <p><strong>Email:</strong> pengguna@example.com</p>
                    <p><strong>Telepon:</strong> 0812-3456-7890</p>
                    <p><strong>Bergabung Sejak:</strong> 1 Januari 2024</p>
                    <button type="button" class="btn btn--primary mt-3"><i class="fas fa-edit"></i> Edit
                        Profil</button>
                </div>
            </section>

            <section id="bookings-content" class="page-section" style="display: none;"
                aria-labelledby="bookings-title">
                <h1 id="bookings-title">Manajemen Booking</h1>
                <div class="card">
                    <div class="card-header"
                        style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h2 class="card-title">Daftar Booking Anda</h2>
                            <p class="card-description">Kelola semua jadwal booking properti.</p>
                        </div>
                        <button type="button" class="btn btn--primary" id="addBookingBtn"><i
                                class="fas fa-plus"></i> Tambah Booking Baru</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID Booking</th>
                                    <th>Nama Penyewa</th>
                                    <th>Properti</th>
                                    <th>Tanggal</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="bookingTableBody">
                                <!-- Data booking akan dimuat oleh JavaScript -->
                                <tr>
                                    <td colspan="6" style="text-align:center;">Memuat data booking...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="favorites-content" class="page-section" style="display: none;"
                aria-labelledby="favorites-title">
                <h1 id="favorites-title">Properti Favorit Saya</h1>
                <p class="lead mb-4">Ini adalah daftar properti yang telah Anda simpan sebagai favorit.</p>
                <div class="apartments-grid" id="favoritesGrid">
                    <p>Anda belum memiliki properti favorit.</p>
                </div>
            </section>

            <section id="payments-content" class="page-section" style="display: none;"
                aria-labelledby="payments-title">
                <h1 id="payments-title">Riwayat Pembayaran</h1>
                <div class="card">
                    <h2 class="card-title">Riwayat Transaksi Keuangan</h2>
                    <p class="card-description">Semua catatan pembayaran sewa dan tagihan lainnya.</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID Transaksi</th>
                                    <th>Tanggal</th>
                                    <th>Deskripsi</th>
                                    <th>Jumlah</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>TRX00123</td>
                                    <td>2025-05-27</td>
                                    <td>Pembayaran Sewa Apartemen Harmoni A-101 (Juni)</td>
                                    <td>Rp 10.000.000</td>
                                    <td><span class="badge badge--active">Lunas</span></td>
                                </tr>
                                <tr>
                                    <td>TRX00122</td>
                                    <td>2025-04-28</td>
                                    <td>Tagihan Listrik Unit Villa Damai C2</td>
                                    <td>Rp 550.000</td>
                                    <td><span class="badge badge--active">Lunas</span></td>
                                </tr>
                                <tr>
                                    <td>TRX00121</td>
                                    <td>2025-04-05</td>
                                    <td>Deposit Keamanan Apartemen Sejahtera Lt.5</td>
                                    <td>Rp 2.000.000</td>
                                    <td><span class="badge badge--info">Deposit</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="maintenance-content" class="page-section" style="display: none;"
                aria-labelledby="maintenance-title">
                <h1 id="maintenance-title">Permintaan Maintenance</h1>
                <div class="card">
                    <h2 class="card-title">Laporan & Status Perbaikan</h2>
                    <p class="card-description">Lacak semua permintaan perbaikan dan status pengerjaannya.</p>
                    <button type="button" class="btn btn--primary mb-4"><i class="fas fa-plus"></i> Buat
                        Permintaan Baru</button>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID Laporan</th>
                                    <th>Tanggal</th>
                                    <th>Properti</th>
                                    <th>Deskripsi Masalah</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>MAINT-005</td>
                                    <td>2025-05-27</td>
                                    <td>Apartemen Sejahtera Lt.5 / Unit 502</td>
                                    <td>AC di kamar utama tidak dingin.</td>
                                    <td><span class="badge badge--pending">Dalam Proses</span></td>
                                    <td><button type="button" class="btn btn--secondary btn-sm"><i
                                                class="fas fa-eye"></i> Lihat</button></td>
                                </tr>
                                <tr>
                                    <td>MAINT-004</td>
                                    <td>2025-05-20</td>
                                    <td>Villa Damai Blok C2</td>
                                    <td>Keran wastafel bocor.</td>
                                    <td><span class="badge badge--active">Selesai</span></td>
                                    <td><button type="button" class="btn btn--secondary btn-sm"><i
                                                class="fas fa-eye"></i> Lihat</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="messages-content" class="page-section" style="display: none;"
                aria-labelledby="messages-title">
                <h1 id="messages-title">Kotak Pesan</h1>
                <div class="card">
                    <h2 class="card-title">Pesan Masuk dan Terkirim</h2>
                    <p class="card-description">Komunikasi dengan pemilik properti atau penyewa.</p>
                    <div style="text-align: center; padding: var(--spacing-5);">
                        <i class="fas fa-comments fa-3x text-muted mb-3"></i>
                        <p>Belum ada pesan saat ini. Mulai percakapan baru atau tunggu pesan masuk.</p>
                        <button type="button" class="btn btn--primary"><i class="fas fa-paper-plane"></i> Kirim
                            Pesan Baru</button>
                    </div>
                </div>
            </section>
            <section id="settings-content" class="page-section" style="display: none;"
                aria-labelledby="settings-title">
                <h1 id="settings-title">Pengaturan Akun</h1>
                <div class="card">
                    <h2 class="card-title">Preferensi dan Keamanan</h2>
                    <p class="card-description">Sesuaikan pengaturan aplikasi dan kelola keamanan akun Anda.</p>
                    <p>Fitur pengaturan akan segera hadir di sini!</p>
                </div>
            </section>


        </main>

        <!-- Footer Aplikasi -->
        <footer class="app-footer no-print">
            <small>&copy; <span id="currentYear">2024</span> RentEase Platform. Hak Cipta Dilindungi
                Undang-Undang. Dirancang dengan <i class="fas fa-heart text-danger"></i> oleh Tim
                RentEase.</small>
        </footer>
    </div>

    <!-- Modal untuk Form Booking -->
    <div class="modal-overlay" id="bookingModalOverlay" aria-labelledby="bookingModalTitle" aria-hidden="true"
        role="dialog">
        <div class="modal" id="bookingModal" role="document">
            <div class="modal__content">
                <form id="bookingForm" novalidate>
                    <div class="modal__header">
                        <h2 class="modal-title" id="bookingModalTitle">Tambah Booking Baru</h2>
                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Tutup Modal">
                            <i class="fas fa-times" aria-hidden="true"></i>
                        </button>
                    </div>
                    <div class="modal__body">
                        <input type="hidden" id="bookingId" name="bookingId">
                        <div class="form-group">
                            <label for="tenantName" class="form-label">Nama Penyewa</label>
                            <input type="text" class="form-control" id="tenantName" name="tenantName" required
                                placeholder="cth: Budi Santoso">
                            <div class="invalid-feedback">Nama penyewa wajib diisi.</div>
                        </div>
                        <div class="form-group">
                            <label for="property" class="form-label">Properti yang Dibooking</label>
                            <input type="text" class="form-control" id="property" name="property" required
                                placeholder="cth: Apartemen Harmoni A-101">
                            <div class="invalid-feedback">Nama properti wajib diisi.</div>
                        </div>
                        <div class="form-group">
                            <label for="bookingDate" class="form-label">Tanggal Mulai Sewa</label>
                            <input type="date" class="form-control" id="bookingDate" name="bookingDate"
                                required>
                            <div class="invalid-feedback">Tanggal booking wajib diisi.</div>
                        </div>
                        <div class="form-group">
                            <label for="bookingStatus" class="form-label">Status Booking</label>
                            <select class="form-control" id="bookingStatus" name="bookingStatus" required>
                                <option value="">Pilih Status...</option>
                                <option value="active">Aktif</option>
                                <option value="pending">Menunggu Konfirmasi</option>
                                <option value="inactive">Tidak Aktif/Selesai</option>
                            </select>
                            <div class="invalid-feedback">Status booking wajib dipilih.</div>
                        </div>
                    </div>
                    <div class="modal__footer">
                        <button type="button" class="btn btn--secondary" data-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn--primary"><i class="fas fa-save"></i> Simpan
                            Booking</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notifikasi Toast -->
    <div class="notification-toast" id="notificationToast" role="alert" aria-live="assertive"
        aria-atomic="true">
        <div class="notification-toast__icon" aria-hidden="true">
            <i class="fas fa-info-circle"></i> <!-- Ikon default, akan diubah oleh JS -->
        </div>
        <div class="notification-toast__content">
            <strong class="notification-toast__title">Notifikasi</strong>
            <div class="notification-toast__body">Pesan notifikasi akan muncul di sini.</div>
        </div>
        <button type="button" class="btn-close notification-toast__close-btn" aria-label="Tutup Notifikasi">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
    </div>

    <script>
        /**
         * RentEase - Aplikasi Manajemen Properti (Vanilla JS SPA)
         * Penulis: Tim Pengembang RentEase
         * Versi: 1.0.0
         *
         * Deskripsi:
         * Script JavaScript ini mengelola semua fungsionalitas sisi klien untuk RentEase.
         * Ini termasuk routing SPA sederhana, manajemen state, interaksi DOM,
         * validasi form, dan komunikasi dengan (calon) API.
         * Ditulis murni dalam JavaScript (ES6+), tanpa framework/library eksternal.
         */
        (function () {
            'use strict'; // Menerapkan mode ketat untuk kualitas kode yang lebih baik

            // ==========================================================================
            // State Aplikasi Global
            // ==========================================================================
            const AppState = {
                currentTheme: localStorage.getItem('theme') || 'light',
                isSidebarOpen: window.innerWidth >= 1024, // Sidebar terbuka di desktop secara default
                activePage: 'dashboard', // Halaman aktif saat ini
                bookings: [ // Contoh data booking awal
                    { id: 'bk001', tenant: 'Sarah Wijayanti', property: 'Apartemen Cendana Unit 12A', date: '2025-06-15', status: 'active' },
                    { id: 'bk002', tenant: 'Riko Pratama Putra', property: 'Studio Minimalis Blok B2', date: '2025-07-01', status: 'pending' },
                    { id: 'bk003', tenant: 'Ahmad Subagja', property: 'Rumah Cluster Magnolia No. 5', date: '2025-05-20', status: 'inactive' },
                ],
                // Contoh data properti awal (akan digunakan untuk favorit dan pencarian)
                properties: [
                    { id: 'prop001', title: 'Apartemen Modern di Pusat Kota', description: '2 Kamar Tidur, 1 Kamar Mandi', image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60', price: 'Rp 10.000.000/bulan', specs: { bedrooms: 2, bathrooms: 1, area: 60 } },
                    { id: 'prop002', title: 'Studio Nyaman Dekat Kampus', description: '1 Kamar Tidur, 1 Kamar Mandi', image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60', price: 'Rp 5.500.000/bulan', specs: { bedrooms: 1, bathrooms: 1, area: 35 } },
                    { id: 'prop003', title: 'Villa Asri dengan Kolam Pribadi', description: '3 Kamar Tidur, 2 Kamar Mandi', image: 'https://images.unsplash.com/photo-1613490493576-7fde63acd811?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dmlsbGF8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60', price: 'Rp 25.000.000/bulan', specs: { bedrooms: 3, bathrooms: 2, area: 150 } },
                ],
                favorites: ['prop002'], // ID properti yang difavoritkan
                recentlyViewed: [], // ID properti yang baru dilihat
                editingBookingId: null, // ID booking yang sedang diedit, null jika menambah baru
                searchQuery: '',
                toastTimeout: null, // Untuk mengelola timeout notifikasi
            };

            // ==========================================================================
            // Referensi Elemen DOM
            // ==========================================================================
            const DOM = {
                body: document.body,
                sidebar: document.getElementById('sidebar'),
                sidebarToggle: document.getElementById('sidebarToggle'),
                mainWrapper: document.getElementById('mainWrapper'),
                themeToggleBtn: document.getElementById('themeToggleBtn'),
                profileDropdownToggle: document.getElementById('profileDropdownToggle'),
                profileDropdownMenu: document.getElementById('profileDropdownMenu'),
                logoutButton: document.getElementById('logoutButton'),
                searchInput: document.getElementById('searchInput'),

                // Modal Booking
                bookingModalOverlay: document.getElementById('bookingModalOverlay'),
                bookingModal: document.getElementById('bookingModal'),
                bookingForm: document.getElementById('bookingForm'),
                bookingModalTitle: document.getElementById('bookingModalTitle'),
                bookingIdInput: document.getElementById('bookingId'), // Hidden input untuk ID
                addBookingBtn: document.getElementById('addBookingBtn'),
                bookingTableBody: document.getElementById('bookingTableBody'),

                // Konten Halaman & Navigasi
                pageContentContainer: document.getElementById('pageContentContainer'),
                navLinks: document.querySelectorAll('.nav-link, .profile-dropdown__item[data-page-nav]'),
                pageSections: document.querySelectorAll('.page-section'),

                // Properti & Favorit
                propertiesGrid: document.getElementById('propertiesGrid'),
                favoritesGrid: document.getElementById('favoritesGrid'),
                recentlyViewedGrid: document.getElementById('recentlyViewedGrid'),
                applyFilterBtn: document.getElementById('applyFilterBtn'),

                // Notifikasi
                notificationToast: document.getElementById('notificationToast'),
                notificationToastIcon: document.querySelector('#notificationToast .notification-toast__icon i'),
                notificationToastTitle: document.querySelector('#notificationToast .notification-toast__title'),
                notificationToastBody: document.querySelector('#notificationToast .notification-toast__body'),
                notificationToastCloseBtn: document.querySelector('#notificationToast .notification-toast__close-btn'),

                // Lainnya
                currentYearSpan: document.getElementById('currentYear'),
            };

            // ==========================================================================
            // Fungsi Utilitas
            // ==========================================================================
            const Utils = {
                // Membersihkan string dari potensi XSS sederhana (hanya untuk tampilan, bukan pengganti sanitasi server-side)
                sanitizeHTML(str) {
                    if (!str) return '';
                    const temp = document.createElement('div');
                    temp.textContent = str;
                    return temp.innerHTML;
                },
                // Debounce function untuk menunda eksekusi fungsi (misal, pada input search)
                debounce(fn, delay) {
                    let timeoutId;
                    return function (...args) {
                        clearTimeout(timeoutId);
                        timeoutId = setTimeout(() => fn.apply(this, args), delay);
                    };
                },
                // Format tanggal ke format Indonesia (contoh: 17 Agustus 2024)
                formatDate(dateStr) {
                    if (!dateStr) return 'N/A';
                    const date = new Date(dateStr);
                    return date.toLocaleDateString('id-ID', {
                        day: 'numeric', month: 'long', year: 'numeric'
                    });
                },
                // Generate ID unik sederhana
                generateId(prefix = 'id') {
                    return `${prefix}${Date.now().toString(36)}${Math.random().toString(36).substr(2, 5)}`;
                },
                // Capitalize string
                capitalize(str) {
                    if (!str) return '';
                    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
                }
            };

            // ==========================================================================
            // Logika Aplikasi Utama (App Object)
            // ==========================================================================
            const App = {
                init() {
                    console.info('RentEase App Initializing...');
                    // Validasi apakah semua elemen DOM penting ada
                    for (const key in DOM) {
                        if (DOM[key] === null && key !== 'toastTimeout' && key !== 'bookingIdInput') { // bookingIdInput bisa null jika tidak sedang edit
                            console.error(`Elemen DOM krusial '${key}' tidak ditemukan. Aplikasi mungkin tidak berfungsi dengan benar.`);
                            // Anda bisa memilih untuk menghentikan aplikasi di sini jika elemen sangat krusial
                            // return; 
                        }
                    }

                    this.applyTheme(AppState.currentTheme, true); // Terapkan tema awal tanpa transisi
                    this.updateSidebarState(AppState.isSidebarOpen); // Atur state sidebar awal
                    this.updateCurrentYear();
                    this.setupEventListeners();

                    // Navigasi awal berdasarkan hash atau ke dashboard
                    const initialHash = window.location.hash.substring(1) || 'dashboard';
                    this.navigateTo(initialHash, true); // true untuk penanda navigasi awal

                    // Render data awal yang mungkin diperlukan di halaman default (dashboard)
                    this.renderBookings(); // Jika dashboard menampilkan booking
                    this.renderProperties(); // Jika properties tampil di dashboard atau sebagai halaman awal
                    this.renderFavorites(); // Jika favorites adalah bagian dari dashboard
                    this.renderRecentlyViewed(); // Jika ada di dashboard

                    console.info('RentEase App Initialized Successfully.');
                },

                setupEventListeners() {
                    // Tema
                    DOM.themeToggleBtn.addEventListener('click', () => this.toggleTheme());

                    // Sidebar
                    DOM.sidebarToggle.addEventListener('click', () => {
                        AppState.isSidebarOpen = !AppState.isSidebarOpen;
                        this.updateSidebarState(AppState.isSidebarOpen);
                    });

                    // Navigasi Halaman
                    DOM.navLinks.forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const page = link.dataset.page || link.hash.substring(1) || (link.dataset.pageNav);
                            if (page) {
                                this.navigateTo(page);
                                if (window.innerWidth < 1024 && AppState.isSidebarOpen) { // Tutup sidebar di mobile setelah navigasi
                                    AppState.isSidebarOpen = false;
                                    this.updateSidebarState(false);
                                }
                                if (DOM.profileDropdownMenu.classList.contains('show')) { // Tutup dropdown jika terbuka
                                    this.toggleProfileDropdown(false);
                                }
                            }
                        });
                    });
                    window.addEventListener('hashchange', () => this.navigateTo(window.location.hash.substring(1) || 'dashboard', true));

                    // Dropdown Profil
                    DOM.profileDropdownToggle.addEventListener('click', () => this.toggleProfileDropdown());
                    DOM.logoutButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.logout();
                    });
                    // Tutup dropdown jika klik di luar
                    document.addEventListener('click', (e) => {
                        if (!DOM.profileDropdownToggle.contains(e.target) && !DOM.profileDropdownMenu.contains(e.target)) {
                            if (DOM.profileDropdownMenu.classList.contains('show')) {
                                this.toggleProfileDropdown(false);
                            }
                        }
                    });


                    // Pencarian (contoh sederhana)
                    if (DOM.searchInput) {
                        DOM.searchInput.addEventListener('input', Utils.debounce((e) => {
                            AppState.searchQuery = e.target.value.toLowerCase();
                            console.log('Mencari:', AppState.searchQuery);
                            // Implementasi logika pencarian di sini, misal filter properti jika di halaman properti
                            if (AppState.activePage === 'properties') this.renderProperties();
                        }, 500));
                    }

                    // Modal Booking
                    if (DOM.addBookingBtn) {
                        DOM.addBookingBtn.addEventListener('click', () => this.openBookingModal());
                    }
                    if (DOM.bookingForm) {
                        DOM.bookingForm.addEventListener('submit', (e) => this.handleBookingFormSubmit(e));
                    }
                    // Event listener untuk tombol close di modal dan klik di luar modal
                    DOM.bookingModalOverlay.addEventListener('click', (e) => {
                        if (e.target === DOM.bookingModalOverlay || e.target.closest('[data-dismiss="modal"]')) {
                            this.closeBookingModal();
                        }
                    });

                    // Tombol close notifikasi
                    if (DOM.notificationToastCloseBtn) {
                        DOM.notificationToastCloseBtn.addEventListener('click', () => this.hideNotification());
                    }

                    // Filter Properti
                    if (DOM.applyFilterBtn) {
                        DOM.applyFilterBtn.addEventListener('click', () => this.applyPropertyFilters());
                    }

                    // Aksi pada card properti (Favorit & Detail/Recently Viewed)
                    // Menggunakan event delegation karena card properti bisa dinamis
                    if (DOM.propertiesGrid) {
                        DOM.propertiesGrid.addEventListener('click', (e) => {
                            const button = e.target.closest('button[data-action]');
                            if (!button) return;

                            const propertyId = button.dataset.propertyId;
                            const action = button.dataset.action;

                            if (action === 'favorite') {
                                this.toggleFavorite(propertyId, button);
                            } else if (action === 'detail') {
                                this.addToRecentlyViewed(propertyId);
                                // Di aplikasi nyata, ini akan navigasi ke halaman detail properti
                                this.showNotification(`Menampilkan detail untuk properti ${propertyId}`, 'Info Properti', 'info');
                            }
                        });
                    }
                    if (DOM.favoritesGrid) {
                        DOM.favoritesGrid.addEventListener('click', (e) => {
                            const button = e.target.closest('button[data-action="remove-favorite"]');
                            if (button) {
                                const propertyId = button.dataset.propertyId;
                                this.toggleFavorite(propertyId); // Ini akan menghapus dari favorit dan merender ulang
                            }
                        });
                    }


                    // Responsivitas: Cek ulang state sidebar saat ukuran window berubah
                    window.addEventListener('resize', Utils.debounce(() => {
                        const होनाChahiyeKhula = window.innerWidth >= 1024;
                        if (AppState.isSidebarOpen !== होनाChahiyeKhula && window.innerWidth >= 1024) { // Hanya update jika ada perubahan state desktop
                            AppState.isSidebarOpen = होनाChahiyeKhula;
                            this.updateSidebarState(AppState.isSidebarOpen);
                        } else if (window.innerWidth < 1024 && AppState.isSidebarOpen) {
                            // Di mobile, biarkan user yang kontrol, jangan auto close/open saat resize
                            // Kecuali jika sebelumnya terbuka di desktop, lalu resize ke mobile, maka tetap terbuka.
                            // Jika user menutupnya manual di mobile, state akan update.
                        }
                    }, 200));

                    // Keyboard accessibility untuk modal dan dropdown
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'Escape') {
                            if (DOM.bookingModalOverlay.classList.contains('show')) {
                                this.closeBookingModal();
                            }
                            if (DOM.profileDropdownMenu.classList.contains('show')) {
                                this.toggleProfileDropdown(false);
                            }
                        }
                    });
                },

                // --- Manajemen Tema ---
                applyTheme(theme, instant = false) {
                    DOM.body.classList.toggle('dark', theme === 'dark');
                    DOM.themeToggleBtn.innerHTML = `<i class="fas fa-${theme === 'light' ? 'moon' : 'sun'}"></i>`;
                    DOM.themeToggleBtn.setAttribute('aria-label', `Ganti ke tema ${theme === 'light' ? 'Gelap' : 'Terang'}`);

                    if (!instant) {
                        DOM.body.style.transition = 'background-color 0.3s ease, color 0.3s ease';
                        // Hapus transisi setelah selesai agar tidak mengganggu animasi lain
                        setTimeout(() => { DOM.body.style.transition = ''; }, 300);
                    }
                },
                toggleTheme() {
                    AppState.currentTheme = AppState.currentTheme === 'light' ? 'dark' : 'light';
                    localStorage.setItem('theme', AppState.currentTheme);
                    this.applyTheme(AppState.currentTheme);
                    this.showNotification(`Tema diubah ke ${AppState.currentTheme === 'light' ? 'Terang' : 'Gelap'}`, 'Preferensi Disimpan', 'info');
                },

                // --- Manajemen Sidebar ---
                updateSidebarState(isOpen) {
                    DOM.sidebar.classList.toggle('collapsed', !isOpen);
                    DOM.sidebar.classList.toggle('show', isOpen && window.innerWidth < 1024); // Kelas 'show' hanya untuk mobile overlay
                    DOM.sidebarToggle.setAttribute('aria-expanded', isOpen.toString());
                    // Di mobile, jika sidebar terbuka, cegah scroll body
                    if (window.innerWidth < 1024) {
                        DOM.body.style.overflow = isOpen ? 'hidden' : '';
                    } else {
                        DOM.body.style.overflow = ''; // Pastikan overflow normal di desktop
                    }
                },

                // --- Navigasi SPA ---
                navigateTo(pageId, isInitialLoad = false) {
                    if (!pageId) pageId = 'dashboard'; // Default ke dashboard
                    AppState.activePage = pageId;

                    // Update URL hash (kecuali jika navigasi dari event hashchange atau initial load dari hash)
                    if (!isInitialLoad || window.location.hash.substring(1) !== pageId) {
                        window.location.hash = pageId;
                    }

                    // Tampilkan section yang sesuai, sembunyikan yang lain
                    DOM.pageSections.forEach(section => {
                        section.style.display = section.id === `${pageId}-content` ? 'block' : 'none';
                        section.classList.toggle('active', section.id === `${pageId}-content`);
                    });

                    // Update kelas 'active' pada link navigasi
                    DOM.navLinks.forEach(link => {
                        const linkPage = link.dataset.page || link.hash.substring(1) || link.dataset.pageNav;
                        link.classList.toggle('active', linkPage === pageId);
                    });

                    // Set judul dokumen sesuai halaman
                    const activeLink = document.querySelector(`.nav-link[data-page="${pageId}"], .profile-dropdown__item[data-page-nav="${pageId}"]`);
                    const pageTitle = activeLink ? (activeLink.querySelector('span')?.textContent || activeLink.textContent).trim() : Utils.capitalize(pageId);
                    document.title = `RentEase - ${pageTitle}`;

                    // Fokus ke judul halaman untuk aksesibilitas
                    const pageHeader = document.getElementById(`${pageId}-title`);
                    if (pageHeader) pageHeader.focus();

                    // Panggil fungsi render spesifik jika halaman tertentu yang aktif
                    if (pageId === 'bookings') this.renderBookings();
                    if (pageId === 'properties') this.renderProperties();
                    if (pageId === 'favorites') this.renderFavorites();
                },

                // --- Dropdown Profil ---
                toggleProfileDropdown(forceState) {
                    const shouldShow = forceState !== undefined ? forceState : !DOM.profileDropdownMenu.classList.contains('show');
                    DOM.profileDropdownMenu.classList.toggle('show', shouldShow);
                    DOM.profileDropdownToggle.setAttribute('aria-expanded', shouldShow.toString());
                    if (shouldShow) {
                        DOM.profileDropdownMenu.querySelector('a, button').focus(); // Fokus ke item pertama
                    } else {
                        DOM.profileDropdownToggle.focus(); // Kembalikan fokus ke tombol toggle
                    }
                },
                logout() {
                    // Logika logout (hapus token, redirect, dll.)
                    this.showNotification('Anda telah berhasil logout.', 'Logout Berhasil', 'success');
                    this.toggleProfileDropdown(false);
                    // Contoh: kembali ke halaman login (jika ada) atau refresh
                    // window.location.href = '/login.html';
                    setTimeout(() => window.location.reload(), 1500); // Refresh setelah notifikasi
                },

                // --- Notifikasi Toast ---
                showNotification(message, title = 'Notifikasi', type = 'info') { // type: info, success, warning, error
                    clearTimeout(AppState.toastTimeout); // Hapus timeout sebelumnya jika ada

                    DOM.notificationToastTitle.textContent = title;
                    DOM.notificationToastBody.innerHTML = Utils.sanitizeHTML(message); // Sanitasi pesan

                    // Set ikon dan kelas berdasarkan tipe notifikasi
                    const icons = {
                        info: 'fa-info-circle',
                        success: 'fa-check-circle',
                        warning: 'fa-exclamation-triangle',
                        error: 'fa-times-circle'
                    };
                    DOM.notificationToastIcon.className = `fas ${icons[type] || icons.info}`;

                    // Hapus kelas tipe sebelumnya dan tambahkan yang baru
                    DOM.notificationToast.className = 'notification-toast'; // Reset kelas
                    DOM.notificationToast.classList.add(`notification-toast--${type}`, 'show');

                    AppState.toastTimeout = setTimeout(() => this.hideNotification(), 5000); // Sembunyikan setelah 5 detik
                },
                hideNotification() {
                    DOM.notificationToast.classList.remove('show');
                    clearTimeout(AppState.toastTimeout);
                },

                // --- Manajemen Booking (CRUD) ---
                renderBookings() {
                    if (!DOM.bookingTableBody) return; // Pastikan elemen ada

                    if (AppState.bookings.length === 0) {
                        DOM.bookingTableBody.innerHTML = `<tr><td colspan="6" style="text-align:center; padding: var(--spacing-5);">Belum ada data booking. Silakan tambahkan booking baru.</td></tr>`;
                        return;
                    }

                    DOM.bookingTableBody.innerHTML = AppState.bookings.map(booking => `
                    <tr>
                        <td>${Utils.sanitizeHTML(booking.id)}</td>
                        <td>${Utils.sanitizeHTML(booking.tenant)}</td>
                        <td>${Utils.sanitizeHTML(booking.property)}</td>
                        <td>${Utils.formatDate(booking.date)}</td>
                        <td><span class="badge badge--${booking.status}">${Utils.sanitizeHTML(Utils.capitalize(booking.status))}</span></td>
                        <td>
                            <button type="button" class="btn btn--secondary btn-sm" data-action="edit" data-id="${booking.id}" aria-label="Edit booking ${booking.id}"><i class="fas fa-edit"></i> Edit</button>
                            <button type="button" class="btn btn--danger btn-sm" data-action="delete" data-id="${booking.id}" aria-label="Hapus booking ${booking.id}"><i class="fas fa-trash-alt"></i> Hapus</button>
                        </td>
                    </tr>
                `).join('');

                    // Tambahkan event listener untuk tombol aksi setelah render
                    this.setupBookingActionButtons();
                },
                setupBookingActionButtons() {
                    DOM.bookingTableBody.querySelectorAll('button[data-action]').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const action = e.currentTarget.dataset.action;
                            const id = e.currentTarget.dataset.id;
                            if (action === 'edit') {
                                this.openBookingModal(id);
                            } else if (action === 'delete') {
                                this.deleteBooking(id);
                            }
                        });
                    });
                },
                openBookingModal(bookingId = null) {
                    DOM.bookingForm.reset(); // Reset form
                    // Hapus kelas validasi error sebelumnya
                    DOM.bookingForm.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));

                    AppState.editingBookingId = bookingId;
                    if (bookingId) {
                        const booking = AppState.bookings.find(b => b.id === bookingId);
                        if (!booking) {
                            this.showNotification('Data booking tidak ditemukan.', 'Error', 'error');
                            return;
                        }
                        DOM.bookingModalTitle.textContent = 'Edit Data Booking';
                        DOM.bookingIdInput.value = booking.id; // Set ID untuk form
                        DOM.bookingForm.tenantName.value = booking.tenant;
                        DOM.bookingForm.property.value = booking.property;
                        DOM.bookingForm.bookingDate.value = booking.date; // Format YYYY-MM-DD
                        DOM.bookingForm.bookingStatus.value = booking.status;
                    } else {
                        DOM.bookingModalTitle.textContent = 'Tambah Booking Baru';
                        DOM.bookingIdInput.value = ''; // Kosongkan ID
                        DOM.bookingForm.bookingDate.valueAsDate = new Date(); // Default tanggal hari ini
                    }
                    DOM.bookingModalOverlay.classList.add('show');
                    DOM.bookingModalOverlay.setAttribute('aria-hidden', 'false');
                    DOM.body.style.overflow = 'hidden'; // Cegah scroll background
                    DOM.bookingForm.tenantName.focus(); // Fokus ke input pertama
                },
                closeBookingModal() {
                    DOM.bookingModalOverlay.classList.remove('show');
                    DOM.bookingModalOverlay.setAttribute('aria-hidden', 'true');
                    DOM.body.style.overflow = ''; // Kembalikan scroll
                    AppState.editingBookingId = null;
                },
                handleBookingFormSubmit(e) {
                    e.preventDefault();
                    if (!this.validateBookingForm()) return;

                    const formData = new FormData(DOM.bookingForm);
                    const bookingData = {
                        id: formData.get('bookingId') || Utils.generateId('bk'),
                        tenant: formData.get('tenantName').trim(),
                        property: formData.get('property').trim(),
                        date: formData.get('bookingDate'),
                        status: formData.get('bookingStatus')
                    };

                    if (AppState.editingBookingId) { // Edit mode
                        const index = AppState.bookings.findIndex(b => b.id === AppState.editingBookingId);
                        if (index > -1) {
                            AppState.bookings[index] = bookingData;
                            this.showNotification('Data booking berhasil diperbarui.', 'Sukses', 'success');
                        }
                    } else { // Add mode
                        AppState.bookings.unshift(bookingData); // Tambah ke awal array
                        this.showNotification('Booking baru berhasil ditambahkan.', 'Sukses', 'success');
                    }
                    this.renderBookings();
                    this.closeBookingModal();
                },
                validateBookingForm() {
                    let isValid = true;
                    const requiredFields = ['tenantName', 'property', 'bookingDate', 'bookingStatus'];
                    requiredFields.forEach(fieldName => {
                        const input = DOM.bookingForm[fieldName];
                        const feedback = input.nextElementSibling && input.nextElementSibling.classList.contains('invalid-feedback') ? input.nextElementSibling : null;
                        if (!input.value.trim()) {
                            input.classList.add('is-invalid');
                            if (feedback) feedback.style.display = 'block';
                            isValid = false;
                        } else {
                            input.classList.remove('is-invalid');
                            if (feedback) feedback.style.display = 'none';
                        }
                    });
                    return isValid;
                },
                deleteBooking(bookingId) {
                    if (confirm(`Apakah Anda yakin ingin menghapus booking ID: ${bookingId}?`)) {
                        AppState.bookings = AppState.bookings.filter(b => b.id !== bookingId);
                        this.renderBookings();
                        this.showNotification(`Booking ID: ${bookingId} berhasil dihapus.`, 'Sukses', 'success');
                    }
                },

                // --- Manajemen Properti, Favorit, Riwayat ---
                createPropertyCardHTML(property, isFavoritePage = false) {
                    const isFavorited = AppState.favorites.includes(property.id);
                    const favoriteIcon = isFavorited ? 'fas fa-heart text-danger' : 'far fa-heart';
                    const favoriteText = isFavoritePage ? 'Hapus dari Favorit' : (isFavorited ? 'Difavoritkan' : 'Simpan');
                    const favoriteAction = isFavoritePage ? 'remove-favorite' : 'favorite';
                    const favoriteButtonClass = isFavoritePage ? 'btn--danger' : (isFavorited ? 'btn--primary' : 'btn--secondary');

                    return `
                    <div class="apartment-card card" data-property-id="${property.id}">
                        <img src="${Utils.sanitizeHTML(property.image)}" alt="Gambar ${Utils.sanitizeHTML(property.title)}">
                        <div class="card-body">
                            <h3>${Utils.sanitizeHTML(property.title)}</h3>
                            <p><i class="fas fa-bed"></i> ${property.specs.bedrooms} Kamar Tidur 
                               <i class="fas fa-bath" style="margin-left:var(--spacing-2)"></i> ${property.specs.bathrooms} Kamar Mandi</p>
                            <p><i class="fas fa-ruler-combined"></i> Luas: ${property.specs.area} m²</p>
                            <p style="font-weight:bold; color:var(--primary); font-size:var(--font-size-md); margin-top:var(--spacing-2);">${Utils.sanitizeHTML(property.price)}</p>
                            <div class="apartment-actions">
                                <button type="button" class="btn btn--primary btn-sm" data-action="detail" data-property-id="${property.id}"><i class="fas fa-info-circle"></i> Detail</button>
                                <button type="button" class="btn ${favoriteButtonClass} btn-sm" data-action="${favoriteAction}" data-property-id="${property.id}" aria-pressed="${isFavorited.toString()}">
                                    <i class="${favoriteIcon}"></i> ${favoriteText}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                },
                renderProperties() {
                    if (!DOM.propertiesGrid) return;
                    let filteredProperties = AppState.properties;
                    // Implementasi filter berdasarkan AppState.searchQuery dan filter dropdowns
                    if (AppState.searchQuery) {
                        filteredProperties = filteredProperties.filter(p =>
                            p.title.toLowerCase().includes(AppState.searchQuery) ||
                            p.description.toLowerCase().includes(AppState.searchQuery)
                        );
                    }
                    // Tambahkan filter dari dropdowns jika ada nilai yang dipilih
                    const priceRange = document.getElementById('priceRange')?.value;
                    // ... logika filter lain ...

                    if (filteredProperties.length === 0) {
                        DOM.propertiesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align:center;">Tidak ada properti yang cocok dengan kriteria Anda.</p>';
                        return;
                    }
                    DOM.propertiesGrid.innerHTML = filteredProperties.map(prop => this.createPropertyCardHTML(prop)).join('');
                },
                applyPropertyFilters() {
                    // Ambil nilai filter
                    const price = document.getElementById('priceRange').value;
                    const bedrooms = document.getElementById('bedrooms').value;
                    const amenities = document.getElementById('amenities').value;

                    console.log('Menerapkan filter:', { price, bedrooms, amenities });
                    // Panggil renderProperties yang akan menggunakan nilai filter ini
                    this.renderProperties();
                    this.showNotification('Filter properti telah diterapkan.', 'Filter Aktif', 'info');
                },

                toggleFavorite(propertyId, buttonElement = null) {
                    const index = AppState.favorites.indexOf(propertyId);
                    const property = AppState.properties.find(p => p.id === propertyId);
                    if (!property) return;

                    if (index === -1) { // Belum favorit, tambahkan
                        AppState.favorites.push(propertyId);
                        this.showNotification(`"${property.title}" ditambahkan ke favorit.`, 'Favorit', 'success');
                        if (buttonElement) {
                            buttonElement.innerHTML = `<i class="fas fa-heart text-danger"></i> Difavoritkan`;
                            buttonElement.classList.replace('btn--secondary', 'btn--primary'); // Atau style lain untuk favorit
                            buttonElement.setAttribute('aria-pressed', 'true');
                        }
                    } else { // Sudah favorit, hapus
                        AppState.favorites.splice(index, 1);
                        this.showNotification(`"${property.title}" dihapus dari favorit.`, 'Favorit', 'info');
                        if (buttonElement && !buttonElement.closest('#favoritesGrid-content')) { // Jangan ubah jika di halaman favorit
                            buttonElement.innerHTML = `<i class="far fa-heart"></i> Simpan`;
                            buttonElement.classList.replace('btn--primary', 'btn--secondary');
                            buttonElement.setAttribute('aria-pressed', 'false');
                        }
                    }
                    // Render ulang daftar favorit jika pengguna ada di halaman favorit
                    if (AppState.activePage === 'favorites') {
                        this.renderFavorites();
                    }
                    // Update juga di properties grid jika ada tombol yang sama
                    const propGridButton = DOM.propertiesGrid.querySelector(`button[data-action="favorite"][data-property-id="${propertyId}"]`);
                    if (propGridButton && propGridButton !== buttonElement) {
                        const isNowFavorited = AppState.favorites.includes(propertyId);
                        propGridButton.innerHTML = `<i class="${isNowFavorited ? 'fas fa-heart text-danger' : 'far fa-heart'}"></i> ${isNowFavorited ? 'Difavoritkan' : 'Simpan'}`;
                        propGridButton.classList.toggle('btn--primary', isNowFavorited);
                        propGridButton.classList.toggle('btn--secondary', !isNowFavorited);
                        propGridButton.setAttribute('aria-pressed', isNowFavorited.toString());
                    }

                },
                renderFavorites() {
                    if (!DOM.favoritesGrid) return;
                    const favoriteProperties = AppState.properties.filter(prop => AppState.favorites.includes(prop.id));
                    if (favoriteProperties.length === 0) {
                        DOM.favoritesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align:center;">Anda belum memiliki properti favorit. Mulai tambahkan beberapa!</p>';
                        return;
                    }
                    DOM.favoritesGrid.innerHTML = favoriteProperties.map(prop => this.createPropertyCardHTML(prop, true)).join('');
                },

                addToRecentlyViewed(propertyId) {
                    // Hapus jika sudah ada (agar pindah ke depan)
                    AppState.recentlyViewed = AppState.recentlyViewed.filter(id => id !== propertyId);
                    // Tambahkan ke depan
                    AppState.recentlyViewed.unshift(propertyId);
                    // Batasi jumlah item
                    if (AppState.recentlyViewed.length > 3) {
                        AppState.recentlyViewed.pop();
                    }
                    this.renderRecentlyViewed();
                },
                renderRecentlyViewed() {
                    if (!DOM.recentlyViewedGrid) return;
                    const viewedProperties = AppState.properties.filter(prop => AppState.recentlyViewed.includes(prop.id))
                        .sort((a, b) => AppState.recentlyViewed.indexOf(a.id) - AppState.recentlyViewed.indexOf(b.id)); // Urutkan berdasarkan AppState.recentlyViewed

                    if (viewedProperties.length === 0) {
                        DOM.recentlyViewedGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align:center;">Belum ada riwayat penelusuran properti.</p>';
                        return;
                    }
                    DOM.recentlyViewedGrid.innerHTML = viewedProperties.map(prop => this.createPropertyCardHTML(prop)).join('');
                },

                // --- Lainnya ---
                updateCurrentYear() {
                    if (DOM.currentYearSpan) {
                        DOM.currentYearSpan.textContent = new Date().getFullYear();
                    }
                },
            };

            // ==========================================================================
            // Inisialisasi Aplikasi saat DOM siap
            // ==========================================================================
            document.addEventListener('DOMContentLoaded', () => {
                App.init();
            });

            // Expose App ke global scope (opsional, untuk debugging)
            // window.RentEaseApp = App; 
            // window.RentEaseState = AppState;

        })();
    </script>
</body>

</html>