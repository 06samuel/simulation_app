<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Platform penyewaan properti dengan pencarian lanjutan, pemesanan, dan manajemen pengguna.">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter :wght@400;500;600;700&family=Noto+Sans:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons " rel="stylesheet">

    <meta name="description"
        content="Green Valley: Modern apartment rental platform with SPA-like features in a single file.">
    <title>Green Valley Rentals</title>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <style>
        :root {
            --gv-primary-color: #28a745;
            /* Green */
            --gv-secondary-color: #6c757d;
            /* Gray */
            --gv-accent-color: #17a2b8;
            /* Teal */
            --gv-light-bg: #f8f9fa;
            --gv-dark-bg: #212529;
            --gv-light-text: #212529;
            --gv-dark-text: #f8f9fa;
            --gv-card-bg-light: #ffffff;
            --gv-card-bg-dark: #343a40;
            --gv-border-color-light: #dee2e6;
            --gv-border-color-dark: #495057;

            --font-family-sans-serif: 'Inter', 'Poppins', sans-serif;
            --bs-body-font-family: var(--font-family-sans-serif);

            /* Default to light theme */
            --current-bg: var(--gv-light-bg);
            --current-text: var(--gv-light-text);
            --current-card-bg: var(--gv-card-bg-light);
            --current-border-color: var(--gv-border-color-light);
            --current-primary: var(--gv-primary-color);
        }

        body.dark-theme {
            --current-bg: var(--gv-dark-bg);
            --current-text: var(--gv-dark-text);
            --current-card-bg: var(--gv-card-bg-dark);
            --current-border-color: var(--gv-border-color-dark);
            --current-primary: var(--gv-primary-color);
            /* Keep primary green or adjust if needed */
        }

        body {
            background-color: var(--current-bg);
            color: var(--current-text);
            font-family: var(--bs-body-font-family);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .navbar {
            background-color: var(--current-card-bg) !important;
            border-bottom: 1px solid var(--current-border-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .navbar-brand,
        .nav-link {
            color: var(--current-text) !important;
        }

        .nav-link.active {
            color: var(--current-primary) !important;
            font-weight: 600;
        }

        .nav-link:hover {
            color: var(--current-primary) !important;
        }

        .btn-primary {
            background-color: var(--current-primary);
            border-color: var(--current-primary);
        }

        .btn-primary:hover {
            opacity: 0.9;
            background-color: var(--current-primary);
            border-color: var(--current-primary);
        }

        .apartment-card {
            background-color: var(--current-card-bg);
            border: 1px solid var(--current-border-color);
            transition: all 0.3s ease;
        }

        .apartment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .apartment-card img {
            height: 200px;
            object-fit: cover;
        }

        .card-title {
            color: var(--current-primary);
        }

        .form-control,
        .form-select {
            background-color: var(--current-card-bg);
            color: var(--current-text);
            border-color: var(--current-border-color);
        }

        .form-control:focus,
        .form-select:focus {
            background-color: var(--current-card-bg);
            color: var(--current-text);
            border-color: var(--current-primary);
            box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
        }

        footer {
            background-color: var(--current-card-bg);
            border-top: 1px solid var(--current-border-color);
            color: var(--current-text);
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="sticky-top">
        <nav class="navbar navbar-expand-lg px-3">
            <div class="container-fluid">
                <a class="navbar-brand fw-bold" href="#dashboard">
                    <i class="fas fa-home text-success me-2"></i>Green Valley
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
                    aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="mainNav">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" data-route="dashboard" href="#dashboard">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-route="apartments" href="#apartments">Apartments</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-route="add-apartment" href="#add-apartment">Add New</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-route="profile" href="#profile">Profile</a>
                        </li>
                    </ul>
                    <button id="themeToggler" class="btn btn-outline-secondary ms-lg-2 mt-2 mt-lg-0">
                        <i class="fas fa-moon"></i> <span class="theme-text">Dark Mode</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="container py-4">
        <!-- Dashboard Page -->
        <section id="page-dashboard" class="page">
            <h1 class="mb-4 display-5">Welcome to Green Valley!</h1>
            <p class="lead">Your premium destination for finding the perfect apartment.</p>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="p-4 rounded apartment-card h-100">
                        <h3 class="card-title">Discover Apartments
                            <span class="material-icons" style=" color: var(--gv-accent-color);">verified</span>
                        </h3>
                        <p>Browse our extensive list of available apartments. Use advanced filters to find exactly what
                            you need.</p>
                        <a href="#apartments" data-route="apartments" class="btn btn-primary">View Apartments</a>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="p-4 rounded apartment-card h-100">
                        <h3 class="card-title">List Your Property</h3>
                        <p>Have an apartment to rent out? Add it to our platform and reach thousands of potential
                            tenants.</p>
                        <a href="#add-apartment" data-route="add-apartment" class="btn btn-outline-success">Add New
                            Listing</a>
                    </div>
                </div>
            </div>
            <div class="mt-4 p-4 rounded apartment-card">
                <h3>Quick Stats</h3>
                <p>Total Apartments Listed: <span id="totalApartmentsStat">0</span></p>
                <p>Average Price: $<span id="averagePriceStat">0</span>/month</p>
            </div>
        </section>

        <!-- Apartments List Page -->
        <section id="page-apartments" class="page">
            <h1 class="mb-4">Available Apartments</h1>
            <!-- Filters -->
            <div class="row mb-4 g-3 p-3 rounded apartment-card">
                <div class="col-md-4">
                    <input type="text" id="filterLocation" class="form-control"
                        placeholder="Filter by location (e.g., Downtown)">
                </div>
                <div class="col-md-3">
                    <select id="filterBedrooms" class="form-select">
                        <option value="">Any Bedrooms</option>
                        <option value="1">1 Bedroom</option>
                        <option value="2">2 Bedrooms</option>
                        <option value="3">3+ Bedrooms</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <input type="number" id="filterMaxPrice" class="form-control" placeholder="Max price (e.g. 1500)">
                </div>
                <div class="col-md-2 d-grid">
                    <button id="applyFiltersBtn" class="btn btn-primary">Filter</button>
                </div>
            </div>
            <!-- Apartment Cards Container -->
            <div id="apartmentListContainer" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                <!-- JS will populate this -->
                <p id="noApartmentsMessage" class="text-center w-100 lead" style="display: none;">No apartments found
                    matching your criteria.</p>
            </div>
        </section>

        <!-- Add Apartment Page (CRUD - Create) -->
        <section id="page-add-apartment" class="page">
            <h1 class="mb-4">Add New Apartment</h1>
            <form id="addApartmentForm" class="p-4 rounded apartment-card">
                <div class="mb-3">
                    <label for="aptName" class="form-label">Apartment Name/Title</label>
                    <input type="text" class="form-control" id="aptName" required>
                </div>
                <div class="mb-3">
                    <label for="aptLocation" class="form-label">Location (e.g., Downtown, Suburbia)</label>
                    <input type="text" class="form-control" id="aptLocation" required>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="aptPrice" class="form-label">Price (per month)</label>
                        <input type="number" class="form-control" id="aptPrice" required min="0">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="aptBedrooms" class="form-label">Bedrooms</label>
                        <select id="aptBedrooms" class="form-select" required>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4+</option>
                        </select>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="aptDescription" class="form-label">Description</label>
                    <textarea class="form-control" id="aptDescription" rows="3" required></textarea>
                </div>
                <div class="mb-3">
                    <label for="aptImageUrl" class="form-label">Image URL (e.g., https://.../image.jpg)</label>
                    <input type="url" class="form-control" id="aptImageUrl"
                        placeholder="https://via.placeholder.com/300x200" required>
                </div>
                <button type="submit" class="btn btn-success">Add Apartment</button>
            </form>
        </section>

        <!-- Profile Page -->
        <section id="page-profile" class="page">
            <h1 class="mb-4">User Profile</h1>
            <div class="p-4 rounded apartment-card">
                <form id="profileForm">
                    <div class="mb-3">
                        <label for="profileName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="profileName" value="John Doe">
                    </div>
                    <div class="mb-3">
                        <label for="profileEmail" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="profileEmail" value="john.doe@example.com">
                    </div>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="py-4 mt-auto text-center">
        <div class="container">
            <p class="mb-0">© <span id="currentYear"></span> Green Valley Rentals. All Rights Reserved.</p>
            <p class="mb-0 small">A Monolithic SPA Demo</p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

    <!-- Application JavaScript -->
    <script>
        // --- APPLICATION STATE ---
        const AppState = {
            currentPage: 'dashboard',
            theme: localStorage.getItem('theme') || 'light',
            apartments: [
                // Sample Data (mocking a backend)
                { id: 1, name: 'Cozy Downtown Studio', location: 'Downtown', price: 1200, bedrooms: 1, description: 'A charming studio in the heart of the city.', imageUrl: 'https://via.placeholder.com/300x200/28a745/ffffff?text=Apt+1' },
                { id: 2, name: 'Spacious Family Home', location: 'Suburbia', price: 2500, bedrooms: 3, description: 'Perfect for families, with a large backyard.', imageUrl: 'https://via.placeholder.com/300x200/17a2b8/ffffff?text=Apt+2' },
                { id: 3, name: 'Modern Loft Apartment', location: 'Downtown', price: 1800, bedrooms: 2, description: 'Sleek and stylish loft with city views.', imageUrl: 'https://via.placeholder.com/300x200/ffc107/000000?text=Apt+3' },
                { id: 4, name: 'Quiet Suburban Retreat', location: 'Suburbia', price: 1500, bedrooms: 2, description: 'Peaceful living away from the hustle.', imageUrl: 'https://via.placeholder.com/300x200/6f42c1/ffffff?text=Apt+4' }
            ],
            nextApartmentId: 5,
            userProfile: {
                name: 'John Doe',
                email: 'john.doe@example.com'
            }
        };

        // --- DOM ELEMENTS ---
        const DOMElements = {
            pages: document.querySelectorAll('.page'),
            navLinks: document.querySelectorAll('.nav-link[data-route]'),
            themeToggler: document.getElementById('themeToggler'),
            themeText: document.querySelector('#themeToggler .theme-text'),
            themeIcon: document.querySelector('#themeToggler .fa-moon, #themeToggler .fa-sun'),
            apartmentListContainer: document.getElementById('apartmentListContainer'),
            addApartmentForm: document.getElementById('addApartmentForm'),
            profileForm: document.getElementById('profileForm'),
            filterLocation: document.getElementById('filterLocation'),
            filterBedrooms: document.getElementById('filterBedrooms'),
            filterMaxPrice: document.getElementById('filterMaxPrice'),
            applyFiltersBtn: document.getElementById('applyFiltersBtn'),
            noApartmentsMessage: document.getElementById('noApartmentsMessage'),
            totalApartmentsStat: document.getElementById('totalApartmentsStat'),
            averagePriceStat: document.getElementById('averagePriceStat'),
            currentYear: document.getElementById('currentYear')
        };

        // --- "COMPONENT" FUNCTIONS (HTML Generators) ---
        function createApartmentCardHTML(apartment) {
            return `
                <div class="col">
                    <div class="card h-100 apartment-card">
                        <img src="${apartment.imageUrl || 'https://via.placeholder.com/300x200/cccccc/969696?text=No+Image'}" class="card-img-top" alt="${apartment.name}">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">${apartment.name}</h5>
                            <p class="card-text text-muted"><i class="fas fa-map-marker-alt me-1"></i>${apartment.location}</p>
                            <p class="card-text"><strong>$${apartment.price}/month</strong> | ${apartment.bedrooms} Bedroom(s)</p>
                            <p class="card-text small flex-grow-1">${apartment.description.substring(0, 100)}${apartment.description.length > 100 ? '...' : ''}</p>
                            <button class="btn btn-sm btn-outline-primary mt-auto" onclick="alert('Viewing details for ${apartment.name.replace(/'/g, "\\'")}')">View Details</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- RENDER FUNCTIONS ---
        function renderApartments(apartmentsToRender = AppState.apartments) {
            if (!DOMElements.apartmentListContainer) return;
            DOMElements.apartmentListContainer.innerHTML = '';
            if (apartmentsToRender.length === 0) {
                DOMElements.noApartmentsMessage.style.display = 'block';
            } else {
                DOMElements.noApartmentsMessage.style.display = 'none';
                apartmentsToRender.forEach(apt => {
                    DOMElements.apartmentListContainer.innerHTML += createApartmentCardHTML(apt);
                });
            }
        }

        function renderDashboardStats() {
            if (DOMElements.totalApartmentsStat) {
                DOMElements.totalApartmentsStat.textContent = AppState.apartments.length;
            }
            if (DOMElements.averagePriceStat) {
                const totalPrices = AppState.apartments.reduce((sum, apt) => sum + apt.price, 0);
                const avgPrice = AppState.apartments.length > 0 ? (totalPrices / AppState.apartments.length).toFixed(0) : 0;
                DOMElements.averagePriceStat.textContent = avgPrice;
            }
        }

        // --- ROUTING/NAVIGATION ---
        function navigateTo(pageId) {
            DOMElements.pages.forEach(page => page.classList.remove('active'));
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                targetPage.classList.add('active');
                AppState.currentPage = pageId;
                window.location.hash = pageId;

                DOMElements.navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.route === pageId);
                });

                // Specific actions on page load
                if (pageId === 'apartments') renderApartments();
                if (pageId === 'dashboard') renderDashboardStats();
                if (pageId === 'profile') loadProfileData();
            } else {
                console.warn(`Page with id "page-${pageId}" not found. Navigating to dashboard.`);
                navigateTo('dashboard'); // Fallback
            }
        }

        function handleHashChange() {
            const hash = window.location.hash.substring(1) || 'dashboard';
            navigateTo(hash);
        }

        // --- THEME MANAGEMENT ---
        function applyTheme(theme) {
            document.body.classList.toggle('dark-theme', theme === 'dark');
            DOMElements.themeText.textContent = theme === 'dark' ? 'Light Mode' : 'Dark Mode';
            DOMElements.themeIcon.classList.toggle('fa-moon', theme === 'light');
            DOMElements.themeIcon.classList.toggle('fa-sun', theme === 'dark');
            localStorage.setItem('theme', theme);
            AppState.theme = theme;
        }

        function toggleTheme() {
            const newTheme = AppState.theme === 'light' ? 'dark' : 'light';
            applyTheme(newTheme);
        }

        // --- DATA HANDLING (CRUD-like) ---
        function handleAddApartment(event) {
            event.preventDefault();
            const newApartment = {
                id: AppState.nextApartmentId++,
                name: DOMElements.addApartmentForm.aptName.value,
                location: DOMElements.addApartmentForm.aptLocation.value,
                price: parseInt(DOMElements.addApartmentForm.aptPrice.value),
                bedrooms: parseInt(DOMElements.addApartmentForm.aptBedrooms.value),
                description: DOMElements.addApartmentForm.aptDescription.value,
                imageUrl: DOMElements.addApartmentForm.aptImageUrl.value || `https://via.placeholder.com/300x200/cccccc/969696?text=Apt+${AppState.nextApartmentId - 1}`
            };
            AppState.apartments.push(newApartment);
            alert('Apartment added successfully!');
            DOMElements.addApartmentForm.reset();
            navigateTo('apartments'); // Show the updated list
        }

        function handleProfileSave(event) {
            event.preventDefault();
            AppState.userProfile.name = DOMElements.profileForm.profileName.value;
            AppState.userProfile.email = DOMElements.profileForm.profileEmail.value;
            alert('Profile updated successfully!');
        }

        function loadProfileData() {
            if (DOMElements.profileForm) {
                DOMElements.profileForm.profileName.value = AppState.userProfile.name;
                DOMElements.profileForm.profileEmail.value = AppState.userProfile.email;
            }
        }

        function handleFilterApartments() {
            const locationFilter = DOMElements.filterLocation.value.toLowerCase();
            const bedroomsFilter = parseInt(DOMElements.filterBedrooms.value);
            const maxPriceFilter = parseFloat(DOMElements.filterMaxPrice.value);

            const filteredApartments = AppState.apartments.filter(apt => {
                const matchesLocation = locationFilter ? apt.location.toLowerCase().includes(locationFilter) : true;
                const matchesBedrooms = bedroomsFilter ? apt.bedrooms >= bedroomsFilter : true;
                const matchesPrice = !isNaN(maxPriceFilter) ? apt.price <= maxPriceFilter : true;
                return matchesLocation && matchesBedrooms && matchesPrice;
            });
            renderApartments(filteredApartments);
        }


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set current year in footer
            if (DOMElements.currentYear) DOMElements.currentYear.textContent = new Date().getFullYear();

            // Apply initial theme
            applyTheme(AppState.theme);

            // Set up event listeners
            DOMElements.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo(link.dataset.route);
                    // For Bootstrap mobile nav, close it after click
                    const navbarToggler = document.querySelector('.navbar-toggler');
                    const mainNav = document.getElementById('mainNav');
                    if (navbarToggler.offsetParent !== null && mainNav.classList.contains('show')) { // Check if toggler is visible and nav is open
                        bootstrap.Collapse.getInstance(mainNav)?.hide();
                    }
                });
            });

            DOMElements.themeToggler.addEventListener('click', toggleTheme);

            if (DOMElements.addApartmentForm) {
                DOMElements.addApartmentForm.addEventListener('submit', handleAddApartment);
            }
            if (DOMElements.profileForm) {
                DOMElements.profileForm.addEventListener('submit', handleProfileSave);
            }
            if (DOMElements.applyFiltersBtn) {
                DOMElements.applyFiltersBtn.addEventListener('click', handleFilterApartments);
                // Optional: filter on input change for location and price
                DOMElements.filterLocation.addEventListener('input', handleFilterApartments);
                DOMElements.filterMaxPrice.addEventListener('input', handleFilterApartments);
                DOMElements.filterBedrooms.addEventListener('change', handleFilterApartments);
            }


            // Initial page load based on hash or default
            handleHashChange();
            window.addEventListener('hashchange', handleHashChange);
        });
    </script>
</body>

</html>