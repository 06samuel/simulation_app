<!DOCTYPE html>
<html lang="id" data-theme="light"> <!-- Tema default: terang, bisa diubah via JS -->

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pusat Notifikasi Rental Apartemen</title>
    <meta name="description"
        content="Dasbor pusat notifikasi SaaS modern dengan desain responsif, aksesibilitas, dan UI/UX tingkat profesional untuk rental apartemen. Dibangun dengan Vanilla HTML, CSS, dan JavaScript.">
    <meta name="keywords"
        content="notifikasi, rental, apartemen, dashboard, saas, vanilla js, spa, native, monolith, pusat notifikasi, manajemen apartemen">
    <meta name="author" content="Pengembang Aplikasi Anda">
    <meta name="theme-color" content="#6366f1"> <!-- Warna tema untuk address bar mobile -->

    <!-- Favicon (Contoh menggunakan ikon gedung dari Font Awesome sebagai placeholder, Anda bisa menggantinya dengan file .ico atau .png) -->
    <link rel="icon"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAACQAAAAAQAAAJAAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAABCgAwAEAAAAAQAAABAAAAAAVHRpeAAAAAlwSFlzAAALEwAACxMBAJqcGAAAA9FJREFUOE99k3tQ1FQcxz/33rv3ljsLgThYSAxESBBEXJFF1F+Ypmlo8mNMyU5s6ExTk7XJsjxhY10gZzPNjJm1dLLStOZMzQwxsXQmcagQGGlEUREJu7vb3Xt/d68D8H+8H8/z+Xw+5zcU5KRLLQNIlTQJEpGUiqK0JqUUkqS0lTwQpUeYcW5O2c2cKiqqkZqaiqWlJYGBgei2bQKR5Jk8iKRQFAWj0Yht28jMzASAxMRE7N+/Pws4j8eD4XA4XyfxIAmgEBIBkEgkCLxGo6F79+5h1qxr9b2pqQkXFxdRFEVVQQYDIZ7nYXh4OFEURRzHcTCdgIFgIJjJNTY2hsXFRf3e6OgoqqqC53mYnJwsL2c0GvVvC4VCGBkZ8b9fJpMhMzMTs7Oz+7oVCgXm5+eV9DM0NIRQKBRoPB7HNE0sy3KmZ6iFQtGLw8PDVFVVYa6urtLz8fFxDA4O/ul/NpuN2dnZNBaL0YjH43i2bQ/jAAgEAsjpRCAQ0Dk7O4vJyUm0tbWRkZERjo6Oks/NzR3EcbwEAYBCIQFwOBxQVXVNKBQSSJIkCAQCQLPZ/FzO6XRSpVQqCYVCgVQqFTM8PCxcLBZfSAQAUVFR+HtqKvLz81/y+fn5aGlpQQgBQRAcHR3FtWvXkGazcUzTNMgZABqNhoKCAmxvbxMEsFgsGB0dRXFxcV/4kZERnJ+fU1RVRVVVBAKB8Hk0GrX9qKmpYePj420+n49IJNJoNFotg8EAwzB/LjgchsrKSoaFhWE2mxEEQURERAxLgYSEBNvc3BRaLBZcv34dkUjEtm3bYHV11Y3FYmFmZkZRFAkhKBaLqKuri7u7u3rY2tqCMAzW1tYaDAYDoVgs5ufnJ9wJBAIoFApUVVWxbNky+XQ6HdRqtT9/d+zYMTY2Np7H4/FmZmYCz/P55ufnEQSB4eFhFBYWAjANkEgk4HA4gCRJAAzD8K97jUYjRUVFLHPmzM9VVVVjY8eOJStlFkugUqmkjY2NpFKpBEGAgUAg0MvLy+x8Pp8Kk5OT3PLly85isfj3K1eu3MBsNiPLMhqNBuFwGDqdDoFAABqNBqZpmpoqgKqq+vr6+vbTp0/L27ZtSwLg2bNn8Pb29nFZWdkCgGEYWJYFkiQBAK1WKwKBAGzbtuY2AEkSMzMztHfv3o9dXV0ZgLS0NKZMmfJ3kZGR7QCu6+r6P92/f18pFAp/AQD8//v370tUVFRqIpHIWVVVNcnMzLSrq6sdAFzXXUql0u/g4OCf4eFhtFotS7+Cc7kAAAAASUVORK5CYII=">

    <!-- Font Awesome (Ikon Online Gratis) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /*=============================================
=            VARIABEL GLOBAL & RESET          =
=============================================*/
        :root {
            /* Skema Warna Dasar (Mode Terang) */
            --primary-color: #6366f1;
            /* Indigo 500 */
            --primary-color-hover: #4f46e5;
            /* Indigo 600 */
            --primary-color-light: #e0e7ff;
            /* Indigo 100 */
            --primary-color-dark: #4338ca;
            /* Indigo 700 */
            --primary-color-rgb: 99, 102, 241;

            --secondary-color: #10b981;
            /* Emerald 500 */
            --secondary-color-hover: #059669;
            /* Emerald 600 */
            --secondary-color-light: #d1fae5;
            /* Emerald 100 */

            --accent-color: #f59e0b;
            /* Amber 500 */
            --accent-color-hover: #d97706;
            /* Amber 600 */
            --accent-color-light: #fef3c7;
            /* Amber 100 */

            --danger-color: #ef4444;
            /* Red 500 */
            --danger-color-hover: #dc2626;
            /* Red 600 */
            --danger-color-light: #fee2e2;
            /* Red 100 */

            --success-color: #22c55e;
            /* Green 500 */
            --success-color-light: #dcfce7;
            /* Green 100 */
            --success-color-hover: #16a34a;
            /* Green 600 */

            --warning-color: #eab308;
            /* Yellow 500 */
            --warning-color-light: #fef9c3;
            /* Yellow 100 */
            --warning-color-hover: #ca8a04;
            /* Yellow 600 */

            --info-color: #3b82f6;
            /* Blue 500 */
            --info-color-light: #dbeafe;
            /* Blue 100 */
            --info-color-hover: #2563eb;
            /* Blue 600 */

            --bg-color: #f3f4f6;
            /* Slate 100 (lebih terang dari slate 50) */
            --bg-color-alt: #ffffff;
            /* White */
            --text-color: #1f2937;
            /* Slate 800 */
            --text-color-muted: #6b7280;
            /* Slate 500 */
            --text-color-subtle: #9ca3af;
            /* Slate 400 */
            --border-color: #e5e7eb;
            /* Slate 200 */
            --border-color-strong: #d1d5db;
            /* Slate 300 */
            --card-bg-color: #ffffff;
            --card-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.07), 0 1px 2px -1px rgba(0, 0, 0, 0.05);
            --card-shadow-hover: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --input-bg-color: #f9fafb;
            /* Slate 50 */
            --input-border-color: var(--border-color-strong);
            --focus-ring-color: rgba(99, 102, 241, 0.4);

            /* Tipografi */
            --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            --font-size-base: 1rem;
            /* 16px */
            --font-size-xs: 0.75rem;
            /* 12px */
            --font-size-sm: 0.875rem;
            /* 14px */
            --font-size-lg: 1.125rem;
            /* 18px */
            --font-size-xl: 1.25rem;
            /* 20px */
            --font-size-2xl: 1.5rem;
            /* 24px */
            --font-size-3xl: 1.875rem;
            /* 30px */
            --font-size-4xl: 2.25rem;
            /* 36px */
            --font-weight-light: 300;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --line-height-normal: 1.6;
            --line-height-tight: 1.3;

            /* Border Radius */
            --border-radius-sm: 0.25rem;
            --border-radius-md: 0.5rem;
            --border-radius-lg: 0.75rem;
            --border-radius-xl: 1rem;
            --border-radius-full: 9999px;

            /* Spasi */
            --spacing-unit: 0.25rem;
            --spacing-px: 1px;
            --spacing-0: 0;
            --spacing-1: calc(1 * var(--spacing-unit));
            --spacing-2: calc(2 * var(--spacing-unit));
            --spacing-3: calc(3 * var(--spacing-unit));
            --spacing-4: calc(4 * var(--spacing-unit));
            --spacing-5: calc(5 * var(--spacing-unit));
            --spacing-6: calc(6 * var(--spacing-unit));
            --spacing-8: calc(8 * var(--spacing-unit));
            --spacing-10: calc(10 * var(--spacing-unit));
            --spacing-12: calc(12 * var(--spacing-unit));
            --spacing-16: calc(16 * var(--spacing-unit));
            --spacing-20: calc(20 * var(--spacing-unit));
            --spacing-24: calc(24 * var(--spacing-unit));

            /* Transisi */
            --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

            /* Layout */
            --max-width-container: 1320px;
            /* Sedikit lebih lebar */
            --header-height: 68px;
            --sidebar-width: 260px;
            --sidebar-width-collapsed: 80px;
        }

        [data-theme="dark"] {
            --primary-color: #818cf8;
            --primary-color-hover: #a5b4fc;
            --primary-color-light: #312e81;
            /* Indigo 800 (gelap) */
            --primary-color-dark: #c7d2fe;
            --primary-color-rgb: 129, 140, 248;

            --secondary-color: #34d399;
            --secondary-color-hover: #6ee7b7;
            --secondary-color-light: #047857;
            /* Emerald 700 (gelap) */

            --accent-color: #fbbf24;
            --accent-color-hover: #fcd34d;
            --accent-color-light: #92400e;
            /* Amber 700 (gelap) */

            --danger-color: #f87171;
            --danger-color-hover: #fa5252;
            --danger-color-light: #991b1b;
            /* Red 700 (gelap) */

            --success-color: #4ade80;
            --success-color-light: #166534;
            /* Green 700 (gelap) */
            --success-color-hover: #22c55e;

            --warning-color: #facc15;
            --warning-color-light: #854d0e;
            /* Yellow 700 (gelap) */
            --warning-color-hover: #eab308;

            --info-color: #60a5fa;
            --info-color-light: #1e40af;
            /* Blue 700 (gelap) */
            --info-color-hover: #3b82f6;

            --bg-color: #111827;
            /* Gray 900 */
            --bg-color-alt: #1f2937;
            /* Gray 800 */
            --text-color: #f3f4f6;
            /* Gray 100 */
            --text-color-muted: #9ca3af;
            /* Gray 400 */
            --text-color-subtle: #6b7280;
            /* Gray 500 */
            --border-color: #374151;
            /* Gray 700 */
            --border-color-strong: #4b5563;
            /* Gray 600 */
            --card-bg-color: #1f2937;
            /* Gray 800 */
            --input-bg-color: #374151;
            /* Gray 700 */
            --input-border-color: var(--border-color-strong);
            --focus-ring-color: rgba(129, 140, 248, 0.5);
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        html {
            font-size: 100%;
            scroll-behavior: smooth;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-family-sans);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-normal);
            line-height: var(--line-height-normal);
            color: var(--text-color);
            background-color: var(--bg-color);
            min-height: 100vh;
            display: flex;
            /* Untuk layout sticky footer */
            flex-direction: column;
            transition: background-color var(--transition-normal), color var(--transition-normal);
        }

        #app-shell {
            display: flex;
            flex-grow: 1;
            /* Memastikan app-shell mengisi ruang body */
        }

        .app-layout {
            display: flex;
            flex-grow: 1;
            width: 100%;
        }

        .main-wrapper {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            width: calc(100% - var(--sidebar-width));
            /* Default width */
            transition: width var(--transition-normal), margin-left var(--transition-normal);
            margin-left: var(--sidebar-width);
            /* Default margin */
        }

        .sidebar-collapsed .main-wrapper {
            width: calc(100% - var(--sidebar-width-collapsed));
            margin-left: var(--sidebar-width-collapsed);
        }

        @media (max-width: 991.98px) {

            /* Tablet dan lebih kecil */
            .main-wrapper {
                width: 100%;
                margin-left: 0;
            }

            .sidebar-collapsed .main-wrapper {
                width: 100%;
                margin-left: 0;
            }
        }


        img,
        picture,
        video,
        canvas {
            display: block;
            max-width: 100%;
            height: auto;
        }

        input,
        button,
        textarea,
        select {
            font: inherit;
            border: none;
            outline: none;
        }

        button {
            cursor: pointer;
            background: none;
            color: inherit;
            padding: 0;
            -webkit-appearance: none;
            appearance: none;
        }

        a {
            text-decoration: none;
            color: var(--primary-color);
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--primary-color-hover);
            text-decoration: none;
            /* Umumnya tidak mau underline di apps */
        }

        ul,
        ol {
            list-style: none;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-weight: var(--font-weight-bold);
            line-height: var(--line-height-tight);
            color: var(--text-color);
            margin-top: 0;
        }

        h1 {
            font-size: var(--font-size-3xl);
            margin-bottom: var(--spacing-5);
        }

        h2 {
            font-size: var(--font-size-2xl);
            margin-bottom: var(--spacing-4);
        }

        h3 {
            font-size: var(--font-size-xl);
            margin-bottom: var(--spacing-3);
        }

        h4 {
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-2);
        }

        *:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            box-shadow: 0 0 0 3px var(--focus-ring-color);
            border-radius: var(--border-radius-sm);
        }

        input:focus-visible,
        textarea:focus-visible,
        select:focus-visible {
            border-color: var(--primary-color) !important;
        }

        /*=============================================
=                LAYOUT CONTAINER             =
=============================================*/
        .container {
            width: 100%;
            max-width: var(--max-width-container);
            margin-left: auto;
            margin-right: auto;
            padding-left: var(--spacing-6);
            /* Lebih banyak padding untuk konten utama */
            padding-right: var(--spacing-6);
        }

        @media (max-width: 767.98px) {
            .container {
                padding-left: var(--spacing-4);
                padding-right: var(--spacing-4);
            }
        }

        /*=============================================
=               UTILITY CLASSES               =
=============================================*/
        .d-none {
            display: none !important;
        }

        .d-block {
            display: block !important;
        }

        .d-flex {
            display: flex !important;
        }

        .d-grid {
            display: grid !important;
        }

        .d-inline-block {
            display: inline-block !important;
        }

        .flex-column {
            flex-direction: column !important;
        }

        .flex-row {
            flex-direction: row !important;
        }

        .justify-start {
            justify-content: flex-start !important;
        }

        .justify-end {
            justify-content: flex-end !important;
        }

        .justify-center {
            justify-content: center !important;
        }

        .justify-between {
            justify-content: space-between !important;
        }

        .justify-around {
            justify-content: space-around !important;
        }

        .align-start {
            align-items: flex-start !important;
        }

        .align-end {
            align-items: flex-end !important;
        }

        .align-center {
            align-items: center !important;
        }

        .align-stretch {
            align-items: stretch !important;
        }

        .flex-wrap {
            flex-wrap: wrap !important;
        }

        .flex-nowrap {
            flex-wrap: nowrap !important;
        }

        .flex-grow-1 {
            flex-grow: 1 !important;
        }

        .gap-1 {
            gap: var(--spacing-1);
        }

        .gap-2 {
            gap: var(--spacing-2);
        }

        .gap-3 {
            gap: var(--spacing-3);
        }

        .gap-4 {
            gap: var(--spacing-4);
        }

        .gap-5 {
            gap: var(--spacing-5);
        }

        .gap-6 {
            gap: var(--spacing-6);
        }

        .gap-8 {
            gap: var(--spacing-8);
        }

        .text-center {
            text-align: center !important;
        }

        .text-left {
            text-align: left !important;
        }

        .text-right {
            text-align: right !important;
        }

        .w-full {
            width: 100% !important;
        }

        .h-full {
            height: 100% !important;
        }

        /* Margin & Padding Utilities */
        .m-0 {
            margin: var(--spacing-0) !important;
        }

        .mt-1 {
            margin-top: var(--spacing-1) !important;
        }

        .mb-1 {
            margin-bottom: var(--spacing-1) !important;
        }

        .ms-1 {
            margin-left: var(--spacing-1) !important;
        }

        .me-1 {
            margin-right: var(--spacing-1) !important;
        }

        .mt-2 {
            margin-top: var(--spacing-2) !important;
        }

        .mb-2 {
            margin-bottom: var(--spacing-2) !important;
        }

        .ms-2 {
            margin-left: var(--spacing-2) !important;
        }

        .me-2 {
            margin-right: var(--spacing-2) !important;
        }

        .mt-3 {
            margin-top: var(--spacing-3) !important;
        }

        .mb-3 {
            margin-bottom: var(--spacing-3) !important;
        }

        .mt-4 {
            margin-top: var(--spacing-4) !important;
        }

        .mb-4 {
            margin-bottom: var(--spacing-4) !important;
        }

        .mt-6 {
            margin-top: var(--spacing-6) !important;
        }

        .mb-6 {
            margin-bottom: var(--spacing-6) !important;
        }

        .mt-8 {
            margin-top: var(--spacing-8) !important;
        }

        .mb-8 {
            margin-bottom: var(--spacing-8) !important;
        }

        .p-0 {
            padding: var(--spacing-0) !important;
        }

        .p-1 {
            padding: var(--spacing-1) !important;
        }

        .py-1 {
            padding-top: var(--spacing-1) !important;
            padding-bottom: var(--spacing-1) !important;
        }

        .px-1 {
            padding-left: var(--spacing-1) !important;
            padding-right: var(--spacing-1) !important;
        }

        .p-2 {
            padding: var(--spacing-2) !important;
        }

        .py-2 {
            padding-top: var(--spacing-2) !important;
            padding-bottom: var(--spacing-2) !important;
        }

        .px-2 {
            padding-left: var(--spacing-2) !important;
            padding-right: var(--spacing-2) !important;
        }

        .p-3 {
            padding: var(--spacing-3) !important;
        }

        .py-3 {
            padding-top: var(--spacing-3) !important;
            padding-bottom: var(--spacing-3) !important;
        }

        .px-3 {
            padding-left: var(--spacing-3) !important;
            padding-right: var(--spacing-3) !important;
        }

        .p-4 {
            padding: var(--spacing-4) !important;
        }

        .py-4 {
            padding-top: var(--spacing-4) !important;
            padding-bottom: var(--spacing-4) !important;
        }

        .px-4 {
            padding-left: var(--spacing-4) !important;
            padding-right: var(--spacing-4) !important;
        }

        .p-6 {
            padding: var(--spacing-6) !important;
        }

        .py-6 {
            padding-top: var(--spacing-6) !important;
            padding-bottom: var(--spacing-6) !important;
        }

        .px-6 {
            padding-left: var(--spacing-6) !important;
            padding-right: var(--spacing-6) !important;
        }

        .rounded-sm {
            border-radius: var(--border-radius-sm);
        }

        .rounded-md {
            border-radius: var(--border-radius-md);
        }

        .rounded-lg {
            border-radius: var(--border-radius-lg);
        }

        .rounded-xl {
            border-radius: var(--border-radius-xl);
        }

        .rounded-full {
            border-radius: var(--border-radius-full);
        }

        .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .shadow-md {
            box-shadow: var(--card-shadow);
        }

        .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .shadow-xl {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .text-color-primary {
            color: var(--primary-color);
        }

        .text-color-secondary {
            color: var(--secondary-color);
        }

        .text-color-accent {
            color: var(--accent-color);
        }

        .text-color-muted {
            color: var(--text-color-muted);
        }

        .text-color-subtle {
            color: var(--text-color-subtle);
        }

        .text-color-danger {
            color: var(--danger-color);
        }

        .text-color-success {
            color: var(--success-color);
        }

        .text-color-white {
            color: #fff !important;
        }

        .fw-light {
            font-weight: var(--font-weight-light);
        }

        .fw-normal {
            font-weight: var(--font-weight-normal);
        }

        .fw-medium {
            font-weight: var(--font-weight-medium);
        }

        .fw-semibold {
            font-weight: var(--font-weight-semibold);
        }

        .fw-bold {
            font-weight: var(--font-weight-bold);
        }

        .fs-xs {
            font-size: var(--font-size-xs);
        }

        .fs-sm {
            font-size: var(--font-size-sm);
        }

        .fs-lg {
            font-size: var(--font-size-lg);
        }

        .fs-xl {
            font-size: var(--font-size-xl);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /*=============================================
=            KOMPONEN HEADER APLIKASI         =
=============================================*/
        .app-header {
            background-color: var(--card-bg-color);
            box-shadow: var(--card-shadow);
            padding: 0 var(--spacing-6);
            /* Menyesuaikan padding container */
            height: var(--header-height);
            display: flex;
            align-items: center;
            position: sticky;
            /* Header tetap terlihat saat scroll konten utama */
            top: 0;
            z-index: 1020;
            /* Di atas sidebar tapi di bawah modal/overlay */
            transition: background-color var(--transition-normal);
            width: 100%;
            /* Header mengisi lebar main-wrapper */
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-color);
        }

        .logo:hover {
            color: var(--primary-color);
        }

        .logo-icon {
            font-size: var(--font-size-2xl);
            color: var(--primary-color);
        }

        .logo-text {
            display: inline;
        }

        .logo-highlight {
            color: var(--primary-color);
        }

        .sidebar-collapsed .logo-text {
            display: none;
        }

        /* Sembunyikan teks logo saat sidebar collapsed */
        .sidebar-collapsed .logo-icon {
            margin-right: 0;
        }

        /* Hapus margin jika ada */

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
        }

        .header-action-btn {
            /* Untuk tombol tema, user, dll */
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color-muted);
            width: 40px;
            height: 40px;
            border-radius: var(--border-radius-full);
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: var(--font-size-lg);
            transition: var(--transition-normal);
        }

        .header-action-btn:hover {
            background-color: var(--bg-color);
            border-color: var(--border-color-strong);
            color: var(--primary-color);
        }

        [data-theme="dark"] .header-action-btn {
            border-color: var(--border-color-strong);
        }

        [data-theme="dark"] .header-action-btn:hover {
            background-color: var(--card-bg-color);
            border-color: var(--border-color);
        }

        .sidebar-toggle-btn {
            /* Tombol ini khusus untuk toggle sidebar */
            /* Ditampilkan di semua ukuran layar untuk toggle */
        }


        /*=============================================
=             KOMPONEN SIDEBAR                =
=============================================*/
        .app-sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            background-color: var(--card-bg-color);
            border-right: 1px solid var(--border-color);
            padding: var(--spacing-4) 0;
            display: flex;
            flex-direction: column;
            z-index: 1030;
            /* Di atas header */
            transition: width var(--transition-normal), transform var(--transition-normal);
            overflow-x: hidden;
            /* Mencegah konten meluap saat collapsed */
        }

        .sidebar-header {
            padding: 0 var(--spacing-4);
            /* Sesuaikan dengan padding logo di header */
            height: var(--header-height);
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: var(--spacing-4);
        }

        .sidebar-profile {
            padding: var(--spacing-2) var(--spacing-4);
            margin-bottom: var(--spacing-4);
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-4);
        }

        .sidebar-profile-avatar {
            width: 48px;
            height: 48px;
            border-radius: var(--border-radius-full);
            object-fit: cover;
            border: 2px solid var(--primary-color-light);
        }

        .sidebar-profile-info .name {
            font-weight: var(--font-weight-semibold);
            color: var(--text-color);
            font-size: var(--font-size-base);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-profile-info .role {
            font-size: var(--font-size-xs);
            color: var(--text-color-muted);
            white-space: nowrap;
        }

        .sidebar-nav {
            flex-grow: 1;
            overflow-y: auto;
            /* Jika menu panjang */
        }

        .sidebar-nav .nav-list {
            display: flex;
            flex-direction: column;
        }

        .sidebar-nav .nav-item {
            /* styling item jika perlu */
        }

        .sidebar-nav .nav-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            padding: var(--spacing-3) var(--spacing-4);
            color: var(--text-color-muted);
            font-weight: var(--font-weight-medium);
            transition: color var(--transition-fast), background-color var(--transition-fast);
            white-space: nowrap;
            /* Agar teks tidak wrap */
            overflow: hidden;
            /* Agar teks tidak keluar saat collapsed */
        }

        .sidebar-nav .nav-link i {
            font-size: var(--font-size-lg);
            width: 20px;
            /* Untuk alignment ikon */
            text-align: center;
            flex-shrink: 0;
            /* Agar ikon tidak mengecil */
        }

        .sidebar-nav .nav-link:hover,
        .sidebar-nav .nav-link.active {
            color: var(--primary-color);
            background-color: var(--primary-color-light);
        }

        .sidebar-nav .nav-link.active i {
            color: var(--primary-color);
        }

        [data-theme="dark"] .sidebar-nav .nav-link:hover,
        [data-theme="dark"] .sidebar-nav .nav-link.active {
            color: var(--primary-color-dark);
            /* Ini adalah teks saat hover/active di dark */
            background-color: var(--primary-color-light);
            /* Ini adalah bg saat hover/active di dark */
        }

        [data-theme="dark"] .sidebar-nav .nav-link.active i {
            color: var(--primary-color-dark);
        }

        /* Sidebar Collapsed State */
        body.sidebar-collapsed .app-sidebar {
            width: var(--sidebar-width-collapsed);
        }

        body.sidebar-collapsed .sidebar-profile-info,
        body.sidebar-collapsed .sidebar-nav .nav-link span {
            display: none;
            /* Sembunyikan teks saat collapsed */
        }

        body.sidebar-collapsed .sidebar-profile {
            justify-content: center;
        }

        body.sidebar-collapsed .sidebar-nav .nav-link {
            justify-content: center;
            padding: var(--spacing-3) var(--spacing-2);
            /* Kurangi padding horizontal */
        }

        body.sidebar-collapsed .sidebar-nav .nav-link i {
            margin-right: 0;
            /* Hapus margin ikon */
        }

        body.sidebar-collapsed .sidebar-header .logo-text {
            display: none;
        }

        .sidebar-footer {
            padding: var(--spacing-4);
            border-top: 1px solid var(--border-color);
        }

        .sidebar-footer .btn {
            width: 100%;
        }


        /* Sidebar di mobile (tersembunyi di awal, muncul sebagai overlay) */
        @media (max-width: 991.98px) {
            .app-sidebar {
                transform: translateX(-100%);
                z-index: 1040;
                /* Di atas segalanya termasuk overlay */
            }

            body.sidebar-open .app-sidebar {
                transform: translateX(0);
            }

            /* Tampilkan logo teks di sidebar mobile meskipun sidebar utama collapsed di desktop */
            body.sidebar-open .sidebar-header .logo-text,
            body.sidebar-open .sidebar-profile-info,
            body.sidebar-open .sidebar-nav .nav-link span {
                display: inline;
            }

            body.sidebar-open .app-sidebar {
                /* Kembalikan ke lebar normal saat mobile & open */
                width: var(--sidebar-width);
            }

            body.sidebar-open .sidebar-nav .nav-link {
                justify-content: flex-start;
            }

            /* Overlay untuk mobile saat sidebar terbuka */
            .sidebar-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 1035;
                /* Di bawah sidebar, di atas konten */
                opacity: 0;
                visibility: hidden;
                transition: opacity var(--transition-normal), visibility var(--transition-normal);
            }

            body.sidebar-open .sidebar-overlay {
                opacity: 1;
                visibility: visible;
            }
        }


        /*=============================================
=            KONTEN UTAMA & LOADER            =
=============================================*/
        .app-main-content {
            /* Renamed from main-content */
            flex-grow: 1;
            padding-top: var(--spacing-6);
            /* Sesuaikan dengan tinggi header jika perlu */
            padding-bottom: var(--spacing-6);
            transition: opacity 0.3s ease-in-out;
            /* width: 100%; Akan diatur oleh main-wrapper */
        }

        .page-header {
            margin-bottom: var(--spacing-6);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-4);
        }

        .page-header h1 {
            margin-bottom: var(--spacing-1);
        }

        .page-header .breadcrumb {
            font-size: var(--font-size-sm);
            color: var(--text-color-muted);
        }

        .page-header .breadcrumb a {
            color: var(--primary-color);
        }

        .page-header .breadcrumb a:hover {
            text-decoration: underline;
        }

        .page-header .breadcrumb .separator {
            margin: 0 var(--spacing-1);
        }

        .page-container {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loader-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            text-align: center;
            position: absolute;
            /* Untuk menengahkan di dalam parent */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .loader {
            border: 5px solid var(--bg-color);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .initial-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            z-index: 9999;
        }

        .initial-loader .loader {
            width: 60px;
            height: 60px;
            border-width: 6px;
        }

        /*=============================================
=              KOMPONEN KARTU (CARD)          =
=============================================*/
        .card {
            background-color: var(--card-bg-color);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--card-shadow);
            padding: var(--spacing-5);
            /* Sedikit lebih kecil dari sebelumnya */
            transition: var(--transition-normal);
            overflow: hidden;
            border: 1px solid var(--border-color);
            /* Tambah border halus */
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-shadow-hover);
        }

        .card-header {
            margin-bottom: var(--spacing-4);
            padding-bottom: var(--spacing-3);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            margin-bottom: 0;
            /* Reset margin */
        }

        .card-subtitle {
            font-size: var(--font-size-sm);
            color: var(--text-color-muted);
        }

        .card-body {
            font-size: var(--font-size-base);
        }

        .card-footer {
            margin-top: var(--spacing-4);
            padding-top: var(--spacing-3);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-2);
        }

        .card-info {
            border-left: 4px solid var(--info-color);
        }

        .card-success {
            border-left: 4px solid var(--success-color);
        }

        .card-warning {
            border-left: 4px solid var(--warning-color);
        }

        .card-danger {
            border-left: 4px solid var(--danger-color);
        }

        /* Kartu Statistik */
        .stat-card {
            display: flex;
            align-items: center;
            gap: var(--spacing-4);
        }

        .stat-card-icon {
            font-size: var(--font-size-3xl);
            padding: var(--spacing-3);
            border-radius: var(--border-radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
        }

        .stat-card-icon.bg-primary-light {
            background-color: var(--primary-color-light);
            color: var(--primary-color);
        }

        .stat-card-icon.bg-success-light {
            background-color: var(--success-color-light);
            color: var(--success-color);
        }

        .stat-card-icon.bg-warning-light {
            background-color: var(--warning-color-light);
            color: var(--warning-color);
        }

        .stat-card-icon.bg-danger-light {
            background-color: var(--danger-color-light);
            color: var(--danger-color);
        }

        [data-theme="dark"] .stat-card-icon.bg-primary-light {
            background-color: var(--primary-color-light);
            color: var(--primary-color-dark);
        }

        /* Tambahkan variasi dark theme untuk bg-*-light lainnya jika perlu */

        .stat-card-content .stat-title {
            font-size: var(--font-size-sm);
            color: var(--text-color-muted);
            margin-bottom: var(--spacing-1);
        }

        .stat-card-content .stat-value {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-color);
        }

        /*=============================================
=               KOMPONEN TOMBOL (BUTTON)      =
=============================================*/
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-2);
            padding: var(--spacing-2) var(--spacing-4);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            border-radius: var(--border-radius-md);
            border: 1px solid transparent;
            transition: var(--transition-fast);
            text-decoration: none;
            line-height: 1.5;
        }

        .btn:focus-visible {
            outline-offset: 1px;
        }

        .btn i {
            font-size: 1.1em;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--bg-color-alt);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: var(--primary-color-hover);
            border-color: var(--primary-color-hover);
            color: var(--bg-color-alt);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--bg-color-alt);
            border-color: var(--secondary-color);
        }

        .btn-secondary:hover {
            background-color: var(--secondary-color-hover);
            border-color: var(--secondary-color-hover);
            color: var(--bg-color-alt);
        }

        .btn-outline-primary {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-outline-primary:hover {
            background-color: var(--primary-color-light);
            color: var(--primary-color-dark);
        }

        [data-theme="dark"] .btn-outline-primary:hover {
            background-color: rgba(var(--primary-color-rgb), 0.15);
            color: var(--primary-color-dark);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: var(--bg-color-alt);
            border-color: var(--danger-color);
        }

        .btn-danger:hover {
            background-color: var(--danger-color-hover);
            border-color: var(--danger-color-hover);
            color: var(--bg-color-alt);
        }

        .btn-sm {
            padding: var(--spacing-1) var(--spacing-2);
            font-size: var(--font-size-sm);
        }

        .btn-lg {
            padding: var(--spacing-3) var(--spacing-6);
            font-size: var(--font-size-lg);
        }

        .btn-icon {
            /* Tombol hanya ikon */
            padding: var(--spacing-2);
            width: 40px;
            height: 40px;
        }

        .btn-icon i {
            font-size: var(--font-size-lg);
            margin: 0;
        }

        /* Hapus gap */

        /*=============================================
=                KOMPONEN FORMULIR            =
=============================================*/
        .form-group {
            margin-bottom: var(--spacing-4);
        }

        .form-label {
            display: block;
            font-weight: var(--font-weight-medium);
            margin-bottom: var(--spacing-1);
            color: var(--text-color);
        }

        .form-control {
            display: block;
            width: 100%;
            padding: var(--spacing-2) var(--spacing-3);
            font-size: var(--font-size-base);
            line-height: 1.5;
            color: var(--text-color);
            background-color: var(--input-bg-color);
            background-clip: padding-box;
            border: 1px solid var(--input-border-color);
            appearance: none;
            border-radius: var(--border-radius-md);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: 0;
            box-shadow: 0 0 0 0.2rem var(--focus-ring-color);
        }

        .form-control::placeholder {
            color: var(--text-color-subtle);
            opacity: 1;
        }

        textarea.form-control {
            min-height: calc(1.5em + (var(--spacing-2) * 2) + 2px);
            resize: vertical;
        }

        .input-group {
            display: flex;
            position: relative;
        }

        .input-group .form-control {
            flex-grow: 1;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .input-group-append {
            display: flex;
        }

        .input-group-append .btn {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            margin-left: -1px;
        }


        .form-check {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
        }

        .form-check-input {
            width: 1.25em;
            height: 1.25em;
            margin-top: 0.1em;
            vertical-align: top;
            background-color: var(--input-bg-color);
            border: 1px solid var(--input-border-color);
            border-radius: var(--border-radius-sm);
            transition: var(--transition-fast);
            flex-shrink: 0;
        }

        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8l3 3 5-5'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 70%;
        }

        .form-check-input[type="radio"] {
            border-radius: 50%;
        }

        .form-check-input[type="radio"]:checked {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='2' fill='%23fff'/%3e%3c/svg%3e");
        }

        .form-check-label {
            font-weight: var(--font-weight-normal);
            color: var(--text-color);
        }

        .form-text {
            font-size: var(--font-size-sm);
            color: var(--text-color-muted);
            margin-top: var(--spacing-1);
        }

        .alert {
            padding: var(--spacing-3) var(--spacing-4);
            margin-bottom: var(--spacing-4);
            border: 1px solid transparent;
            border-radius: var(--border-radius-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
        }

        .alert i {
            font-size: var(--font-size-lg);
        }

        .alert-success {
            color: #0f5132;
            background-color: var(--success-color-light);
            border-color: #badbcc;
        }

        [data-theme="dark"] .alert-success {
            color: var(--success-color);
            background-color: var(--success-color-light);
            border-color: var(--success-color);
        }

        .alert-danger {
            color: #58151c;
            background-color: var(--danger-color-light);
            border-color: #f1aeb5;
        }

        [data-theme="dark"] .alert-danger {
            color: var(--danger-color);
            background-color: var(--danger-color-light);
            border-color: var(--danger-color);
        }

        .alert-info {
            color: #052c65;
            background-color: var(--info-color-light);
            border-color: #9ec5fe;
        }

        [data-theme="dark"] .alert-info {
            color: var(--info-color);
            background-color: var(--info-color-light);
            border-color: var(--info-color);
        }

        .alert-warning {
            color: #664d03;
            background-color: var(--warning-color-light);
            border-color: #ffda6a;
        }

        [data-theme="dark"] .alert-warning {
            color: var(--warning-color);
            background-color: var(--warning-color-light);
            border-color: var(--warning-color);
        }

        /*=============================================
=               GRID SYSTEM SEDERHANA         =
=============================================*/
        .grid {
            display: grid;
            gap: var(--spacing-5);
        }

        /* Default gap lebih besar */
        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }

        .grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }

        /* Responsive grid columns */
        @media (min-width: 640px) {

            /* sm */
            .sm-grid-cols-1 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }

            .sm-grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (min-width: 768px) {

            /* md */
            .md-grid-cols-1 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }

            .md-grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .md-grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }

        @media (min-width: 1024px) {

            /* lg */
            .lg-grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .lg-grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }

            .lg-grid-cols-4 {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }

        @media (min-width: 1280px) {

            /* xl */
            .xl-grid-cols-4 {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }


        /*=============================================
=            FOOTER APLIKASI                  =
=============================================*/
        .app-footer {
            background-color: var(--card-bg-color);
            color: var(--text-color-muted);
            padding: var(--spacing-4) 0;
            text-align: center;
            font-size: var(--font-size-sm);
            border-top: 1px solid var(--border-color);
            margin-top: auto;
            /* Mendorong footer ke bawah jika konten pendek */
            transition: background-color var(--transition-normal), color var(--transition-normal), border-color var(--transition-normal);
            width: 100%;
            /* Footer mengisi lebar main-wrapper */
        }

        .app-footer p {
            margin-bottom: var(--spacing-1);
        }

        .app-footer p:last-child {
            margin-bottom: 0;
        }

        .app-footer .fas {
            transition: color var(--transition-fast);
        }

        /*=============================================
=            HALAMAN SPESIFIK (CONTOH)        =
=============================================*/
        /* Halaman Notifikasi */
        .notification-filters {
            margin-bottom: var(--spacing-5);
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-3);
            align-items: center;
        }

        .notification-item {
            display: flex;
            gap: var(--spacing-4);
            align-items: flex-start;
        }

        .notification-item .icon-wrapper {
            font-size: var(--font-size-xl);
            color: var(--primary-color);
            padding-top: var(--spacing-1);
            flex-shrink: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius-full);
        }

        .notification-item .icon-wrapper.bg-info-light {
            background-color: var(--info-color-light);
            color: var(--info-color);
        }

        .notification-item .icon-wrapper.bg-success-light {
            background-color: var(--success-color-light);
            color: var(--success-color);
        }

        .notification-item .icon-wrapper.bg-warning-light {
            background-color: var(--warning-color-light);
            color: var(--warning-color);
        }

        .notification-item .icon-wrapper.bg-danger-light {
            background-color: var(--danger-color-light);
            color: var(--danger-color);
        }

        /* Dark theme variants for notification icons */
        [data-theme="dark"] .notification-item .icon-wrapper.bg-info-light {
            background-color: var(--info-color-light);
            color: var(--info-color);
        }

        [data-theme="dark"] .notification-item .icon-wrapper.bg-success-light {
            background-color: var(--success-color-light);
            color: var(--success-color);
        }

        [data-theme="dark"] .notification-item .icon-wrapper.bg-warning-light {
            background-color: var(--warning-color-light);
            color: var(--warning-color);
        }

        [data-theme="dark"] .notification-item .icon-wrapper.bg-danger-light {
            background-color: var(--danger-color-light);
            color: var(--danger-color);
        }


        .notification-item .content h5 {
            margin-bottom: var(--spacing-1);
            font-size: var(--font-size-base);
        }

        .notification-item .meta {
            font-size: var(--font-size-xs);
            color: var(--text-color-muted);
            margin-top: var(--spacing-1);
        }

        .notification-item.unread {
            background-color: var(--primary-color-light);
            border-left: 4px solid var(--primary-color);
            /* Atau warna lain untuk unread */
        }

        [data-theme="dark"] .notification-item.unread {
            background-color: rgba(var(--primary-color-rgb), 0.1);
            border-left-color: var(--primary-color);
        }

        /* Halaman Fitur */
        .feature-list .card {
            text-align: center;
        }

        .feature-list .card .feature-icon {
            font-size: var(--font-size-3xl);
            color: var(--primary-color);
            margin-bottom: var(--spacing-4);
            background-color: var(--primary-color-light);
            width: 64px;
            height: 64px;
            border-radius: var(--border-radius-lg);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        [data-theme="dark"] .feature-list .card .feature-icon {
            background-color: var(--primary-color-light);
            /* dark theme primary light */
            color: var(--primary-color-dark);
        }


        /* Halaman Kontak */
        .contact-form-container {
            max-width: 700px;
            margin: 0 auto;
        }

        /* Hero Section (Halaman Beranda Lama, mungkin tidak terpakai jika ada Dashboard) */
        .hero-section {
            background-color: var(--card-bg-color);
            /* Atau var(--primary-color-light) */
            border: 1px solid var(--border-color);
            padding: var(--spacing-10) var(--spacing-6);
            text-align: center;
            border-radius: var(--border-radius-lg);
        }

        [data-theme="dark"] .hero-section {
            background-color: var(--bg-color-alt);
        }

        .hero-section h1 {
            color: var(--text-color);
            font-size: var(--font-size-4xl);
            font-weight: var(--font-weight-bold);
        }

        [data-theme="dark"] .hero-section h1 {
            color: var(--text-color);
        }

        .hero-section p {
            font-size: var(--font-size-lg);
            color: var(--text-color-muted);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: var(--spacing-6);
        }

        /* Halaman Apartemen */
        .apartment-listing-card {
            display: flex;
            flex-direction: column;
            height: 100%;
            /* Untuk kartu dengan tinggi sama di grid */
        }

        .apartment-listing-card .card-img-top {
            width: 100%;
            height: 200px;
            /* Tinggi gambar tetap */
            object-fit: cover;
            border-top-left-radius: var(--border-radius-lg);
            border-top-right-radius: var(--border-radius-lg);
        }

        .apartment-listing-card .card-body {
            flex-grow: 1;
            /* Body mengisi sisa ruang */
            display: flex;
            flex-direction: column;
        }

        .apartment-listing-card .apartment-details {
            display: flex;
            justify-content: space-between;
            font-size: var(--font-size-sm);
            color: var(--text-color-muted);
            margin-bottom: var(--spacing-3);
        }

        .apartment-listing-card .apartment-details span {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-1);
        }

        .apartment-listing-card .apartment-price {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: var(--primary-color);
            margin-top: auto;
            /* Mendorong harga dan tombol ke bawah */
            margin-bottom: var(--spacing-3);
        }

        .apartment-listing-card .apartment-actions {
            display: flex;
            gap: var(--spacing-2);
        }

        /* Badge sederhana */
        .badge {
            display: inline-block;
            padding: .35em .65em;
            font-size: .75em;
            font-weight: 700;
            line-height: 1;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: .375rem;
            /* Mirip var(--border-radius-sm) */
        }

        .badge-danger {
            background-color: var(--danger-color);
        }

        .badge-primary {
            background-color: var(--primary-color);
        }
    </style>
</head>

<body>
    <!-- Shell Aplikasi Utama -->
    <div id="app-shell">
        <div class="app-layout">
            <!-- Sidebar Aplikasi -->
            <aside class="app-sidebar" id="app-sidebar" aria-label="Navigasi Utama Aplikasi">
                <div class="sidebar-header">
                    <a href="#/dashboard" class="logo" aria-label="Beranda Aplikasi ApartemenNotif">
                        <i class="fas fa-building-user logo-icon" aria-hidden="true"></i>
                        <span class="logo-text">Green<span class="logo-highlight">Valley</span></span>
                    </a>
                </div>

                <div class="sidebar-profile">
                    <img src="https://i.pravatar.cc/150?u=penggunaAplikasi" alt="Avatar Pengguna"
                        class="sidebar-profile-avatar" id="user-avatar">
                    <div class="sidebar-profile-info">
                        <div class="name" id="user-name">Nama Pengguna</div>
                        <div class="role">Penyewa</div>
                    </div>
                </div>

                <nav class="sidebar-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="#/dashboard" class="nav-link" data-route="dashboard"><i
                                    class="fas fa-tachometer-alt" aria-hidden="true"></i> <span>Dasbor</span></a></li>
                        <li class="nav-item"><a href="#/profile" class="nav-link" data-route="profile"><i
                                    class="fas fa-user-circle" aria-hidden="true"></i> <span>Profil</span></a></li>
                        <li class="nav-item"><a href="#/apartments" class="nav-link" data-route="apartments"><i
                                    class="fas fa-building" aria-hidden="true"></i> <span>Apartemen</span></a></li>
                        <li class="nav-item"><a href="#/bookings" class="nav-link" data-route="bookings"><i
                                    class="fas fa-calendar-check" aria-hidden="true"></i> <span>Booking</span></a></li>
                        <li class="nav-item"><a href="#/favorites" class="nav-link" data-route="favorites"><i
                                    class="fas fa-heart" aria-hidden="true"></i> <span>Favorit</span></a></li>
                        <li class="nav-item"><a href="#/payments" class="nav-link" data-route="payments"><i
                                    class="fas fa-credit-card" aria-hidden="true"></i> <span>Pembayaran</span></a></li>
                        <li class="nav-item"><a href="#/maintenance" class="nav-link" data-route="maintenance"><i
                                    class="fas fa-tools" aria-hidden="true"></i> <span>Maintenance</span></a></li>
                        <li class="nav-item"><a href="#/messages" class="nav-link" data-route="messages"><i
                                    class="fas fa-envelope" aria-hidden="true"></i> <span>Pesan</span></a></li>
                        <li class="nav-item"><a href="#/notifications" class="nav-link" data-route="notifications">
                                <i class="fas fa-bell" aria-hidden="true"></i> <span>Notifikasi</span>
                                <span class="badge badge-danger ms-auto d-none" id="notif-badge-sidebar">0</span></a>
                        </li>
                        <li class="nav-item"><a href="#/contact" class="nav-link" data-route="contact"><i
                                    class="fas fa-id-card" aria-hidden="true"></i> <span>Kontak Kami</span></a></li>
                    </ul>
                </nav>

                <div class="sidebar-footer">
                    <button id="logout-btn" class="btn btn-outline-danger w-full">
                        <i class="fas fa-sign-out-alt" aria-hidden="true"></i> <span class="btn-text">Keluar</span>
                    </button>
                </div>
            </aside>
            <div class="sidebar-overlay" id="sidebar-overlay"></div>


            <!-- Wrapper untuk Header, Konten Utama, dan Footer -->
            <div class="main-wrapper">
                <!-- Header Aplikasi -->
                <header class="app-header">
                    <div class="header-container">
                        <div class="header-left">
                            <button class="header-action-btn sidebar-toggle-btn" id="sidebar-toggle-btn"
                                aria-label="Buka atau tutup sidebar" aria-expanded="false" aria-controls="app-sidebar">
                                <i class="fas fa-bars" aria-hidden="true"></i>
                            </button>
                        </div>

                        <div class="header-actions">
                            <button id="theme-toggle-btn" class="header-action-btn theme-toggle-btn"
                                aria-label="Ganti Tema Aplikasi">
                                <i class="fas fa-sun" aria-hidden="true"></i>
                            </button>
                            <!-- Bisa tambahkan tombol user/notif di sini jika diperlukan selain di sidebar -->
                            <a href="#/profile" class="header-action-btn d-none d-sm-inline-flex"
                                aria-label="Profil Pengguna">
                                <i class="fas fa-user" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </header>

                <!-- Konten Utama (Dinamis) -->
                <main id="main-content" class="app-main-content" aria-live="polite" role="main">
                    <!-- Konten halaman akan dimuat di sini oleh JavaScript -->
                </main>

                <!-- Footer Aplikasi -->
                <footer class="app-footer">
                    <div class="container">
                        <p> <span id="current-year"></span> Pusat Aplikasi Rental Apartemen. Semua hak cipta
                            dilindungi.</p>
                        <p>Dibangun dengan <i class="fas fa-heart text-color-danger" aria-hidden="true"></i> dan <i
                                class="fas fa-mug-hot text-color-accent" aria-hidden="true"></i> menggunakan Vanilla
                            HTML, CSS, & JavaScript.</p>
                    </div>
                </footer>
            </div>
        </div>
    </div>

    <!-- Loader Awal Aplikasi Penuh Halaman -->
    <div class="loader-container initial-loader" id="initial-app-loader">
        <div class="loader"></div>
        <p class="mt-4 text-color-muted fs-lg">Memuat Aplikasi...</p>
    </div>

    <!-- Template untuk Notifikasi -->
    <template id="notification-item-template">
        <div class="card notification-item mb-3">
            <div class="icon-wrapper">
                <i class="" aria-hidden="true"></i> <!-- Kelas ikon diisi JS -->
            </div>
            <div class="content flex-grow-1">
                <h5 class="card-title mb-1"></h5>
                <p class="card-text fs-sm text-color-muted"></p>
                <div class="meta mt-2">
                    <span class="timestamp"></span> | <span class="category badge"></span>
                </div>
            </div>
            <button class="btn btn-sm btn-outline-primary mark-as-read d-none ms-auto align-self-start">Tandai
                Dibaca</button>
        </div>
    </template>

    <!-- Template untuk Kartu Apartemen -->
    <template id="apartment-card-template">
        <div class="card apartment-listing-card">
            <img src="" alt="Gambar Apartemen" class="card-img-top apartment-image">
            <div class="card-body">
                <h3 class="card-title apartment-name fs-lg mb-2"></h3>
                <div class="apartment-details mb-3">
                    <span><i class="fas fa-bed text-color-muted"></i> <span class="bedrooms"></span> Kamar</span>
                    <span><i class="fas fa-bath text-color-muted"></i> <span class="bathrooms"></span> Kamar
                        Mandi</span>
                    <span><i class="fas fa-ruler-combined text-color-muted"></i> <span class="area"></span> m</span>
                </div>
                <p class="apartment-price mb-4">Rp <span class="price-value"></span> / bulan</p>
                <div class="apartment-actions mt-auto">
                    <a href="#" class="btn btn-primary btn-sm flex-grow-1 view-details-btn">Lihat Detail</a>
                    <button class="btn btn-outline-primary btn-sm btn-icon add-to-favorites-btn"
                        aria-label="Tambah ke Favorit">
                        <i class="far fa-heart"></i>
                    </button>
                </div>
            </div>
        </div>
    </template>


    <script>
        // Scope IIFE untuk menghindari polusi global
        (function () {
            'use strict';

            //=============================================
            //========= STATE APLIKASI & KONFIGURASI ======
            //=============================================
            const AppState = {
                currentTheme: localStorage.getItem('theme') || 'light',
                isSidebarOpen: !window.matchMedia('(max-width: 991.98px)').matches, // Default terbuka di desktop, tertutup di mobile
                isSidebarCollapsed: localStorage.getItem('sidebarCollapsed') === 'true' && window.matchMedia('(min-width: 992px)').matches, // Hanya relevan di desktop
                activeRoute: '',
                userProfile: {
                    name: 'Andi Pratama',
                    avatar: 'https://i.pravatar.cc/150?u=andi.pratama',
                    role: 'Penyewa Terverifikasi'
                },
                dashboardStats: {
                    activeBookings: 2,
                    pendingPayments: 1,
                    maintenanceRequests: 0,
                    savedProperties: 4
                },
                notifications: [
                    { id: 1, title: 'Pembaruan Kebijakan Privasi', message: 'Kebijakan privasi kami diperbarui per 1 Juni. Mohon tinjau.', type: 'info', icon: 'fas fa-info-circle', timestamp: '2 jam lalu', category: 'Umum', unread: true },
                    { id: 2, title: 'Pembayaran Tagihan Berhasil', message: 'Pembayaran tagihan bulan ini telah berhasil diproses.', type: 'success', icon: 'fas fa-check-circle', timestamp: '1 hari lalu', category: 'Keuangan', unread: false },
                    { id: 3, title: 'Perbaikan Lift Terjadwal', message: 'Lift di lobi utama akan dalam perbaikan pada 25 Mei pukul 10:00 - 14:00.', type: 'warning', icon: 'fas fa-triangle-exclamation', timestamp: '3 hari lalu', category: 'Pemeliharaan', unread: true },
                    { id: 4, title: 'Laporan Keamanan Mendesak', message: 'Terdeteksi aktivitas mencurigakan di area parkir. Keamanan sedang menyelidiki.', type: 'danger', icon: 'fas fa-shield-alt', timestamp: '5 hari lalu', category: 'Keamanan', unread: false },
                    { id: 5, title: 'Unit Baru Tersedia!', message: 'Apartemen tipe studio baru saja tersedia di lantai 5. Lihat detailnya!', type: 'info', icon: 'fas fa-building', timestamp: '6 hari lalu', category: 'Properti', unread: true },
                ],
                apartments: [
                    { id: 1, name: 'Studio Elegan di Pusat Kota', image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60', bedrooms: 1, bathrooms: 1, area: 45, price: 7500000, slug: 'studio-elegan-pusat-kota', isFavorite: false },
                    { id: 2, name: 'Apartemen Keluarga Nyaman', image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60', bedrooms: 3, bathrooms: 2, area: 120, price: 15000000, slug: 'apartemen-keluarga-nyaman', isFavorite: true },
                    { id: 3, name: 'Loft Modern dengan Pemandangan', image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60', bedrooms: 2, bathrooms: 2, area: 90, price: 12000000, slug: 'loft-modern-pemandangan', isFavorite: false },
                    { id: 4, name: 'Unit Kompak Dekat Kampus', image: 'https://images.unsplash.com/photo-1493809842364-78817add7ffb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60', bedrooms: 1, bathrooms: 1, area: 35, price: 5500000, slug: 'unit-kompak-dekat-kampus', isFavorite: false },
                ],
                unreadCount: 0,
                pageTitles: { // Judul halaman untuk SEO dan UX
                    'dashboard': 'Dasbor',
                    'profile': 'Profil Pengguna',
                    'apartments': 'Daftar Apartemen',
                    'bookings': 'Riwayat Booking',
                    'favorites': 'Apartemen Favorit',
                    'payments': 'Riwayat Pembayaran',
                    'maintenance': 'Permintaan Maintenance',
                    'messages': 'Pesan Masuk',
                    'notifications': 'Notifikasi',
                    'contact': 'Hubungi Kami',
                    'notFound': 'Halaman Tidak Ditemukan'
                }
            };

            //=============================================
            //========= ELEMEN DOM YANG SERING DIGUNAKAN ==
            //=============================================
            const DOM = {
                html: document.documentElement,
                body: document.body,
                appShell: document.getElementById('app-shell'),
                appSidebar: document.getElementById('app-sidebar'),
                sidebarToggleBtn: document.getElementById('sidebar-toggle-btn'),
                sidebarOverlay: document.getElementById('sidebar-overlay'),
                mainWrapper: document.querySelector('.main-wrapper'), // Wrapper konten utama + header + footer
                mainContent: document.getElementById('main-content'),
                themeToggleButton: document.getElementById('theme-toggle-btn'),
                allSidebarNavLinks: document.querySelectorAll('.app-sidebar .nav-link'),
                currentYearSpan: document.getElementById('current-year'),
                initialAppLoader: document.getElementById('initial-app-loader'),
                notifBadgeSidebar: document.getElementById('notif-badge-sidebar'),
                userNameDisplay: document.getElementById('user-name'),
                userAvatarDisplay: document.getElementById('user-avatar'),
                logoutButton: document.getElementById('logout-btn'),
            };

            //=============================================
            //========= FUNGSI UTILITAS ===================
            //=============================================
            const Utils = {
                debounce: function (func, delay) {
                    let timeout;
                    return function (...args) {
                        clearTimeout(timeout);
                        timeout = setTimeout(() => func.apply(this, args), delay);
                    };
                },
                escapeHTML: function (str) {
                    if (str === null || typeof str === 'undefined') return '';
                    return String(str).replace(/[&<>"']/g, function (match) {
                        return { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[match];
                    });
                },
                createElement: function (tag, attributes = {}, textContent = '') {
                    const el = document.createElement(tag);
                    for (const key in attributes) {
                        el.setAttribute(key, attributes[key]);
                    }
                    if (textContent) el.textContent = textContent;
                    return el;
                },
                formatCurrency: function (amount) {
                    return new Intl.NumberFormat('id-ID').format(amount);
                }
            };

            //=============================================
            //========= MANAJEMEN TEMA ====================
            //=============================================
            const ThemeManager = {
                init: function () {
                    this.applyTheme(AppState.currentTheme);
                    DOM.themeToggleButton.addEventListener('click', () => this.toggleTheme());
                },
                applyTheme: function (theme) {
                    DOM.html.setAttribute('data-theme', theme);
                    AppState.currentTheme = theme;
                    localStorage.setItem('theme', theme);
                    const icon = DOM.themeToggleButton.querySelector('i');
                    if (theme === 'dark') {
                        icon.classList.remove('fa-sun'); icon.classList.add('fa-moon');
                        DOM.themeToggleButton.setAttribute('aria-label', 'Ganti ke Tema Terang');
                    } else {
                        icon.classList.remove('fa-moon'); icon.classList.add('fa-sun');
                        DOM.themeToggleButton.setAttribute('aria-label', 'Ganti ke Tema Gelap');
                    }
                },
                toggleTheme: function () {
                    this.applyTheme(AppState.currentTheme === 'light' ? 'dark' : 'light');
                }
            };

            //=============================================
            //========= MANAJEMEN SIDEBAR ===============
            //=============================================
            const SidebarManager = {
                init: function () {
                    this.updateSidebarState(); // Terapkan state awal
                    DOM.sidebarToggleBtn.addEventListener('click', () => this.toggleSidebarFull());
                    if (DOM.sidebarOverlay) {
                        DOM.sidebarOverlay.addEventListener('click', () => this.closeSidebarMobile());
                    }

                    // Tutup sidebar mobile saat link navigasi diklik
                    DOM.allSidebarNavLinks.forEach(link => {
                        link.addEventListener('click', () => {
                            if (window.matchMedia('(max-width: 991.98px)').matches && AppState.isSidebarOpen) {
                                this.closeSidebarMobile();
                            }
                        });
                    });

                    window.addEventListener('resize', Utils.debounce(() => {
                        // Jika resize dari mobile ke desktop dan sidebar mobile terbuka, tutup overlay
                        if (!window.matchMedia('(max-width: 991.98px)').matches && DOM.body.classList.contains('sidebar-open')) {
                            DOM.body.classList.remove('sidebar-open');
                            AppState.isSidebarOpen = false; // Atau true tergantung preferensi desktop
                        }
                        // Terapkan ulang state collapsed jika berubah dari mobile ke desktop
                        if (window.matchMedia('(min-width: 992px)').matches) {
                            if (AppState.isSidebarCollapsed) {
                                DOM.body.classList.add('sidebar-collapsed');
                            } else {
                                DOM.body.classList.remove('sidebar-collapsed');
                            }
                        } else { // Hapus collapsed class jika di mobile
                            DOM.body.classList.remove('sidebar-collapsed');
                        }
                        this.updateSidebarButtonIcon();
                    }, 200));
                },

                toggleSidebarFull: function () {
                    if (window.matchMedia('(max-width: 991.98px)').matches) { // Mode Mobile/Tablet
                        AppState.isSidebarOpen = !AppState.isSidebarOpen;
                        DOM.body.classList.toggle('sidebar-open', AppState.isSidebarOpen);
                    } else { // Mode Desktop
                        AppState.isSidebarCollapsed = !AppState.isSidebarCollapsed;
                        DOM.body.classList.toggle('sidebar-collapsed', AppState.isSidebarCollapsed);
                        localStorage.setItem('sidebarCollapsed', AppState.isSidebarCollapsed);
                    }
                    this.updateSidebarButtonIcon();
                },

                closeSidebarMobile: function () {
                    if (window.matchMedia('(max-width: 991.98px)').matches) {
                        AppState.isSidebarOpen = false;
                        DOM.body.classList.remove('sidebar-open');
                        this.updateSidebarButtonIcon();
                    }
                },

                updateSidebarState: function () { // Panggil saat init
                    if (window.matchMedia('(max-width: 991.98px)').matches) {
                        DOM.body.classList.toggle('sidebar-open', AppState.isSidebarOpen);
                        DOM.body.classList.remove('sidebar-collapsed'); // Pastikan tidak collapsed di mobile
                    } else {
                        DOM.body.classList.toggle('sidebar-collapsed', AppState.isSidebarCollapsed);
                        DOM.body.classList.remove('sidebar-open'); // Pastikan tidak ada class open mobile
                    }
                    this.updateSidebarButtonIcon();
                },

                updateSidebarButtonIcon: function () {
                    const icon = DOM.sidebarToggleBtn.querySelector('i');
                    // Di mobile, ikon berubah jadi 'X' saat sidebar terbuka
                    if (window.matchMedia('(max-width: 991.98px)').matches) {
                        if (AppState.isSidebarOpen) {
                            icon.classList.remove('fa-bars'); icon.classList.add('fa-times');
                            DOM.sidebarToggleBtn.setAttribute('aria-expanded', 'true');
                        } else {
                            icon.classList.remove('fa-times'); icon.classList.add('fa-bars');
                            DOM.sidebarToggleBtn.setAttribute('aria-expanded', 'false');
                        }
                    } else { // Di desktop, ikon selalu 'bars'
                        icon.classList.remove('fa-times'); icon.classList.add('fa-bars');
                        // Aria-expanded di desktop bisa menandakan collapsed state
                        DOM.sidebarToggleBtn.setAttribute('aria-expanded', !AppState.isSidebarCollapsed);
                    }
                }
            };


            //=============================================
            //========= MANAJEMEN NOTIFIKASI ==============
            //=============================================
            const NotificationManager = {
                init: function () {
                    this.updateUnreadCount();
                },
                updateUnreadCount: function () {
                    AppState.unreadCount = AppState.notifications.filter(n => n.unread).length;
                    const badges = [DOM.notifBadgeSidebar /*, DOM.notifBadgeHeader jika ada */];
                    badges.forEach(badge => {
                        if (badge) {
                            if (AppState.unreadCount > 0) {
                                badge.textContent = AppState.unreadCount > 9 ? '9+' : AppState.unreadCount;
                                badge.classList.remove('d-none');
                            } else {
                                badge.classList.add('d-none');
                            }
                        }
                    });
                },
                markAsRead: function (notificationId) {
                    const notification = AppState.notifications.find(n => n.id === notificationId);
                    if (notification && notification.unread) {
                        notification.unread = false;
                        this.updateUnreadCount();
                        if (AppState.activeRoute === 'notifications') {
                            PageRenderer.notifications(); // Re-render halaman notifikasi
                        }
                    }
                },
                getNotifications: function (filterType = 'all', categoryFilter = 'all') {
                    let filtered = AppState.notifications;
                    if (filterType === 'unread') {
                        filtered = filtered.filter(n => n.unread);
                    }
                    if (categoryFilter !== 'all') {
                        filtered = filtered.filter(n => n.category === categoryFilter);
                    }
                    return filtered.sort((a, b) => b.id - a.id); // Tampilkan yang terbaru dulu
                }
            };

            //=============================================
            //========= RENDERER HALAMAN ==================
            //=============================================
            const PageRenderer = {
                _showLoader: function () {
                    DOM.mainContent.innerHTML = `
                    <div class="loader-container">
                        <div class="loader"></div>
                        <p class="mt-3 text-color-muted fs-sm">Memuat konten...</p>
                    </div>`;
                    DOM.mainContent.style.opacity = '0.5';
                    DOM.mainContent.setAttribute('aria-busy', 'true');
                },
                _hideLoader: function () {
                    DOM.mainContent.style.opacity = '1';
                    DOM.mainContent.setAttribute('aria-busy', 'false');
                },
                _renderPageStructure: function (pageTitleKey, contentHTML, breadcrumbs = []) {
                    const pageTitle = AppState.pageTitles[pageTitleKey] || 'ApartemenNotif';
                    document.title = `${pageTitle} | ApartemenNotif`;

                    let breadcrumbHTML = '';
                    if (breadcrumbs.length > 0) {
                        breadcrumbHTML = '<nav aria-label="breadcrumb" class="breadcrumb">';
                        breadcrumbs.forEach((crumb, index) => {
                            if (index > 0) breadcrumbHTML += '<span class="separator" aria-hidden="true">/</span>';
                            if (crumb.link) {
                                breadcrumbHTML += `<a href="${crumb.link}">${Utils.escapeHTML(crumb.text)}</a>`;
                            } else {
                                breadcrumbHTML += `<span aria-current="page">${Utils.escapeHTML(crumb.text)}</span>`;
                            }
                        });
                        breadcrumbHTML += '</nav>';
                    }

                    const headerHTML = `
                        <div class="page-header">
                            <h1>${Utils.escapeHTML(pageTitle)}</h1>
                            ${breadcrumbHTML}
                        </div>
                    `;

                    DOM.mainContent.innerHTML = `<div class="container page-container">${headerHTML}${contentHTML}</div>`;
                    this._hideLoader();
                    window.scrollTo(0, 0);
                },

                dashboard: function () {
                    const stats = AppState.dashboardStats;
                    const content = `
                        <div class="grid grid-cols-1 md-grid-cols-2 lg-grid-cols-4 gap-5">
                            <div class="card stat-card">
                                <div class="stat-card-icon bg-primary-light"><i class="fas fa-calendar-check"></i></div>
                                <div class="stat-card-content">
                                    <div class="stat-title">Booking Aktif</div>
                                    <div class="stat-value">${stats.activeBookings}</div>
                                </div>
                            </div>
                            <div class="card stat-card">
                                <div class="stat-card-icon bg-danger-light"><i class="fas fa-file-invoice-dollar"></i></div>
                                <div class="stat-card-content">
                                    <div class="stat-title">Pembayaran Tertunda</div>
                                    <div class="stat-value">${stats.pendingPayments}</div>
                                </div>
                            </div>
                            <div class="card stat-card">
                                <div class="stat-card-icon bg-warning-light"><i class="fas fa-tools"></i></div>
                                <div class="stat-card-content">
                                    <div class="stat-title">Permintaan Maintenance</div>
                                    <div class="stat-value">${stats.maintenanceRequests}</div>
                                </div>
                            </div>
                            <div class="card stat-card">
                                <div class="stat-card-icon bg-success-light"><i class="fas fa-bookmark"></i></div>
                                <div class="stat-card-content">
                                    <div class="stat-title">Properti Disimpan</div>
                                    <div class="stat-value">${stats.savedProperties}</div>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg-grid-cols-3 gap-5 mt-6">
                            <div class="card lg-col-span-2"> <!-- Notifikasi Terbaru -->
                                <div class="card-header">
                                    <h3 class="card-title">Notifikasi Terbaru</h3>
                                    <a href="#/notifications" class="btn btn-sm btn-outline-primary">Lihat Semua</a>
                                </div>
                                <div class="card-body p-0" id="dashboard-notifications-list">
                                    <!-- Daftar notifikasi dimuat JS -->
                                </div>
                            </div>
                            <div class="card"> <!-- Pintasan Cepat -->
                                <div class="card-header"><h3 class="card-title">Pintasan Cepat</h3></div>
                                <div class="card-body">
                                    <ul class="list-group">
                                        <li class="list-group-item mb-2"><a href="#/apartments" class="btn btn-outline-primary w-full"><i class="fas fa-search me-2"></i> Cari Apartemen</a></li>
                                        <li class="list-group-item mb-2"><a href="#/payments" class="btn btn-outline-primary w-full"><i class="fas fa-money-bill-wave me-2"></i> Cek Tagihan</a></li>
                                        <li class="list-group-item"><a href="#/contact" class="btn btn-outline-primary w-full"><i class="fas fa-headset me-2"></i> Hubungi Dukungan</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                    this._renderPageStructure('dashboard', content, [{ text: 'Dasbor' }]);
                    this._loadDashboardNotifications();
                },
                _loadDashboardNotifications: function () {
                    const container = document.getElementById('dashboard-notifications-list');
                    if (!container) return;

                    const recentNotifications = NotificationManager.getNotifications().slice(0, 3); // Ambil 3 terbaru
                    if (recentNotifications.length === 0) {
                        container.innerHTML = '<p class="text-color-muted text-center p-4">Tidak ada notifikasi baru.</p>';
                        return;
                    }

                    let html = '<ul class="list-unstyled">';
                    const template = document.getElementById('notification-item-template');
                    recentNotifications.forEach(notif => {
                        const itemClone = template.content.cloneNode(true);
                        const cardDiv = itemClone.querySelector('.notification-item'); // Card utama
                        cardDiv.classList.remove('card', 'mb-3'); // Hapus kelas card jika tidak mau border dobel
                        cardDiv.style.padding = 'var(--spacing-3)'; // Padding kustom
                        cardDiv.style.borderBottom = '1px solid var(--border-color)';

                        const iconWrapper = itemClone.querySelector('.icon-wrapper');
                        iconWrapper.className = `icon-wrapper bg-${notif.type}-light`; // e.g., bg-info-light
                        iconWrapper.querySelector('i').className = `${notif.icon}`; // text color sudah diatur oleh bg class

                        itemClone.querySelector('.card-title').textContent = Utils.escapeHTML(notif.title);
                        itemClone.querySelector('.card-text').textContent = Utils.escapeHTML(notif.message.substring(0, 70) + (notif.message.length > 70 ? '...' : ''));
                        itemClone.querySelector('.timestamp').textContent = Utils.escapeHTML(notif.timestamp);
                        const categoryBadge = itemClone.querySelector('.category');
                        categoryBadge.textContent = Utils.escapeHTML(notif.category);
                        categoryBadge.classList.add(`badge-${notif.type}`); // e.g., badge-info

                        if (notif.unread) {
                            cardDiv.classList.add('unread'); // Masih bisa pakai class unread untuk highlight
                            const markReadBtn = cardDiv.querySelector('.mark-as-read');
                            markReadBtn.classList.remove('d-none');
                            markReadBtn.dataset.id = notif.id;
                        } else {
                            cardDiv.querySelector('.mark-as-read').remove();
                        }

                        const tempDiv = document.createElement('div');
                        tempDiv.appendChild(itemClone);
                        html += `<li>${tempDiv.innerHTML}</li>`;
                    });
                    html += '</ul>';
                    container.innerHTML = html;
                    this._attachNotificationItemListeners(container); // Pasang listener untuk tombol "mark as read"
                },

                profile: function () {
                    const user = AppState.userProfile;
                    const content = `
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <img src="${Utils.escapeHTML(user.avatar)}" alt="Avatar ${Utils.escapeHTML(user.name)}" class="rounded-full mb-4 shadow-md" style="width:120px; height:120px; border: 4px solid var(--primary-color-light);">
                                    <h2 class="fw-bold">${Utils.escapeHTML(user.name)}</h2>
                                    <p class="text-color-muted mb-4">${Utils.escapeHTML(user.role)}</p>
                                    <button class="btn btn-primary btn-sm"><i class="fas fa-edit me-2"></i> Edit Profil</button>
                                </div>
                            </div>
                        </div>

                        <div class="card mt-5">
                            <div class="card-header"><h3 class="card-title">Informasi Kontak</h3></div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-sm-3 fw-medium">Nama Lengkap:</div>
                                    <div class="col-sm-9 text-color-muted">${Utils.escapeHTML(user.name)}</div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-3 fw-medium">Email:</div>
                                    <div class="col-sm-9 text-color-muted">email.pengguna@example.com</div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-3 fw-medium">Telepon:</div>
                                    <div class="col-sm-9 text-color-muted">(+62) 812-3456-7890</div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-3 fw-medium">Alamat:</div>
                                    <div class="col-sm-9 text-color-muted">Jl. Apartemen Indah No. 1, Kota Sejahtera</div>
                                </div>
                            </div>
                        </div>
                    `;
                    this._renderPageStructure('profile', content, [{ text: 'Dasbor', link: '#/dashboard' }, { text: 'Profil' }]);
                },

                apartments: function () {
                    let apartmentsHTML = `
                        <div class="d-flex justify-between align-center mb-5 flex-wrap gap-3">
                            <div class="input-group" style="max-width: 400px;">
                                <input type="search" id="apartment-search-input" class="form-control form-control-lg" placeholder="Cari apartemen...">
                                <div class="input-group-append">
                                    <button id="apartment-search-btn" class="btn btn-primary btn-lg"><i class="fas fa-search"></i></button>
                                </div>
                            </div>
                            <div>
                                <select id="apartment-sort-select" class="form-control" style="min-width: 200px;">
                                    <option value="default">Urutkan berdasarkan...</option>
                                    <option value="price-asc">Harga Termurah</option>
                                    <option value="price-desc">Harga Termahal</option>
                                    <option value="area-desc">Area Terluas</option>
                                </select>
                            </div>
                        </div>
                        <div id="apartment-list-container" class="grid grid-cols-1 md-grid-cols-2 lg-grid-cols-3 xl-grid-cols-4 gap-5">
                            <!-- Kartu apartemen dimuat JS -->
                        </div>
                    `;
                    this._renderPageStructure('apartments', apartmentsHTML, [{ text: 'Dasbor', link: '#/dashboard' }, { text: 'Apartemen' }]);
                    this._loadApartments(); // Fungsi untuk memuat dan merender apartemen
                    this._attachApartmentSearchListeners();
                },

                _loadApartments: function (searchTerm = '', sortOption = 'default') {
                    const container = document.getElementById('apartment-list-container');
                    if (!container) return;

                    let apartmentsToRender = [...AppState.apartments]; // Salin array

                    // Filter berdasarkan searchTerm
                    if (searchTerm) {
                        apartmentsToRender = apartmentsToRender.filter(apt =>
                            apt.name.toLowerCase().includes(searchTerm.toLowerCase())
                        );
                    }

                    // Sortir
                    switch (sortOption) {
                        case 'price-asc':
                            apartmentsToRender.sort((a, b) => a.price - b.price);
                            break;
                        case 'price-desc':
                            apartmentsToRender.sort((a, b) => b.price - a.price);
                            break;
                        case 'area-desc':
                            apartmentsToRender.sort((a, b) => b.area - a.area);
                            break;
                    }

                    if (apartmentsToRender.length === 0) {
                        container.innerHTML = '<div class="col-span-full text-center py-8"><p class="fs-lg text-color-muted">Tidak ada apartemen yang cocok dengan kriteria Anda.</p></div>';
                        return;
                    }

                    let html = '';
                    const template = document.getElementById('apartment-card-template');
                    apartmentsToRender.forEach(apt => {
                        const clone = template.content.cloneNode(true);
                        clone.querySelector('.apartment-image').src = Utils.escapeHTML(apt.image);
                        clone.querySelector('.apartment-image').alt = `Gambar ${Utils.escapeHTML(apt.name)}`;
                        clone.querySelector('.apartment-name').textContent = Utils.escapeHTML(apt.name);
                        clone.querySelector('.bedrooms').textContent = apt.bedrooms;
                        clone.querySelector('.bathrooms').textContent = apt.bathrooms;
                        clone.querySelector('.area').textContent = apt.area;
                        clone.querySelector('.price-value').textContent = Utils.formatCurrency(apt.price);
                        clone.querySelector('.view-details-btn').href = `#/apartments/${apt.slug}`; // Contoh link detail

                        const favBtn = clone.querySelector('.add-to-favorites-btn');
                        favBtn.dataset.apartmentId = apt.id;
                        favBtn.querySelector('i').className = apt.isFavorite ? 'fas fa-heart text-color-danger' : 'far fa-heart';
                        favBtn.setAttribute('aria-label', apt.isFavorite ? 'Hapus dari Favorit' : 'Tambah ke Favorit');


                        const tempDiv = document.createElement('div');
                        tempDiv.appendChild(clone);
                        html += tempDiv.innerHTML;
                    });
                    container.innerHTML = html;

                    // Attach event listeners for favorite buttons
                    container.querySelectorAll('.add-to-favorites-btn').forEach(button => {
                        button.addEventListener('click', (event) => {
                            const aptId = parseInt(event.currentTarget.dataset.apartmentId, 10);
                            this._toggleFavorite(aptId);
                        });
                    });
                },

                _toggleFavorite: function (apartmentId) {
                    const apartment = AppState.apartments.find(apt => apt.id === apartmentId);
                    if (apartment) {
                        apartment.isFavorite = !apartment.isFavorite;
                        // Re-render list atau update tombol spesifik
                        const searchInput = document.getElementById('apartment-search-input');
                        const sortSelect = document.getElementById('apartment-sort-select');
                        this._loadApartments(searchInput ? searchInput.value : '', sortSelect ? sortSelect.value : 'default');

                        // Update count di dashboard/sidebar jika ada
                        AppState.dashboardStats.savedProperties += apartment.isFavorite ? 1 : -1;
                        // Di aplikasi nyata, mungkin perlu AJAX call di sini
                    }
                },

                _attachApartmentSearchListeners: function () {
                    const searchInput = document.getElementById('apartment-search-input');
                    const searchBtn = document.getElementById('apartment-search-btn');
                    const sortSelect = document.getElementById('apartment-sort-select');

                    const performSearchAndSort = () => {
                        this._loadApartments(searchInput.value, sortSelect.value);
                    };

                    if (searchBtn) searchBtn.addEventListener('click', performSearchAndSort);
                    if (searchInput) searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') performSearchAndSort();
                    });
                    if (searchInput) searchInput.addEventListener('input', Utils.debounce(performSearchAndSort, 300)); // Real-time search with debounce
                    if (sortSelect) sortSelect.addEventListener('change', performSearchAndSort);
                },

                // Placeholder untuk halaman lain
                _renderPlaceholderPage: function (pageKey, iconClass = "fas fa-question-circle") {
                    const pageTitle = AppState.pageTitles[pageKey] || "Segera Hadir";
                    const breadcrumbs = [{ text: 'Dasbor', link: '#/dashboard' }, { text: pageTitle }];
                    const content = `
                        <div class="card text-center py-8">
                            <div class="card-body">
                                <i class="${iconClass} fs-3xl text-color-primary mb-4" style="font-size: 4rem;"></i>
                                <h2 class="card-title">Fitur ${Utils.escapeHTML(pageTitle)}</h2>
                                <p class="text-color-muted">Halaman ini sedang dalam pengembangan dan akan segera tersedia.</p>
                                <a href="#/dashboard" class="btn btn-primary mt-4">Kembali ke Dasbor</a>
                            </div>
                        </div>
                    `;
                    this._renderPageStructure(pageKey, content, breadcrumbs);
                },

                bookings: function () { this._renderPlaceholderPage('bookings', 'fas fa-calendar-alt'); },
                favorites: function () { this._renderPlaceholderPage('favorites', 'fas fa-heart'); },
                payments: function () { this._renderPlaceholderPage('payments', 'fas fa-file-invoice-dollar'); },
                maintenance: function () { this._renderPlaceholderPage('maintenance', 'fas fa-tools'); },
                messages: function () { this._renderPlaceholderPage('messages', 'fas fa-comments'); },


                notifications: function () {
                    this._showLoader();
                    const breadcrumbs = [{ text: 'Dasbor', link: '#/dashboard' }, { text: 'Notifikasi' }];
                    const allNotifications = NotificationManager.getNotifications(); // Ambil semua dulu untuk filter UI
                    const categories = [...new Set(allNotifications.map(n => n.category))];

                    let notificationsHTML = `
                    <div class="notification-filters card p-4 mb-5">
                        <div class="d-flex flex-wrap gap-3 align-items-center">
                            <span class="fw-medium fs-sm">Filter:</span>
                            <button class="btn btn-sm btn-outline-primary active" data-filter="all">Semua</button>
                            <button class="btn btn-sm btn-outline-primary" data-filter="unread">Belum Dibaca</button>
                            <select id="category-filter" class="form-control form-control-sm" style="width: auto; display: inline-block; min-width:150px;">
                                <option value="all">Semua Kategori</option>
                                ${categories.map(cat => `<option value="${Utils.escapeHTML(cat)}">${Utils.escapeHTML(cat)}</option>`).join('')}
                            </select>
                            <button id="mark-all-read-btn" class="btn btn-sm btn-primary ms-auto"><i class="fas fa-check-double me-2"></i>Tandai Semua Dibaca</button>
                        </div>
                    </div>
                    <div id="notifications-list-container">
                        <!-- Daftar notifikasi dimuat di sini -->
                    </div>
                `;
                    this._renderPageStructure('notifications', notificationsHTML, breadcrumbs);
                    this._renderNotificationList(); // Render awal dengan filter default
                    this._attachNotificationFilterListeners();
                },
                _renderNotificationList: function (filterType = 'all', categoryFilter = 'all') {
                    const container = document.getElementById('notifications-list-container');
                    if (!container) return;

                    const notifications = NotificationManager.getNotifications(filterType, categoryFilter);

                    if (notifications.length === 0) {
                        container.innerHTML = '<div class="card text-center py-6"><p class="text-color-muted fs-lg">Tidak ada notifikasi yang cocok dengan filter Anda.</p></div>';
                        return;
                    }

                    let listHTML = '';
                    const template = document.getElementById('notification-item-template');
                    notifications.forEach(notif => {
                        const itemClone = template.content.cloneNode(true);
                        const cardDiv = itemClone.querySelector('.notification-item');

                        const iconWrapper = itemClone.querySelector('.icon-wrapper');
                        iconWrapper.className = `icon-wrapper bg-${notif.type}-light`; // e.g., bg-info-light
                        iconWrapper.querySelector('i').className = `${notif.icon}`; // text color sudah diatur oleh bg class

                        itemClone.querySelector('.card-title').textContent = Utils.escapeHTML(notif.title);
                        itemClone.querySelector('.card-text').textContent = Utils.escapeHTML(notif.message);
                        itemClone.querySelector('.timestamp').textContent = Utils.escapeHTML(notif.timestamp);

                        const categoryBadge = itemClone.querySelector('.category');
                        categoryBadge.textContent = Utils.escapeHTML(notif.category);
                        categoryBadge.classList.add(`badge-${notif.type}`); // Gunakan tipe notif untuk warna badge (info, success, dll)

                        if (notif.unread) {
                            cardDiv.classList.add('unread');
                            const markReadBtn = cardDiv.querySelector('.mark-as-read');
                            markReadBtn.classList.remove('d-none');
                            markReadBtn.dataset.id = notif.id;
                        } else {
                            cardDiv.querySelector('.mark-as-read').remove(); // Hapus tombol jika sudah dibaca
                        }

                        const tempDiv = document.createElement('div');
                        tempDiv.appendChild(itemClone);
                        listHTML += tempDiv.innerHTML;
                    });
                    container.innerHTML = listHTML;
                    this._attachNotificationItemListeners(container);
                },
                _attachNotificationItemListeners: function (parentElement) {
                    parentElement.querySelectorAll('.mark-as-read').forEach(button => {
                        // Pastikan event listener tidak terpasang ganda jika dipanggil berkali-kali
                        if (!button.dataset.listenerAttached) {
                            button.addEventListener('click', (event) => {
                                const notifId = parseInt(event.target.dataset.id, 10);
                                NotificationManager.markAsRead(notifId);
                            });
                            button.dataset.listenerAttached = 'true';
                        }
                    });
                },
                _attachNotificationFilterListeners: function () {
                    const filterButtons = DOM.mainContent.querySelectorAll('.notification-filters .btn[data-filter]');
                    const categoryFilterSelect = DOM.mainContent.querySelector('#category-filter');
                    const markAllReadBtn = DOM.mainContent.querySelector('#mark-all-read-btn');

                    const applyFilters = () => {
                        const activeFilterButton = DOM.mainContent.querySelector('.notification-filters .btn[data-filter].active');
                        const filterType = activeFilterButton ? activeFilterButton.dataset.filter : 'all';
                        const selectedCategory = categoryFilterSelect ? categoryFilterSelect.value : 'all';
                        this._renderNotificationList(filterType, selectedCategory);
                    };

                    filterButtons.forEach(button => {
                        button.addEventListener('click', (e) => {
                            filterButtons.forEach(btn => btn.classList.remove('active'));
                            e.currentTarget.classList.add('active');
                            applyFilters();
                        });
                    });
                    if (categoryFilterSelect) {
                        categoryFilterSelect.addEventListener('change', applyFilters);
                    }
                    if (markAllReadBtn) {
                        markAllReadBtn.addEventListener('click', () => {
                            AppState.notifications.forEach(n => { if (n.unread) n.unread = false; });
                            NotificationManager.updateUnreadCount();
                            applyFilters(); // Re-render list
                        });
                    }
                },


                contact: function () {
                    const breadcrumbs = [{ text: 'Dasbor', link: '#/dashboard' }, { text: 'Hubungi Kami' }];
                    const content = `
                    <div class="contact-form-container">
                        <p class="text-color-muted mb-6 text-center">Punya pertanyaan atau masukan? Kami senang mendengar dari Anda. Isi formulir di bawah ini atau hubungi kami melalui detail kontak yang tersedia.</p>
                        
                        <div class="grid grid-cols-1 md-grid-cols-2 gap-6">
                            <div>
                                <div id="alert-placeholder"></div>
                                <form id="contact-form" class="card">
                                    <div class="card-header"><h3 class="card-title">Kirim Pesan</h3></div>
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label for="name" class="form-label">Nama Lengkap</label>
                                            <input type="text" id="name" name="name" class="form-control" placeholder="Masukkan nama Anda" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="email" class="form-label">Alamat Email</label>
                                            <input type="email" id="email" name="email" class="form-control" placeholder="cth: nama@domain.com" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="subject" class="form-label">Subjek</label>
                                            <input type="text" id="subject" name="subject" class="form-control" placeholder="Subjek pesan Anda" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="message" class="form-label">Pesan</label>
                                            <textarea id="message" name="message" class="form-control" rows="5" placeholder="Tulis pesan Anda di sini..." required></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-full">Kirim Pesan <i class="fas fa-paper-plane ms-2"></i></button>
                                    </div>
                                </form>
                            </div>
                            <div class="card">
                                <div class="card-header"><h3 class="card-title">Informasi Kontak Lainnya</h3></div>
                                <div class="card-body">
                                    <p class="mb-3"><i class="fas fa-map-marker-alt fa-fw text-color-primary me-2"></i> Jl. Apartemen Sejahtera No. 123, Kota Bahagia, Indonesia</p>
                                    <p class="mb-3"><i class="fas fa-phone fa-fw text-color-primary me-2"></i> (+62) 21 555 0123</p>
                                    <p class="mb-3"><i class="fas fa-envelope fa-fw text-color-primary me-2"></i> support@apartemennotif.com</p>
                                    <p class="mb-4"><i class="fas fa-clock fa-fw text-color-primary me-2"></i> Senin - Jumat: 09:00 - 17:00 WIB</p>
                                    
                                    <h4 class="fs-md fw-semibold mb-2">Media Sosial</h4>
                                    <div class="d-flex gap-3">
                                        <a href="#" class="btn btn-outline-primary btn-icon" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#" class="btn btn-outline-primary btn-icon" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                                        <a href="#" class="btn btn-outline-primary btn-icon" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                    this._renderPageStructure('contact', content, breadcrumbs);
                    this._attachContactFormListener();
                },

                _attachContactFormListener: function () {
                    const form = document.getElementById('contact-form');
                    if (form) {
                        form.addEventListener('submit', function (event) {
                            event.preventDefault();
                            const alertPlaceholder = document.getElementById('alert-placeholder');
                            alertPlaceholder.innerHTML = '';

                            const name = form.elements.name.value.trim();
                            const email = form.elements.email.value.trim();
                            const subject = form.elements.subject.value.trim();
                            const message = form.elements.message.value.trim();

                            if (!name || !email || !subject || !message) {
                                alertPlaceholder.innerHTML = '<div class="alert alert-danger"><i class="fas fa-exclamation-circle me-2"></i>Semua field wajib diisi.</div>';
                                return;
                            }
                            if (!/^\S+@\S+\.\S+$/.test(email)) {
                                alertPlaceholder.innerHTML = '<div class="alert alert-danger"><i class="fas fa-exclamation-circle me-2"></i>Format email tidak valid.</div>';
                                return;
                            }

                            const submitButton = form.querySelector('button[type="submit"]');
                            const originalButtonText = submitButton.innerHTML;
                            submitButton.disabled = true;
                            submitButton.innerHTML = '<div class="loader" style="width:20px;height:20px;border-width:3px; border-top-color:white; display:inline-block; margin-right: 8px;"></div> Mengirim...';

                            setTimeout(() => {
                                alertPlaceholder.innerHTML = '<div class="alert alert-success"><i class="fas fa-check-circle me-2"></i>Pesan Anda telah berhasil terkirim! Kami akan segera menghubungi Anda.</div>';
                                form.reset();
                                submitButton.disabled = false;
                                submitButton.innerHTML = originalButtonText;
                            }, 1500);
                        });
                    }
                },

                notFound: function () {
                    const breadcrumbs = [{ text: 'Error' }];
                    const content = `
                    <div class="text-center py-8">
                        <h1 class="text-color-danger mb-3" style="font-size: 6rem;"><i class="fas fa-compass"></i></h1>
                        <h2 class="mt-4 fw-bold fs-3xl">404 - Halaman Tersesat</h2>
                        <p class="text-color-muted fs-lg mb-6">Maaf, halaman yang Anda cari tidak dapat ditemukan atau mungkin sudah tidak ada lagi.</p>
                        <a href="#/dashboard" class="btn btn-primary btn-lg"><i class="fas fa-home me-2"></i> Kembali ke Dasbor</a>
                    </div>
                `;
                    this._renderPageStructure('notFound', content, breadcrumbs);
                }
            };

            //=============================================
            //========= ROUTER APLIKASI (SPA) =============
            //=============================================
            const AppRouter = {
                routes: {
                    '/': PageRenderer.dashboard.bind(PageRenderer), // Default ke dasbor
                    '/dashboard': PageRenderer.dashboard.bind(PageRenderer),
                    '/profile': PageRenderer.profile.bind(PageRenderer),
                    '/apartments': PageRenderer.apartments.bind(PageRenderer),
                    // '/apartments/:slug': PageRenderer.apartmentDetail.bind(PageRenderer), // Contoh rute detail
                    '/bookings': PageRenderer.bookings.bind(PageRenderer),
                    '/favorites': PageRenderer.favorites.bind(PageRenderer),
                    '/payments': PageRenderer.payments.bind(PageRenderer),
                    '/maintenance': PageRenderer.maintenance.bind(PageRenderer),
                    '/messages': PageRenderer.messages.bind(PageRenderer),
                    '/notifications': PageRenderer.notifications.bind(PageRenderer),
                    '/contact': PageRenderer.contact.bind(PageRenderer)
                },
                init: function () {
                    window.addEventListener('hashchange', () => this.handleRouteChange());
                    window.addEventListener('DOMContentLoaded', () => {
                        this.handleRouteChange();
                        if (DOM.initialAppLoader) {
                            DOM.initialAppLoader.style.opacity = '0';
                            setTimeout(() => DOM.initialAppLoader.remove(), 300);
                        }
                    });
                },
                handleRouteChange: function () {
                    const rawPath = window.location.hash.slice(1) || '/';
                    const pathParts = rawPath.split('/');
                    const baseRoute = `/${pathParts[1] || ''}`; // e.g. /apartments
                    // const param = pathParts[2]; // e.g. slug-apartemen

                    // Ambil 'dashboard' jika pathnya hanya '/'
                    AppState.activeRoute = (baseRoute === '/' || baseRoute === '//') ? 'dashboard' : pathParts[1];

                    PageRenderer._showLoader();

                    setTimeout(() => {
                        let routeHandler = this.routes[baseRoute];

                        // // Logika untuk rute dengan parameter (contoh /apartments/:slug)
                        // if (!routeHandler && baseRoute === '/apartments' && param) {
                        //     routeHandler = this.routes['/apartments/:slug'];
                        // }

                        if (routeHandler) {
                            routeHandler(); // Panggil fungsi render halaman, (param jika ada)
                        } else {
                            PageRenderer.notFound();
                            AppState.activeRoute = 'notFound';
                        }
                        this.updateActiveNavLink();
                    }, 150); // Sedikit delay untuk UX
                },
                updateActiveNavLink: function () {
                    DOM.allSidebarNavLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.dataset.route === AppState.activeRoute) {
                            link.classList.add('active');
                        }
                    });
                }
            };

            //=============================================
            //========= FUNGSI UTAMA PENGGUNA ===========
            //=============================================
            const UserSessionManager = {
                init: function () {
                    this.loadUserProfile();
                    if (DOM.logoutButton) {
                        DOM.logoutButton.addEventListener('click', () => this.logout());
                    }
                },
                loadUserProfile: function () {
                    if (DOM.userNameDisplay) DOM.userNameDisplay.textContent = Utils.escapeHTML(AppState.userProfile.name);
                    if (DOM.userAvatarDisplay) DOM.userAvatarDisplay.src = Utils.escapeHTML(AppState.userProfile.avatar);
                },
                logout: function () {
                    // Simulasi logout
                    console.log("Pengguna melakukan logout.");
                    // Di aplikasi nyata: hapus token, redirect ke halaman login, dll.
                    // Untuk SPA ini, kita bisa redirect ke halaman "login" dummy atau refresh
                    alert("Anda telah berhasil keluar.");
                    // Untuk demo, kita bisa reload atau redirect ke halaman utama (yang mungkin juga dashboard)
                    window.location.hash = '/'; // Kembali ke halaman default
                    // Atau jika ada halaman login: window.location.hash = '/login';
                }
            };


            //=============================================
            //========= INISIALISASI APLIKASI =============
            //=============================================
            function initializeApp() {
                if (DOM.currentYearSpan) DOM.currentYearSpan.textContent = new Date().getFullYear();

                ThemeManager.init();
                SidebarManager.init();
                NotificationManager.init();
                UserSessionManager.init();
                AppRouter.init();

                console.log('Aplikasi Pusat Notifikasi Rental Apartemen berhasil dimuat.');
                console.log('Tema saat ini:', AppState.currentTheme);
                console.log('Sidebar terbuka (mobile):', AppState.isSidebarOpen, 'Sidebar collapsed (desktop):', AppState.isSidebarCollapsed);
            }

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeApp);
            } else {
                initializeApp();
            }

        })();
    </script>
</body>

</html>