<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Properti</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Add modern CSS libraries -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  </head>
  <body>
    <!-- Sidebar Navigation with enhanced accessibility -->
    <aside class="sidebar" role="navigation" aria-label="Main navigation">
      <div class="sidebar__header">
        <h2>Dashboard Admin</h2>
      </div>
      <nav class="sidebar__nav">
        <ul>
          <li>
            <a href="index.html" class="sidebar__item">
              <span class="sidebar__icon"><i class="fas fa-home"></i></span>
              <span class="sidebar__text">Beranda</span>
            </a>
          </li>
          <li>
            <a href="properti.html" class="sidebar__item">
              <span class="sidebar__icon"><i class="fas fa-building"></i></span>
              <span class="sidebar__text">Properti</span>
            </a>
          </li>
          <li>
            <a href="penyewa.html" class="sidebar__item">
              <span class="sidebar__icon"><i class="fas fa-users"></i></span>
              <span class="sidebar__text">Penyewa</span>
            </a>
          </li>
          <!-- Other menu items with animations -->
        </ul>
      </nav>
    </aside>

    <main class="layout__main" role="main">
      <header class="layout__header" data-aos="fade-down">
        <h1 class="section-title">Pengaturan Properti</h1>
        <div class="header-actions">
          <button class="btn btn--icon" aria-label="Notifications">
            <span class="badge badge--primary">3</span>
            <i class="fas fa-bell"></i>
          </button>
          <div class="avatar">
            <img
              src="avatar.png"
              alt="Profil Pengguna"
              class="avatar__img"
              loading="lazy" />
          </div>
        </div>
      </header>

      <!-- Dynamic Grid Container -->
      <div class="property-grid">
        <!-- Property Information Form -->
        <section class="property-section card" data-aos="fade-up">
          <h2 class="section-title">Informasi Properti</h2>
          <form class="property-form" id="propertyForm">
            <!-- Form fields with modern styling and validation -->
            <div class="form-group">
              <label class="form-label" for="property-name"
                >Nama Properti</label
              >
              <input
                class="form-input"
                type="text"
                id="property-name"
                required
                placeholder="Nama properti Anda"
                data-validate="required" />
              <span class="form-feedback"></span>
            </div>

            <div class="form-group">
              <label class="form-label" for="property-photos"
                >Foto Properti</label
              >
              <input
                class="form-input"
                type="file"
                id="property-photos"
                multiple
                accept="image/*" />
              <div id="thumbnails" class="property-image"></div>
              <span class="form-feedback"></span>
            </div>

            <div class="action-buttons">
              <button type="submit" class="btn btn--primary">
                Simpan Perubahan
              </button>
            </div>
          </form>
        </section>

        <!-- Price and Availability Section -->
        <section
          class="form-section card"
          data-aos="fade-up"
          data-aos-delay="100">
          <!-- Price and availability content -->
        </section>

        <!-- Facilities Section -->
        <section
          class="form-section card"
          data-aos="fade-up"
          data-aos-delay="200">
          <!-- Facilities content -->
        </section>
      </div>
    </main>

    <!-- Modern JavaScript Libraries -->
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>

    <!-- Main JavaScript -->
    <script>
      // Initialize AOS
      AOS.init({
        duration: 800,
        once: true,
      });

      // Debounced form handling
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Modern file upload handling
      const fileInput = document.getElementById("property-photos");
      const thumbnailPreview = document.getElementById("thumbnails");

      const handleFileUpload = debounce((e) => {
        thumbnailPreview.innerHTML = "";
        const files = e.target.files;

        Array.from(files).forEach((file) => {
          if (file.size > 5 * 1024 * 1024) {
            alert("File size exceeds 5MB limit");
            return;
          }

          const reader = new FileReader();
          reader.onload = (e) => {
            const img = document.createElement("img");
            img.src = e.target.result;
            img.classList.add(
              "thumbnail-image",
              "animate__animated",
              "animate__fadeIn"
            );
            thumbnailPreview.appendChild(img);
          };
          reader.readAsDataURL(file);
        });
      }, 250);

      fileInput.addEventListener("change", handleFileUpload);

      // Form validation
      document.querySelectorAll("form").forEach((form) => {
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          // Add loading state
          const submitBtn = e.target.querySelector('button[type="submit"]');
          submitBtn.classList.add("loading");

          // Simulate API call
          setTimeout(() => {
            submitBtn.classList.remove("loading");
            // Show success message
            showNotification("Changes saved successfully!");
          }, 1000);
        });
      });

      // Notification system
      function showNotification(message) {
        const notification = document.createElement("div");
        notification.classList.add(
          "notification",
          "animate__animated",
          "animate__fadeInRight"
        );
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
          notification.classList.add("animate__fadeOutRight");
          setTimeout(() => notification.remove(), 1000);
        }, 3000);
      }
    </script>
  </body>
</html>
