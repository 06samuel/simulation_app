<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="theme-color" content="#1976d2" />
  <meta name="description"
    content="Temukan apartemen impian Anda dengan ApartmentFinder. Pilihan terbaik dengan harga terjangkau." />
  <title>ApartmentFinder</title>
  <style>
    /* Root Variables - Design Tokens */
    :root {
      /* Colors - Palet yang harmonis dan konsisten */
      --clr-primary: #1976d2;
      --clr-primary-hover: #1565c0;
      --clr-primary-light: #bbdefb;
      --clr-primary-transparent: rgba(25, 118, 210, 0.1);
      --clr-secondary: #f5f5f5;
      --clr-secondary-hover: #e0e0e0;
      --clr-accent: #ff4081;
      --clr-accent-hover: #f50057;
      --clr-accent-light: #ff80ab;
      --clr-background: #ffffff;
      --clr-foreground: #212121;
      --clr-muted: #757575;
      --clr-border: #e0e0e0;
      --clr-success: #4caf50;
      --clr-warning: #ff9800;
      --clr-error: #f44336;
      --clr-info: #2196f3;
      --clr-surface: #fafafa;
      --clr-overlay: rgba(0, 0, 0, 0.5);
      --clr-overlay-light: rgba(0, 0, 0, 0.2);

      /* Spacing - Sistem jarak yang konsisten */
      --spc-xxs: 0.25rem;
      /* 4px */
      --spc-xs: 0.5rem;
      /* 8px */
      --spc-sm: 1rem;
      /* 16px */
      --spc-md: 1.5rem;
      /* 24px */
      --spc-lg: 2rem;
      /* 32px */
      --spc-xl: 3rem;
      /* 48px */
      --spc-xxl: 4rem;
      /* 64px */

      /* Typography - Hirarki teks yang jelas */
      --txt-xs: 0.75rem;
      /* 12px */
      --txt-sm: 0.875rem;
      /* 14px */
      --txt-md: 1rem;
      /* 16px */
      --txt-lg: 1.25rem;
      /* 20px */
      --txt-xl: 1.5rem;
      /* 24px */
      --txt-2xl: 2rem;
      /* 32px */
      --txt-3xl: 2.5rem;
      /* 40px */
      --line-height-tight: 1.2;
      --line-height-normal: 1.5;
      --line-height-loose: 1.8;
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-bold: 700;

      /* Shadows - Kedalaman visual */
      --shd-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shd-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
      --shd-md: 0 4px 8px rgba(0, 0, 0, 0.15);
      --shd-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
      --shd-xl: 0 12px 24px rgba(0, 0, 0, 0.25);
      --shd-inner: inset 0 2px 4px rgba(0, 0, 0, 0.05);
      --shd-focus: 0 0 0 3px rgba(25, 118, 210, 0.25);
      --shd-hover: 0 6px 12px rgba(0, 0, 0, 0.1);

      /* Border Radius - Konsistensi bentuk */
      --rad-xs: 0.125rem;
      /* 2px */
      --rad-sm: 0.25rem;
      /* 4px */
      --rad-md: 0.5rem;
      /* 8px */
      --rad-lg: 1rem;
      /* 16px */
      --rad-xl: 1.5rem;
      /* 24px */
      --rad-full: 9999px;

      /* Transitions - Gerakan yang halus */
      --trs-fast: 0.2s ease;
      --trs-md: 0.3s ease;
      --trs-slow: 0.5s ease;
      --trs-bounce: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      --trs-elastic: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    /* Base Styles */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 100%;
      /* 16px base */
    }

    body {
      font-family: var(--font-family);
      background-color: var(--clr-background);
      color: var(--clr-foreground);
      line-height: var(--line-height-normal);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    img,
    picture,
    video,
    canvas,
    svg {
      display: block;
      max-width: 100%;
    }

    input,
    button,
    textarea,
    select {
      font: inherit;
    }

    /* Utility Classes */
    /* Margins */
    .m-0 {
      margin: 0;
    }

    .m-xs {
      margin: var(--spc-xs);
    }

    .m-sm {
      margin: var(--spc-sm);
    }

    .m-md {
      margin: var(--spc-md);
    }

    .m-lg {
      margin: var(--spc-lg);
    }

    .m-xl {
      margin: var(--spc-xl);
    }

    .mt-sm {
      margin-top: var(--spc-sm);
    }

    .mb-sm {
      margin-bottom: var(--spc-sm);
    }

    .mt-md {
      margin-top: var(--spc-md);
    }

    .mb-md {
      margin-bottom: var(--spc-md);
    }

    .mt-lg {
      margin-top: var(--spc-lg);
    }

    .mb-lg {
      margin-bottom: var(--spc-lg);
    }

    /* Padding */
    .p-0 {
      padding: 0;
    }

    .p-xs {
      padding: var(--spc-xs);
    }

    .p-sm {
      padding: var(--spc-sm);
    }

    .p-md {
      padding: var(--spc-md);
    }

    .p-lg {
      padding: var(--spc-lg);
    }

    .p-xl {
      padding: var(--spc-xl);
    }

    /* Typography */
    .txt-xs {
      font-size: var(--txt-xs);
    }

    .txt-sm {
      font-size: var(--txt-sm);
    }

    .txt-md {
      font-size: var(--txt-md);
    }

    .txt-lg {
      font-size: var(--txt-lg);
    }

    .txt-xl {
      font-size: var(--txt-xl);
    }

    .txt-2xl {
      font-size: var(--txt-2xl);
    }

    .txt-3xl {
      font-size: var(--txt-3xl);
    }

    .txt-bold {
      font-weight: var(--font-weight-bold);
    }

    .txt-medium {
      font-weight: var(--font-weight-medium);
    }

    .txt-center {
      text-align: center;
    }

    .txt-left {
      text-align: left;
    }

    .txt-right {
      text-align: right;
    }

    .txt-muted {
      color: var(--clr-muted);
    }

    .txt-white {
      color: var(--clr-background);
    }

    .txt-primary {
      color: var(--clr-primary);
    }

    .txt-accent {
      color: var(--clr-accent);
    }

    /* Flexbox */
    .flex {
      display: flex;
    }

    .flex-column {
      flex-direction: column;
    }

    .justify-start {
      justify-content: flex-start;
    }

    .justify-center {
      justify-content: center;
    }

    .justify-end {
      justify-content: flex-end;
    }

    .justify-between {
      justify-content: space-between;
    }

    .justify-around {
      justify-content: space-around;
    }

    .align-start {
      align-items: flex-start;
    }

    .align-center {
      align-items: center;
    }

    .align-end {
      align-items: flex-end;
    }

    .flex-wrap {
      flex-wrap: wrap;
    }

    .gap-xxs {
      gap: var(--spc-xxs);
    }

    .gap-xs {
      gap: var(--spc-xs);
    }

    .gap-sm {
      gap: var(--spc-sm);
    }

    .gap-md {
      gap: var(--spc-md);
    }

    .gap-lg {
      gap: var(--spc-lg);
    }

    /* Grid System */
    .container {
      width: 100%;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      padding-left: var(--spc-md);
      padding-right: var(--spc-md);
    }

    .grid {
      display: grid;
    }

    .grid-cols-12 {
      grid-template-columns: repeat(12, 1fr);
    }

    .col-span-3 {
      grid-column: span 3 / span 3;
    }

    .col-span-4 {
      grid-column: span 4 / span 4;
    }

    .col-span-6 {
      grid-column: span 6 / span 6;
    }

    .col-span-8 {
      grid-column: span 8 / span 8;
    }

    .col-span-12 {
      grid-column: span 12 / span 12;
    }

    .apartment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--spc-md);
    }

    /* Visually Hidden */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }

    /* Components */
    /* Header */
    .header {
      background-color: var(--clr-background);
      box-shadow: var(--shd-sm);
      position: sticky;
      top: 0;
      z-index: 1000;
      /* Higher z-index for SPA */
      padding: var(--spc-sm) 0;
    }

    .header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      color: var(--clr-primary);
      text-decoration: none;
      font-weight: var(--font-weight-bold);
      font-size: var(--txt-xl);
    }

    .nav-menu {
      display: flex;
      gap: var(--spc-md);
      list-style: none;
    }

    .nav-link {
      color: var(--clr-foreground);
      text-decoration: none;
      padding: var(--spc-xs) var(--spc-sm);
      border-radius: var(--rad-sm);
      transition: color var(--trs-fast), background-color var(--trs-fast);
      font-weight: var(--font-weight-medium);
    }

    .nav-link:hover,
    .nav-link:focus {
      color: var(--clr-primary);
      background-color: var(--clr-primary-transparent);
    }

    .nav-link.active {
      color: var(--clr-primary);
      font-weight: var(--font-weight-bold);
      box-shadow: var(--shd-inner);
      background-color: var(--clr-primary-transparent);
    }

    .nav-toggle {
      display: none;
      /* Hidden by default, shown in media query */
      background: none;
      border: none;
      font-size: var(--txt-2xl);
      color: var(--clr-primary);
      cursor: pointer;
      padding: var(--spc-xs);
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(var(--clr-overlay), var(--clr-overlay)),
        url("https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80") center/cover no-repeat;
      /* Ganti dengan URL gambar hero yang valid atau path lokal jika ada */
      /* background-color: var(--clr-primary-light); /* Fallback jika gambar tidak termuat */
      padding: var(--spc-xxl) 0;
      color: var(--clr-background);
      text-align: center;
      position: relative;
      overflow: hidden;
      min-height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg,
          var(--clr-primary-transparent),
          transparent);
      opacity: 0.6;
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 800px;
      margin: 0 auto;
    }

    .hero-title {
      font-size: var(--txt-3xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spc-md);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .hero-subtitle {
      font-size: var(--txt-xl);
      margin-bottom: var(--spc-lg);
      opacity: 0.9;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Apartment Card */
    .apartment-card {
      background: var(--clr-background);
      border-radius: var(--rad-md);
      box-shadow: var(--shd-sm);
      overflow: hidden;
      transition: transform var(--trs-md), box-shadow var(--trs-md);
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
      /* Untuk keseragaman tinggi dalam grid */
    }

    .apartment-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shd-hover);
    }

    .apartment-card:focus-within {
      outline: none;
      box-shadow: var(--shd-focus), var(--shd-md);
    }

    .apartment-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: transform var(--trs-slow);
    }

    .apartment-card:hover img {
      transform: scale(1.05);
    }

    .apartment-card-content {
      padding: var(--spc-md);
      flex-grow: 1;
      /* Agar konten mengisi ruang yang tersisa */
      display: flex;
      flex-direction: column;
    }

    .apartment-card-title {
      font-size: var(--txt-lg);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spc-xs);
      color: var(--clr-foreground);
    }

    .apartment-card-location {
      font-size: var(--txt-sm);
      color: var(--clr-muted);
      margin-bottom: var(--spc-xs);
      display: flex;
      align-items: center;
      gap: var(--spc-xxs);
    }

    .apartment-card-location svg {
      width: 1em;
      height: 1em;
      fill: currentColor;
    }

    .apartment-card-price {
      font-size: var(--txt-xl);
      font-weight: var(--font-weight-bold);
      color: var(--clr-primary);
      margin-bottom: var(--spc-sm);
    }

    .apartment-card-features {
      display: flex;
      flex-wrap: wrap;
      /* Agar fitur bisa turun baris jika tidak muat */
      gap: var(--spc-sm);
      margin-bottom: var(--spc-sm);
    }

    .apartment-card-feature {
      display: flex;
      align-items: center;
      gap: var(--spc-xxs);
      font-size: var(--txt-sm);
      color: var(--clr-muted);
    }

    .apartment-card-feature svg {
      width: 1.1em;
      height: 1.1em;
      fill: currentColor;
    }

    .apartment-card-actions {
      margin-top: auto;
      /* Mendorong tombol ke bawah kartu */
      padding-top: var(--spc-sm);
      /* Jarak dari konten di atasnya */
    }

    .apartment-card-badge {
      position: absolute;
      top: var(--spc-sm);
      right: var(--spc-sm);
      background-color: var(--clr-accent);
      color: var(--clr-background);
      padding: var(--spc-xxs) var(--spc-xs);
      border-radius: var(--rad-sm);
      font-size: var(--txt-xs);
      font-weight: var(--font-weight-bold);
      z-index: 1;
      box-shadow: var(--shd-sm);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--spc-sm) var(--spc-md);
      border-radius: var(--rad-sm);
      font-weight: var(--font-weight-medium);
      cursor: pointer;
      transition: all var(--trs-fast);
      border: 1px solid transparent;
      position: relative;
      overflow: hidden;
      text-decoration: none;
      letter-spacing: 0.5px;
      min-height: 44px;
      /* Aksesibilitas */
      min-width: 44px;
      /* Aksesibilitas */
    }

    .btn::after {
      /* Efek ripple */
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%, -50%);
      transform-origin: 50% 50%;
    }

    .btn:focus {
      outline: none;
      box-shadow: var(--shd-focus);
    }

    .btn:focus-visible {
      outline: 2px solid var(--clr-primary);
      outline-offset: 2px;
    }


    .btn:active::after {
      animation: ripple 0.6s ease-out;
    }

    @keyframes ripple {
      0% {
        transform: scale(0, 0) translate(-50%, -50%);
        opacity: 0.5;
      }

      100% {
        opacity: 0;
        transform: scale(40, 40) translate(-50%, -50%);
      }
    }

    .btn-primary {
      background-color: var(--clr-primary);
      color: var(--clr-background);
      box-shadow: var(--shd-xs);
    }

    .btn-primary:hover,
    .btn-primary:focus {
      background-color: var(--clr-primary-hover);
      box-shadow: var(--shd-sm);
      transform: translateY(-2px);
    }

    .btn-primary:active {
      transform: translateY(0);
      background-color: var(--clr-primary-hover);
    }

    .btn-secondary {
      background-color: var(--clr-secondary);
      color: var(--clr-foreground);
      border-color: var(--clr-border);
      box-shadow: var(--shd-xs);
    }

    .btn-secondary:hover,
    .btn-secondary:focus {
      background-color: var(--clr-secondary-hover);
      border-color: var(--clr-muted);
      box-shadow: var(--shd-sm);
      transform: translateY(-2px);
    }

    .btn-secondary:active {
      transform: translateY(0);
      background-color: var(--clr-secondary-hover);
    }

    .btn-accent {
      background-color: var(--clr-accent);
      color: var(--clr-background);
      box-shadow: var(--shd-xs);
    }

    .btn-accent:hover,
    .btn-accent:focus {
      background-color: var(--clr-accent-hover);
      box-shadow: var(--shd-sm);
      transform: translateY(-2px);
    }

    .btn-accent:active {
      transform: translateY(0);
      background-color: var(--clr-accent-hover);
    }

    .btn-lg {
      padding: var(--spc-md) var(--spc-lg);
      font-size: var(--txt-md);
      /* Disesuaikan, txt-lg bisa terlalu besar */
      border-radius: var(--rad-md);
    }

    /* Forms */
    .form-group {
      margin-bottom: var(--spc-md);
      position: relative;
    }

    .form-label {
      display: block;
      margin-bottom: var(--spc-xs);
      font-weight: var(--font-weight-medium);
      color: var(--clr-foreground);
      transition: color var(--trs-fast);
    }

    .form-control {
      width: 100%;
      padding: var(--spc-sm);
      border: 1px solid var(--clr-border);
      border-radius: var(--rad-sm);
      transition: border-color var(--trs-fast), box-shadow var(--trs-fast);
      background-color: var(--clr-background);
      font-size: var(--txt-md);
      min-height: 44px;
      /* Aksesibilitas */
    }

    .form-control:focus {
      outline: none;
      border-color: var(--clr-primary);
      box-shadow: var(--shd-focus);
    }

    .form-control:hover:not(:focus) {
      border-color: var(--clr-muted);
    }

    .form-group:focus-within .form-label {
      color: var(--clr-primary);
    }

    .form-hint {
      display: block;
      margin-top: var(--spc-xs);
      font-size: var(--txt-sm);
      color: var(--clr-muted);
    }

    .form-error-message {
      /* diganti dari .form-error */
      display: block;
      margin-top: var(--spc-xs);
      font-size: var(--txt-sm);
      color: var(--clr-error);
      font-weight: var(--font-weight-medium);
    }

    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }

    /* Custom checkbox */
    .form-checkbox-group {
      /* Mengganti .form-checkbox */
      display: flex;
      align-items: center;
      cursor: pointer;
      user-select: none;
      gap: var(--spc-xs);
    }

    .form-checkbox-group input[type="checkbox"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    .checkbox-custom-indicator {
      /* Mengganti .checkbox-custom */
      position: relative;
      display: inline-block;
      width: 20px;
      /* Sedikit lebih besar */
      height: 20px;
      background-color: var(--clr-background);
      border: 2px solid var(--clr-border);
      border-radius: var(--rad-xs);
      transition: all var(--trs-fast);
    }

    .form-checkbox-group input[type="checkbox"]:checked~.checkbox-custom-indicator {
      background-color: var(--clr-primary);
      border-color: var(--clr-primary);
    }

    .checkbox-custom-indicator::after {
      content: "";
      position: absolute;
      display: none;
      left: 6px;
      top: 2px;
      width: 5px;
      height: 10px;
      border: solid var(--clr-background);
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }

    .form-checkbox-group input[type="checkbox"]:checked~.checkbox-custom-indicator::after {
      display: block;
    }

    .form-checkbox-group input[type="checkbox"]:focus-visible~.checkbox-custom-indicator {
      box-shadow: var(--shd-focus);
    }


    /* Filter-specific styles */
    .filters-bar {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spc-md);
      align-items: flex-end;
      /* Align items to bottom for consistent baseline */
      margin-bottom: var(--spc-lg);
      padding: var(--spc-md);
      background-color: var(--clr-surface);
      border-radius: var(--rad-md);
      box-shadow: var(--shd-xs);
    }

    .filters-bar .form-group {
      margin-bottom: 0;
      /* Remove default margin for form-group inside filters-bar */
      flex-grow: 1;
      min-width: 200px;
      /* Ensure inputs don't get too small */
    }


    /* Process Steps - Narasi visual */
    .how-it-works-section {
      /* Mengganti .how-it-works */
      padding: var(--spc-xl) 0;
      background-color: var(--clr-surface);
    }

    .section-title {
      font-size: var(--txt-2xl);
      font-weight: var(--font-weight-bold);
      text-align: center;
      margin-bottom: var(--spc-lg);
      position: relative;
      display: inline-block;
      /* Agar ::after bekerja dengan baik */
      left: 50%;
      transform: translateX(-50%);
    }

    .section-title::after {
      content: "";
      position: absolute;
      bottom: -var(--spc-xs);
      /* Jarak garis bawah dari teks */
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      /* Lebar garis bawah */
      height: 4px;
      /* Ketebalan garis bawah */
      background-color: var(--clr-primary);
      border-radius: var(--rad-full);
    }

    .process-steps-grid {
      /* Mengganti .process-steps */
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--spc-md);
      position: relative;
      /* Untuk pseudo-element garis penghubung jika diperlukan */
      margin-top: var(--spc-lg);
    }

    /* Garis penghubung antar step (opsional, lebih kompleks untuk responsif) */
    /* .process-steps-grid::before { ... } */

    .process-step-card {
      /* Mengganti .process-step */
      padding: var(--spc-lg);
      border-radius: var(--rad-md);
      background-color: var(--clr-background);
      transition: transform var(--trs-md), box-shadow var(--trs-md), border-color var(--trs-md);
      border: 1px solid var(--clr-border);
      text-align: center;
      height: 100%;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shd-sm);
    }

    .process-step-card::after {
      /* Dekorasi garis atas saat hover */
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background-color: var(--clr-primary);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform var(--trs-md);
    }

    .process-step-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shd-md);
      border-color: var(--clr-primary-light);
    }

    .process-step-card:hover::after {
      transform: scaleX(1);
    }

    .process-step-card:hover .step-number-badge {
      /* Mengganti .step-number */
      transform: scale(1.1) rotate(5deg);
      background-color: var(--clr-accent);
    }

    .step-number-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: var(--clr-primary);
      color: var(--clr-background);
      font-weight: var(--font-weight-bold);
      font-size: var(--txt-xl);
      margin: 0 auto var(--spc-md);
      box-shadow: var(--shd-md);
      transition: transform var(--trs-bounce), background-color var(--trs-fast);
      position: relative;
      z-index: 1;
    }

    .process-step-card h3 {
      font-size: var(--txt-lg);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spc-xs);
      color: var(--clr-foreground);
    }

    .process-step-card p {
      color: var(--clr-muted);
      font-size: var(--txt-sm);
    }


    /* Featured Apartments Section */
    .featured-apartments-section {
      /* Mengganti .featured-apartments */
      padding: var(--spc-xl) 0;
    }

    /* Call to Action Section */
    .call-to-action-section {
      /* Mengganti .call-to-action */
      background-color: var(--clr-primary-transparent);
      padding: var(--spc-xl) 0;
      margin: var(--spc-xl) 0;
    }

    .cta-content-box {
      /* Mengganti .cta-content */
      max-width: 800px;
      margin: 0 auto;
      padding: var(--spc-lg);
      background-color: var(--clr-background);
      border-radius: var(--rad-md);
      box-shadow: var(--shd-md);
      text-align: center;
    }

    .cta-content-box h2 {
      font-size: var(--txt-2xl);
      margin-bottom: var(--spc-sm);
    }

    .cta-content-box p {
      margin-bottom: var(--spc-md);
      font-size: var(--txt-lg);
    }


    /* User Reviews Section */
    .user-reviews-section {
      /* Mengganti .user-review */
      background-color: var(--clr-secondary);
      /* Warna latar beda untuk variasi */
      padding: var(--spc-xl) 0;
    }

    .reviews-grid {
      /* Mengganti .review-container */
      margin-top: var(--spc-lg);
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: var(--spc-md);
    }

    .review-card {
      background-color: var(--clr-background);
      padding: var(--spc-md);
      border-radius: var(--rad-md);
      box-shadow: var(--shd-sm);
      transition: transform var(--trs-md), box-shadow var(--trs-md);
      display: flex;
      flex-direction: column;
    }

    .review-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shd-hover);
    }

    .review-card-text {
      /* class baru untuk teks review */
      font-style: italic;
      margin-bottom: var(--spc-md);
      color: var(--clr-foreground);
      flex-grow: 1;
    }

    .review-card-text::before {
      content: "“";
      font-size: 2em;
      color: var(--clr-primary);
      margin-right: var(--spc-xxs);
      line-height: 0;
    }

    .review-card-author {
      /* class baru untuk author */
      font-weight: var(--font-weight-medium);
      text-align: right;
      color: var(--clr-muted);
      font-size: var(--txt-sm);
    }

    .review-card-author::before {
      content: "— ";
    }

    /* Apartment Details Page Specific Styles */
    .apartment-detail-image {
      width: 100%;
      border-radius: var(--rad-lg);
      box-shadow: var(--shd-lg);
      margin-bottom: var(--spc-lg);
      object-fit: cover;
      max-height: 500px;
    }

    .apartment-detail-content h1 {
      font-size: var(--txt-3xl);
      margin-bottom: var(--spc-sm);
    }

    .apartment-detail-content .price {
      font-size: var(--txt-2xl);
      color: var(--clr-primary);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spc-md);
    }

    .apartment-detail-info p {
      font-size: var(--txt-md);
      margin-bottom: var(--spc-xs);
      color: var(--clr-muted);
    }

    .apartment-detail-info p strong {
      color: var(--clr-foreground);
      min-width: 120px;
      display: inline-block;
    }

    .apartment-detail-amenities {
      margin-top: var(--spc-md);
      margin-bottom: var(--spc-lg);
    }

    .apartment-detail-amenities h3 {
      font-size: var(--txt-lg);
      margin-bottom: var(--spc-sm);
    }

    .amenities-list {
      list-style: none;
      padding-left: 0;
      display: flex;
      flex-wrap: wrap;
      gap: var(--spc-sm);
    }

    .amenity-item {
      background-color: var(--clr-primary-transparent);
      color: var(--clr-primary);
      padding: var(--spc-xs) var(--spc-sm);
      border-radius: var(--rad-full);
      font-size: var(--txt-sm);
      font-weight: var(--font-weight-medium);
    }


    /* Footer Section */
    .footer {
      background-color: var(--clr-foreground);
      /* Warna lebih gelap untuk kontras */
      color: var(--clr-secondary);
      padding: var(--spc-lg) 0;
      /* Padding lebih besar */
      margin-top: var(--spc-xl);
      border-top: 4px solid var(--clr-primary);
      /* Aksen warna primer */
    }

    .footer p {
      color: var(--clr-muted);
      /* Warna teks yang lebih soft */
      font-size: var(--txt-sm);
    }


    /* Responsive Design - Adaptasi untuk berbagai perangkat */
    @media (max-width: 992px) {

      /* Tablet */
      .container {
        max-width: 960px;
      }

      .hero-title {
        font-size: var(--txt-2xl);
      }

      .hero-subtitle {
        font-size: var(--txt-lg);
      }

      .col-span-3,
      .col-span-4 {
        grid-column: span 6 / span 6;
      }

      .process-steps-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }

      .apartment-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }
    }

    @media (max-width: 768px) {

      /* Mobile landscape & large phones */
      :root {
        /* Ukuran font dan spasi sedikit lebih kecil untuk mobile */
        --txt-xl: 1.3rem;
        --txt-2xl: 1.75rem;
        --txt-3xl: 2.25rem;
        --spc-lg: 1.5rem;
        --spc-xl: 2.5rem;
      }

      .container {
        padding-left: var(--spc-sm);
        padding-right: var(--spc-sm);
      }

      .hero {
        min-height: 50vh;
        padding: var(--spc-xl) 0;
      }

      .nav-toggle {
        display: block;
      }

      .nav-menu {
        display: none;
        /* Default state */
        flex-direction: column;
        position: absolute;
        top: 100%;
        /* Di bawah header */
        left: 0;
        right: 0;
        background: var(--clr-background);
        padding: var(--spc-md);
        box-shadow: var(--shd-md);
        border-bottom-left-radius: var(--rad-md);
        border-bottom-right-radius: var(--rad-md);
        animation: slideDownMenu 0.3s ease-out;
        transform-origin: top center;
      }

      .nav-menu.active {
        display: flex;
      }

      /* State ketika menu terbuka */

      .nav-link {
        width: 100%;
        text-align: left;
        padding: var(--spc-md);
        border-bottom: 1px solid var(--clr-border);
      }

      .nav-link:last-child {
        border-bottom: none;
      }

      .col-span-3,
      .col-span-4,
      .col-span-6,
      .col-span-8 {
        grid-column: span 12 / span 12;
      }

      .apartment-detail-image {
        max-height: 350px;
      }

      .filters-bar .form-group {
        min-width: 100%;
      }
    }

    @media (max-width: 576px) {

      /* Mobile portrait */
      :root {
        --txt-lg: 1.1rem;
        --txt-xl: 1.2rem;
        --txt-2xl: 1.5rem;
        --txt-3xl: 1.8rem;
      }

      .hero {
        min-height: 40vh;
        padding: var(--spc-lg) 0;
      }

      .hero-subtitle {
        font-size: var(--txt-md);
        margin-bottom: var(--spc-md);
      }

      .apartment-grid {
        grid-template-columns: 1fr;
        gap: var(--spc-md);
      }

      .btn-lg {
        width: 100%;
      }

      .footer {
        padding: var(--spc-md) 0;
      }
    }

    /* Animations - Gerakan untuk menarik perhatian */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideInUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideDownMenu {
      from {
        transform: scaleY(0.9);
        opacity: 0;
      }

      to {
        transform: scaleY(1);
        opacity: 1;
      }
    }

    @keyframes pulse {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }
    }

    /* Animation Utility Classes */
    .fade-in {
      animation: fadeIn var(--trs-md) ease-out both;
    }

    .slide-in-up {
      animation: slideInUp var(--trs-md) ease-out both;
    }

    .pulse-animation {
      animation: pulse 2s infinite ease-in-out;
    }

    /* Delay utilities */
    .anim-delay-100 {
      animation-delay: 0.1s;
    }

    .anim-delay-200 {
      animation-delay: 0.2s;
    }

    .anim-delay-300 {
      animation-delay: 0.3s;
    }


    /* Accessibility Enhancements */
    .skip-to-content {
      position: absolute;
      top: -100px;
      /* Sembunyikan di luar layar */
      left: 0;
      background: var(--clr-primary);
      color: var(--clr-background);
      padding: var(--spc-sm) var(--spc-md);
      z-index: 9999;
      transition: top var(--trs-fast);
      border-bottom-right-radius: var(--rad-md);
    }

    .skip-to-content:focus {
      top: 0;
      /* Tampilkan saat fokus */
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }

      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        transition-delay: 0ms !important;
      }
    }
  </style>
</head>

<body>
  <a href="#main-content" class="skip-to-content">Lompat ke Konten Utama</a>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <a href="#/" class="logo">ApartmentFinder</a>
      <button class="nav-toggle" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle navigasi">
        <span aria-hidden="true">☰</span>
      </button>
      <nav class="nav">
        <ul class="nav-menu" id="navMenu">
          <li><a href="#/" class="nav-link">Beranda</a></li>
          <li><a href="#/apartemen" class="nav-link">Apartemen</a></li>
          <li><a href="#/kontak" class="nav-link">Kontak</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Konten Utama (diisi oleh JavaScript) -->
  <main id="main-content" class="main-content-area" aria-live="polite">
    <!-- Konten dinamis akan dimuat di sini -->
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container txt-center">
      <p>© <span id="currentYear"></span> ApartmentFinder. Semua hak cipta dilindungi.</p>
      <p class="txt-xs">Dibuat dengan ❤️ menggunakan Vanilla JS.</p>
    </div>
  </footer>

  <script>
    /**
     * ApartmentFinderApp
     * Kelas utama untuk mengelola logika aplikasi pencarian apartemen.
     * Bertanggung jawab untuk state management, rendering halaman, dan event handling.
     * Ini adalah aplikasi Single Page Application (SPA) yang dibangun dengan Vanilla JavaScript.
     */
    class ApartmentFinderApp {
      constructor() {
        // Referensi elemen DOM global
        this.appContent = document.getElementById('main-content');
        this.navToggle = document.querySelector('.nav-toggle');
        this.navMenu = document.querySelector('.nav-menu');
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // State aplikasi
        this.state = {
          apartments: [
            {
              id: 1, name: "Apartemen Mewah Pusat Kota", location: "Pusat Kota Jakarta", price: 25000000,
              image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
              details: { bedrooms: 3, bathrooms: 2, area: "120 m²", amenities: ["Kolam Renang", "Gym", "Parkir Basement", "Keamanan 24 Jam"] }
            },
            {
              id: 2, name: "Studio Nyaman di Pinggir Kota", location: "Tangerang Selatan", price: 8500000,
              image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
              details: { bedrooms: 1, bathrooms: 1, area: "35 m²", amenities: ["Dapur Mini", "Balkon", "Wi-Fi Cepat"] }
            },
            {
              id: 3, name: "Loft Modern dengan Pemandangan", location: "Bandung Utara", price: 15000000,
              image: "https://images.unsplash.com/photo-1494203484021-3ce26331d648?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
              details: { bedrooms: 2, bathrooms: 1, area: "70 m²", amenities: ["Jendela Besar", "Desain Terbuka", "Dekat Kafe"] }
            },
            {
              id: 4, name: "Apartemen Keluarga Luas", location: "Surabaya Timur", price: 18000000,
              image: "https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
              details: { bedrooms: 4, bathrooms: 3, area: "150 m²", amenities: ["Taman Bermain Anak", "Ruang Belajar", "Dapur Besar"] }
            },
            {
              id: 5, name: "Apartemen Minimalis Dekat Kampus", location: "Yogyakarta", price: 5000000,
              image: "https://images.unsplash.com/photo-1616047006789-b7af5afb8c20?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
              details: { bedrooms: 1, bathrooms: 1, area: "28 m²", amenities: ["Meja Belajar", "Akses Mudah Transportasi Umum"] }
            },
            {
              id: 6, name: "Penthouse Eksklusif", location: "SCBD, Jakarta", price: 75000000,
              image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
              details: { bedrooms: 4, bathrooms: 4, area: "300 m²", amenities: ["Pemandangan Kota", "Lift Pribadi", "Rooftop Garden", "Jacuzzi"] }
            }
          ],
          reviews: [
            { text: "Saya menemukan apartemen impian saya dengan cepat dan mudah melalui situs ini. Sangat direkomendasikan!", author: "Rina Amelia", avatar: "https://i.pravatar.cc/150?img=1" },
            { text: "Pelayanan prima dan pilihan apartemen yang luar biasa. Saya sangat puas dengan tempat baru saya.", author: "Budi Santoso", avatar: "https://i.pravatar.cc/150?img=2" },
            { text: "Prosesnya mulus dari awal hingga akhir. Tim ApartmentFinder sangat membantu.", author: "Citra Dewi", avatar: "https://i.pravatar.cc/150?img=3" }
          ],
          filteredApartments: [], // Akan diisi berdasarkan filter
          searchQuery: '',
          priceRange: 'all',
        };
        this.state.filteredApartments = [...this.state.apartments]; // Inisialisasi awal
        this.initGlobalListeners();
      }

      // Inisialisasi event listener global (seperti toggle navigasi)
      initGlobalListeners() {
        if (this.navToggle && this.navMenu) {
          this.navToggle.addEventListener('click', () => {
            const isExpanded = this.navToggle.getAttribute('aria-expanded') === 'true' || false;
            this.navToggle.setAttribute('aria-expanded', !isExpanded);
            this.navMenu.classList.toggle('active');
            // Ubah ikon berdasarkan state (opsional)
            this.navToggle.querySelector('span').textContent = !isExpanded ? '✕' : '☰';
          });
        }

        // Tutup menu jika diklik di luar area navigasi (opsional, untuk UX yang lebih baik)
        document.addEventListener('click', (event) => {
          if (this.navMenu.classList.contains('active') &&
            !this.navMenu.contains(event.target) &&
            !this.navToggle.contains(event.target)) {
            this.navMenu.classList.remove('active');
            this.navToggle.setAttribute('aria-expanded', 'false');
            this.navToggle.querySelector('span').textContent = '☰';
          }
        });
      }

      // Fungsi utilitas untuk format harga
      formatCurrency(amount) {
        return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
      }

      // --- SVG ICONS ---
      getIcon(type) {
        const icons = {
          bed: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M20 9.557V3h-2v2H6V3H4v6.557C2.81 10.02 2 11.161 2 12.5V19h2v-2h16v2h2v-6.5c0-1.339-.81-2.48-1.999-2.943zM18 11H6V7h12v4z"/></svg>`,
          bath: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M20 13V6c0-1.654-1.346-3-3-3H7C5.346 3 4 4.346 4 6v7c-1.103 0-2 .897-2 2v3h2v2h16v-2h2v-3c0-1.103-.897-2-2-2zM8 6c0-.551.449-1 1-1s1 .449 1 1v2H8V6zm4 0c0-.551.449-1 1-1s1 .449 1 1v2h-2V6zm6 10H6v-1c0-.551.449-1 1-1h10c.551 0 1 .449 1 1v1zm0-3h-2V9H8v4H6V6c0-.551.449-1 1-1h2V4h4v1h2c.551 0 1 .449 1 1v4z"/></svg>`,
          area: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M21 3H3c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h18c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM5 19V5h14l.002 14H5z"/><path d="M7 7h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zm-8 4h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zm-8 4h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"/></svg>`,
          location: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 2C7.589 2 4 5.589 4 10c0 6.5 8 12 8 12s8-5.5 8-12c0-4.411-3.589-8-8-8zm0 12c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4z"/></svg>`
        };
        return icons[type] || '';
      }

      // --- METODE RENDERING KARTU ---
      renderApartmentCard(apartment, index = 0) {
        return `
          <article class="apartment-card slide-in-up anim-delay-${(index % 3) * 100}" aria-labelledby="apt-title-${apartment.id}">
            ${apartment.price > 20000000 ? `<div class="apartment-card-badge">Premium</div>` : ''}
            <img loading="lazy" src="${apartment.image}" alt="Tampilan luar ${apartment.name}">
            <div class="apartment-card-content">
              <h3 id="apt-title-${apartment.id}" class="apartment-card-title">${apartment.name}</h3>
              <p class="apartment-card-location">
                ${this.getIcon('location')}
                ${apartment.location}
              </p>
              <p class="apartment-card-price">${this.formatCurrency(apartment.price)}<span class="txt-sm txt-muted">/bulan</span></p>
              <div class="apartment-card-features">
                <span class="apartment-card-feature">${this.getIcon('bed')} ${apartment.details.bedrooms} K. Tidur</span>
                <span class="apartment-card-feature">${this.getIcon('bath')} ${apartment.details.bathrooms} K. Mandi</span>
                <span class="apartment-card-feature">${this.getIcon('area')} ${apartment.details.area}</span>
              </div>
              <div class="apartment-card-actions">
                <a href="#/apartemen/${apartment.id}" class="btn btn-primary" style="width:100%;">Lihat Detail</a>
              </div>
            </div>
          </article>
        `;
      }

      renderReviewCard(review, index = 0) {
        return `
            <article class="review-card slide-in-up anim-delay-${(index % 3) * 100}">
              <p class="review-card-text">${review.text}</p>
              <p class="review-card-author">${review.author}</p>
            </article>
          `;
      }

      renderProcessStepCard(step, index = 0) {
        return `
            <div class="process-step-card slide-in-up anim-delay-${index * 100}">
                <div class="step-number-badge">${step.number}</div>
                <h3>${step.title}</h3>
                <p>${step.description}</p>
            </div>
        `;
      }

      // --- METODE RENDERING HALAMAN ---
      renderHomePage() {
        const featured = this.state.apartments.slice(0, 3);
        const processSteps = [
          { number: 1, title: "Cari", description: "Telusuri koleksi apartemen kami dengan filter canggih." },
          { number: 2, title: "Bandingkan", description: "Bandingkan fitur, harga, dan lokasi untuk menemukan yang paling cocok." },
          { number: 3, title: "Hubungi", description: "Hubungi kami untuk jadwal kunjungan atau pertanyaan lebih lanjut." }
        ];

        return `
          <section class="hero">
            <div class="hero-content fade-in">
              <h1 class="hero-title">Temukan Apartemen Impian Anda</h1>
              <p class="hero-subtitle">Pilihan terbaik apartemen modern dan nyaman untuk kebutuhan Anda, dengan harga bersaing.</p>
              <a href="#/apartemen" class="btn btn-primary btn-lg hero-cta">Jelajahi Sekarang</a>
            </div>
          </section>

          <section class="featured-apartments-section container p-xl">
            <h2 class="section-title">Apartemen Unggulan</h2>
            <div class="apartment-grid">
              ${featured.map((apt, i) => this.renderApartmentCard(apt, i)).join('')}
            </div>
          </section>
          
          <section class="how-it-works-section">
            <div class="container p-xl">
                <h2 class="section-title">Bagaimana Cara Kerjanya?</h2>
                <div class="process-steps-grid">
                    ${processSteps.map((step, i) => this.renderProcessStepCard(step, i)).join('')}
                </div>
            </div>
          </section>

          <section class="call-to-action-section">
            <div class="container">
              <div class="cta-content-box fade-in">
                <h2>Siap Menemukan Rumah Baru Anda?</h2>
                <p class="txt-muted">Telusuri daftar kami dan mulai pencarian apartemen Anda hari ini!</p>
                <a href="#/apartemen" class="btn btn-primary btn-lg">Lihat Semua Apartemen</a>
              </div>
            </div>
          </section>

          <section class="user-reviews-section">
            <div class="container p-xl">
              <h2 class="section-title">Apa Kata Klien Kami</h2>
              <div class="reviews-grid">
                ${this.state.reviews.map((review, i) => this.renderReviewCard(review, i)).join('')}
              </div>
            </div>
          </section>
        `;
      }

      initHomePage() {
        this.setupIntersectionObserver('.apartment-card, .review-card, .process-step-card, .hero-content, .cta-content-box');
      }

      renderApartmentsPage() {
        return `
          <section class="container p-xl">
            <h1 class="section-title">Daftar Apartemen</h1>
            <div class="filters-bar">
              <div class="form-group">
                <label for="searchApartments" class="form-label sr-only">Pencarian</label>
                <input type="search" id="searchApartments" class="form-control" placeholder="Cari nama atau lokasi..." value="${this.state.searchQuery}">
              </div>
              <div class="form-group">
                <label for="priceFilter" class="form-label sr-only">Filter Harga</label>
                <select id="priceFilter" class="form-control">
                  <option value="all" ${this.state.priceRange === 'all' ? 'selected' : ''}>Semua Harga</option>
                  <option value="0-10000000" ${this.state.priceRange === '0-10000000' ? 'selected' : ''}>Rp 0 - Rp 10jt</option>
                  <option value="10000001-20000000" ${this.state.priceRange === '10000001-20000000' ? 'selected' : ''}>Rp 10jt - Rp 20jt</option>
                  <option value="20000001+" ${this.state.priceRange === '20000001+' ? 'selected' : ''}>Diatas Rp 20jt</option>
                </select>
              </div>
            </div>
            <div id="apartmentsListContainer" class="apartment-grid">
              ${this.state.filteredApartments.length > 0
            ? this.state.filteredApartments.map((apt, i) => this.renderApartmentCard(apt, i)).join('')
            : '<p class="txt-center col-span-12 txt-lg txt-muted">Tidak ada apartemen yang cocok dengan kriteria Anda.</p>'}
            </div>
          </section>
        `;
      }

      initApartmentsPage() {
        this.searchInput = document.getElementById('searchApartments');
        this.priceFilter = document.getElementById('priceFilter');
        this.apartmentsListContainerEl = document.getElementById('apartmentsListContainer');

        if (this.searchInput) {
          this.searchInput.addEventListener('input', this.debounce(e => {
            this.state.searchQuery = e.target.value.trim().toLowerCase();
            this.filterAndRenderApartmentsList();
          }, 300));
        }
        if (this.priceFilter) {
          this.priceFilter.addEventListener('change', e => {
            this.state.priceRange = e.target.value;
            this.filterAndRenderApartmentsList();
          });
        }
        // Initial render is handled by renderApartmentsPage itself
        this.setupIntersectionObserver('.apartment-card');
      }

      filterAndRenderApartmentsList() {
        let filtered = [...this.state.apartments];

        if (this.state.searchQuery) {
          filtered = filtered.filter(apartment =>
            apartment.name.toLowerCase().includes(this.state.searchQuery) ||
            apartment.location.toLowerCase().includes(this.state.searchQuery)
          );
        }

        if (this.state.priceRange && this.state.priceRange !== 'all') {
          const parts = this.state.priceRange.split('-');
          const minPrice = parseInt(parts[0]);
          const maxPrice = parts[1] ? (parts[1] === '+' ? Infinity : parseInt(parts[1])) : Infinity;

          filtered = filtered.filter(apartment =>
            apartment.price >= minPrice && apartment.price <= maxPrice
          );
        }
        this.state.filteredApartments = filtered;

        // Re-render only the list part
        if (this.apartmentsListContainerEl) {
          this.apartmentsListContainerEl.innerHTML = this.state.filteredApartments.length > 0
            ? this.state.filteredApartments.map((apt, i) => this.renderApartmentCard(apt, i)).join('')
            : '<p class="txt-center col-span-12 txt-lg txt-muted">Tidak ada apartemen yang cocok dengan kriteria Anda.</p>';
          this.setupIntersectionObserver('.apartment-card'); // Re-apply observer for new cards
        }
      }

      renderApartmentDetailsPage(id) {
        const apartmentId = parseInt(id);
        const apartment = this.state.apartments.find(a => a.id === apartmentId);

        if (!apartment) {
          return `
            <section class="container p-xl txt-center">
              <h1 class="txt-2xl txt-bold">Apartemen Tidak Ditemukan</h1>
              <p class="txt-lg txt-muted">Maaf, detail untuk apartemen ini tidak tersedia.</p>
              <a href="#/apartemen" class="btn btn-primary m-md">Kembali ke Daftar Apartemen</a>
            </section>
          `;
        }

        return `
          <section class="container p-xl">
            <article class="apartment-detail fade-in">
              <div class="grid grid-cols-12 gap-lg">
                <div class="col-span-12 md:col-span-7">
                    <img src="${apartment.image}" alt="Interior ${apartment.name}" class="apartment-detail-image">
                </div>
                <div class="col-span-12 md:col-span-5 apartment-detail-content">
                    <h1 class="txt-bold">${apartment.name}</h1>
                    <p class="price">${this.formatCurrency(apartment.price)}<span class="txt-sm txt-muted">/bulan</span></p>
                    <div class="apartment-detail-info">
                        <p><strong>${this.getIcon('location')} Lokasi:</strong> ${apartment.location}</p>
                        <p><strong>${this.getIcon('bed')} Kamar Tidur:</strong> ${apartment.details.bedrooms}</p>
                        <p><strong>${this.getIcon('bath')} Kamar Mandi:</strong> ${apartment.details.bathrooms}</p>
                        <p><strong>${this.getIcon('area')} Luas:</strong> ${apartment.details.area}</p>
                    </div>
                    <div class="apartment-detail-amenities">
                        <h3>Fasilitas Unggulan:</h3>
                        <ul class="amenities-list">
                            ${apartment.details.amenities.map(amenity => `<li class="amenity-item">${amenity}</li>`).join('')}
                        </ul>
                    </div>
                    <a href="#/kontak?subject=Pertanyaan tentang ${encodeURIComponent(apartment.name)} (ID: ${apartment.id})" class="btn btn-primary btn-lg" style="width:100%;">Hubungi Agen</a>
                </div>
              </div>
            </article>
          </section>
        `;
      }

      initApartmentDetailsPage(id) {
        // Jika ada interaksi spesifik di halaman detail, tambahkan di sini
        this.setupIntersectionObserver('.apartment-detail');
      }

      renderContactPage() {
        return `
          <section class="container p-xl">
            <h1 class="section-title">Hubungi Kami</h1>
            <div class="grid grid-cols-12 gap-lg">
                <div class="col-span-12 md:col-span-6 slide-in-up">
                    <h2 class="txt-xl txt-bold mb-sm">Kirim Pesan</h2>
                    <p class="txt-muted mb-md">Ada pertanyaan atau ingin menjadwalkan kunjungan? Isi formulir di bawah ini.</p>
                    <form id="contactForm" class="contact-form">
                    <div class="form-group">
                        <label for="name" class="form-label">Nama Lengkap</label>
                        <input type="text" id="name" name="name" class="form-control" required>
                        <span class="form-error-message" aria-live="polite"></span>
                    </div>
                    <div class="form-group">
                        <label for="email" class="form-label">Alamat Email</label>
                        <input type="email" id="email" name="email" class="form-control" required>
                        <span class="form-error-message" aria-live="polite"></span>
                    </div>
                    <div class="form-group">
                        <label for="subject" class="form-label">Subjek</label>
                        <input type="text" id="subject" name="subject" class="form-control">
                        <span class="form-error-message" aria-live="polite"></span>
                    </div>
                    <div class="form-group">
                        <label for="message" class="form-label">Pesan Anda</label>
                        <textarea id="message" name="message" class="form-control" rows="5" required></textarea>
                        <span class="form-error-message" aria-live="polite"></span>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg">Kirim Pesan</button>
                    </form>
                </div>
                <div class="col-span-12 md:col-span-6 slide-in-up anim-delay-100">
                    <h2 class="txt-xl txt-bold mb-sm">Informasi Kontak</h2>
                    <p class="txt-muted mb-md">Anda juga bisa menghubungi kami melalui:</p>
                    <ul class="list-none p-0">
                        <li class="mb-sm flex align-center gap-sm"><strong class="txt-primary" style="font-size: 1.5em;">📍</strong> Jl. Apartemen Indah No. 123, Jakarta Pusat</li>
                        <li class="mb-sm flex align-center gap-sm"><strong class="txt-primary" style="font-size: 1.5em;">📞</strong> (021) 555-0123</li>
                        <li class="mb-sm flex align-center gap-sm"><strong class="txt-primary" style="font-size: 1.5em;">📧</strong> info@apartmentfinder.co.id</li>
                    </ul>
                     <div style="margin-top: var(--spc-lg); border-radius: var(--rad-md); overflow: hidden; box-shadow: var(--shd-md);">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.576990799195!2d106.8245963153289!3d-6.187707395520168!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f42e0459c13f%3A0x6a8f91f070db2ae5!2sMonumen%20Nasional!5e0!3m2!1sid!2sid!4v1678886500000!5m2!1sid!2sid" 
                            width="100%" 
                            height="300" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Peta Lokasi Kantor ApartmentFinder">
                        </iframe>
                    </div>
                </div>
            </div>
          </section>
        `;
      }

      initContactPage() {
        this.contactForm = document.getElementById('contactForm');
        if (this.contactForm) {
          // Isi subjek jika ada dari query parameter
          const urlParams = new URLSearchParams(window.location.hash.split('?')[1] || '');
          const subjectFromQuery = urlParams.get('subject');
          if (subjectFromQuery) {
            const subjectInput = this.contactForm.querySelector('#subject');
            if (subjectInput) subjectInput.value = subjectFromQuery;
          }

          this.contactForm.addEventListener('submit', e => this.handleContactFormSubmit(e));
        }
        this.setupIntersectionObserver('.slide-in-up');
      }

      handleContactFormSubmit(event) {
        event.preventDefault();
        const form = event.target;
        let isValid = true;

        // Validasi sederhana
        const name = form.elements.name;
        const email = form.elements.email;
        const message = form.elements.message;

        this.clearError(name);
        if (name.value.trim() === '') {
          this.showError(name, 'Nama tidak boleh kosong.');
          isValid = false;
        }

        this.clearError(email);
        if (email.value.trim() === '') {
          this.showError(email, 'Email tidak boleh kosong.');
          isValid = false;
        } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
          this.showError(email, 'Format email tidak valid.');
          isValid = false;
        }

        this.clearError(message);
        if (message.value.trim() === '') {
          this.showError(message, 'Pesan tidak boleh kosong.');
          isValid = false;
        }

        if (isValid) {
          // Simulasi pengiriman form
          const formData = new FormData(form);
          console.log("Data Formulir Kontak:", Object.fromEntries(formData));

          // Tampilkan notifikasi sukses (bisa diganti dengan modal atau toast yang lebih canggih)
          const successMessage = document.createElement('p');
          successMessage.textContent = 'Pesan Anda telah berhasil dikirim! Kami akan segera menghubungi Anda.';
          successMessage.style.color = 'var(--clr-success)';
          successMessage.style.fontWeight = 'bold';
          successMessage.style.marginTop = 'var(--spc-md)';
          form.parentNode.insertBefore(successMessage, form.nextSibling);

          form.reset();
          setTimeout(() => successMessage.remove(), 5000); // Hapus pesan setelah 5 detik
        }
      }

      showError(inputElement, message) {
        const errorSpan = inputElement.closest('.form-group').querySelector('.form-error-message');
        if (errorSpan) errorSpan.textContent = message;
        inputElement.style.borderColor = 'var(--clr-error)';
        inputElement.setAttribute('aria-invalid', 'true');
        inputElement.setAttribute('aria-describedby', errorSpan.id || (errorSpan.id = `error-${inputElement.id}`));
      }

      clearError(inputElement) {
        const errorSpan = inputElement.closest('.form-group').querySelector('.form-error-message');
        if (errorSpan) errorSpan.textContent = '';
        inputElement.style.borderColor = ''; // Kembali ke default
        inputElement.removeAttribute('aria-invalid');
        inputElement.removeAttribute('aria-describedby');
      }

      // --- Fungsi Utilitas ---
      debounce(func, delay) {
        let timeout;
        return (...args) => {
          clearTimeout(timeout);
          timeout = setTimeout(() => func.apply(this, args), delay);
        };
      }

      setupIntersectionObserver(selector) {
        const elements = document.querySelectorAll(selector);
        if (!elements.length) return;

        const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              // Kelas animasi sudah ada di elemen (misal, slide-in-up)
              // Kita bisa menambahkan kelas 'is-visible' untuk memicu animasi jika diperlukan
              // atau biarkan CSS menangani animasi saat kelas ada
              entry.target.style.animationPlayState = 'running'; // Jika animasi di-pause awalnya
              obs.unobserve(entry.target); // Hanya animasikan sekali
            }
          });
        }, { threshold: 0.1, rootMargin: "0px 0px -50px 0px" }); // Animasi sedikit sebelum elemen sepenuhnya terlihat

        elements.forEach(el => {
          // Jika animasi menggunakan `animation-play-state: paused` awalnya
          // el.style.animationPlayState = 'paused'; 
          observer.observe(el);
        });
      }
    }

    /**
     * AppRouter
     * Kelas untuk menangani routing di Single Page Application.
     * Menggunakan hash-based routing (#/path).
     */
    class AppRouter {
      constructor(routes, appInstance) {
        this.routes = routes;
        this.appInstance = appInstance; // Instance dari ApartmentFinderApp
        this.appContent = document.getElementById('main-content');

        window.addEventListener('hashchange', () => this.handleRouteChange());
        window.addEventListener('load', () => this.handleRouteChange()); // Tangani rute saat load awal
      }

      handleRouteChange() {
        let path = window.location.hash.slice(1) || '/'; // Ambil path dari hash, default ke '/'
        let params = {};

        // Cek untuk path dengan parameter (misal, /apartemen/:id)
        const pathParts = path.split('/');
        let matchedRouteKey = null;

        for (const routeKey in this.routes) {
          const routeKeyParts = routeKey.split('/');
          if (routeKeyParts.length === pathParts.length) {
            let match = true;
            const currentParams = {};
            for (let i = 0; i < routeKeyParts.length; i++) {
              if (routeKeyParts[i].startsWith(':')) {
                currentParams[routeKeyParts[i].substring(1)] = pathParts[i];
              } else if (routeKeyParts[i] !== pathParts[i]) {
                match = false;
                break;
              }
            }
            if (match) {
              matchedRouteKey = routeKey;
              params = currentParams;
              path = matchedRouteKey; // Gunakan path yang terdefinisi di rute untuk konsistensi
              break;
            }
          }
        }

        // Jika subject ada di query param untuk kontak
        if (path.startsWith('/kontak') && window.location.hash.includes('?')) {
          const queryParams = new URLSearchParams(window.location.hash.split('?')[1]);
          queryParams.forEach((value, key) => params[key] = value);
        }


        const routeConfig = this.routes[matchedRouteKey || path] || this.routes['/404'];

        if (this.appContent && routeConfig && typeof routeConfig.render === 'function') {
          this.appContent.innerHTML = routeConfig.render(params); // Kirim params ke fungsi render
          if (typeof routeConfig.onRender === 'function') {
            routeConfig.onRender(params); // Kirim params ke fungsi onRender
          }
          document.title = `ApartmentFinder - ${routeConfig.title || 'Selamat Datang'}`;
          this.updateActiveNavLink(path);
          window.scrollTo(0, 0); // Scroll ke atas halaman setiap pindah rute
        } else {
          this.appContent.innerHTML = this.routes['/404'].render();
          document.title = `ApartmentFinder - Halaman Tidak Ditemukan`;
          this.updateActiveNavLink('/404');
        }
      }

      updateActiveNavLink(currentPath) {
        document.querySelectorAll('.nav-link').forEach(link => {
          // Bersihkan path hash dari link untuk perbandingan yang lebih akurat
          const linkHref = link.getAttribute('href');
          const linkPath = new URL(linkHref, window.location.origin).hash.slice(1) || '/';

          // Path saat ini juga harus dinormalisasi
          const normalizedCurrentPath = currentPath.split('?')[0]; // Hapus query string dari path saat ini jika ada

          if (linkPath === normalizedCurrentPath || (linkPath !== '/' && normalizedCurrentPath.startsWith(linkPath))) {
            link.classList.add('active');
            link.setAttribute('aria-current', 'page');
          } else {
            link.classList.remove('active');
            link.removeAttribute('aria-current');
          }
        });
      }
    }

    // --- Inisialisasi Aplikasi ---
    document.addEventListener('DOMContentLoaded', () => {
      const apartmentApp = new ApartmentFinderApp();

      const routes = {
        '/': {
          title: 'Beranda',
          render: () => apartmentApp.renderHomePage(),
          onRender: () => apartmentApp.initHomePage()
        },
        '/apartemen': {
          title: 'Daftar Apartemen',
          render: () => apartmentApp.renderApartmentsPage(),
          onRender: () => apartmentApp.initApartmentsPage()
        },
        '/apartemen/:id': {
          title: 'Detail Apartemen',
          render: (params) => apartmentApp.renderApartmentDetailsPage(params.id),
          onRender: (params) => apartmentApp.initApartmentDetailsPage(params.id)
        },
        '/kontak': {
          title: 'Kontak Kami',
          render: () => apartmentApp.renderContactPage(),
          onRender: () => apartmentApp.initContactPage()
        },
        '/404': {
          title: 'Tidak Ditemukan',
          render: () => `
            <section class="container p-xl txt-center fade-in" style="min-height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
              <h1 class="txt-3xl txt-bold txt-primary">404</h1>
              <h2 class="txt-2xl txt-bold mb-md">Halaman Tidak Ditemukan</h2>
              <p class="txt-lg txt-muted mb-lg">Maaf, halaman yang Anda cari tidak ada atau telah dipindahkan.</p>
              <a href="#/" class="btn btn-primary btn-lg">Kembali ke Beranda</a>
            </section>`
        }
      };
      new AppRouter(routes, apartmentApp);
    });

  </script>
</body>

</html>