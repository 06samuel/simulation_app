<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="theme-color" content="#1976d2" />
  <meta name="description"
    content="ApartmentFinder membantu Anda menemukan apartemen impian dengan mudah. Jelajahi berbagai pilihan apartemen di lokasi terbaik." />
  <meta name="keywords" content="apartemen, cari apartemen, sewa apartemen, beli apartemen, properti" />
  <title>ApartmentFinder - Temukan Apartemen Impian Anda</title>
  <style>
    /* Root Variables - Design Tokens */
    :root {
      /* Colors - Palet yang harmonis dan konsisten */
      --clr-primary: #1976d2;
      --clr-primary-hover: #1565c0;
      --clr-primary-light: #bbdefb;
      --clr-primary-transparent: rgba(25, 118, 210, 0.1);
      --clr-secondary: #f5f5f5;
      --clr-secondary-hover: #e0e0e0;
      --clr-accent: #ff4081;
      --clr-accent-hover: #f50057;
      --clr-accent-light: #ff80ab;
      --clr-background: #ffffff;
      --clr-foreground: #212121;
      --clr-muted: #757575;
      --clr-border: #e0e0e0;
      --clr-success: #4caf50;
      --clr-warning: #ff9800;
      --clr-error: #f44336;
      --clr-info: #2196f3;
      --clr-surface: #fafafa;
      --clr-overlay: rgba(0, 0, 0, 0.5);
      --clr-overlay-light: rgba(0, 0, 0, 0.2);

      /* Spacing - Sistem jarak yang konsisten */
      --spc-xxs: 0.25rem;
      /* 4px */
      --spc-xs: 0.5rem;
      /* 8px */
      --spc-sm: 1rem;
      /* 16px */
      --spc-md: 1.5rem;
      /* 24px */
      --spc-lg: 2rem;
      /* 32px */
      --spc-xl: 3rem;
      /* 48px */
      --spc-xxl: 4rem;
      /* 64px */

      /* Typography - Hirarki teks yang jelas */
      --txt-xs: 0.75rem;
      --txt-sm: 0.875rem;
      --txt-md: 1rem;
      --txt-lg: 1.25rem;
      --txt-xl: 1.5rem;
      --txt-2xl: 2rem;
      --txt-3xl: 2.5rem;
      --line-height-tight: 1.2;
      --line-height-normal: 1.6;
      /* Sedikit ditingkatkan untuk keterbacaan */
      --line-height-loose: 1.8;
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-bold: 700;

      /* Shadows - Kedalaman visual */
      --shd-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shd-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
      --shd-md: 0 4px 8px rgba(0, 0, 0, 0.15);
      --shd-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
      --shd-xl: 0 12px 24px rgba(0, 0, 0, 0.25);
      --shd-inner: inset 0 2px 4px rgba(0, 0, 0, 0.05);
      --shd-focus: 0 0 0 3px var(--clr-primary-transparent);
      /* Menggunakan variabel warna */
      --shd-hover: 0 6px 12px rgba(0, 0, 0, 0.1);

      /* Border Radius - Konsistensi bentuk */
      --rad-xs: 0.125rem;
      /* 2px */
      --rad-sm: 0.25rem;
      /* 4px */
      --rad-md: 0.5rem;
      /* 8px */
      --rad-lg: 1rem;
      /* 16px */
      --rad-xl: 1.5rem;
      /* 24px */
      --rad-full: 9999px;

      /* Transitions - Gerakan yang halus */
      --trs-fast: 0.2s ease;
      --trs-md: 0.3s ease;
      --trs-slow: 0.5s ease;
      --trs-bounce: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      --trs-elastic: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    /* Base Styles */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      /* Perilaku scroll yang halus */
      font-size: 16px;
      /* Basis font size */
    }

    body {
      font-family: var(--font-family);
      background-color: var(--clr-background);
      color: var(--clr-foreground);
      line-height: var(--line-height-normal);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      /* Mencegah scroll horizontal yang tidak diinginkan */
    }

    main {
      flex-grow: 1;
      /* Memastikan footer selalu di bawah */
    }

    img,
    picture,
    video,
    canvas,
    svg {
      display: block;
      max-width: 100%;
    }

    input,
    button,
    textarea,
    select {
      font: inherit;
    }

    button {
      cursor: pointer;
    }

    a {
      color: var(--clr-primary);
      text-decoration: none;
      transition: color var(--trs-fast);
    }

    a:hover {
      color: var(--clr-primary-hover);
      text-decoration: underline;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      line-height: var(--line-height-tight);
      margin-bottom: var(--spc-sm);
      font-weight: var(--font-weight-bold);
    }

    h1 {
      font-size: var(--txt-3xl);
    }

    h2 {
      font-size: var(--txt-2xl);
    }

    h3 {
      font-size: var(--txt-xl);
    }

    h4 {
      font-size: var(--txt-lg);
    }

    p {
      margin-bottom: var(--spc-sm);
    }

    ul,
    ol {
      list-style-position: inside;
      /* Posisi marker list */
      margin-bottom: var(--spc-sm);
    }

    /* Utility Classes */
    /* Margins & Paddings (contoh, bisa diperluas) */
    .mt-sm {
      margin-top: var(--spc-sm);
    }

    .mb-md {
      margin-bottom: var(--spc-md);
    }

    .py-lg {
      padding-top: var(--spc-lg);
      padding-bottom: var(--spc-lg);
    }

    .px-md {
      padding-left: var(--spc-md);
      padding-right: var(--spc-md);
    }

    /* Typography Utilities */
    .txt-xs {
      font-size: var(--txt-xs);
    }

    .txt-sm {
      font-size: var(--txt-sm);
    }

    .txt-md {
      font-size: var(--txt-md);
    }

    .txt-lg {
      font-size: var(--txt-lg);
    }

    .txt-xl {
      font-size: var(--txt-xl);
    }

    .txt-2xl {
      font-size: var(--txt-2xl);
    }

    .txt-bold {
      font-weight: var(--font-weight-bold);
    }

    .txt-medium {
      font-weight: var(--font-weight-medium);
    }

    .txt-center {
      text-align: center;
    }

    .txt-left {
      text-align: left;
    }

    .txt-right {
      text-align: right;
    }

    .txt-muted {
      color: var(--clr-muted);
    }

    .txt-primary {
      color: var(--clr-primary);
    }

    .txt-accent {
      color: var(--clr-accent);
    }

    .txt-white {
      color: var(--clr-background);
    }

    /* Menggunakan clr-background untuk putih */

    /* Flexbox Utilities */
    .flex {
      display: flex;
    }

    .flex-column {
      flex-direction: column;
    }

    .flex-wrap {
      flex-wrap: wrap;
    }

    .justify-start {
      justify-content: flex-start;
    }

    .justify-center {
      justify-content: center;
    }

    .justify-end {
      justify-content: flex-end;
    }

    .justify-between {
      justify-content: space-between;
    }

    .justify-around {
      justify-content: space-around;
    }

    .align-start {
      align-items: flex-start;
    }

    .align-center {
      align-items: center;
    }

    .align-end {
      align-items: flex-end;
    }

    .align-stretch {
      align-items: stretch;
    }

    .gap-xxs {
      gap: var(--spc-xxs);
    }

    .gap-xs {
      gap: var(--spc-xs);
    }

    .gap-sm {
      gap: var(--spc-sm);
    }

    .gap-md {
      gap: var(--spc-md);
    }

    .gap-lg {
      gap: var(--spc-lg);
    }

    /* Grid System */
    .container {
      width: 100%;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      padding-left: var(--spc-md);
      padding-right: var(--spc-md);
    }

    .grid {
      display: grid;
      gap: var(--spc-md);
    }

    .grid-cols-1 {
      grid-template-columns: repeat(1, 1fr);
    }

    .grid-cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    .grid-cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    .grid-cols-4 {
      grid-template-columns: repeat(4, 1fr);
    }

    .grid-cols-12 {
      grid-template-columns: repeat(12, 1fr);
    }

    .col-span-1 {
      grid-column: span 1 / span 1;
    }

    .col-span-2 {
      grid-column: span 2 / span 2;
    }

    .col-span-3 {
      grid-column: span 3 / span 3;
    }

    .col-span-4 {
      grid-column: span 4 / span 4;
    }

    .col-span-6 {
      grid-column: span 6 / span 6;
    }

    .col-span-8 {
      grid-column: span 8 / span 8;
    }

    .col-span-12 {
      grid-column: span 12 / span 12;
    }

    /* Apartment Grid (khusus untuk daftar apartemen) */
    .apartment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--spc-md);
    }

    /* Components */
    /* Header */
    .app-header {
      background-color: var(--clr-background);
      box-shadow: var(--shd-sm);
      position: sticky;
      top: 0;
      z-index: 1000;
      /* Pastikan di atas konten lain */
      padding: var(--spc-sm) 0;
    }

    .app-header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: var(--txt-xl);
      font-weight: var(--font-weight-bold);
      color: var(--clr-primary);
      text-decoration: none;
    }

    .logo:hover {
      color: var(--clr-primary-hover);
    }

    .nav-menu {
      display: flex;
      gap: var(--spc-md);
      list-style: none;
      margin: 0;
      /* Reset margin bawaan ul */
      padding: 0;
      /* Reset padding bawaan ul */
    }

    .nav-link {
      color: var(--clr-foreground);
      text-decoration: none;
      padding: var(--spc-xs) var(--spc-sm);
      border-radius: var(--rad-sm);
      transition: color var(--trs-fast), background-color var(--trs-fast);
      position: relative;
    }

    .nav-link:hover {
      color: var(--clr-primary);
      background-color: var(--clr-primary-transparent);
      text-decoration: none;
    }

    .nav-link.active {
      color: var(--clr-primary);
      font-weight: var(--font-weight-medium);
      background-color: var(--clr-primary-transparent);
    }

    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 2px;
      background-color: var(--clr-primary);
      border-radius: var(--rad-full);
    }


    .nav-toggle {
      display: none;
      /* Sembunyikan di desktop */
      background: none;
      border: none;
      font-size: var(--txt-2xl);
      color: var(--clr-foreground);
      cursor: pointer;
      padding: var(--spc-xs);
      z-index: 1001;
      /* Di atas menu */
    }

    .nav-toggle svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(to right, var(--clr-primary-transparent), var(--clr-primary-transparent) 30%, transparent 70%),
        linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
        url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
      padding: var(--spc-xxl) 0;
      color: var(--clr-background);
      /* Teks putih di atas hero */
      text-align: left;
      /* Ubah ke kiri untuk desain lebih modern */
      min-height: 60vh;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .hero-content {
      max-width: 700px;
      /* Batasi lebar konten hero */
      position: relative;
      z-index: 2;
      animation: fadeIn var(--trs-slow) ease-out, slideInUp var(--trs-slow) ease-out;
    }

    .hero-title {
      font-size: var(--txt-3xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spc-md);
      color: var(--clr-background);
      /* Pastikan warna kontras */
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      line-height: 1.1;
    }

    .hero-subtitle {
      font-size: var(--txt-lg);
      margin-bottom: var(--spc-lg);
      opacity: 0.9;
      max-width: 500px;
      /* Batasi lebar subtitle */
      animation-delay: 0.2s;
    }

    /* Apartment Card */
    .apartment-card {
      background: var(--clr-background);
      border-radius: var(--rad-md);
      box-shadow: var(--shd-sm);
      overflow: hidden;
      transition: transform var(--trs-md), box-shadow var(--trs-md);
      display: flex;
      flex-direction: column;
      text-decoration: none;
      /* Hapus underline default dari link */
      color: var(--clr-foreground);
      /* Set warna teks default */
    }

    .apartment-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shd-hover);
    }

    .apartment-card:focus-within {
      /* Untuk aksesibilitas keyboard */
      outline: none;
      box-shadow: var(--shd-focus), var(--shd-md);
    }

    .apartment-card-image-container {
      width: 100%;
      height: 200px;
      /* Tinggi gambar tetap */
      overflow: hidden;
      /* Pastikan gambar tidak keluar dari container */
    }

    .apartment-card-image-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* Gambar mengisi container tanpa distorsi */
      transition: transform var(--trs-slow);
    }

    .apartment-card:hover .apartment-card-image-container img {
      transform: scale(1.05);
      /* Efek zoom pada hover */
    }

    .apartment-card-content {
      padding: var(--spc-md);
      flex-grow: 1;
      /* Konten mengisi sisa ruang */
      display: flex;
      flex-direction: column;
    }

    .apartment-card-title {
      font-size: var(--txt-lg);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spc-xs);
      color: var(--clr-foreground);
    }

    .apartment-card-location {
      font-size: var(--txt-sm);
      color: var(--clr-muted);
      margin-bottom: var(--spc-sm);
      display: flex;
      align-items: center;
      gap: var(--spc-xxs);
    }

    .apartment-card-location svg {
      width: 1em;
      height: 1em;
      fill: currentColor;
    }

    .apartment-card-price {
      font-size: var(--txt-xl);
      font-weight: var(--font-weight-bold);
      color: var(--clr-primary);
      margin-bottom: var(--spc-sm);
    }

    .apartment-card-features {
      display: flex;
      flex-wrap: wrap;
      /* Agar fitur bisa pindah baris jika banyak */
      gap: var(--spc-sm);
      margin-bottom: var(--spc-md);
      font-size: var(--txt-sm);
      color: var(--clr-muted);
    }

    .apartment-card-feature {
      display: flex;
      align-items: center;
      gap: var(--spc-xxs);
    }

    .apartment-card-feature svg {
      width: 1em;
      height: 1em;
      fill: currentColor;
      /* Atau warna spesifik jika perlu */
    }

    .apartment-card-actions {
      margin-top: auto;
      /* Dorong tombol ke bawah kartu */
    }

    .apartment-card-badge {
      position: absolute;
      top: var(--spc-sm);
      right: var(--spc-sm);
      background-color: var(--clr-accent);
      color: var(--clr-background);
      padding: var(--spc-xxs) var(--spc-xs);
      border-radius: var(--rad-sm);
      font-size: var(--txt-xs);
      font-weight: var(--font-weight-bold);
      z-index: 1;
      box-shadow: var(--shd-xs);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--spc-sm) var(--spc-md);
      border-radius: var(--rad-sm);
      font-weight: var(--font-weight-medium);
      /* Sedikit lebih tebal */
      cursor: pointer;
      transition: background-color var(--trs-fast), color var(--trs-fast), transform var(--trs-fast), box-shadow var(--trs-fast);
      border: 1px solid transparent;
      text-decoration: none;
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
      /* Untuk efek ripple */
    }

    .btn:focus {
      outline: none;
      box-shadow: var(--shd-focus);
    }

    .btn:active {
      transform: scale(0.98);
      /* Efek tekan */
    }

    /* Efek ripple pada klik tombol (opsional, bisa diaktifkan dengan JS) */
    .btn::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      width: 100px;
      height: 100px;
      margin-top: -50px;
      margin-left: -50px;
      opacity: 0;
      transform: scale(0);
    }

    .btn.ripple-active::after {
      animation: ripple var(--trs-slow) ease-out;
    }

    @keyframes ripple {
      to {
        opacity: 1;
        transform: scale(4);
      }
    }

    .btn-primary {
      background-color: var(--clr-primary);
      color: var(--clr-background);
      border-color: var(--clr-primary);
    }

    .btn-primary:hover {
      background-color: var(--clr-primary-hover);
      border-color: var(--clr-primary-hover);
      color: var(--clr-background);
      /* Pastikan warna teks tetap saat hover */
      box-shadow: var(--shd-sm);
    }

    .btn-secondary {
      background-color: var(--clr-secondary);
      color: var(--clr-foreground);
      border-color: var(--clr-border);
    }

    .btn-secondary:hover {
      background-color: var(--clr-secondary-hover);
      border-color: var(--clr-muted);
      color: var(--clr-foreground);
      box-shadow: var(--shd-xs);
    }

    .btn-accent {
      background-color: var(--clr-accent);
      color: var(--clr-background);
      border-color: var(--clr-accent);
    }

    .btn-accent:hover {
      background-color: var(--clr-accent-hover);
      border-color: var(--clr-accent-hover);
      color: var(--clr-background);
      box-shadow: var(--shd-sm);
    }

    .btn-outline-primary {
      background-color: transparent;
      color: var(--clr-primary);
      border-color: var(--clr-primary);
    }

    .btn-outline-primary:hover {
      background-color: var(--clr-primary-transparent);
      color: var(--clr-primary-hover);
    }


    .btn-lg {
      padding: var(--spc-md) var(--spc-lg);
      font-size: var(--txt-md);
      border-radius: var(--rad-md);
    }

    .btn-sm {
      padding: var(--spc-xs) var(--spc-sm);
      font-size: var(--txt-sm);
    }

    .btn-block {
      display: block;
      width: 100%;
    }

    /* Forms */
    .form-group {
      margin-bottom: var(--spc-md);
      position: relative;
      /* Untuk floating label */
    }

    .form-label {
      display: block;
      margin-bottom: var(--spc-xs);
      font-weight: var(--font-weight-medium);
      color: var(--clr-muted);
      transition: all var(--trs-fast);
      font-size: var(--txt-sm);
    }

    /* Floating Label Style */
    .form-group.form-control--floating .form-label {
      position: absolute;
      top: var(--spc-sm);
      left: var(--spc-sm);
      pointer-events: none;
      /* Label tidak menghalangi klik input */
      color: var(--clr-muted);
      transition: all 0.2s ease-out;
    }

    .form-group.form-control--floating .form-control:focus~.form-label,
    .form-group.form-control--floating .form-control:not(:placeholder-shown)~.form-label {
      top: -0.75em;
      /* Naikkan label */
      left: var(--spc-xs);
      font-size: var(--txt-xs);
      color: var(--clr-primary);
      background-color: var(--clr-background);
      /* Latar belakang agar tidak tertimpa border */
      padding: 0 var(--spc-xxs);
    }


    .form-control {
      width: 100%;
      padding: var(--spc-sm);
      border: 1px solid var(--clr-border);
      border-radius: var(--rad-sm);
      transition: border-color var(--trs-fast), box-shadow var(--trs-fast);
      background-color: var(--clr-background);
      font-size: var(--txt-md);
      line-height: var(--line-height-normal);
      /* Untuk textarea */
    }

    .form-control:focus {
      outline: none;
      border-color: var(--clr-primary);
      box-shadow: var(--shd-focus);
    }

    .form-control::placeholder {
      /* Styling placeholder */
      color: var(--clr-muted);
      opacity: 0.7;
    }

    textarea.form-control {
      min-height: 120px;
      /* Tinggi minimal textarea */
      resize: vertical;
      /* Hanya izinkan resize vertikal */
    }

    .form-hint {
      display: block;
      margin-top: var(--spc-xs);
      font-size: var(--txt-sm);
      color: var(--clr-muted);
    }

    .form-error-message {
      /* Untuk pesan error per field */
      display: block;
      margin-top: var(--spc-xs);
      font-size: var(--txt-sm);
      color: var(--clr-error);
      animation: fadeIn var(--trs-fast);
    }

    /* Custom checkbox */
    .form-checkbox {
      display: inline-flex;
      /* Agar sejajar dengan teks */
      align-items: center;
      cursor: pointer;
      user-select: none;
      margin-right: var(--spc-md);
      /* Jarak antar checkbox */
    }

    .form-checkbox input[type="checkbox"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    .checkbox-custom {
      position: relative;
      display: inline-block;
      width: 20px;
      /* Sedikit lebih besar */
      height: 20px;
      margin-right: var(--spc-xs);
      background-color: var(--clr-background);
      border: 2px solid var(--clr-border);
      border-radius: var(--rad-xs);
      transition: all var(--trs-fast);
    }

    .form-checkbox input[type="checkbox"]:checked~.checkbox-custom {
      background-color: var(--clr-primary);
      border-color: var(--clr-primary);
    }

    .form-checkbox input[type="checkbox"]:focus~.checkbox-custom {
      box-shadow: var(--shd-focus);
    }

    .checkbox-custom::after {
      content: "";
      position: absolute;
      display: none;
      left: 6px;
      top: 2px;
      width: 5px;
      height: 10px;
      border: solid var(--clr-background);
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }

    .form-checkbox input[type="checkbox"]:checked~.checkbox-custom::after {
      display: block;
    }

    .filter-group {
      display: flex;
      gap: var(--spc-md);
      margin-bottom: var(--spc-lg);
      flex-wrap: wrap;
      /* Agar filter bisa ke bawah di layar kecil */
    }

    .filter-group .form-group {
      flex-grow: 1;
      min-width: 200px;
      /* Lebar minimal filter */
      margin-bottom: 0;
      /* Hapus margin bawah default */
    }


    /* Section Styling */
    .section {
      padding: var(--spc-xl) 0;
    }

    .section-title {
      text-align: center;
      margin-bottom: var(--spc-lg);
      font-size: var(--txt-2xl);
      position: relative;
      padding-bottom: var(--spc-sm);
    }

    .section-title::after {
      /* Garis bawah dekoratif */
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 3px;
      background-color: var(--clr-primary);
      border-radius: var(--rad-full);
    }

    /* Footer Section */
    .app-footer {
      background-color: var(--clr-foreground);
      color: var(--clr-secondary);
      /* Warna teks terang di footer gelap */
      padding: var(--spc-lg) 0;
      margin-top: var(--spc-xl);
      border-top: 3px solid var(--clr-primary);
    }

    .app-footer .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spc-md);
    }

    .footer-nav {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: var(--spc-md);
    }

    .footer-nav a {
      color: var(--clr-secondary);
      text-decoration: none;
    }

    .footer-nav a:hover {
      color: var(--clr-primary-light);
      text-decoration: underline;
    }

    .footer-copyright {
      font-size: var(--txt-sm);
      color: var(--clr-muted);
    }

    .footer-social-links a {
      color: var(--clr-secondary);
      margin: 0 var(--spc-xs);
      font-size: var(--txt-lg);
    }

    .footer-social-links a:hover {
      color: var(--clr-primary-light);
    }


    /* User Reviews Section (Contoh) */
    .user-reviews-section {
      background-color: var(--clr-surface);
    }

    .review-card {
      background-color: var(--clr-background);
      padding: var(--spc-md);
      border-radius: var(--rad-md);
      box-shadow: var(--shd-sm);
      border-left: 4px solid var(--clr-primary);
    }

    .review-card p:last-child {
      margin-bottom: 0;
    }

    .review-author {
      font-style: italic;
      color: var(--clr-muted);
      text-align: right;
      margin-top: var(--spc-sm);
    }

    /* Contact Page Specifics */
    .contact-page-grid {
      align-items: start;
      /* Agar map dan form sejajar atas */
    }

    .contact-info p {
      margin-bottom: var(--spc-xs);
      display: flex;
      align-items: center;
      gap: var(--spc-xs);
    }

    .contact-info svg {
      width: 1.2em;
      height: 1.2em;
      fill: var(--clr-primary);
    }

    .map-container {
      /* Untuk embed peta */
      width: 100%;
      height: 300px;
      border-radius: var(--rad-md);
      overflow: hidden;
      background-color: var(--clr-secondary);
      /* Placeholder jika peta tidak load */
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--clr-muted);
      border: 1px solid var(--clr-border);
    }

    .map-container iframe {
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* Apartment Detail Page */
    .apartment-detail-image {
      border-radius: var(--rad-lg);
      box-shadow: var(--shd-md);
      margin-bottom: var(--spc-lg);
      width: 100%;
      max-height: 500px;
      object-fit: cover;
    }

    .apartment-detail-meta {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spc-md);
      margin-bottom: var(--spc-lg);
      padding: var(--spc-md);
      background-color: var(--clr-surface);
      border-radius: var(--rad-md);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: var(--spc-xs);
      font-size: var(--txt-md);
    }

    .meta-item svg {
      width: 1.5em;
      height: 1.5em;
      fill: var(--clr-primary);
    }

    .amenities-list {
      list-style: none;
      padding: 0;
      columns: 2;
      /* Tampilkan amenitas dalam 2 kolom jika banyak */
      gap: var(--spc-sm);
    }

    .amenities-list li {
      display: flex;
      align-items: center;
      gap: var(--spc-xs);
      margin-bottom: var(--spc-xs);
    }

    .amenities-list li svg {
      width: 1.2em;
      height: 1.2em;
      fill: var(--clr-success);
    }

    /* Loader */
    .loader-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--clr-overlay-light);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--trs-fast), visibility var(--trs-fast);
    }

    .loader-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    .loader {
      border: 8px solid var(--clr-secondary);
      border-top: 8px solid var(--clr-primary);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Notifikasi (Toast) */
    .toast-notification {
      position: fixed;
      bottom: var(--spc-lg);
      left: 50%;
      transform: translateX(-50%) translateY(150%);
      /* Mulai dari bawah layar */
      background-color: var(--clr-foreground);
      color: var(--clr-background);
      padding: var(--spc-sm) var(--spc-md);
      border-radius: var(--rad-sm);
      box-shadow: var(--shd-lg);
      z-index: 10000;
      transition: transform var(--trs-md) ease-out;
      font-size: var(--txt-sm);
    }

    .toast-notification.visible {
      transform: translateX(-50%) translateY(0);
    }

    .toast-notification.success {
      background-color: var(--clr-success);
    }

    .toast-notification.error {
      background-color: var(--clr-error);
    }

    .toast-notification.info {
      background-color: var(--clr-info);
    }


    /* Accessibility Enhancements */
    .skip-to-content {
      position: absolute;
      top: -100px;
      /* Sembunyikan di luar layar */
      left: 0;
      background: var(--clr-primary);
      color: var(--clr-background);
      padding: var(--spc-sm);
      z-index: 99999;
      /* Harus paling atas */
      transition: top var(--trs-fast);
      border-radius: 0 0 var(--rad-sm) 0;
    }

    .skip-to-content:focus {
      top: 0;
      /* Munculkan saat fokus */
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }

      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }

      .loader {
        animation: none;
      }
    }

    /* Animations - Gerakan untuk menarik perhatian */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }

      to {
        opacity: 0;
      }
    }

    @keyframes slideInUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideInDown {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideInLeft {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(20px);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Animation Utility Classes (gunakan dengan bijak) */
    .anim-fade-in {
      animation: fadeIn var(--trs-md) ease-out forwards;
    }

    .anim-slide-in-up {
      animation: slideInUp var(--trs-md) ease-out forwards;
    }

    .anim-slide-in-down {
      animation: slideInDown var(--trs-md) ease-out forwards;
    }

    /* Responsive Design - Adaptasi untuk berbagai perangkat */
    @media (max-width: 992px) {

      /* Tablet */
      .hero-title {
        font-size: var(--txt-2xl);
      }

      .hero-subtitle {
        font-size: var(--txt-lg);
      }

      .grid-cols-3,
      .grid-cols-4 {
        grid-template-columns: repeat(2, 1fr);
      }

      .col-span-3,
      .col-span-4 {
        grid-column: span 6 / span 6;
      }

      /* Ubah span kolom */
      .col-span-8 {
        grid-column: span 12 / span 12;
      }

      .apartment-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }

      .contact-page-grid .col-span-6 {
        grid-column: span 12 / span 12;
      }
    }

    @media (max-width: 768px) {

      /* Mobile landscape & Tablet portrait */
      .nav-toggle {
        display: block;
      }

      .nav-menu {
        display: none;
        flex-direction: column;
        position: absolute;
        top: 100%;
        /* Tepat di bawah header */
        left: 0;
        right: 0;
        background: var(--clr-background);
        padding: var(--spc-md);
        box-shadow: var(--shd-md);
        border-top: 1px solid var(--clr-border);
        animation: slideInDown 0.3s ease-out;
      }

      .nav-menu.active {
        display: flex;
      }

      .nav-link {
        width: 100%;
        text-align: left;
        padding: var(--spc-sm);
      }

      .nav-link.active::after {
        display: none;
      }

      /* Sembunyikan garis bawah di mobile menu */
      .nav-link:hover {
        background-color: var(--clr-primary-light);
      }

      .hero {
        text-align: center;
        padding: var(--spc-xl) 0;
        min-height: 50vh;
      }

      .hero-content {
        margin-left: auto;
        margin-right: auto;
      }

      .grid-cols-2 {
        grid-template-columns: 1fr;
      }

      .col-span-6 {
        grid-column: span 12 / span 12;
      }

      .filter-group {
        flex-direction: column;
      }

      .filter-group .form-group {
        width: 100%;
      }

      .apartment-detail-meta {
        flex-direction: column;
        align-items: flex-start;
      }

      .amenities-list {
        columns: 1;
      }
    }

    @media (max-width: 576px) {

      /* Mobile portrait */
      html {
        font-size: 14px;
      }

      /* Kecilkan font dasar untuk layar kecil */
      .container {
        padding-left: var(--spc-sm);
        padding-right: var(--spc-sm);
      }

      .hero-title {
        font-size: var(--txt-xl);
      }

      .hero-subtitle {
        font-size: var(--txt-md);
      }

      .hero {
        padding: var(--spc-lg) 0;
        min-height: 40vh;
      }

      .apartment-grid {
        grid-template-columns: 1fr;
      }

      .btn-lg {
        width: 100%;
        margin-bottom: var(--spc-sm);
      }

      .section {
        padding: var(--spc-lg) 0;
      }

      .section-title {
        font-size: var(--txt-xl);
      }

      .app-footer {
        padding: var(--spc-md) 0;
      }

      .footer-nav {
        flex-direction: column;
        align-items: center;
        gap: var(--spc-sm);
      }
    }
  </style>
</head>

<body>
  <a href="#main-content" class="skip-to-content">Lompat ke Konten Utama</a>

  <!-- Header Aplikasi -->
  <header class="app-header">
    <div class="container">
      <a href="#home" class="logo" data-route="home">ApartmentFinder</a>
      <button class="nav-toggle" aria-label="Buka navigasi" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
        </svg>
      </button>
      <nav class="navigation">
        <ul class="nav-menu">
          <li><a href="#home" class="nav-link" data-route="home">Beranda</a></li>
          <li><a href="#apartments" class="nav-link" data-route="apartments">Apartemen</a></li>
          <li><a href="#contact" class="nav-link" data-route="contact">Kontak</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Konten Utama Aplikasi (akan diisi oleh JavaScript) -->
  <main id="main-content" class="app-content">
    <!-- Konten dinamis dimuat di sini -->
  </main>

  <!-- Footer Aplikasi -->
  <footer class="app-footer">
    <div class="container">
      <nav>
        <ul class="footer-nav">
          <li><a href="#home" data-route="home">Beranda</a></li>
          <li><a href="#apartments" data-route="apartments">Apartemen</a></li>
          <li><a href="#contact" data-route="contact">Kontak</a></li>
          <li><a href="#privacy" data-route="privacy">Kebijakan Privasi</a></li>
        </ul>
      </nav>
      <div class="footer-social-links">
        <a href="#" aria-label="Facebook"><svg viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M12 2.04C6.5 2.04 2 6.53 2 12.06c0 5.05 3.66 9.21 8.44 9.94v-7.03H7.9V12.06h2.54V9.83c0-2.52 1.5-3.92 3.79-3.92.96 0 1.94.07 1.94.07v2.4H14.7c-1.21 0-1.54.57-1.54 1.51v1.88h2.78l-.45 2.89h-2.33v7.03A10.02 10.02 0 0 0 22 12.06c0-5.53-4.5-10.02-10-10.02z" />
          </svg></a>
        <a href="#" aria-label="Twitter"><svg viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M22.46 6c-.77.35-1.6.58-2.46.67.9-.53 1.59-1.37 1.92-2.38-.84.5-1.78.86-2.79 1.07C18.35 4.5 17.25 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C7.85 8.97 4.42 7.17 2.18 4.44c-.3.51-.46 1.1-.46 1.73 0 1.48.76 2.79 1.91 3.56-.71 0-1.37-.22-1.95-.53v.05c0 2.07 1.47 3.8 3.42 4.19-.36.1-.73.15-1.12.15-.27 0-.54-.03-.8-.08.54 1.7 2.11 2.93 3.97 2.96-1.45 1.14-3.29 1.82-5.29 1.82-.34 0-.68-.02-1.02-.06C3.44 19.19 5.66 20 8.12 20c7.31 0 11.31-6.09 11.31-11.34 0-.17 0-.34-.01-.5C21.04 7.67 21.83 6.89 22.46 6z" />
          </svg></a>
        <a href="#" aria-label="Instagram"><svg viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z" />
          </svg></a>
      </div>
      <p class="footer-copyright">© <span id="current-year"></span> ApartmentFinder. Semua hak cipta dilindungi.</p>
    </div>
  </footer>

  <!-- Loader Overlay -->
  <div class="loader-overlay" id="loader-overlay">
    <div class="loader"></div>
  </div>

  <!-- Toast Notification Container -->
  <div class="toast-notification" id="toast-notification">Pesan notifikasi.</div>

  <!-- Ikon SVG yang akan digunakan (didefinisikan sekali) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="icon-location" viewBox="0 0 24 24">
      <path
        d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
    </symbol>
    <symbol id="icon-bed" viewBox="0 0 24 24">
      <path
        d="M21 10.78V8c0-1.1-.9-2-2-2h-7.03A3.003 3.003 0 0 0 9 3c-1.66 0-3 1.34-3 3v2H4c-1.1 0-2 .9-2 2v7h2v-3h16v3h2v-4.22A2.994 2.994 0 0 0 21 10.78zM7 8V6c0-.55.45-1 1-1s1 .45 1 1v2H7zm12 0h-7V6.77C12.39 6.32 12.91 6 13.5 6H19v2z" />
    </symbol>
    <symbol id="icon-bath" viewBox="0 0 24 24">
      <path
        d="M17.82 13.4L15.01 8h-1.97C13.3 9.16 14 10.51 14 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.49.7-2.84 1.96-3.55L8.59 7H7.21C5.76 7 3.78 7.43 3.28 9.58L3 10.59V18c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4.08c0-.81-.37-1.55-.98-2.05l-.4-.47zM6 12c0 1.1.9 2 2 2s2-.9 2-2c0-1.1-.9-2-2-2s-2 .9-2 2zm14-2.69V18H4v-6.32l.32-.95C4.68 9.76 6.14 9 7.21 9h.75l1.8 3.6c.22.45.13 1-.24 1.35s-.9.44-1.35.22L6.41 10.8l-.01.01c-.15.31-.23.65-.23 1s.11.74.29 1.05l.15.25H6c-.47.52-.64 1.2-.44 1.84.2.64.79 1.06 1.44 1.06h.01c.35 0 .69-.13.96-.37.36-.32.58-.78.58-1.28l-.01-.2z" />
    </symbol>
    <symbol id="icon-area" viewBox="0 0 24 24">
      <path
        d="M22 7.57V2H2v20h20V11.21L16.83 6l-3.54 3.54L12 10.83l-1.41 1.41L7.05 8.71 2 13.75V22h20V7.57zM20 4v1.57l-4.5-4.5H20zM4 4h9.5l-6 6L4 6.5V4z" />
      <path d="M21 10h-6c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm-1 6h-4v-4h4v4z" />
    </symbol>
    <symbol id="icon-check" viewBox="0 0 24 24">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
    </symbol>
    <symbol id="icon-email" viewBox="0 0 24 24">
      <path
        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
    </symbol>
    <symbol id="icon-phone" viewBox="0 0 24 24">
      <path
        d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
    </symbol>
    <symbol id="icon-address" viewBox="0 0 24 24">
      <path
        d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 2a5 5 0 0 1 5 5c0 2.14-1.86 5.64-5 9.17C8.86 14.64 7 11.14 7 9a5 5 0 0 1 5-5zm0 2.5C10.62 6.5 9.5 7.62 9.5 9s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S13.38 6.5 12 6.5z" />
    </symbol>
  </svg>

  <script>
    class ApartmentFinderApp {
      constructor() {
        this.appContent = document.getElementById('main-content');
        this.navToggle = document.querySelector('.nav-toggle');
        this.navMenu = document.querySelector('.nav-menu');
        this.navLinks = document.querySelectorAll('.nav-link, .logo, .footer-nav a');
        this.loaderOverlay = document.getElementById('loader-overlay');
        this.toastNotification = document.getElementById('toast-notification');
        this.currentYearSpan = document.getElementById('current-year');

        // Data Aplikasi (biasanya dari API)
        this.state = {
          currentPage: 'home',
          apartments: [
            { id: 1, name: "Apartemen Modern Pusat Kota", location: "Jakarta Pusat", price: 15000000, image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70", details: { bedrooms: 2, bathrooms: 2, area: 120, amenities: ["Kolam Renang", "Gym", "Parkir", "Keamanan 24 Jam"] }, featured: true },
            { id: 2, name: "Studio Nyaman Dekat Kampus", location: "Depok", price: 4500000, image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70", details: { bedrooms: 1, bathrooms: 1, area: 35, amenities: ["Dapur Mini", "WiFi", "Meja Belajar"] }, featured: false },
            { id: 3, name: "Loft Artistik di Area Kreatif", location: "Bandung", price: 8000000, image: "https://images.unsplash.com/photo-1494203484021-3ce26331d648?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70", details: { bedrooms: 1, bathrooms: 1, area: 70, amenities: ["Balkon Luas", "Desain Industrial", "Dekat Kafe"] }, featured: true },
            { id: 4, name: "Suite Keluarga dengan Pemandangan Indah", location: "Surabaya Timur", price: 12000000, image: "https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70", details: { bedrooms: 3, bathrooms: 2, area: 150, amenities: ["Taman Bermain Anak", "Pemandangan Kota", "Dapur Lengkap"] }, featured: true },
            { id: 5, name: "Apartemen Minimalis di Pinggir Kota", location: "Tangerang Selatan", price: 6000000, image: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70", details: { bedrooms: 2, bathrooms: 1, area: 60, amenities: ["Akses Tol Mudah", "Lingkungan Tenang", "Jogging Track"] }, featured: false },
            { id: 6, name: "Penthouse Mewah Jantung Bisnis", location: "Jakarta Selatan", price: 35000000, image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=70", details: { bedrooms: 4, bathrooms: 4, area: 300, amenities: ["Private Lift", "Rooftop Pool", "Smart Home System", "Pemandangan 360 Derajat"] }, featured: true },
          ],
          filteredApartments: [],
          reviews: [
            { id: 1, author: "Rina Amelia", text: "Menemukan apartemen impian saya di sini! Prosesnya cepat dan mudah. Sangat direkomendasikan!", rating: 5, apartmentId: 1 },
            { id: 2, author: "Budi Santoso", text: "Pilihan apartemennya beragam dan informasinya lengkap. Saya puas dengan layanan ApartmentFinder.", rating: 4, apartmentId: 3 },
            { id: 3, author: "Citra Dewi", text: "Website yang sangat membantu untuk mahasiswa seperti saya. Akhirnya dapat studio dekat kampus dengan harga terjangkau.", rating: 5, apartmentId: 2 },
          ],
          searchQuery: '',
          priceFilter: 'all',
          locationFilter: 'all',
        };
        this.state.filteredApartments = [...this.state.apartments]; // Inisialisasi
        this.init();
      }

      init() {
        // Setup Router
        window.addEventListener('hashchange', () => this.handleRouteChange());
        window.addEventListener('load', () => this.handleRouteChange(true)); // Handle rute awal saat load

        // Setup Event Listeners Umum
        this.navToggle.addEventListener('click', () => this.toggleMobileMenu());
        this.navLinks.forEach(link => {
          link.addEventListener('click', (e) => {
            // Jika link internal (#), biarkan hashchange handle
            if (link.getAttribute('href').startsWith('#')) {
              // Tutup menu mobile jika terbuka
              if (this.navMenu.classList.contains('active')) {
                this.toggleMobileMenu();
              }
              // Scroll ke atas halaman baru
              window.scrollTo(0, 0);
            }
            // Jika link eksternal, biarkan default behavior
          });
        });

        // Set tahun copyright
        if (this.currentYearSpan) {
          this.currentYearSpan.textContent = new Date().getFullYear();
        }

        // Efek ripple pada tombol
        document.addEventListener('click', (e) => {
          if (e.target.matches('.btn')) {
            const btn = e.target;
            btn.classList.add('ripple-active');
            // Hapus kelas setelah animasi selesai agar bisa di-trigger lagi
            setTimeout(() => btn.classList.remove('ripple-active'), 600);
          }
        });
      }

      // ----- Bagian Routing dan Rendering Halaman -----
      handleRouteChange(isInitialLoad = false) {
        this.showLoader();
        const hash = window.location.hash.slice(1) || 'home'; // Ambil hash, default ke 'home'
        const [route, param] = hash.split('/'); // Untuk rute dengan parameter, misal #apartments/1

        this.state.currentPage = route;
        document.title = `ApartmentFinder - ${route.charAt(0).toUpperCase() + route.slice(1)}`;

        // Simulasikan sedikit delay untuk efek loading (di dunia nyata, ini untuk fetch API)
        setTimeout(() => {
          this.updateActiveNavLink();
          switch (route) {
            case 'home':
              this.renderHomePage();
              break;
            case 'apartments':
              if (param) { // Jika ada ID, tampilkan detail
                this.renderApartmentDetailPage(param);
              } else {
                this.renderApartmentsPage();
              }
              break;
            case 'contact':
              this.renderContactPage();
              break;
            case 'privacy':
              this.renderPrivacyPage();
              break;
            default:
              this.renderNotFoundPage();
          }
          this.hideLoader();
          if (!isInitialLoad) { // Jangan scroll ke atas pada initial load jika hash menunjuk ke section
            if (window.location.hash && document.querySelector(window.location.hash)) {
              // Biarkan browser handle scroll ke ID
            } else {
              window.scrollTo(0, 0);
            }
          }
        }, 300); // Delay 0.3 detik
      }

      renderHomePage() {
        const featured = this.state.apartments.filter(apt => apt.featured).slice(0, 3);
        this.appContent.innerHTML = `
                <section class="hero">
                    <div class="container">
                        <div class="hero-content">
                            <h1 class="hero-title">Temukan Apartemen Impian Anda Bersama Kami</h1>
                            <p class="hero-subtitle">Jelajahi ribuan pilihan apartemen berkualitas di lokasi strategis dengan mudah dan cepat.</p>
                            <a href="#apartments" class="btn btn-primary btn-lg" data-route="apartments">Lihat Apartemen</a>
                        </div>
                    </div>
                </section>

                <section id="featured-apartments" class="section">
                    <div class="container">
                        <h2 class="section-title">Apartemen Unggulan</h2>
                        <div class="apartment-grid">
                            ${featured.map(apt => this.renderApartmentCard(apt)).join('')}
                        </div>
                        ${this.state.apartments.length > 3 ? `<div class="txt-center mt-lg"><a href="#apartments" class="btn btn-secondary" data-route="apartments">Lihat Semua Apartemen</a></div>` : ''}
                    </div>
                </section>
                
                <section id="how-it-works" class="section" style="background-color: var(--clr-surface);">
                    <div class="container">
                        <h2 class="section-title">Bagaimana Cara Kerjanya?</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-lg">
                            <div class="process-step txt-center anim-slide-in-up">
                                <div class="step-number" style="background-color: var(--clr-accent); color: white; width: 60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto var(--spc-md); font-size:1.5em;">1</div>
                                <h3>Cari & Pilih</h3>
                                <p>Gunakan filter pencarian kami untuk menemukan apartemen yang sesuai dengan kriteria Anda.</p>
                            </div>
                            <div class="process-step txt-center anim-slide-in-up" style="animation-delay: 0.2s;">
                                 <div class="step-number" style="background-color: var(--clr-accent); color: white; width: 60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto var(--spc-md); font-size:1.5em;">2</div>
                                <h3>Hubungi Agen</h3>
                                <p>Lihat detail apartemen dan hubungi agen kami untuk informasi lebih lanjut atau jadwal kunjungan.</p>
                            </div>
                            <div class="process-step txt-center anim-slide-in-up" style="animation-delay: 0.4s;">
                                 <div class="step-number" style="background-color: var(--clr-accent); color: white; width: 60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto var(--spc-md); font-size:1.5em;">3</div>
                                <h3>Dapatkan Kunci Anda</h3>
                                <p>Selesaikan proses administrasi dan bersiaplah untuk menempati apartemen baru Anda!</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="user-reviews" class="section user-reviews-section">
                    <div class="container">
                        <h2 class="section-title">Apa Kata Mereka?</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-md">
                            ${this.state.reviews.slice(0, 3).map(review => `
                                <div class="review-card anim-fade-in">
                                    <p>"${review.text}"</p>
                                    <p class="review-author">- ${review.author}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </section>
            `;
        this.attachEventListenersToCards();
      }

      renderApartmentsPage() {
        const locations = [...new Set(this.state.apartments.map(apt => apt.location))]; // Ambil lokasi unik
        this.appContent.innerHTML = `
                <section class="section">
                    <div class="container">
                        <h1 class="section-title">Daftar Apartemen</h1>
                        <div class="filter-group">
                            <div class="form-group">
                                <label for="searchApartments" class="form-label">Cari Apartemen (Nama/Lokasi)</label>
                                <input type="text" id="searchApartments" class="form-control" placeholder="cth: Apartemen Modern atau Jakarta Pusat" value="${this.state.searchQuery}">
                            </div>
                            <div class="form-group">
                                <label for="priceFilter" class="form-label">Filter Harga</label>
                                <select id="priceFilter" class="form-control">
                                    <option value="all" ${this.state.priceFilter === 'all' ? 'selected' : ''}>Semua Harga</option>
                                    <option value="0-5000000" ${this.state.priceFilter === '0-5000000' ? 'selected' : ''}> < Rp 5.000.000</option>
                                    <option value="5000000-10000000" ${this.state.priceFilter === '5000000-10000000' ? 'selected' : ''}>Rp 5.000.000 - Rp 10.000.000</option>
                                    <option value="10000000-20000000" ${this.state.priceFilter === '10000000-20000000' ? 'selected' : ''}>Rp 10.000.000 - Rp 20.000.000</option>
                                    <option value="20000000+" ${this.state.priceFilter === '20000000+' ? 'selected' : ''}> > Rp 20.000.000</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="locationFilter" class="form-label">Filter Lokasi</label>
                                <select id="locationFilter" class="form-control">
                                    <option value="all" ${this.state.locationFilter === 'all' ? 'selected' : ''}>Semua Lokasi</option>
                                    ${locations.map(loc => `<option value="${loc}" ${this.state.locationFilter === loc ? 'selected' : ''}>${loc}</option>`).join('')}
                                </select>
                            </div>
                        </div>
                        <div id="apartmentsListContainer" class="apartment-grid">
                            ${this.state.filteredApartments.length > 0
            ? this.state.filteredApartments.map(apt => this.renderApartmentCard(apt)).join('')
            : '<p class="col-span-full txt-center">Tidak ada apartemen yang sesuai dengan filter Anda.</p>'}
                        </div>
                    </div>
                </section>
            `;
        this.setupApartmentPageEventListeners();
        this.attachEventListenersToCards();
      }

      renderApartmentDetailPage(apartmentId) {
        const id = parseInt(apartmentId);
        const apartment = this.state.apartments.find(apt => apt.id === id);

        if (!apartment) {
          this.renderNotFoundPage("Apartemen tidak ditemukan.");
          return;
        }

        document.title = `ApartmentFinder - ${apartment.name}`;

        const relatedReviews = this.state.reviews.filter(review => review.apartmentId === id);

        this.appContent.innerHTML = `
                <section class="section">
                    <div class="container">
                        <nav aria-label="breadcrumb" class="mb-md">
                            <ol class="flex gap-xs txt-sm txt-muted">
                                <li><a href="#home" data-route="home">Beranda</a></li>
                                <li>/</li>
                                <li><a href="#apartments" data-route="apartments">Apartemen</a></li>
                                <li>/</li>
                                <li aria-current="page">${apartment.name}</li>
                            </ol>
                        </nav>

                        <h1 class="txt-2xl txt-bold mb-sm">${apartment.name}</h1>
                        <p class="txt-lg txt-muted mb-md flex align-center gap-xs">
                            <svg class="icon" width="1em" height="1em"><use xlink:href="#icon-location"></use></svg>
                            ${apartment.location}
                        </p>
                        
                        <img src="${apartment.image}" alt="${apartment.name}" class="apartment-detail-image anim-fade-in">

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-lg">
                            <div class="md:col-span-2">
                                <h2 class="txt-xl mb-sm">Deskripsi</h2>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                                <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Curabitur pretium tincidunt lacus. Nulla gravida orci a odio.</p>

                                <h3 class="txt-lg mt-lg mb-sm">Fasilitas Utama</h3>
                                <ul class="amenities-list">
                                    ${apartment.details.amenities.map(amenity => `
                                        <li><svg class="icon" width="1em" height="1em"><use xlink:href="#icon-check"></use></svg> ${amenity}</li>
                                    `).join('')}
                                </ul>
                            </div>
                            <aside class="md:col-span-1">
                                <div style="background-color: var(--clr-surface); padding: var(--spc-md); border-radius: var(--rad-md); box-shadow: var(--shd-sm);">
                                    <h2 class="txt-xl txt-primary mb-sm">Rp ${this.formatPrice(apartment.price)} <span class="txt-sm txt-muted">/ bulan</span></h2>
                                    
                                    <div class="apartment-detail-meta">
                                        <div class="meta-item">
                                            <svg class="icon"><use xlink:href="#icon-bed"></use></svg>
                                            <span>${apartment.details.bedrooms} Kamar Tidur</span>
                                        </div>
                                        <div class="meta-item">
                                            <svg class="icon"><use xlink:href="#icon-bath"></use></svg>
                                            <span>${apartment.details.bathrooms} Kamar Mandi</span>
                                        </div>
                                        <div class="meta-item">
                                            <svg class="icon"><use xlink:href="#icon-area"></use></svg>
                                            <span>${apartment.details.area} m²</span>
                                        </div>
                                    </div>
                                    <a href="#contact" data-route="contact" data-apartment-name="${apartment.name}" class="btn btn-primary btn-block btn-lg">Hubungi Agen</a>
                                    <button id="shareApartmentBtn" class="btn btn-secondary btn-block mt-sm">Bagikan Apartemen Ini</button>
                                </div>
                            </aside>
                        </div>

                        ${relatedReviews.length > 0 ? `
                        <section id="apartment-reviews" class="mt-xl">
                            <h2 class="txt-xl mb-md">Ulasan untuk Apartemen Ini</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-md">
                                ${relatedReviews.map(review => `
                                    <div class="review-card">
                                        <p>"${review.text}"</p>
                                        <p class="review-author">- ${review.author} (${'⭐'.repeat(review.rating)})</p>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                        ` : ''}
                    </div>
                </section>
            `;
        // Event listener untuk tombol "Hubungi Agen" di halaman detail
        const contactAgentButton = this.appContent.querySelector('.btn[data-apartment-name]');
        if (contactAgentButton) {
          contactAgentButton.addEventListener('click', (e) => {
            const apartmentName = e.currentTarget.dataset.apartmentName;
            // Simpan nama apartemen di localStorage untuk diisi otomatis di form kontak
            localStorage.setItem('prefillMessage', `Saya tertarik dengan apartemen "${apartmentName}". Mohon informasinya.`);
            // Navigasi ke halaman kontak akan ditangani oleh event listener umum untuk link
          });
        }
        // Event listener untuk tombol "Bagikan"
        const shareButton = this.appContent.querySelector('#shareApartmentBtn');
        if (shareButton) {
          shareButton.addEventListener('click', () => this.handleShareApartment(apartment));
        }
      }

      handleShareApartment(apartment) {
        if (navigator.share) {
          navigator.share({
            title: apartment.name,
            text: `Lihat apartemen menarik ini: ${apartment.name} di ${apartment.location}`,
            url: window.location.href, // URL halaman detail saat ini
          })
            .then(() => this.showToast('Apartemen berhasil dibagikan!', 'success'))
            .catch((error) => this.showToast(`Gagal membagikan: ${error}`, 'error'));
        } else {
          // Fallback jika Web Share API tidak didukung
          navigator.clipboard.writeText(window.location.href)
            .then(() => this.showToast('Link apartemen disalin ke clipboard!', 'info'))
            .catch(err => this.showToast('Gagal menyalin link.', 'error'));
        }
      }


      renderContactPage() {
        const prefillMessage = localStorage.getItem('prefillMessage') || '';
        localStorage.removeItem('prefillMessage'); // Hapus setelah digunakan

        this.appContent.innerHTML = `
                <section class="section">
                    <div class="container">
                        <h1 class="section-title">Hubungi Kami</h1>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-lg contact-page-grid">
                            <div class="contact-form-container">
                                <h2 class="txt-xl mb-md">Kirim Pesan</h2>
                                <form id="contactForm" class="flex flex-column gap-md">
                                    <div class="form-group form-control--floating">
                                        <input type="text" id="contactName" name="name" class="form-control" placeholder=" " required>
                                        <label for="contactName" class="form-label">Nama Lengkap</label>
                                        <span class="form-error-message" id="nameError"></span>
                                    </div>
                                    <div class="form-group form-control--floating">
                                        <input type="email" id="contactEmail" name="email" class="form-control" placeholder=" " required>
                                        <label for="contactEmail" class="form-label">Alamat Email</label>
                                        <span class="form-error-message" id="emailError"></span>
                                    </div>
                                    <div class="form-group form-control--floating">
                                        <input type="tel" id="contactPhone" name="phone" class="form-control" placeholder=" ">
                                        <label for="contactPhone" class="form-label">Nomor Telepon (Opsional)</label>
                                    </div>
                                    <div class="form-group form-control--floating">
                                        <textarea id="contactMessage" name="message" class="form-control" placeholder=" " rows="5" required>${prefillMessage}</textarea>
                                        <label for="contactMessage" class="form-label">Pesan Anda</label>
                                        <span class="form-error-message" id="messageError"></span>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-checkbox">
                                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                                            <span class="checkbox-custom"></span>
                                            Saya setuju dengan <a href="#privacy" data-route="privacy" target="_blank">syarat dan ketentuan</a>.
                                        </label>
                                        <span class="form-error-message" id="agreeTermsError"></span>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-lg">Kirim Pesan</button>
                                </form>
                            </div>
                            <div class="contact-info-container">
                                <h2 class="txt-xl mb-md">Informasi Kontak</h2>
                                <div class="contact-info">
                                    <p><svg class="icon"><use xlink:href="#icon-address"></use></svg> Jl. Properti Indah No. 123, Jakarta Selatan, Indonesia</p>
                                    <p><svg class="icon"><use xlink:href="#icon-phone"></use></svg> (021) 555-0123</p>
                                    <p><svg class="icon"><use xlink:href="#icon-email"></use></svg> info@apartmentfinder.com</p>
                                </div>
                                <h3 class="txt-lg mt-lg mb-sm">Jam Operasional</h3>
                                <p>Senin - Jumat: 09:00 - 17:00 WIB</p>
                                <p>Sabtu: 09:00 - 13:00 WIB</p>
                                <p>Minggu & Hari Libur Nasional: Tutup</p>
                                
                                <div class="map-container mt-lg">
                                   <iframe 
                                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.010919454319!2d106.82715271534968!3d-6.260716795475788!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f2255c1de181%3A0x7313296778059758!2sIstana%20Merdeka!5e0!3m2!1sid!2sid!4v1678886400000!5m2!1sid!2sid" 
                                        allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                                   </iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
        this.setupContactFormValidation();
      }

      renderPrivacyPage() {
        this.appContent.innerHTML = `
                <section class="section">
                    <div class="container">
                        <h1 class="section-title">Kebijakan Privasi</h1>
                        <p>Selamat datang di Kebijakan Privasi ApartmentFinder. Kami menghargai privasi Anda dan berkomitmen untuk melindunginya. Kebijakan Privasi ini menjelaskan bagaimana kami mengumpulkan, menggunakan, mengungkapkan, dan menjaga informasi Anda ketika Anda mengunjungi situs web kami.</p>

                        <h2 class="txt-xl mt-lg mb-sm">1. Pengumpulan Informasi</h2>
                        <p>Kami dapat mengumpulkan informasi tentang Anda dalam berbagai cara. Informasi yang dapat kami kumpulkan di Situs meliputi:</p>
                        <ul>
                            <li><strong>Data Pribadi:</strong> Informasi yang dapat diidentifikasi secara pribadi, seperti nama, alamat pengiriman, alamat email, dan nomor telepon Anda, dan informasi demografis, seperti usia, jenis kelamin, kota asal, dan minat Anda, yang Anda berikan secara sukarela kepada kami saat Anda mendaftar dengan Situs atau saat Anda memilih untuk berpartisipasi dalam berbagai aktivitas yang terkait dengan Situs, seperti obrolan online dan papan pesan.</li>
                            <li><strong>Data Turunan:</strong> Informasi yang secara otomatis dikumpulkan oleh server kami ketika Anda mengakses Situs, seperti alamat IP Anda, jenis browser Anda, sistem operasi Anda, waktu akses Anda, dan halaman yang telah Anda lihat secara langsung sebelum dan sesudah mengakses Situs.</li>
                        </ul>

                        <h2 class="txt-xl mt-lg mb-sm">2. Penggunaan Informasi Anda</h2>
                        <p>Memiliki informasi akurat tentang Anda memungkinkan kami untuk memberi Anda pengalaman yang lancar, efisien, dan disesuaikan. Secara khusus, kami dapat menggunakan informasi yang dikumpulkan tentang Anda melalui Situs untuk:</p>
                        <ul>
                            <li>Membuat dan mengelola akun Anda.</li>
                            <li>Mengirimi Anda email mengenai akun atau pesanan Anda.</li>
                            <li>Memungkinkan komunikasi pengguna-ke-pengguna.</li>
                            <li>Memenuhi dan mengelola pembelian, pesanan, pembayaran, dan transaksi lain yang terkait dengan Situs.</li>
                            <li>Meningkatkan efisiensi dan operasi Situs.</li>
                            <!-- Tambahkan poin lainnya sesuai kebutuhan -->
                        </ul>

                        <h2 class="txt-xl mt-lg mb-sm">3. Pengungkapan Informasi Anda</h2>
                        <p>Kami dapat membagikan informasi yang telah kami kumpulkan tentang Anda dalam situasi tertentu. Informasi Anda dapat diungkapkan sebagai berikut:</p>
                        <ul>
                            <li><strong>Oleh Hukum atau untuk Melindungi Hak:</strong> Jika kami percaya bahwa pelepasan informasi tentang Anda diperlukan untuk menanggapi proses hukum, untuk menyelidiki atau memperbaiki potensi pelanggaran kebijakan kami, atau untuk melindungi hak, properti, dan keselamatan orang lain, kami dapat membagikan informasi Anda sebagaimana diizinkan atau diwajibkan oleh hukum, aturan, atau peraturan yang berlaku.</li>
                            <li><strong>Penyedia Layanan Pihak Ketiga:</strong> Kami dapat membagikan informasi Anda dengan pihak ketiga yang melakukan layanan untuk kami atau atas nama kami, termasuk pemrosesan pembayaran, analisis data, pengiriman email, layanan hosting, layanan pelanggan, dan bantuan pemasaran.</li>
                        </ul>
                        
                        <h2 class="txt-xl mt-lg mb-sm">4. Keamanan Informasi Anda</h2>
                        <p>Kami menggunakan tindakan keamanan administratif, teknis, dan fisik untuk membantu melindungi informasi pribadi Anda. Meskipun kami telah mengambil langkah-langkah yang wajar untuk mengamankan informasi pribadi yang Anda berikan kepada kami, harap perhatikan bahwa terlepas dari upaya kami, tidak ada tindakan keamanan yang sempurna atau tidak dapat ditembus, dan tidak ada metode transmisi data yang dapat dijamin terhadap intersepsi atau jenis penyalahgunaan lainnya.</p>

                        <h2 class="txt-xl mt-lg mb-sm">5. Hubungi Kami</h2>
                        <p>Jika Anda memiliki pertanyaan atau komentar tentang Kebijakan Privasi ini, silakan hubungi kami di: <a href="mailto:privacy@apartmentfinder.com">privacy@apartmentfinder.com</a>.</p>
                        <p class="txt-muted mt-lg">Terakhir diperbarui: ${new Date().toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                    </div>
                </section>
            `;
      }


      renderNotFoundPage(message = "Halaman yang Anda cari tidak ditemukan.") {
        this.appContent.innerHTML = `
                <section class="section txt-center">
                    <div class="container">
                        <h1 class="txt-3xl txt-accent mb-md">404</h1>
                        <h2 class="txt-xl mb-lg">${message}</h2>
                        <p>Mungkin halaman tersebut telah dipindahkan, dihapus, atau Anda salah mengetik alamat.</p>
                        <a href="#home" class="btn btn-primary btn-lg" data-route="home">Kembali ke Beranda</a>
                    </div>
                </section>
            `;
      }

      // ----- Komponen dan Fungsi Pembantu -----
      renderApartmentCard(apartment) {
        // Gunakan gambar placeholder jika gambar asli gagal dimuat
        const imageUrl = apartment.image || `https://via.placeholder.com/400x300.png?text=Apartemen`;
        return `
                <a href="#apartments/${apartment.id}" class="apartment-card" data-route="apartments/${apartment.id}">
                    ${apartment.featured ? '<span class="apartment-card-badge">Unggulan</span>' : ''}
                    <div class="apartment-card-image-container">
                        <img src="${imageUrl}" alt="${apartment.name}" loading="lazy" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x300.png?text=Gambar+Tidak+Tersedia';">
                    </div>
                    <div class="apartment-card-content">
                        <h3 class="apartment-card-title">${apartment.name}</h3>
                        <p class="apartment-card-location">
                            <svg class="icon" width="1em" height="1em"><use xlink:href="#icon-location"></use></svg>
                            ${apartment.location}
                        </p>
                        <p class="apartment-card-price">Rp ${this.formatPrice(apartment.price)} <span class="txt-sm txt-muted">/ bulan</span></p>
                        <div class="apartment-card-features">
                            <span class="apartment-card-feature">
                                <svg class="icon"><use xlink:href="#icon-bed"></use></svg> ${apartment.details.bedrooms} KT
                            </span>
                            <span class="apartment-card-feature">
                                <svg class="icon"><use xlink:href="#icon-bath"></use></svg> ${apartment.details.bathrooms} KM
                            </span>
                            <span class="apartment-card-feature">
                                <svg class="icon"><use xlink:href="#icon-area"></use></svg> ${apartment.details.area} m²
                            </span>
                        </div>
                        <div class="apartment-card-actions">
                            <span class="btn btn-secondary btn-sm">Lihat Detail</span>
                        </div>
                    </div>
                </a>
            `;
      }

      attachEventListenersToCards() {
        const cards = this.appContent.querySelectorAll('.apartment-card');
        cards.forEach(card => {
          card.addEventListener('click', (e) => {
            // Biarkan navigasi hash default
            // e.preventDefault(); // Tidak perlu jika sudah pakai href="#route"
            // const route = card.dataset.route;
            // window.location.hash = route;
          });
        });
      }


      formatPrice(price) {
        return new Intl.NumberFormat('id-ID').format(price);
      }

      updateActiveNavLink() {
        this.navLinks.forEach(link => {
          const linkRoute = (link.dataset.route || link.getAttribute('href').slice(1)).split('/')[0]; // Ambil base route
          if (linkRoute === this.state.currentPage.split('/')[0]) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });
      }

      toggleMobileMenu() {
        const isExpanded = this.navToggle.getAttribute('aria-expanded') === 'true';
        this.navToggle.setAttribute('aria-expanded', !isExpanded);
        this.navMenu.classList.toggle('active');
        // Ganti ikon hamburger
        const iconPath = !isExpanded ?
          '<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>' : // Ikon close (X)
          '<path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>'; // Ikon hamburger
        this.navToggle.innerHTML = `<svg viewBox="0 0 24 24" fill="currentColor">${iconPath}</svg>`;
      }

      // ----- Fungsi Utilitas (Loader, Toast, dll.) -----
      showLoader() {
        this.loaderOverlay.classList.add('visible');
      }
      hideLoader() {
        this.loaderOverlay.classList.remove('visible');
      }
      showToast(message, type = 'info') { // type can be 'info', 'success', 'error'
        this.toastNotification.textContent = message;
        this.toastNotification.className = 'toast-notification visible'; // Reset classes
        if (type) {
          this.toastNotification.classList.add(type);
        }
        setTimeout(() => {
          this.toastNotification.classList.remove('visible');
        }, 3000); // Sembunyikan setelah 3 detik
      }

      // ----- Event Listener Spesifik Halaman & Validasi -----
      setupApartmentPageEventListeners() {
        const searchInput = document.getElementById('searchApartments');
        const priceFilter = document.getElementById('priceFilter');
        const locationFilter = document.getElementById('locationFilter');

        if (searchInput) searchInput.addEventListener('input', this.debounce(e => this.handleSearch(e.target.value), 300));
        if (priceFilter) priceFilter.addEventListener('change', e => this.handleFilter('price', e.target.value));
        if (locationFilter) locationFilter.addEventListener('change', e => this.handleFilter('location', e.target.value));
      }

      handleSearch(query) {
        this.state.searchQuery = query.trim().toLowerCase();
        this.applyFilters();
      }

      handleFilter(filterType, value) {
        if (filterType === 'price') this.state.priceFilter = value;
        if (filterType === 'location') this.state.locationFilter = value;
        this.applyFilters();
      }

      applyFilters() {
        this.state.filteredApartments = this.state.apartments.filter(apartment => {
          const matchesSearch = !this.state.searchQuery ||
            apartment.name.toLowerCase().includes(this.state.searchQuery) ||
            apartment.location.toLowerCase().includes(this.state.searchQuery);

          const matchesLocation = this.state.locationFilter === 'all' || apartment.location === this.state.locationFilter;

          let matchesPrice = true;
          if (this.state.priceFilter !== 'all') {
            const [minPrice, maxPrice] = this.state.priceFilter.split('-').map(p => p.replace('+', ''));
            if (this.state.priceFilter.endsWith('+')) {
              matchesPrice = apartment.price >= parseInt(minPrice);
            } else if (maxPrice) {
              matchesPrice = apartment.price >= parseInt(minPrice) && apartment.price <= parseInt(maxPrice);
            } else { // Untuk kasus < Rp X (misal 0-5000000)
              matchesPrice = apartment.price <= parseInt(minPrice); // minPrice di sini sebenarnya maxPrice
            }
          }
          return matchesSearch && matchesPrice && matchesLocation;
        });

        // Re-render hanya bagian list apartemen, bukan seluruh halaman
        const listContainer = document.getElementById('apartmentsListContainer');
        if (listContainer) {
          listContainer.innerHTML = this.state.filteredApartments.length > 0
            ? this.state.filteredApartments.map(apt => this.renderApartmentCard(apt)).join('')
            : '<p class="col-span-full txt-center">Tidak ada apartemen yang sesuai dengan filter Anda.</p>';
          this.attachEventListenersToCards(); // Penting untuk re-attach event listener
        }
      }

      setupContactFormValidation() {
        const form = document.getElementById('contactForm');
        if (!form) return;

        const nameInput = document.getElementById('contactName');
        const emailInput = document.getElementById('contactEmail');
        const messageInput = document.getElementById('contactMessage');
        const agreeTermsCheckbox = document.getElementById('agreeTerms');

        form.addEventListener('submit', (e) => {
          e.preventDefault();
          let isValid = true;

          // Validasi Nama
          if (nameInput.value.trim() === '') {
            this.showFieldError(nameInput, 'Nama tidak boleh kosong.');
            isValid = false;
          } else {
            this.clearFieldError(nameInput);
          }

          // Validasi Email
          if (emailInput.value.trim() === '') {
            this.showFieldError(emailInput, 'Email tidak boleh kosong.');
            isValid = false;
          } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
            this.showFieldError(emailInput, 'Format email tidak valid.');
            isValid = false;
          } else {
            this.clearFieldError(emailInput);
          }

          // Validasi Pesan
          if (messageInput.value.trim() === '') {
            this.showFieldError(messageInput, 'Pesan tidak boleh kosong.');
            isValid = false;
          } else {
            this.clearFieldError(messageInput);
          }

          // Validasi Persetujuan
          if (!agreeTermsCheckbox.checked) {
            this.showFieldError(agreeTermsCheckbox, 'Anda harus menyetujui syarat dan ketentuan.', true);
            isValid = false;
          } else {
            this.clearFieldError(agreeTermsCheckbox, true);
          }

          if (isValid) {
            this.showLoader();
            // Simulasi pengiriman form
            setTimeout(() => {
              this.hideLoader();
              this.showToast('Pesan Anda berhasil terkirim!', 'success');
              form.reset(); // Reset form setelah berhasil
              // Fokus kembali ke field pertama untuk aksesibilitas
              nameInput.focus();
            }, 1000);
          } else {
            this.showToast('Harap perbaiki kesalahan pada form.', 'error');
          }
        });
      }

      showFieldError(inputElement, message, isCheckbox = false) {
        const errorElementId = isCheckbox ? `${inputElement.id}Error` : `${inputElement.name}Error`;
        const errorElement = document.getElementById(errorElementId);
        if (errorElement) {
          errorElement.textContent = message;
        }
        inputElement.classList.add('form-control-error'); // Tambahkan kelas error jika perlu styling
      }

      clearFieldError(inputElement, isCheckbox = false) {
        const errorElementId = isCheckbox ? `${inputElement.id}Error` : `${inputElement.name}Error`;
        const errorElement = document.getElementById(errorElementId);
        if (errorElement) {
          errorElement.textContent = '';
        }
        inputElement.classList.remove('form-control-error');
      }


      // Fungsi Debounce
      debounce(func, delay) {
        let timeout;
        return (...args) => {
          clearTimeout(timeout);
          timeout = setTimeout(() => func.apply(this, args), delay);
        };
      }
    }

    // Inisialisasi Aplikasi
    document.addEventListener('DOMContentLoaded', () => {
      new ApartmentFinderApp();
    });
  </script>
</body>

</html>