<!DOCTYPE html>
<html lang="id"> <!-- Bahasa utama aplikasi adalah Indonesia -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Meta Tags SEO dan Deskripsi -->
  <meta name="description"
    content="Green Valley - Temukan hunian nyaman impian Anda. Sewa, kost, dan apartemen dengan mudah, aman, dan terpercaya. Desain fancy dan pengalaman pengguna terbaik.">
  <meta name="keywords"
    content="sewa properti, cari kost, apartemen murah, green valley, properti, hunian nyaman, desain fancy, real estate, native app">
  <meta name="author" content="Green Valley Development Team">
  <meta name="theme-color" content="#2563eb"> <!-- Warna tema untuk browser mobile -->

  <title>Green Valley - Hunian Nyaman Impian Anda</title>

  <!-- Favicon (Pastikan file-file ini ada di folder assets/icons/ atau sesuaikan path) -->
  <link rel="icon" href="assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
  <link rel="manifest" href="assets/icons/site.webmanifest"> <!-- Untuk PWA sederhana -->

  <!-- Font Awesome CDN (Ikon Online Gratis, bukan SVG) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Google Fonts (Poppins untuk teks utama, Montserrat untuk judul) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800&display=swap"
    rel="stylesheet">

  <!-- Stylesheet Kustom (Vanilla CSS) -->
  <style>
    /* === FONT IMPORT (Google Fonts) - Sudah di-link di HTML, @import redundan jika demikian === */
    /* @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800&display=swap'); */

    /* === CSS VARIABLES (THEMING & KONSISTENSI) === */
    :root {
      /* Palet Warna Utama (Mode Terang) */
      --primary-color: #2563eb;
      /* Biru Utama (Modern & Profesional) */
      --primary-color-dark: #1d4ed8;
      /* Varian Gelap Biru Utama */
      --primary-color-light: #60a5fa;
      /* Varian Terang Biru Utama */
      --primary-color-rgb: 37, 99, 235;
      /* Untuk RGBA box-shadow */

      --secondary-color: #10b981;
      /* Hijau Sekunder (Aksen "Green") */
      --secondary-color-dark: #059669;
      --secondary-color-light: #34d399;
      --secondary-color-rgb: 16, 185, 129;
      /* Untuk shadow fancy alt */

      --accent-color: #f59e0b;
      /* Kuning/Oranye Aksen (CTA, Highlight) */
      --accent-color-dark: #d97706;
      --accent-color-light: #fbbf24;


      --success-color: #22c55e;
      /* Hijau untuk sukses */
      --warning-color: #f97316;
      /* Oranye untuk peringatan */
      --error-color: #ef4444;
      /* Merah untuk error */
      --error-color-rgb: 239, 68, 68;
      /* Untuk RGBA box-shadow error */

      /* Warna Teks */
      --text-color-base: #1f2937;
      /* Abu-abu Sangat Gelap (Konten Utama) */
      --text-color-medium: #4b5563;
      /* Abu-abu Gelap (Subteks, Deskripsi) */
      --text-color-light: #6b7280;
      /* Abu-abu Terang (Placeholder, Info Tambahan) */
      --text-color-inverted: #ffffff;
      /* Putih (Untuk Latar Belakang Gelap/Primer) */
      --text-color-link: var(--primary-color);

      /* Warna Latar Belakang */
      --bg-color-body: #f9fafb;
      /* Abu-abu Sangat Terang (Latar Utama Aplikasi) */
      --bg-color-surface: #ffffff;
      /* Putih (Kartu, Modal, Kontainer) */
      --bg-color-surface-rgb: 255, 255, 255;
      /* Untuk RGBA */
      --bg-color-section-alt: #f3f4f6;
      /* Abu-abu Terang (Untuk Section Alternatif) */
      --bg-color-dark-contrast: #111827;
      /* Untuk header/footer di mode terang (opsional) */

      /* Warna Border */
      --border-color-soft: #e5e7eb;
      /* Abu-abu muda untuk border halus */
      --border-color-medium: #d1d5db;
      /* Abu-abu sedang untuk border lebih jelas */

      /* Tipografi */
      --font-family-primary: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      --font-family-headings: 'Montserrat', var(--font-family-primary);
      /* Fallback ke Poppins */
      --font-size-base: 16px;
      /* Ukuran font dasar (dapat disesuaikan untuk mobile) */
      --font-weight-light: 300;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 600;
      --font-weight-bold: 700;
      --font-weight-extrabold: 800;
      --line-height-base: 1.65;
      --line-height-headings: 1.3;

      /* Spasi & Ukuran */
      --spacing-unit: 8px;
      /* Unit dasar untuk padding, margin */
      --container-max-width: 1280px;
      /* Lebar maksimum kontainer utama */
      --header-height: 72px;
      /* Tinggi header (dapat disesuaikan) */
      --footer-height-approx: 450px;
      /* Perkiraan tinggi footer (untuk layout sticky footer) */


      /* Border Radius (Untuk elemen UI yang rounded) */
      --border-radius-xs: 4px;
      --border-radius-sm: 6px;
      --border-radius-md: 8px;
      --border-radius-lg: 12px;
      --border-radius-xl: 16px;
      --border-radius-full: 9999px;
      /* Untuk elemen bulat sempurna */

      /* Bayangan (Shadows untuk efek kedalaman) */
      --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
      --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.07), 0 1px 2px -1px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
      --shadow-fancy: 0px 12px 35px rgba(var(--primary-color-rgb), 0.15);
      /* Bayangan fancy dengan warna primer */
      --shadow-fancy-alt: 0px 8px 25px rgba(var(--secondary-color-rgb), 0.15);

      /* Transisi (Untuk animasi yang halus) */
      --transition-duration-fast: 150ms;
      --transition-duration-medium: 300ms;
      --transition-duration-slow: 500ms;
      --transition-timing-function: ease-in-out;
      --transition-base: all var(--transition-duration-medium) var(--transition-timing-function);

      /* Z-index (Untuk mengatur tumpukan elemen) */
      --z-index-dropdown: 1000;
      --z-index-sticky: 1020;
      --z-index-modal-backdrop: 1040;
      --z-index-modal: 1050;
      --z-index-popover: 1060;
      --z-index-tooltip: 1070;
      --z-index-scroll-top: 900;
    }

    /* === DARK MODE STYLES === */
    html.dark {
      --primary-color: #3b82f6;
      /* Biru lebih terang untuk kontras di mode gelap */
      --primary-color-dark: #2563eb;
      --primary-color-light: #93c5fd;
      --primary-color-rgb: 59, 130, 246;

      --secondary-color: #34d399;
      /* Hijau lebih terang */
      --secondary-color-dark: #10b981;
      --secondary-color-rgb: 52, 211, 153;

      --accent-color: #fbbf24;
      /* Kuning lebih terang */
      --accent-color-dark: #f59e0b;
      --accent-color-light: #fde047;

      /* Warna Teks Mode Gelap */
      --text-color-base: #f3f4f6;
      /* Abu-abu Sangat Terang */
      --text-color-medium: #d1d5db;
      /* Abu-abu Terang */
      --text-color-light: #9ca3af;
      /* Abu-abu Sedang */
      --text-color-inverted: #111827;
      /* Abu-abu Sangat Gelap */
      --text-color-link: var(--primary-color-light);

      /* Warna Latar Belakang Mode Gelap */
      --bg-color-body: #0f172a;
      /* Biru Gelap Pekat (Navy) */
      --bg-color-surface: #1e293b;
      /* Biru Gelap (Slate) */
      --bg-color-surface-rgb: 30, 41, 59;
      --bg-color-section-alt: #1f2937;
      /* Abu-abu Gelap */
      --bg-color-dark-contrast: #334155;

      /* Warna Border Mode Gelap */
      --border-color-soft: #374151;
      /* Abu-abu Gelap untuk border halus */
      --border-color-medium: #4b5563;
      /* Abu-abu Sedang untuk border lebih jelas */

      /* Bayangan Mode Gelap (biasanya lebih subtle) */
      --shadow-xs: 0 1px 2px 0 rgba(255, 255, 255, 0.02);
      --shadow-sm: 0 1px 3px 0 rgba(255, 255, 255, 0.04), 0 1px 2px -1px rgba(255, 255, 255, 0.03);
      --shadow-md: 0 4px 6px -1px rgba(255, 255, 255, 0.05), 0 2px 4px -2px rgba(255, 255, 255, 0.03);
      --shadow-lg: 0 10px 15px -3px rgba(255, 255, 255, 0.05), 0 4px 6px -4px rgba(255, 255, 255, 0.03);
      --shadow-fancy: 0px 12px 35px rgba(var(--primary-color-rgb), 0.2);
      --shadow-fancy-alt: 0px 8px 25px rgba(var(--secondary-color-rgb), 0.2);
    }

    /* === GLOBAL RESET & BASE STYLES === */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      /* Model box universal */
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
      /* Teks lebih halus di Webkit */
      -moz-osx-font-smoothing: grayscale;
      /* Teks lebih halus di Firefox */
    }

    html {
      font-size: var(--font-size-base);
      line-height: var(--line-height-base);
      scroll-behavior: smooth;
      /* Scrolling halus untuk anchor links */
      overflow-x: hidden;
      /* Mencegah horizontal scroll yang tidak diinginkan */
    }

    body {
      font-family: var(--font-family-primary);
      color: var(--text-color-base);
      background-color: var(--bg-color-body);
      transition: background-color var(--transition-duration-medium) var(--transition-timing-function),
        color var(--transition-duration-medium) var(--transition-timing-function);
      min-height: 100vh;
      /* Pastikan body mengisi tinggi viewport */
      display: flex;
      /* Untuk layout sticky footer */
      flex-direction: column;
    }

    /* Kelas utilitas untuk mencegah transisi saat load tema */
    body.no-transition,
    body.no-transition * {
      transition: none !important;
    }

    /* Untuk mencegah scroll body saat modal atau menu mobile terbuka */
    body.no-scroll {
      overflow: hidden;
    }

    /* === STRUKTUR APLIKASI UTAMA === */
    #app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      /* Memastikan footer menempel di bawah jika konten pendek */
      width: 100%;
      overflow: hidden;
      /* Mencegah konten melebihi batas secara tidak sengaja */
    }

    .main-content {
      flex-grow: 1;
      /* Konten utama mengisi ruang yang tersisa */
      width: 100%;
    }

    /* === CONTAINER UTAMA (GRID SYSTEM SEDERHANA) === */
    .container {
      width: 100%;
      max-width: var(--container-max-width);
      margin-left: auto;
      margin-right: auto;
      padding-left: calc(var(--spacing-unit) * 2);
      /* 16px */
      padding-right: calc(var(--spacing-unit) * 2);
      /* 16px */
    }

    /* === TIPOGRAFI === */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: var(--font-family-headings);
      font-weight: var(--font-weight-bold);
      line-height: var(--line-height-headings);
      color: var(--text-color-base);
      /* Warna heading sama dengan text base di mode gelap/terang */
      margin-bottom: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      letter-spacing: -0.02em;
      /* Sedikit kerning untuk judul besar */
    }

    h1 {
      font-size: 2.75rem;
      font-weight: var(--font-weight-extrabold);
    }

    /* ~44px */
    h2 {
      font-size: 2.25rem;
    }

    /* ~36px */
    h3 {
      font-size: 1.75rem;
    }

    /* ~28px */
    h4 {
      font-size: 1.25rem;
    }

    /* ~20px */

    p {
      margin-bottom: calc(var(--spacing-unit) * 2);
      /* 16px */
      color: var(--text-color-medium);
    }

    p:last-child {
      margin-bottom: 0;
    }

    a {
      color: var(--text-color-link);
      text-decoration: none;
      transition: color var(--transition-duration-fast) var(--transition-timing-function),
        opacity var(--transition-duration-fast) var(--transition-timing-function);
    }

    a:hover,
    a:focus {
      color: var(--primary-color-dark);
      text-decoration: underline;
      text-decoration-thickness: 1.5px;
      text-underline-offset: 2px;
    }

    html.dark a:hover,
    html.dark a:focus {
      color: var(--primary-color-light);
    }

    a:focus-visible {
      /* Styling fokus yang lebih jelas untuk aksesibilitas */
      outline: 2px solid var(--primary-color);
      outline-offset: 2px;
      border-radius: var(--border-radius-xs);
    }

    /* Teks yang di-highlight */
    .highlight-text {
      color: var(--primary-color);
      font-weight: var(--font-weight-bold);
      /* Lebih tebal */
    }

    .highlight-text-alt {
      color: var(--secondary-color);
      font-weight: var(--font-weight-bold);
    }

    html.dark .highlight-text {
      color: var(--primary-color-light);
    }

    html.dark .highlight-text-alt {
      color: var(--secondary-color-light);
    }


    /* === TOMBOL (BUTTONS) === */
    .btn {
      display: inline-flex;
      /* Agar ikon dan teks sejajar */
      align-items: center;
      justify-content: center;
      font-family: var(--font-family-primary);
      font-weight: var(--font-weight-semibold);
      font-size: 0.95rem;
      padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 3);
      /* 10px 24px */
      border-radius: var(--border-radius-md);
      border: 2px solid transparent;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      line-height: 1.5;
      transition: var(--transition-base);
      box-shadow: var(--shadow-sm);
      user-select: none;
      /* Mencegah seleksi teks pada tombol */
      white-space: nowrap;
      /* Mencegah teks tombol wrap */
    }

    .btn:hover,
    .btn:focus-visible {
      transform: translateY(-2px) scale(1.02);
      box-shadow: var(--shadow-md);
      text-decoration: none;
      /* Hapus underline default dari a:hover */
    }

    .btn:active {
      transform: translateY(0) scale(1);
      box-shadow: var(--shadow-xs);
    }

    .btn:disabled,
    .btn.disabled {
      opacity: 0.65;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    .btn i,
    .btn .fab,
    .btn .fas,
    .btn .far {
      /* Untuk ikon Font Awesome */
      margin-right: calc(var(--spacing-unit) * 1);
      font-size: 1em;
      /* Sesuaikan ukuran ikon relatif terhadap font tombol */
    }

    .btn.btn-icon-only i,
    .btn.btn-icon-only .fab,
    .btn.btn-icon-only .fas,
    .btn.btn-icon-only .far {
      margin-right: 0;
    }

    /* Varian ukuran tombol */
    .btn-sm {
      padding: calc(var(--spacing-unit) * 0.75) calc(var(--spacing-unit) * 1.5);
      /* 6px 12px */
      font-size: 0.8rem;
    }

    .btn-lg {
      padding: calc(var(--spacing-unit) * 1.75) calc(var(--spacing-unit) * 4);
      /* 14px 32px */
      font-size: 1.1rem;
    }

    /* Varian style tombol */
    .btn-primary {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      border-color: var(--primary-color);
    }

    .btn-primary:hover,
    .btn-primary:focus-visible {
      background-color: var(--primary-color-dark);
      border-color: var(--primary-color-dark);
      color: var(--text-color-inverted);
      /* Pastikan warna teks tetap kontras */
    }

    .btn-outline {
      /* Default outline adalah primary */
      background-color: transparent;
      color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .btn-outline:hover,
    .btn-outline:focus-visible {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
    }

    html.dark .btn-outline {
      color: var(--primary-color-light);
      border-color: var(--primary-color-light);
    }

    html.dark .btn-outline:hover,
    html.dark .btn-outline:focus-visible {
      background-color: var(--primary-color-light);
      color: var(--text-color-inverted);
      /* Atau var(--bg-color-body) jika ingin kontras */
    }

    .btn-outline-primary {
      /* Alias untuk .btn-outline */
      background-color: transparent;
      color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .btn-outline-primary:hover,
    .btn-outline-primary:focus-visible {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
    }

    html.dark .btn-outline-primary {
      color: var(--primary-color-light);
      border-color: var(--primary-color-light);
    }

    html.dark .btn-outline-primary:hover,
    html.dark .btn-outline-primary:focus-visible {
      background-color: var(--primary-color-light);
      color: var(--text-color-inverted);
    }


    .btn-outline-light {
      /* Untuk latar belakang gelap/berwarna */
      background-color: transparent;
      color: var(--text-color-inverted);
      border-color: var(--text-color-inverted);
    }

    .btn-outline-light:hover,
    .btn-outline-light:focus-visible {
      background-color: var(--text-color-inverted);
      color: var(--primary-color);
      /* Atau var(--bg-color-body) */
    }

    .btn-ghost {
      /* Tombol tanpa background atau border, hanya teks */
      background-color: transparent;
      border-color: transparent;
      color: var(--primary-color);
      box-shadow: none;
    }

    .btn-ghost:hover,
    .btn-ghost:focus-visible {
      background-color: rgba(var(--primary-color-rgb), 0.1);
      color: var(--primary-color-dark);
      transform: none;
      /* Ghost button biasanya tidak punya efek transform */
      box-shadow: none;
    }

    html.dark .btn-ghost {
      color: var(--primary-color-light);
    }

    html.dark .btn-ghost:hover,
    html.dark .btn-ghost:focus-visible {
      background-color: rgba(var(--primary-color-rgb), 0.2);
      color: var(--primary-color-light);
    }


    /* Tombol ikon (tanpa teks, hanya ikon) */
    .icon-btn {
      background-color: transparent;
      border: none;
      color: var(--text-color-medium);
      padding: calc(var(--spacing-unit) * 1);
      /* 8px */
      border-radius: var(--border-radius-full);
      /* Bulat sempurna */
      cursor: pointer;
      font-size: 1.35rem;
      /* Ukuran ikon */
      line-height: 1;
      width: 44px;
      /* Ukuran konsisten untuk tombol ikon */
      height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: background-color var(--transition-duration-fast) var(--transition-timing-function),
        color var(--transition-duration-fast) var(--transition-timing-function),
        transform var(--transition-duration-fast) var(--transition-timing-function);
    }

    .icon-btn:hover,
    .icon-btn:focus-visible {
      color: var(--primary-color);
      background-color: rgba(var(--primary-color-rgb), 0.1);
      /* Latar belakang semi-transparan */
      transform: scale(1.1);
    }

    html.dark .icon-btn:hover,
    html.dark .icon-btn:focus-visible {
      color: var(--primary-color-light);
      background-color: rgba(var(--primary-color-rgb), 0.2);
    }

    .btn-block {
      display: flex;
      /* Agar width 100% berfungsi dengan align/justify */
      width: 100%;
    }

    /* Tombol dengan efek panah bergerak */
    .animated-arrow-btn i {
      transition: transform var(--transition-duration-medium) var(--transition-timing-function);
    }

    .animated-arrow-btn:hover i,
    .animated-arrow-btn:focus-visible i {
      transform: translateX(4px);
    }

    /* === FORMULIR (FORMS) === */
    .form-group {
      margin-bottom: calc(var(--spacing-unit) * 2.5);
      /* 20px */
      position: relative;
      /* Untuk pesan error absolut */
    }

    .form-label {
      display: block;
      font-weight: var(--font-weight-medium);
      color: var(--text-color-base);
      margin-bottom: calc(var(--spacing-unit) * 0.75);
      /* 6px */
      font-size: 0.9rem;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
      /* 12px 16px */
      border: 1px solid var(--border-color-medium);
      border-radius: var(--border-radius-md);
      font-size: 1rem;
      font-family: var(--font-family-primary);
      color: var(--text-color-base);
      background-color: var(--bg-color-surface);
      transition: border-color var(--transition-duration-fast) var(--transition-timing-function),
        box-shadow var(--transition-duration-fast) var(--transition-timing-function);
      appearance: none;
      /* Hapus style default browser, terutama untuk select */
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.2);
    }

    .form-input::placeholder,
    .form-textarea::placeholder {
      color: var(--text-color-light);
      opacity: 1;
      /* Firefox butuh ini */
    }

    /* Styling untuk select agar lebih menarik - Menggunakan SVG data URI */
    .form-select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%236b7280'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right calc(var(--spacing-unit) * 1.5) center;
      background-size: 1.25em 1.25em;
      padding-right: calc(var(--spacing-unit) * 5);
      /* Ruang untuk ikon dropdown */
    }

    html.dark .form-select {
      /* Ikon dropdown select untuk dark mode */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%239ca3af'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
      /* Izinkan resize vertikal */
    }

    /* Input dengan ikon di dalamnya */
    .input-icon-wrapper {
      position: relative;
      display: flex;
      /* Memastikan ikon dan input sejajar */
      align-items: center;
    }

    .input-icon {
      position: absolute;
      left: calc(var(--spacing-unit) * 1.75);
      /* 14px */
      color: var(--text-color-light);
      font-size: 0.95rem;
      pointer-events: none;
      /* Agar ikon tidak mengganggu klik input */
      z-index: 1;
      /* Di atas input */
    }

    .input-icon-wrapper .form-input {
      padding-left: calc(var(--spacing-unit) * 5);
      /* 40px, ruang untuk ikon */
    }

    /* Pesan error untuk form */
    .form-error-message {
      display: block;
      /* Agar mengambil baris baru */
      font-size: 0.8rem;
      color: var(--error-color);
      margin-top: calc(var(--spacing-unit) * 0.5);
      /* 4px */
      min-height: 1.2em;
      /* Sisakan ruang meskipun tidak ada error, agar layout tidak nháº£y */
    }

    .form-info-message {
      display: block;
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-top: calc(var(--spacing-unit) * 0.5);
    }

    .form-input.is-invalid,
    .form-select.is-invalid,
    .form-textarea.is-invalid {
      border-color: var(--error-color);
      box-shadow: 0 0 0 3px rgba(var(--error-color-rgb), 0.2);
      /* Warna merah untuk error */
    }

    .form-input.is-valid,
    .form-select.is-valid,
    .form-textarea.is-valid {
      border-color: var(--success-color);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
      /* Warna hijau untuk sukses */
    }

    /* Styling untuk checkbox dan radio */
    .form-group-checkbox {
      display: flex;
      align-items: flex-start;
      /* Align ke atas jika label panjang */
      gap: calc(var(--spacing-unit) * 1);
      /* 8px */
    }

    .form-group-checkbox input[type="checkbox"] {
      appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border-color-medium);
      border-radius: var(--border-radius-xs);
      cursor: pointer;
      position: relative;
      /* Untuk pseudo-element checkmark */
      top: 2px;
      /* Penyesuaian vertikal kecil */
      transition: background-color var(--transition-duration-fast), border-color var(--transition-duration-fast);
      flex-shrink: 0;
      /* Mencegah checkbox menyusut */
    }

    .form-group-checkbox input[type="checkbox"]:checked {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .form-group-checkbox input[type="checkbox"]:checked::after {
      /* Checkmark kustom */
      content: '';
      position: absolute;
      left: 5px;
      top: 1px;
      width: 6px;
      height: 12px;
      border: solid var(--text-color-inverted);
      border-width: 0 2.5px 2.5px 0;
      transform: rotate(45deg);
    }

    .form-group-checkbox input[type="checkbox"]:focus-visible {
      outline: 2px solid var(--primary-color);
      outline-offset: 2px;
    }

    .form-label-checkbox {
      font-size: 0.9rem;
      font-weight: var(--font-weight-normal);
      color: var(--text-color-medium);
      cursor: pointer;
      margin-bottom: 0;
      line-height: 1.5;
    }

    .checkbox-error-message {
      /* Khusus untuk error checkbox */
      margin-left: calc(20px + var(--spacing-unit));
      /* Sejajar dengan label */
    }

    .form-link-forgot {
      display: block;
      text-align: right;
      font-size: 0.85rem;
      margin-top: calc(var(--spacing-unit) * 1);
      color: var(--text-color-link);
    }

    /* Link dalam teks, misal untuk modal */
    .link-text {
      color: var(--primary-color);
      font-weight: var(--font-weight-medium);
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
      font-size: inherit;
      /* Warisi ukuran font dari parent */
      font-family: inherit;
    }

    .link-text:hover {
      text-decoration: underline;
    }

    /* Untuk form inline di hero section atau filter */
    .form-group-inline {
      position: relative;
      flex-grow: 1;
    }

    /* Grid untuk form dengan 2 kolom */
    .form-grid-2-cols {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: calc(var(--spacing-unit) * 2);
    }

    /* === HEADER (NAVIGASI UTAMA) === */
    .app-header {
      background-color: var(--bg-color-surface);
      box-shadow: var(--shadow-md);
      position: sticky;
      /* Header menempel di atas saat scroll */
      top: 0;
      left: 0;
      width: 100%;
      z-index: var(--z-index-sticky);
      transition: background-color var(--transition-duration-medium) var(--transition-timing-function),
        transform var(--transition-duration-medium) var(--transition-timing-function),
        box-shadow var(--transition-duration-medium) var(--transition-timing-function);
    }

    .app-header.header-scrolled {
      background-color: rgba(var(--bg-color-surface-rgb), 0.9);
      /* Sedikit transparan */
      backdrop-filter: blur(8px);
      /* Efek blur (fancy) */
      box-shadow: var(--shadow-lg);
      /* Bayangan lebih tegas saat scroll */
    }

    html.dark .app-header.header-scrolled {
      background-color: rgba(var(--bg-color-surface-rgb), 0.9);
    }

    .app-header.header-hidden {
      transform: translateY(-100%);
      /* Sembunyikan header saat scroll ke bawah cepat */
    }

    .header-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: var(--header-height);
    }

    /* Logo Aplikasi */
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      font-family: var(--font-family-headings);
      font-weight: var(--font-weight-extrabold);
      font-size: 1.85rem;
      /* Ukuran logo */
      color: var(--primary-color);
      transition: opacity var(--transition-duration-fast) var(--transition-timing-function);
    }

    .logo:hover,
    .logo:focus {
      opacity: 0.85;
      text-decoration: none;
    }

    .logo-icon-wrapper {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 1.1);
      /* 4.8px 8.8px */
      border-radius: var(--border-radius-sm);
      margin-right: calc(var(--spacing-unit) * 1);
      /* 8px */
      font-size: 1.25rem;
      display: inline-flex;
      /* Agar ikon pas */
      align-items: center;
      justify-content: center;
      transition: background-color var(--transition-duration-medium) var(--transition-timing-function);
    }

    .logo:hover .logo-icon-wrapper,
    .logo:focus .logo-icon-wrapper {
      background-color: var(--primary-color-dark);
    }

    .logo-text {
      color: var(--text-color-base);
      /* Teks logo mengikuti warna teks dasar */
      transition: color var(--transition-duration-medium) var(--transition-timing-function);
    }

    html.dark .logo-text {
      color: var(--text-color-base);
    }

    /* Navigasi Utama (Desktop) */
    .main-nav {
      display: none;
      /* Sembunyikan di mobile, tampilkan di md ke atas */
    }

    .main-nav .nav-list {
      list-style: none;
      display: flex;
      gap: calc(var(--spacing-unit) * 0.5);
      /* Jarak antar item navigasi sedikit */
    }

    .main-nav .nav-link {
      font-weight: var(--font-weight-medium);
      color: var(--text-color-medium);
      text-decoration: none;
      padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2);
      /* 10px 16px, area klik lebih besar */
      border-radius: var(--border-radius-sm);
      position: relative;
      transition: color var(--transition-duration-fast) var(--transition-timing-function),
        background-color var(--transition-duration-fast) var(--transition-timing-function);
    }

    .main-nav .nav-link::after {
      /* Indikator aktif/hover yang fancy */
      content: '';
      position: absolute;
      bottom: 6px;
      /* Posisi garis bawah */
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 3px;
      background-color: var(--primary-color);
      border-radius: var(--border-radius-full);
      transition: width var(--transition-duration-medium) var(--transition-timing-function);
    }

    .main-nav .nav-link:hover,
    .main-nav .nav-link:focus-visible,
    .main-nav .nav-link.active {
      color: var(--primary-color);
      background-color: rgba(var(--primary-color-rgb), 0.05);
      /* Latar semi-transparan saat hover/aktif */
      text-decoration: none;
    }

    .main-nav .nav-link:hover::after,
    .main-nav .nav-link:focus-visible::after,
    .main-nav .nav-link.active::after {
      width: 24px;
      /* Lebar garis bawah saat aktif/hover */
    }

    html.dark .main-nav .nav-link:hover,
    html.dark .main-nav .nav-link:focus-visible,
    html.dark .main-nav .nav-link.active {
      color: var(--primary-color-light);
      background-color: rgba(var(--primary-color-rgb), 0.15);
    }

    html.dark .main-nav .nav-link.active::after,
    html.dark .main-nav .nav-link:hover::after {
      background-color: var(--primary-color-light);
    }


    /* Aksi Pengguna di Header */
    .header-actions {
      display: flex;
      align-items: center;
      gap: calc(var(--spacing-unit) * 1);
      /* 8px di mobile, akan di-adjust di desktop */
    }

    .header-actions .btn-login,
    .header-actions .btn-register {
      display: none;
      /* Sembunyikan di mobile, tampilkan di md ke atas */
      font-size: 0.9rem;
      padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
      /* 8px 16px */
    }

    /* Tombol Menu Mobile */
    .mobile-menu-toggle-btn {
      display: inline-flex;
      /* Tampilkan di mobile */
      z-index: 10;
      /* Di atas ikon lain jika ada tumpang tindih */
    }

    .mobile-menu-toggle-btn .fa-times {
      /* Untuk ikon close (X) */
      font-size: 1.5rem;
      /* Pastikan ikon X terlihat jelas */
    }

    /* Navigasi Mobile (Panel) */
    .mobile-nav {
      background-color: var(--bg-color-surface);
      box-shadow: var(--shadow-lg);
      position: absolute;
      top: var(--header-height);
      /* Tepat di bawah header */
      left: 0;
      right: 0;
      z-index: calc(var(--z-index-sticky) - 1);
      /* Di bawah header tapi di atas konten */
      padding: calc(var(--spacing-unit) * 2);
      /* 16px */
      border-top: 1px solid var(--border-color-soft);
      transform: translateY(-100%);
      /* Awalnya tersembunyi di atas */
      opacity: 0;
      visibility: hidden;
      transition: transform var(--transition-duration-medium) var(--transition-timing-function),
        opacity var(--transition-duration-medium) var(--transition-timing-function),
        visibility 0s var(--transition-duration-medium);
      /* Visibility transisi instan */
    }

    .mobile-nav.open {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
      transition-delay: 0s;
    }

    .mobile-nav-list {
      list-style: none;
      margin-bottom: calc(var(--spacing-unit) * 2);
      /* 16px */
    }

    .mobile-nav-list li:not(:last-child) {
      margin-bottom: calc(var(--spacing-unit) * 0.5);
      /* 4px */
    }

    .mobile-nav-link {
      display: block;
      padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
      /* 12px 16px */
      color: var(--text-color-base);
      font-weight: var(--font-weight-medium);
      border-radius: var(--border-radius-md);
      transition: background-color var(--transition-duration-fast) var(--transition-timing-function),
        color var(--transition-duration-fast) var(--transition-timing-function);
    }

    .mobile-nav-link:hover,
    .mobile-nav-link:focus-visible,
    .mobile-nav-link.active {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      text-decoration: none;
    }

    html.dark .mobile-nav-link:hover,
    html.dark .mobile-nav-link:focus-visible,
    html.dark .mobile-nav-link.active {
      background-color: var(--primary-color-dark);
    }

    .mobile-nav-actions .btn {
      margin-bottom: var(--spacing-unit);
      /* 8px */
    }

    .mobile-nav-actions .btn:last-child {
      margin-bottom: 0;
    }


    /* === HERO SECTION === */
    .hero-section {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: var(--text-color-inverted);
      padding: calc(var(--spacing-unit) * 10) 0 calc(var(--spacing-unit) * 8) 0;
      /* Padding atas/bawah lebih besar: 80px & 64px */
      position: relative;
      /* Untuk elemen absolut di dalamnya */
      overflow: hidden;
      /* Mencegah bentuk latar meluber */
      min-height: calc(90vh - var(--header-height));
      /* Minimal setinggi viewport kurang header */
      display: flex;
      align-items: center;
    }

    /* Bentuk-bentuk dekoratif di latar belakang Hero */
    .hero-background-elements {
      position: absolute;
      inset: 0;
      overflow: hidden;
      z-index: 0;
    }

    .hero-bg-shape {
      position: absolute;
      border-radius: 50%;
      opacity: 0.1;
      filter: blur(50px);
      /* Efek blur yang sangat kuat */
      animation: floatAnimation 15s infinite ease-in-out alternate;
    }

    .hero-bg-shape.shape-1 {
      width: 30vw;
      max-width: 400px;
      min-width: 200px;
      height: 30vw;
      max-height: 400px;
      min-height: 200px;
      background-color: var(--primary-color-light);
      top: -10%;
      left: -15%;
      animation-duration: 18s;
    }

    .hero-bg-shape.shape-2 {
      width: 40vw;
      max-width: 500px;
      min-width: 250px;
      height: 40vw;
      max-height: 500px;
      min-height: 250px;
      background-color: var(--secondary-color-light);
      bottom: -15%;
      right: -20%;
      animation-delay: -5s;
      /* Offset animasi */
    }

    .hero-bg-shape.shape-3 {
      width: 25vw;
      max-width: 300px;
      min-width: 150px;
      height: 25vw;
      max-height: 300px;
      min-height: 150px;
      background-color: var(--accent-color);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation-duration: 20s;
      opacity: 0.07;
    }

    @keyframes floatAnimation {

      /* Animasi untuk bentuk latar */
      0% {
        transform: translateY(0px) translateX(0px) scale(1);
      }

      50% {
        transform: translateY(-30px) translateX(20px) scale(1.1);
      }

      100% {
        transform: translateY(0px) translateX(0px) scale(1);
      }
    }

    html.dark .hero-section {
      /* Penyesuaian warna gradien untuk mode gelap */
      background: linear-gradient(135deg, var(--primary-color-dark) 0%, var(--secondary-color-dark) 100%);
    }

    html.dark .hero-bg-shape {
      opacity: 0.15;
    }

    /* Mungkin perlu opacity lebih tinggi di dark mode */

    .hero-container {
      display: grid;
      grid-template-columns: 1fr;
      /* Default mobile: satu kolom */
      align-items: center;
      gap: calc(var(--spacing-unit) * 4);
      /* 32px */
      position: relative;
      /* Agar di atas elemen background */
      z-index: 1;
      text-align: center;
      /* Default mobile: teks tengah */
    }

    .hero-content {
      animation: slideInFromLeft 0.8s var(--transition-timing-function) forwards;
      opacity: 0;
      /* Awalnya transparan untuk animasi */
    }

    @keyframes slideInFromLeft {
      from {
        transform: translateX(-50px) translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateX(0) translateY(0);
        opacity: 1;
      }
    }

    .hero-title {
      font-size: 2.5rem;
      /* Disesuaikan untuk mobile, akan diperbesar di desktop */
      font-weight: var(--font-weight-extrabold);
      margin-bottom: calc(var(--spacing-unit) * 2);
      /* 16px */
      line-height: 1.2;
      color: var(--text-color-inverted);
      /* Teks putih di atas gradien */
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      /* Bayangan teks halus */
    }

    .hero-title .highlight-text {
      color: var(--accent-color);
      /* Warna aksen untuk highlight */
    }

    .hero-subtitle {
      font-size: 1.1rem;
      /* Disesuaikan untuk mobile */
      color: rgba(255, 255, 255, 0.85);
      /* Putih semi-transparan */
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      /* Tengah di mobile */
      margin-bottom: calc(var(--spacing-unit) * 3);
      /* 24px */
      line-height: 1.7;
    }

    /* Tab Pencarian di Hero */
    .hero-search-tabs {
      display: inline-flex;
      /* Agar sesuai dengan lebar kontennya */
      background-color: rgba(255, 255, 255, 0.15);
      /* Latar belakang semi-transparan */
      backdrop-filter: blur(5px);
      /* Efek glassmorphism */
      padding: calc(var(--spacing-unit) * 0.75);
      /* 6px */
      border-radius: var(--border-radius-lg);
      margin-bottom: calc(var(--spacing-unit) * 3);
      /* 24px */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .hero-tab-btn {
      background-color: transparent;
      border: none;
      padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2);
      /* 10px 16px */
      font-weight: var(--font-weight-semibold);
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      border-radius: var(--border-radius-md);
      /* Radius agar pas di dalam container tab */
      transition: var(--transition-base);
      font-size: 0.9rem;
      display: inline-flex;
      /* Untuk ikon */
      align-items: center;
      gap: calc(var(--spacing-unit) * 0.75);
    }

    .hero-tab-btn.active {
      background-color: var(--bg-color-surface);
      /* Warna solid saat aktif */
      color: var(--primary-color);
      /* Teks warna primer */
      box-shadow: var(--shadow-md);
    }

    .hero-tab-btn:not(.active):hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--text-color-inverted);
    }

    /* Form Pencarian di Hero */
    .hero-search-form {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 2.5);
      /* 20px */
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-xl);
      /* Bayangan kuat untuk efek "pop" */
      margin-bottom: calc(var(--spacing-unit) * 2);
      /* 16px */
      animation: fadeInScaleUp 0.6s var(--transition-timing-function) 0.3s forwards;
      opacity: 0;
      /* Awalnya transparan untuk animasi */
      transform: scale(0.95);
      max-width: 600px;
      /* Batasi lebar form di mobile */
      margin-left: auto;
      margin-right: auto;
    }

    @keyframes fadeInScaleUp {
      from {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
      }

      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .hero-search-panel {
      display: none;
      /* Sembunyikan semua panel awal */
      gap: calc(var(--spacing-unit) * 1.5);
      /* 12px */
    }

    .hero-search-panel.active {
      display: grid;
      /* Gunakan grid untuk layout form yang fleksibel */
      grid-template-columns: 1fr;
      /* Kolom responsif - default 1 kolom untuk mobile */
      align-items: end;
      /* Sejajarkan elemen ke bawah (terutama tombol) */
    }

    /* Penyesuaian input dan select di hero agar lebih "fancy" */
    .form-input-hero,
    .form-select-hero {
      width: 100%;
      padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 4.5);
      /* 12px, padding kiri untuk ikon */
      border: 1px solid var(--border-color-soft);
      border-radius: var(--border-radius-md);
      font-size: 0.95rem;
      background-color: var(--bg-color-body);
      /* Sedikit beda dari background form */
      color: var(--text-color-base);
    }

    .form-input-hero:focus,
    .form-select-hero:focus {
      background-color: var(--bg-color-surface);
      /* Kembali ke warna surface saat fokus */
    }

    .search-icon {
      /* Ikon di dalam input hero */
      left: calc(var(--spacing-unit) * 1.5);
      /* Posisi ikon sedikit ke dalam */
      font-size: 0.95rem;
    }

    .btn-search-hero {
      padding-left: calc(var(--spacing-unit) * 3);
      /* Ruang untuk ikon jika ada */
      padding-right: calc(var(--spacing-unit) * 3);
      height: 48px;
      /* Sesuaikan tinggi tombol dengan input (padding 12px * 2 + line-height ~24px) */
    }

    .hero-search-suggestion {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.8);
      margin-top: calc(var(--spacing-unit) * 2);
      /* 16px */
      text-align: center;
    }

    .hero-search-suggestion .link-text {
      color: var(--text-color-inverted);
      /* Warna link di hero */
      font-weight: var(--font-weight-semibold);
      transition: letter-spacing var(--transition-duration-medium) var(--transition-timing-function);
    }

    .hero-search-suggestion .link-text:hover {
      text-decoration-color: var(--accent-color);
      letter-spacing: 0.5px;
      /* Efek hover fancy */
    }

    .hero-search-suggestion .link-text i {
      margin-left: calc(var(--spacing-unit) * 0.5);
      /* 4px */
      transition: transform var(--transition-duration-medium) var(--transition-timing-function);
    }

    .hero-search-suggestion .link-text:hover i {
      transform: translateX(3px);
    }


    /* Gambar di Hero Section */
    .hero-image-container {
      display: none;
      /* Sembunyikan di mobile, tampilkan di desktop */
      justify-content: center;
      align-items: center;
      animation: slideInFromRight 0.8s var(--transition-timing-function) forwards;
      opacity: 0;
      /* Awalnya transparan untuk animasi */
      margin-top: calc(var(--spacing-unit) * 3);
      /* Jarak dari konten di mobile jika ditampilkan */
    }

    @keyframes slideInFromRight {
      from {
        transform: translateX(50px) translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateX(0) translateY(0);
        opacity: 1;
      }
    }

    .hero-image {
      width: 100%;
      max-width: 450px;
      /* Batasi ukuran gambar */
      height: auto;
      border-radius: var(--border-radius-xl);
      /* Radius besar */
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.35);
      /* Bayangan dramatis */
      object-fit: cover;
      transition: transform 0.5s var(--transition-timing-function);
    }

    .hero-image-overlay {
      /* Overlay gradien halus pada gambar (opsional) */
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.2) 0%, transparent 60%);
      border-radius: var(--border-radius-xl);
      pointer-events: none;
      /* Agar tidak mengganggu interaksi dengan gambar */
    }


    /* === SECTION GENERIC STYLES === */
    .section-padding {
      padding-top: calc(var(--spacing-unit) * 8);
      /* 64px */
      padding-bottom: calc(var(--spacing-unit) * 8);
      /* 64px */
    }

    .section-padding-sm {
      padding-top: calc(var(--spacing-unit) * 5);
      /* 40px */
      padding-bottom: calc(var(--spacing-unit) * 5);
      /* 40px */
    }

    .bg-light {
      background-color: var(--bg-color-section-alt);
    }

    /* Header untuk Section (Judul dan Subjudul) */
    .section-header {
      text-align: center;
      margin-bottom: calc(var(--spacing-unit) * 5);
      /* 40px */
      max-width: 700px;
      /* Batasi lebar header section */
      margin-left: auto;
      margin-right: auto;
    }

    .section-title {
      font-size: 2rem;
      /* 32px, disesuaikan untuk mobile/default */
      font-weight: var(--font-weight-bold);
      margin-bottom: calc(var(--spacing-unit) * 1.5);
      /* 12px */
    }

    .section-subtitle {
      font-size: 1.05rem;
      /* 16.8px */
      color: var(--text-color-medium);
      line-height: 1.7;
    }

    .section-footer-action {
      text-align: center;
      margin-top: calc(var(--spacing-unit) * 5);
      /* 40px */
    }

    /* === FEATURED PROPERTIES / PROPERTY GRID === */
    .property-grid {
      display: grid;
      /* Kolom responsif: minimal 280px, maksimal 1fr (mengisi ruang) */
      grid-template-columns: repeat(auto-fill, minmax(min(100%, 280px), 1fr));
      gap: calc(var(--spacing-unit) * 3);
      /* 24px */
    }

    .property-card {
      background-color: var(--bg-color-surface);
      border-radius: var(--border-radius-xl);
      /* Radius lebih besar untuk kartu */
      box-shadow: var(--shadow-fancy);
      overflow: hidden;
      /* Agar gambar tidak keluar dari radius */
      transition: transform var(--transition-duration-medium) var(--transition-timing-function),
        box-shadow var(--transition-duration-medium) var(--transition-timing-function);
      display: flex;
      flex-direction: column;
      /* Konten kartu tersusun vertikal */
      position: relative;
      /* Untuk stretched-link */
    }

    .property-card:hover {
      transform: translateY(-8px) scale(1.015);
      /* Efek hover lebih dinamis */
      box-shadow: 0 20px 40px rgba(var(--primary-color-rgb), 0.2);
    }

    /* Untuk membuat seluruh kartu bisa diklik jika ada link di judul */
    .stretched-link::after {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: 1;
      content: "";
    }

    .property-card-image-wrapper {
      position: relative;
      height: 200px;
      /* Tinggi gambar tetap */
      overflow: hidden;
      /* Agar zoom gambar tidak keluar */
    }

    .property-card-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* Gambar mengisi area tanpa distorsi */
      transition: transform var(--transition-duration-slow) var(--transition-timing-function);
      /* Transisi zoom lambat */
    }

    .property-card:hover .property-card-image {
      transform: scale(1.1);
      /* Zoom pada gambar saat hover kartu */
    }

    /* Status dan Tombol Favorit pada Gambar */
    .property-card-status {
      position: absolute;
      top: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      left: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      padding: calc(var(--spacing-unit) * 0.5) calc(var(--spacing-unit) * 1.25);
      /* 4px 10px */
      border-radius: var(--border-radius-sm);
      font-size: 0.7rem;
      font-weight: var(--font-weight-semibold);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 2;
      /* Di atas gambar */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .property-card-status.new {
      background-color: var(--secondary-color);
    }

    .property-card-status.popular {
      background-color: var(--accent-color);
    }

    .property-card-status.hot-deal {
      background-color: var(--error-color);
    }


    .property-card-favorite-btn {
      position: absolute;
      top: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      right: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      background-color: rgba(var(--bg-color-surface-rgb), 0.85);
      /* Latar semi-transparan */
      backdrop-filter: blur(3px);
      color: var(--text-color-medium);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: var(--border-radius-full);
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-base);
      box-shadow: var(--shadow-sm);
      z-index: 2;
    }

    .property-card-favorite-btn:hover,
    .property-card-favorite-btn.active {
      background-color: var(--accent-color);
      color: var(--text-color-inverted);
      transform: scale(1.15);
    }

    .property-card-favorite-btn.active .fa-heart {
      font-weight: 900;
      /* Menggunakan ikon solid (fas) saat aktif */
    }

    html.dark .property-card-favorite-btn {
      background-color: rgba(var(--bg-color-surface-rgb), 0.7);
      color: var(--text-color-light);
    }

    html.dark .property-card-favorite-btn:hover,
    html.dark .property-card-favorite-btn.active {
      background-color: var(--accent-color);
      color: var(--text-color-inverted);
    }

    /* Konten Kartu Properti */
    .property-card-content {
      padding: calc(var(--spacing-unit) * 2);
      /* 16px */
      flex-grow: 1;
      /* Konten mengisi sisa ruang di kartu */
      display: flex;
      flex-direction: column;
    }

    .property-card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: calc(var(--spacing-unit) * 0.75);
      /* 6px */
      margin-bottom: calc(var(--spacing-unit) * 1);
      /* 8px */
    }

    .tag {
      font-size: 0.65rem;
      font-weight: var(--font-weight-medium);
      padding: calc(var(--spacing-unit) * 0.35) calc(var(--spacing-unit) * 1);
      /* ~3px 8px */
      border-radius: var(--border-radius-xs);
      text-transform: capitalize;
    }

    .tag-type {
      background-color: rgba(var(--primary-color-rgb), 0.1);
      color: var(--primary-color);
    }

    .tag-furnished {
      background-color: rgba(var(--secondary-color-rgb), 0.1);
      color: var(--secondary-color);
    }

    .tag-security {
      background-color: rgba(245, 158, 11, 0.1);
      color: #D97706;
    }

    /* accent-color-dark */
    .tag-facility {
      background-color: rgba(139, 92, 246, 0.1);
      color: #8B5CF6;
    }

    /* Warna ungu sebagai contoh */

    html.dark .tag-type {
      background-color: rgba(var(--primary-color-rgb), 0.2);
      color: var(--primary-color-light);
    }

    html.dark .tag-furnished {
      background-color: rgba(var(--secondary-color-rgb), 0.2);
      color: var(--secondary-color-light);
    }

    html.dark .tag-security {
      background-color: rgba(251, 191, 36, 0.2);
      color: #FBBF24;
    }

    html.dark .tag-facility {
      background-color: rgba(167, 139, 250, 0.2);
      color: #A78BFA;
    }


    .property-card-title {
      font-size: 1.15rem;
      /* 18.4px */
      font-weight: var(--font-weight-semibold);
      margin-bottom: calc(var(--spacing-unit) * 0.75);
      /* 6px */
      line-height: 1.4;
      /* Batasi jumlah baris judul, tampilkan ellipsis jika terlalu panjang */
      display: -webkit-box;
      -webkit-line-clamp: 2;
      /* Jumlah baris maksimal */
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
      min-height: 2.8em;
      /* Untuk 2 baris (1.4 line-height * 2) */
    }

    .property-card-title a {
      color: var(--text-color-base);
      text-decoration: none;
    }

    .property-card-title a:hover {
      color: var(--primary-color);
      text-decoration: none;
      /* Stretched-link sudah menangani ini */
    }

    .property-card-location {
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-bottom: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      display: flex;
      align-items: center;
    }

    .property-card-location i {
      margin-right: calc(var(--spacing-unit) * 0.75);
      /* 6px */
      font-size: 0.9em;
      /* Ikon sedikit lebih kecil */
    }

    .property-card-features {
      display: grid;
      /* Gunakan grid untuk fitur agar rapi */
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      /* 2 atau 3 fitur per baris */
      gap: calc(var(--spacing-unit) * 1);
      /* 8px */
      font-size: 0.8rem;
      color: var(--text-color-medium);
      margin-bottom: calc(var(--spacing-unit) * 2);
      /* 16px */
    }

    .property-card-features span {
      display: flex;
      align-items: center;
      white-space: nowrap;
      /* Mencegah teks fitur wrap */
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .property-card-features i {
      margin-right: calc(var(--spacing-unit) * 0.75);
      /* 6px */
      color: var(--primary-color-light);
      /* Warna ikon fitur */
      font-size: 0.9em;
      width: 16px;
      /* Lebar tetap agar teks sejajar */
      text-align: center;
    }

    .property-card-price-wrapper {
      margin-top: auto;
      /* Mendorong ini ke bawah kartu */
      padding-top: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      border-top: 1px solid var(--border-color-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .property-card-price {
      font-size: 1.1rem;
      /* 17.6px */
      font-weight: var(--font-weight-bold);
      color: var(--primary-color);
      margin-bottom: 0;
    }

    .property-card-price .price-period {
      font-size: 0.75rem;
      font-weight: var(--font-weight-normal);
      color: var(--text-color-light);
      margin-left: calc(var(--spacing-unit) * 0.5);
      /* 4px */
    }

    .property-card .btn-sm {
      /* Tombol detail di kartu */
      padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 1.25);
      /* Lebih kecil lagi */
      font-size: 0.75rem;
      z-index: 2;
      /* Agar di atas stretched link */
      position: relative;
      /* Agar z-index bekerja */
    }


    /* === FEATURES OVERVIEW SECTION (Beranda) === */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: calc(var(--spacing-unit) * 3);
      /* 24px */
    }

    .feature-item {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 3);
      /* 24px */
      border-radius: var(--border-radius-lg);
      text-align: center;
      box-shadow: var(--shadow-md);
      transition: var(--transition-base);
      border: 1px solid var(--border-color-soft);
    }

    .feature-item:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-fancy-alt);
      /* Bayangan dengan warna sekunder */
      border-color: transparent;
      /* Sembunyikan border saat ada shadow kuat */
    }

    .feature-icon-wrapper {
      width: 64px;
      height: 64px;
      border-radius: var(--border-radius-full);
      /* Bulat */
      background: linear-gradient(135deg, var(--primary-color-light), var(--primary-color));
      color: var(--text-color-inverted);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto calc(var(--spacing-unit) * 2);
      /* 16px margin bawah */
      font-size: 1.8rem;
      /* Ukuran ikon besar */
      transition: transform var(--transition-duration-medium) var(--transition-timing-function),
        box-shadow var(--transition-duration-medium) var(--transition-timing-function);
      box-shadow: 0 4px 10px rgba(var(--primary-color-rgb), 0.3);
    }

    .feature-item:hover .feature-icon-wrapper {
      transform: scale(1.1) rotate(-5deg);
      /* Efek ikon sedikit berputar dan membesar */
      box-shadow: 0 8px 20px rgba(var(--primary-color-rgb), 0.4);
    }

    html.dark .feature-icon-wrapper {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-color-dark));
    }

    .feature-title {
      font-size: 1.25rem;
      /* 20px */
      font-weight: var(--font-weight-semibold);
      margin-bottom: calc(var(--spacing-unit) * 0.75);
      /* 6px */
    }

    .feature-description {
      font-size: 0.9rem;
      color: var(--text-color-medium);
      line-height: 1.7;
    }

    /* === CALL TO ACTION (CTA) SECTION === */
    .call-to-action-section {
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color-dark));
      color: var(--text-color-inverted);
      border-radius: var(--border-radius-xl);
      /* Margin agar tidak mentok di layar kecil, padding internal lebih besar */
      margin: calc(var(--spacing-unit) * 6) calc(var(--spacing-unit) * 2);
      /* 48px 16px */
      padding: calc(var(--spacing-unit) * 6) calc(var(--spacing-unit) * 3);
      /* 48px 24px */
      box-shadow: 0 25px 50px -12px rgba(var(--primary-color-rgb), 0.35);
      position: relative;
      /* Untuk elemen dekoratif */
      overflow: hidden;
    }

    /* Elemen dekoratif untuk CTA */
    .call-to-action-section::before,
    .call-to-action-section::after {
      content: '';
      position: absolute;
      border-radius: 50%;
      opacity: 0.08;
      pointer-events: none;
      filter: blur(40px);
    }

    .call-to-action-section::before {
      width: 250px;
      height: 250px;
      background-color: var(--primary-color-light);
      top: -80px;
      left: -80px;
    }

    .call-to-action-section::after {
      width: 350px;
      height: 350px;
      background-color: var(--secondary-color-light);
      bottom: -120px;
      right: -120px;
    }


    .cta-container {
      display: flex;
      flex-direction: column;
      /* Default untuk mobile */
      align-items: center;
      text-align: center;
      gap: calc(var(--spacing-unit) * 2.5);
      /* 20px */
      position: relative;
      /* Agar di atas elemen dekoratif */
      z-index: 1;
    }

    .cta-title {
      font-size: 2rem;
      /* 32px */
      color: var(--text-color-inverted);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .cta-title .highlight-text-alt {
      color: var(--accent-color);
    }

    /* Highlight di CTA pakai aksen */
    .cta-subtitle {
      font-size: 1.05rem;
      opacity: 0.9;
      max-width: 600px;
      margin-bottom: var(--spacing-unit);
      /* 8px */
      color: var(--text-color-inverted);
    }

    .cta-actions {
      display: flex;
      flex-direction: column;
      /* Tombol bertumpuk di mobile */
      gap: calc(var(--spacing-unit) * 2);
      /* 16px */
      justify-content: center;
      width: 100%;
      max-width: 300px;
      /* Batasi lebar tombol di mobile */
    }

    .btn-cta {
      padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 3);
      /* 12px 24px */
      font-size: 1rem;
    }

    /* Tombol primary di CTA: latar putih, teks warna primer */
    .btn-cta.btn-primary {
      background-color: var(--text-color-inverted);
      color: var(--primary-color);
      border-color: var(--text-color-inverted);
    }

    .btn-cta.btn-primary:hover,
    .btn-cta.btn-primary:focus-visible {
      background-color: rgba(255, 255, 255, 0.9);
      color: var(--primary-color-dark);
    }

    /* Tombol outline di CTA: border dan teks putih */
    .btn-cta.btn-outline-light {
      border-width: 2px;
      /* Border lebih tebal agar terlihat jelas */
    }

    .btn-cta.btn-outline-light:hover,
    .btn-cta.btn-outline-light:focus-visible {
      background-color: rgba(255, 255, 255, 0.1);
      /* Sedikit highlight saat hover */
    }


    /* === FOOTER === */
    .app-footer {
      background-color: var(--bg-color-dark-contrast);
      /* Warna lebih gelap dari body */
      color: var(--text-color-light);
      /* Teks lebih terang di footer */
      padding-top: calc(var(--spacing-unit) * 6);
      /* 48px */
      padding-bottom: calc(var(--spacing-unit) * 3);
      /* 24px */
      border-top: 4px solid var(--primary-color);
      /* Aksen garis di atas footer */
      margin-top: auto;
      /* Mendorong footer ke bawah jika konten pendek */
    }

    html.dark .app-footer {
      background-color: var(--bg-color-surface);
      /* Di mode gelap, footer bisa lebih terang dari body */
      color: var(--text-color-medium);
      border-top-color: var(--primary-color-dark);
    }

    .footer-top {
      display: grid;
      grid-template-columns: 1fr;
      /* Default 1 kolom untuk mobile */
      gap: calc(var(--spacing-unit) * 4);
      /* 32px */
      margin-bottom: calc(var(--spacing-unit) * 4);
      /* 32px */
    }

    .footer-brand .logo {
      font-size: 1.8rem;
    }

    .footer-brand .logo-text {
      color: var(--text-color-inverted);
    }

    html.dark .footer-brand .logo-text {
      color: var(--text-color-base);
    }

    .footer-tagline {
      font-size: 0.9rem;
      margin-top: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      color: var(--text-color-light);
      /* Warna tagline di footer */
      line-height: 1.7;
    }

    html.dark .footer-tagline {
      color: var(--text-color-medium);
    }

    .social-links {
      margin-top: calc(var(--spacing-unit) * 2);
      /* 16px */
      display: flex;
      gap: calc(var(--spacing-unit) * 1.5);
      /* 12px */
    }

    .social-link {
      color: var(--text-color-light);
      /* Warna ikon sosial media */
      font-size: 1.2rem;
      width: 40px;
      height: 40px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* Border semi-transparan */
      border-radius: var(--border-radius-full);
      /* Bulat */
      transition: var(--transition-base);
    }

    .social-link:hover,
    .social-link:focus-visible {
      color: var(--text-color-inverted);
      background-color: var(--primary-color);
      border-color: var(--primary-color);
      transform: translateY(-3px) scale(1.05);
      text-decoration: none;
    }

    html.dark .social-link {
      color: var(--text-color-medium);
      border-color: var(--border-color-medium);
    }

    html.dark .social-link:hover,
    html.dark .social-link:focus-visible {
      color: var(--text-color-inverted);
      background-color: var(--primary-color-light);
      border-color: var(--primary-color-light);
    }


    .footer-heading {
      font-size: 1.15rem;
      /* 18.4px */
      font-weight: var(--font-weight-semibold);
      color: var(--text-color-inverted);
      /* Judul di footer lebih terang */
      margin-bottom: calc(var(--spacing-unit) * 2);
      /* 16px */
    }

    html.dark .footer-heading {
      color: var(--text-color-base);
    }

    .footer-list {
      list-style: none;
    }

    .footer-list li {
      margin-bottom: calc(var(--spacing-unit) * 1.25);
      /* 10px */
    }

    .footer-list li:last-child {
      margin-bottom: 0;
    }

    .footer-link {
      color: var(--text-color-light);
      /* Warna link di footer */
      font-size: 0.9rem;
      position: relative;
      /* Untuk efek hover */
      padding-bottom: 2px;
      /* Ruang untuk garis bawah */
    }

    .footer-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 1.5px;
      background-color: var(--primary-color);
      transition: width var(--transition-duration-medium) var(--transition-timing-function);
    }

    .footer-link:hover,
    .footer-link:focus-visible {
      color: var(--text-color-inverted);
      text-decoration: none;
    }

    .footer-link:hover::after,
    .footer-link:focus-visible::after {
      width: 100%;
    }

    html.dark .footer-link {
      color: var(--text-color-medium);
    }

    html.dark .footer-link:hover,
    html.dark .footer-link:focus-visible {
      color: var(--primary-color-light);
    }

    html.dark .footer-link:hover::after,
    html.dark .footer-link:focus-visible::after {
      background-color: var(--primary-color-light);
    }


    .footer-address .footer-list li {
      display: flex;
      align-items: flex-start;
      /* Agar ikon sejajar dengan baris pertama teks panjang */
    }

    .footer-contact-icon {
      margin-right: calc(var(--spacing-unit) * 1.25);
      /* 10px */
      color: var(--primary-color);
      /* Warna ikon kontak */
      width: 18px;
      /* Lebar tetap agar teks sejajar */
      text-align: center;
      flex-shrink: 0;
      /* Mencegah ikon menyusut */
      margin-top: 3px;
      /* Penyesuaian vertikal kecil */
    }

    html.dark .footer-contact-icon {
      color: var(--primary-color-light);
    }

    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.15);
      /* Garis pemisah halus */
      padding-top: calc(var(--spacing-unit) * 3);
      /* 24px */
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    html.dark .footer-bottom {
      border-top-color: var(--border-color-soft);
      color: var(--text-color-medium);
    }

    .footer-bottom .fa-heart {
      /* Ikon hati di copyright */
      transition: color var(--transition-duration-fast);
    }

    .footer-bottom:hover .fa-heart {
      color: var(--error-color);
      /* Berubah warna saat hover footer bottom */
    }

    /* === MODAL (Pop-up Dialogs) === */
    .modal {
      position: fixed;
      inset: 0;
      /* top, right, bottom, left = 0 */
      z-index: var(--z-index-modal-backdrop);
      /* Di atas backdrop */
      display: flex;
      align-items: center;
      /* Vertikal tengah */
      justify-content: center;
      /* Horizontal tengah */
      padding: calc(var(--spacing-unit) * 2);
      /* 16px */
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-duration-medium) var(--transition-timing-function),
        visibility 0s var(--transition-duration-medium);
      /* Visibility transisi instan */
    }

    .modal.open {
      opacity: 1;
      visibility: visible;
      transition-delay: 0s;
    }

    .modal-overlay {
      /* Backdrop modal */
      position: fixed;
      /* Pastikan menutupi seluruh viewport */
      inset: 0;
      background-color: rgba(17, 24, 39, 0.85);
      /* Warna gelap dengan opacity */
      backdrop-filter: blur(4px);
      /* Efek blur pada konten di belakang */
      cursor: pointer;
      z-index: var(--z-index-modal-backdrop);
    }

    html.dark .modal-overlay {
      background-color: rgba(0, 0, 0, 0.9);
    }

    .modal-content {
      background-color: var(--bg-color-surface);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-xl);
      width: 100%;
      max-width: 480px;
      /* Lebar maksimal modal, dikurangi untuk mobile */
      position: relative;
      z-index: var(--z-index-modal);
      /* Di atas overlay */
      transform: scale(0.9) translateY(30px);
      /* Efek muncul dari bawah dan membesar */
      transition: transform var(--transition-duration-medium) var(--transition-timing-function) 0.05s;
      /* Sedikit delay */
      display: flex;
      flex-direction: column;
      max-height: calc(100vh - (var(--spacing-unit) * 4));
      /* Tinggi maksimal modal, sisakan padding */
      overflow: hidden;
      /* Untuk border radius pada konten internal */
    }

    .modal.open .modal-content {
      transform: scale(1) translateY(0);
    }

    .modal-header {
      padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 2.5);
      /* 16px 20px */
      border-bottom: 1px solid var(--border-color-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      /* Header tidak menyusut */
    }

    .modal-title {
      font-size: 1.35rem;
      /* 21.6px */
      font-weight: var(--font-weight-semibold);
      margin-bottom: 0;
    }

    .modal-close-btn {
      /* Tombol close di header modal */
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-color-light);
      cursor: pointer;
      padding: calc(var(--spacing-unit) * 0.5);
      /* 4px */
      line-height: 1;
      transition: color var(--transition-duration-fast) var(--transition-timing-function),
        transform var(--transition-duration-fast) var(--transition-timing-function);
      border-radius: var(--border-radius-full);
    }

    .modal-close-btn:hover,
    .modal-close-btn:focus-visible {
      color: var(--error-color);
      /* Warna merah untuk close */
      transform: rotate(90deg) scale(1.1);
      background-color: rgba(var(--error-color-rgb), 0.1);
    }

    .modal-body {
      padding: calc(var(--spacing-unit) * 2.5) calc(var(--spacing-unit) * 2.5);
      /* 20px */
      overflow-y: auto;
      /* Scroll jika konten modal panjang */
      flex-grow: 1;
      /* Body mengisi ruang yang tersisa */
    }

    /* Styling khusus untuk form di dalam modal */
    .auth-form .form-group:last-of-type {
      margin-bottom: calc(var(--spacing-unit) * 3);
      /* Jarak lebih besar sebelum tombol submit */
    }

    .btn-submit-auth {
      /* Tombol submit di form auth */
      font-size: 1rem;
      padding-top: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      padding-bottom: calc(var(--spacing-unit) * 1.5);
      /* 12px */
      font-weight: var(--font-weight-semibold);
    }

    .modal-footer {
      padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 2.5);
      /* 16px 20px */
      border-top: 1px solid var(--border-color-soft);
      text-align: center;
      font-size: 0.9rem;
      color: var(--text-color-medium);
      background-color: var(--bg-color-section-alt);
      /* Latar footer modal sedikit beda */
      flex-shrink: 0;
      /* Footer tidak menyusut */
    }

    .modal-footer p {
      margin-bottom: 0;
    }


    /* === SCROLL TO TOP BUTTON === */
    .scroll-to-top-btn {
      position: fixed;
      bottom: calc(var(--spacing-unit) * 3);
      /* 24px */
      right: calc(var(--spacing-unit) * 3);
      /* 24px */
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: var(--text-color-inverted);
      width: 48px;
      height: 48px;
      border-radius: var(--border-radius-full);
      /* Bulat sempurna */
      border: none;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      z-index: var(--z-index-scroll-top);
      opacity: 0;
      visibility: hidden;
      transform: translateY(30px) scale(0.8);
      /* Efek muncul dari bawah */
      transition: opacity var(--transition-duration-medium) var(--transition-timing-function),
        visibility 0s var(--transition-duration-medium),
        transform var(--transition-duration-medium) var(--transition-timing-function),
        background var(--transition-duration-medium) var(--transition-timing-function);
    }

    .scroll-to-top-btn.visible {
      opacity: 1;
      visibility: visible;
      transform: translateY(0) scale(1);
      transition-delay: 0s, 0s, 0s;
      /* Reset delay saat muncul */
    }

    .scroll-to-top-btn:hover {
      background: linear-gradient(135deg, var(--primary-color-dark), var(--secondary-color-dark));
      transform: scale(1.1) translateY(-3px);
      /* Sedikit membesar dan naik */
      box-shadow: var(--shadow-xl);
    }

    .scroll-to-top-btn:active {
      transform: scale(0.95);
    }

    /* === HALAMAN KHUSUS (Contoh: 404 Not Found) === */
    .not-found-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - var(--header-height) - var(--footer-height-approx));
      /* Mengisi ruang */
      text-align: center;
    }

    .not-found-icon-wrapper {
      position: relative;
      margin-bottom: calc(var(--spacing-unit) * 3);
      /* 24px */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .not-found-icon-wrapper .fa-compass {
      font-size: 6rem;
      /* Ikon besar */
      color: var(--primary-color-light);
      opacity: 0.3;
    }

    .fa-spin-slow {
      /* Animasi putar pelan */
      animation: fa-spin 10s infinite linear;
    }

    .not-found-status-code {
      position: absolute;
      font-size: 4rem;
      font-weight: var(--font-weight-extrabold);
      color: var(--text-color-base);
      opacity: 0.8;
      text-shadow: 2px 2px 0px var(--bg-color-body),
        4px 4px 0px var(--border-color-soft);
    }

    .not-found-section .section-title {
      font-size: 2.2rem;
    }

    .not-found-actions {
      margin-top: calc(var(--spacing-unit) * 3);
      display: flex;
      flex-direction: column;
      /* Tombol bertumpuk di mobile */
      gap: calc(var(--spacing-unit) * 1.5);
      width: 100%;
      max-width: 280px;
    }

    /* Halaman Detail Properti (Placeholder & Styling Dasar) */
    .property-detail-section .loading-text,
    .property-detail-section .error-text {
      font-size: 1.1rem;
      color: var(--text-color-medium);
      padding: calc(var(--spacing-unit) * 4) 0;
    }

    .property-detail-section .loading-text i {
      margin-left: calc(var(--spacing-unit) * 0.75);
    }

    .property-detail-location {
      font-size: 1.1rem;
      color: var(--text-color-light);
      margin-top: calc(var(--spacing-unit) * -1);
      /* Tarik ke atas sedikit */
      margin-bottom: calc(var(--spacing-unit) * 3);
    }

    .property-detail-layout {
      display: grid;
      grid-template-columns: 1fr;
      /* Default 1 kolom */
      gap: calc(var(--spacing-unit) * 4);
    }

    .property-detail-gallery .property-detail-main-image {
      width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: cover;
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-lg);
      margin-bottom: calc(var(--spacing-unit) * 2);
    }

    .property-detail-info h3 {
      font-size: 1.5rem;
      margin-top: calc(var(--spacing-unit) * 3);
      margin-bottom: calc(var(--spacing-unit) * 1.5);
      padding-bottom: var(--spacing-unit);
      border-bottom: 1px solid var(--border-color-soft);
    }

    .property-detail-info .property-detail-price-box {
      background-color: var(--bg-color-section-alt);
      padding: calc(var(--spacing-unit) * 2.5);
      border-radius: var(--border-radius-lg);
      margin-bottom: calc(var(--spacing-unit) * 3);
      text-align: center;
    }

    .property-detail-info .detail-price {
      font-size: 1.8rem;
      font-weight: var(--font-weight-bold);
      color: var(--primary-color);
      margin-bottom: calc(var(--spacing-unit) * 2);
    }

    .property-detail-info .detail-price .price-period {
      font-size: 0.9rem;
      font-weight: var(--font-weight-normal);
      color: var(--text-color-medium);
    }

    .property-specs-list {
      list-style: none;
      padding-left: 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: var(--spacing-unit);
    }

    .property-specs-list li {
      display: flex;
      align-items: center;
      font-size: 0.95rem;
      color: var(--text-color-medium);
      padding: calc(var(--spacing-unit) * 0.5) 0;
    }

    .property-specs-list i {
      color: var(--primary-color);
      margin-right: var(--spacing-unit);
      width: 20px;
      text-align: center;
    }


    /* === HALAMAN CARI PROPERTI (Lanjutan) === */
    .search-layout {
      display: grid;
      grid-template-columns: 1fr;
      /* Default satu kolom untuk mobile */
      gap: calc(var(--spacing-unit) * 4);
    }

    .search-filters-sidebar {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 3);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-md);
    }

    .sidebar-title {
      font-size: 1.5rem;
      font-weight: var(--font-weight-semibold);
      margin-bottom: calc(var(--spacing-unit) * 2.5);
      padding-bottom: var(--spacing-unit);
      border-bottom: 1px solid var(--border-color-soft);
    }

    .price-range-inputs {
      display: flex;
      align-items: center;
      gap: var(--spacing-unit);
    }

    .price-range-inputs .form-input {
      text-align: center;
    }

    .price-range-inputs span {
      color: var(--text-color-light);
    }

    .button-group-filter {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-unit);
    }

    .btn-filter-option {
      background-color: var(--bg-color-section-alt);
      border: 1px solid var(--border-color-medium);
      color: var(--text-color-medium);
      padding: calc(var(--spacing-unit)*0.75) calc(var(--spacing-unit)*1.5);
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      font-size: 0.85rem;
      transition: var(--transition-base);
      box-shadow: none;
      /* Override default .btn shadow */
      transform: none;
      /* Override default .btn transform */
    }

    .btn-filter-option:hover {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      border-color: var(--primary-color);
      transform: none;
      /* Override default .btn transform */
    }

    .btn-filter-option.active {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      border-color: var(--primary-color);
      box-shadow: var(--shadow-xs);
    }

    .checkbox-group-filter {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-unit);
    }

    .checkbox-filter-label {
      display: flex;
      align-items: center;
      font-size: 0.9rem;
      color: var(--text-color-medium);
      cursor: pointer;
    }

    .checkbox-filter-label input[type="checkbox"] {
      margin-right: calc(var(--spacing-unit) * 0.75);
      width: 18px;
      height: 18px;
      /* Sedikit lebih kecil */
    }

    .search-results-area {
      /* Styling area hasil pencarian */
    }

    .search-results-header {
      display: flex;
      flex-direction: column;
      /* Stack di mobile */
      align-items: flex-start;
      gap: var(--spacing-unit);
      margin-bottom: calc(var(--spacing-unit) * 2.5);
      padding-bottom: var(--spacing-unit);
      border-bottom: 1px solid var(--border-color-soft);
    }

    .search-results-header p {
      font-size: 0.95rem;
      color: var(--text-color-medium);
      margin-bottom: 0;
    }

    .search-results-header .form-select {
      width: 100%;
      /* Full width di mobile */
      min-width: 180px;
      font-size: 0.9rem;
      padding: calc(var(--spacing-unit)*1) calc(var(--spacing-unit)*4) calc(var(--spacing-unit)*1) calc(var(--spacing-unit)*1.5);
    }

    .no-results-message {
      padding: calc(var(--spacing-unit) * 4) 0;
      color: var(--text-color-light);
      font-style: italic;
    }

    .pagination {
      margin-top: calc(var(--spacing-unit) * 4);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: var(--spacing-unit);
      flex-wrap: wrap;
      /* Agar tombol paginasi wrap di mobile */
    }

    .pagination button,
    .pagination span {
      padding: calc(var(--spacing-unit)*1) calc(var(--spacing-unit)*1.5);
      border-radius: var(--border-radius-sm);
      font-size: 0.9rem;
      min-width: 36px;
      text-align: center;
    }

    .pagination button {
      background-color: var(--bg-color-surface);
      border: 1px solid var(--border-color-medium);
      color: var(--text-color-medium);
      cursor: pointer;
      transition: var(--transition-base);
      box-shadow: none;
      transform: none;
      /* Override .btn */
    }

    .pagination button:hover,
    .pagination button.active {
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      border-color: var(--primary-color);
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .pagination span.current-page {
      /* Jika ingin styling khusus halaman aktif */
      background-color: var(--primary-color);
      color: var(--text-color-inverted);
      border: 1px solid var(--primary-color);
      font-weight: var(--font-weight-semibold);
    }

    /* === HALAMAN FITUR (Lanjutan) === */
    .features-detailed-grid {
      display: grid;
      grid-template-columns: 1fr;
      /* Default 1 kolom */
      gap: calc(var(--spacing-unit) * 3.5);
    }

    .feature-detail-item {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 3);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-md);
      display: flex;
      flex-direction: column;
      /* Default untuk mobile */
      align-items: center;
      text-align: center;
      transition: var(--transition-base);
    }

    .feature-detail-item:hover {
      transform: translateY(-5px) scale(1.01);
      box-shadow: var(--shadow-fancy);
    }

    .feature-detail-icon-wrapper {
      width: 80px;
      height: 80px;
      border-radius: var(--border-radius-full);
      background: linear-gradient(135deg, var(--primary-color-light), var(--primary-color));
      color: var(--text-color-inverted);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: calc(var(--spacing-unit) * 2.5);
      font-size: 2.5rem;
      box-shadow: 0 6px 15px rgba(var(--primary-color-rgb), 0.3);
    }

    .feature-detail-title {
      font-size: 1.4rem;
      margin-bottom: var(--spacing-unit);
    }

    .feature-detail-description {
      font-size: 0.95rem;
      color: var(--text-color-medium);
      line-height: 1.7;
    }


    /* === HALAMAN DAFTAR PROPERTI (Lanjutan) === */
    .list-property-content {
      display: grid;
      grid-template-columns: 1fr;
      /* Default 1 kolom */
      gap: calc(var(--spacing-unit) * 4);
    }

    .list-property-form-container {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 3);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-lg);
    }

    .form-section-title {
      font-size: 1.75rem;
      margin-bottom: calc(var(--spacing-unit) * 3);
    }

    .photo-preview-container {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-unit);
      margin-top: var(--spacing-unit);
    }

    .photo-preview-item {
      width: 100px;
      height: 100px;
      border-radius: var(--border-radius-sm);
      overflow: hidden;
      position: relative;
      border: 1px solid var(--border-color-soft);
    }

    .photo-preview-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .list-property-benefits {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 3);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-md);
    }

    .list-property-benefits ul {
      list-style: none;
      padding-left: 0;
    }

    .list-property-benefits li {
      display: flex;
      align-items: center;
      gap: var(--spacing-unit);
      margin-bottom: calc(var(--spacing-unit) * 1.5);
      font-size: 0.95rem;
      color: var(--text-color-medium);
    }

    .benefit-icon {
      color: var(--primary-color);
      font-size: 1.2rem;
      width: 20px;
      text-align: center;
    }

    .call-us-box {
      margin-top: calc(var(--spacing-unit) * 3);
      padding: calc(var(--spacing-unit) * 2);
      background-color: var(--bg-color-section-alt);
      border-radius: var(--border-radius-md);
      text-align: center;
    }

    .call-us-box h4 {
      font-size: 1.1rem;
      margin-bottom: var(--spacing-unit);
    }

    .call-us-box p {
      font-size: 0.9rem;
      margin-bottom: calc(var(--spacing-unit)*0.5);
    }

    /* === HALAMAN TENTANG KAMI (Lanjutan) === */
    .about-us-grid {
      display: grid;
      grid-template-columns: 1fr;
      /* Default 1 kolom */
      gap: calc(var(--spacing-unit) * 4);
      align-items: center;
    }

    .about-us-text h2 {
      font-size: 1.8rem;
      margin-bottom: calc(var(--spacing-unit) * 2);
      color: var(--primary-color);
    }

    .about-us-text h3 {
      font-size: 1.3rem;
      margin-top: calc(var(--spacing-unit) * 3);
      margin-bottom: var(--spacing-unit);
    }

    .about-us-text ul {
      list-style: none;
      padding-left: 0;
    }

    .about-us-text li {
      display: flex;
      align-items: flex-start;
      gap: var(--spacing-unit);
      margin-bottom: calc(var(--spacing-unit) * 1.5);
      line-height: 1.7;
    }

    .value-icon {
      color: var(--secondary-color);
      font-size: 1.2rem;
      margin-top: 4px;
      /* Penyesuaian vertikal */
      width: 20px;
      text-align: center;
    }

    .about-us-image-container {
      text-align: center;
    }

    .about-us-image {
      width: 100%;
      max-width: 450px;
      height: auto;
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-lg);
      margin-bottom: var(--spacing-unit);
    }

    .image-caption {
      font-size: 0.85rem;
      color: var(--text-color-light);
      font-style: italic;
    }

    .team-section {
      margin-top: calc(var(--spacing-unit) * 5);
      padding-top: calc(var(--spacing-unit) * 4);
      border-top: 1px solid var(--border-color-soft);
    }

    .team-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: calc(var(--spacing-unit) * 3);
    }

    .team-member-card {
      background-color: var(--bg-color-surface);
      padding: calc(var(--spacing-unit) * 2.5);
      border-radius: var(--border-radius-lg);
      text-align: center;
      box-shadow: var(--shadow-md);
      transition: var(--transition-base);
    }

    .team-member-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-fancy-alt);
    }

    .team-member-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 auto calc(var(--spacing-unit)*2) auto;
      border: 4px solid var(--bg-color-surface);
      box-shadow: 0 0 0 4px var(--primary-color);
    }

    .team-member-name {
      font-size: 1.25rem;
      margin-bottom: calc(var(--spacing-unit)*0.5);
    }

    .team-member-title {
      font-size: 0.9rem;
      color: var(--primary-color);
      font-weight: var(--font-weight-medium);
      margin-bottom: var(--spacing-unit);
    }

    .team-member-bio {
      font-size: 0.85rem;
      color: var(--text-color-medium);
      line-height: 1.6;
    }


    /* === UTILITAS TAMBAHAN === */
    .text-center {
      text-align: center;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .visually-hidden {
      /* Sembunyikan visual, tetap dibaca screen reader */
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0, 0, 0, 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }

    .hidden {
      display: none !important;
    }

    /* Untuk JS toggle elemen */


    /* === RESPONSIVE DESIGN (Media Queries) === */

    /* Tablet (>= 768px) */
    @media (min-width: 768px) {
      :root {
        --font-size-base: 15.5px;
        /* Sedikit kecilkan font dasar untuk tablet */
      }

      .header-actions {
        gap: calc(var(--spacing-unit) * 1.5);
      }

      .header-actions .btn-login,
      .header-actions .btn-register {
        display: inline-flex;
      }

      .mobile-menu-toggle-btn {
        display: none;
      }

      /* Sembunyikan tombol menu mobile */
      .main-nav {
        display: block;
      }

      /* Tampilkan navigasi desktop */
      .mobile-nav {
        display: none !important;
      }

      /* Pastikan nav mobile tersembunyi */

      .hero-container {
        grid-template-columns: repeat(12, 1fr);
        /* Layout 2 kolom untuk desktop */
        text-align: left;
        gap: calc(var(--spacing-unit) * 5);
        /* 40px */
      }

      .hero-content {
        grid-column: 1 / span 7;
        /* Konten mengambil 7 kolom di desktop */
        animation-name: slideInFromLeftDesktop;
      }

      @keyframes slideInFromLeftDesktop {
        from {
          transform: translateX(-80px);
          opacity: 0;
        }

        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .hero-title {
        font-size: 3rem;
      }

      .hero-subtitle {
        font-size: 1.15rem;
        margin-left: 0;
        margin-right: 0;
        max-width: 550px;
      }

      .hero-search-tabs {
        margin-bottom: calc(var(--spacing-unit) * 4);
      }

      .hero-tab-btn {
        padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5);
        font-size: 0.95rem;
      }

      .hero-search-form {
        padding: calc(var(--spacing-unit) * 3);
        margin-left: 0;
        max-width: none;
      }

      .hero-search-panel.active {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        /* Jika tombol fix di kanan, bisa: 1fr 1fr auto; atau 2fr 1.5fr auto */
      }

      .form-input-hero,
      .form-select-hero {
        font-size: 1rem;
        padding-left: calc(var(--spacing-unit) * 5);
      }

      .search-icon {
        left: calc(var(--spacing-unit) * 2);
      }

      .btn-search-hero {
        height: 54px;
      }

      /* Sesuaikan tinggi tombol search */

      .hero-image-container {
        display: flex;
        /* Tampilkan gambar di desktop */
        grid-column: 8 / span 5;
        /* Gambar mengambil 5 kolom di sisi kanan */
        animation-name: slideInFromRightDesktop;
      }

      @keyframes slideInFromRightDesktop {
        from {
          transform: translateX(80px);
          opacity: 0;
        }

        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .hero-image {
        max-width: 500px;
      }

      /* Ukuran gambar di desktop */

      .section-padding {
        padding-top: calc(var(--spacing-unit) * 10);
        padding-bottom: calc(var(--spacing-unit) * 10);
      }

      .section-title {
        font-size: 2.5rem;
      }

      .section-subtitle {
        font-size: 1.15rem;
      }

      .property-grid {
        grid-template-columns: repeat(auto-fill, minmax(min(100%, 300px), 1fr));
        gap: calc(var(--spacing-unit) * 3.5);
      }

      .property-card-image-wrapper {
        height: 220px;
      }

      .property-card-content {
        padding: calc(var(--spacing-unit) * 2.5);
      }

      .property-card-title {
        font-size: 1.25rem;
      }

      .property-card-price {
        font-size: 1.2rem;
      }

      .features-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: calc(var(--spacing-unit) * 4);
      }

      .feature-item {
        padding: calc(var(--spacing-unit) * 3.5);
      }

      .feature-icon-wrapper {
        width: 72px;
        height: 72px;
        font-size: 2rem;
        margin-bottom: calc(var(--spacing-unit) * 2.5);
      }

      .feature-title {
        font-size: 1.35rem;
      }

      .feature-description {
        font-size: 0.95rem;
      }

      .call-to-action-section {
        padding: calc(var(--spacing-unit) * 8) calc(var(--spacing-unit) * 4);
      }

      .cta-actions {
        flex-direction: row;
        max-width: none;
      }

      .cta-title {
        font-size: 2.5rem;
      }

      .btn-cta {
        min-width: 220px;
      }

      .footer-top {
        grid-template-columns: repeat(2, 1fr);
        /* 2 kolom untuk tablet */
        gap: calc(var(--spacing-unit) * 4);
      }

      .modal-content {
        max-width: 520px;
      }

      .modal-header {
        padding: calc(var(--spacing-unit) * 2.5) calc(var(--spacing-unit) * 3);
      }

      .modal-title {
        font-size: 1.65rem;
      }

      .modal-body {
        padding: calc(var(--spacing-unit) * 3) calc(var(--spacing-unit) * 3);
      }

      .modal-footer {
        padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
      }

      .not-found-icon-wrapper .fa-compass {
        font-size: 8rem;
      }

      .not-found-status-code {
        font-size: 5rem;
      }

      .not-found-section .section-title {
        font-size: 2.8rem;
      }

      .not-found-actions {
        flex-direction: row;
        max-width: none;
      }

      .property-detail-layout {
        grid-template-columns: 2fr 1fr;
        /* Gallery lebih besar */
      }

      .search-layout {
        grid-template-columns: 280px 1fr;
        /* Sidebar dan konten */
      }

      .search-results-header {
        flex-direction: row;
        /* Sejajar di tablet+ */
        justify-content: space-between;
        align-items: center;
      }

      .search-results-header .form-select {
        width: auto;
      }

      /* Select tidak full width lagi */


      .features-detailed-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .feature-detail-item {
        flex-direction: row;
        align-items: flex-start;
        text-align: left;
      }

      .feature-detail-icon-wrapper {
        margin-right: calc(var(--spacing-unit) * 2.5);
        margin-bottom: 0;
        flex-shrink: 0;
      }

      .list-property-content {
        grid-template-columns: 2fr 1fr;
      }

      .about-us-grid {
        grid-template-columns: 3fr 2fr;
        /* Teks lebih lebar */
      }
    }

    /* Desktop Kecil (>= 1024px) */
    @media (min-width: 1024px) {
      :root {
        --font-size-base: 16px;
        /* Kembali ke 16px untuk desktop */
      }

      .hero-title {
        font-size: 3.5rem;
      }

      .hero-subtitle {
        max-width: 600px;
      }

      .hero-search-panel.active {
        /* Contoh jika ingin 3 kolom fix: Lokasi, Tipe/Kategori, Tombol */
        grid-template-columns: 2fr 1.5fr auto;
      }

      .property-grid {
        grid-template-columns: repeat(auto-fill, minmax(min(100%, 320px), 1fr));
        gap: calc(var(--spacing-unit) * 4);
      }

      .property-card-image-wrapper {
        height: 240px;
      }

      .property-card-title {
        font-size: 1.3rem;
      }

      .property-card-price {
        font-size: 1.25rem;
      }

      .footer-top {
        grid-template-columns: 1.5fr repeat(3, 1fr);
        /* 4 kolom footer */
      }

      .search-layout {
        grid-template-columns: 320px 1fr;
        /* Sidebar lebih lebar */
      }

      .features-detailed-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Desktop Besar (>= 1280px) */
    @media (min-width: 1280px) {
      .container {
        padding-left: calc(var(--spacing-unit) * 2.5);
        /* 20px */
        padding-right: calc(var(--spacing-unit) * 2.5);
        /* 20px */
      }
    }
  </style>
</head>

<body>
  <!-- Kontainer Aplikasi Utama (Monolith) -->
  <div id="app-container">

    <!-- Header Aplikasi -->
    <header id="app-header" class="app-header">
      <div class="container header-container">
        <!-- Logo Aplikasi -->
        <a href="#beranda" class="logo" aria-label="Green Valley Beranda" data-route="beranda">
          <span class="logo-icon-wrapper"><i class="fas fa-leaf logo-icon"></i></span>
          <span class="logo-text">GreenValley</span>
        </a>

        <!-- Navigasi Utama (Desktop) -->
        <nav class="main-nav" id="mainNav" aria-label="Navigasi Utama">
          <ul class="nav-list">
            <li><a href="#beranda" class="nav-link active" data-route="beranda">Beranda</a></li>
            <li><a href="#cari-properti" class="nav-link" data-route="cari-properti">Cari Properti</a></li>
            <li><a href="#fitur" class="nav-link" data-route="fitur">Fitur</a></li>
            <li><a href="#daftar-properti" class="nav-link" data-route="daftar-properti">Daftar Properti</a></li>
            <li><a href="#tentang" class="nav-link" data-route="tentang">Tentang Kami</a></li>
          </ul>
        </nav>

        <!-- Aksi Pengguna di Header -->
        <div class="header-actions">
          <button id="theme-toggle-btn" class="icon-btn theme-toggle-btn" aria-label="Ganti Tema (Mode Terang)"
            title="Ganti Tema">
            <i class="fas fa-sun"></i> <!-- Ikon awal: matahari (mode terang) -->
          </button>
          <button id="login-btn-desktop" class="btn btn-outline btn-login">Masuk</button>
          <button id="register-btn-desktop" class="btn btn-primary btn-register">Daftar</button>
          <button id="mobile-menu-toggle-btn" class="icon-btn mobile-menu-toggle-btn" aria-label="Buka Menu Navigasi"
            aria-expanded="false" aria-controls="mobileNavMenu" title="Menu Navigasi">
            <i class="fas fa-bars"></i> <!-- Ikon hamburger -->
          </button>
        </div>
      </div>

      <!-- Navigasi Mobile (Tersembunyi secara default) -->
      <nav class="mobile-nav" id="mobileNavMenu" aria-label="Navigasi Mobile" hidden>
        <ul class="mobile-nav-list">
          <li><a href="#beranda" class="mobile-nav-link" data-route="beranda">Beranda</a></li>
          <li><a href="#cari-properti" class="mobile-nav-link" data-route="cari-properti">Cari Properti</a></li>
          <li><a href="#fitur" class="mobile-nav-link" data-route="fitur">Fitur</a></li>
          <li><a href="#daftar-properti" class="mobile-nav-link" data-route="daftar-properti">Daftar Properti</a></li>
          <li><a href="#tentang" class="mobile-nav-link" data-route="tentang">Tentang Kami</a></li>
        </ul>
        <div class="mobile-nav-actions">
          <button id="login-btn-mobile" class="btn btn-outline btn-block btn-login">Masuk</button>
          <button id="register-btn-mobile" class="btn btn-primary btn-block btn-register">Daftar</button>
        </div>
      </nav>
    </header>

    <!-- Konten Utama Aplikasi (SPA: Konten akan dimuat di sini oleh JavaScript) -->
    <main id="main-content" class="main-content" role="main" aria-live="polite">
      <!-- Konten halaman dinamis akan muncul di sini -->
    </main>

    <!-- Footer Aplikasi -->
    <footer id="app-footer" class="app-footer">
      <div class="container footer-container">
        <div class="footer-top">
          <!-- Informasi Brand dan Sosial Media -->
          <div class="footer-brand">
            <a href="#beranda" class="logo footer-logo" aria-label="Green Valley Beranda" data-route="beranda">
              <span class="logo-icon-wrapper"><i class="fas fa-leaf logo-icon"></i></span>
              <span class="logo-text">GreenValley</span>
            </a>
            <p class="footer-tagline">Hunian nyaman, hidup lebih berkualitas. Temukan properti impian Anda dengan desain
              fancy dan pengalaman terbaik.</p>
            <div class="social-links" aria-label="Tautan Media Sosial">
              <a href="https://facebook.com" target="_blank" rel="noopener noreferrer"
                aria-label="Facebook Green Valley" class="social-link" title="Facebook Green Valley"><i
                  class="fab fa-facebook-f"></i></a>
              <a href="https://twitter.com" target="_blank" rel="noopener noreferrer" aria-label="Twitter Green Valley"
                class="social-link" title="Twitter Green Valley"><i class="fab fa-twitter"></i></a>
              <a href="https://instagram.com" target="_blank" rel="noopener noreferrer"
                aria-label="Instagram Green Valley" class="social-link" title="Instagram Green Valley"><i
                  class="fab fa-instagram"></i></a>
              <a href="https://linkedin.com" target="_blank" rel="noopener noreferrer"
                aria-label="LinkedIn Green Valley" class="social-link" title="LinkedIn Green Valley"><i
                  class="fab fa-linkedin-in"></i></a>
            </div>
          </div>
          <!-- Grup Tautan Footer -->
          <div class="footer-links-group">
            <h4 class="footer-heading">Tautan Cepat</h4>
            <ul class="footer-list">
              <li><a href="#beranda" class="footer-link" data-route="beranda">Beranda</a></li>
              <li><a href="#cari-properti" class="footer-link" data-route="cari-properti">Cari Properti</a></li>
              <li><a href="#fitur" class="footer-link" data-route="fitur">Fitur Unggulan</a></li>
              <li><a href="#blog" class="footer-link" data-route="blog">Blog & Artikel</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4 class="footer-heading">Sumber Daya</h4>
            <ul class="footer-list">
              <li><a href="#bantuan" class="footer-link" data-route="bantuan">Pusat Bantuan</a></li>
              <li><a href="#faq" class="footer-link" data-route="faq">Pertanyaan Umum (FAQ)</a></li>
              <li><a href="#kebijakan-privasi" class="footer-link" data-route="kebijakan-privasi">Kebijakan Privasi</a>
              </li>
              <li><a href="#syarat-ketentuan" class="footer-link" data-route="syarat-ketentuan">Syarat & Ketentuan</a>
              </li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4 class="footer-heading">Hubungi Kami</h4>
            <address class="footer-address">
              <ul class="footer-list">
                <li><i class="fas fa-map-marker-alt footer-contact-icon"></i> Jl. Properti Indah No. 123, Jakarta
                  Selatan, Indonesia</li>
                <li><i class="fas fa-phone footer-contact-icon"></i> <a href="tel:+62211234567"
                    class="footer-link">(021) 123-4567</a></li>
                <li><i class="fas fa-envelope footer-contact-icon"></i> <a href="mailto:info@greenvalley.com"
                    class="footer-link">info@greenvalley.com</a></li>
              </ul>
            </address>
          </div>
        </div>
        <div class="footer-bottom">
          <p>Â© <span id="current-year">2024</span> Green Valley. Hak Cipta Dilindungi Undang-Undang. Dirancang dengan <i
              class="fas fa-heart" style="color: var(--accent-color);"></i> oleh Tim Green Valley.</p>
        </div>
      </div>
    </footer>

    <!-- Modal untuk Login -->
    <div id="login-modal" class="modal" aria-labelledby="loginModalLabel" aria-hidden="true" role="dialog"
      tabindex="-1">
      <div class="modal-overlay" tabindex="-1" data-dismiss="modal" aria-label="Area luar modal, klik untuk menutup">
      </div>
      <div class="modal-content" role="document">
        <header class="modal-header">
          <h2 id="loginModalLabel" class="modal-title">Masuk Akun Anda</h2>
          <button class="modal-close-btn" aria-label="Tutup Modal Login" data-dismiss="modal" title="Tutup">
            <i class="fas fa-times"></i>
          </button>
        </header>
        <main class="modal-body">
          <form id="login-form" class="auth-form" novalidate>
            <div class="form-group">
              <label for="login-email" class="form-label">Alamat Email</label>
              <div class="input-icon-wrapper">
                <i class="fas fa-envelope input-icon"></i>
                <input type="email" id="login-email" name="email" class="form-input" placeholder="contoh@email.com"
                  required autocomplete="email" aria-describedby="login-email-error">
              </div>
              <small id="login-email-error" class="form-error-message" aria-live="polite"></small>
            </div>
            <div class="form-group">
              <label for="login-password" class="form-label">Kata Sandi</label>
              <div class="input-icon-wrapper">
                <i class="fas fa-lock input-icon"></i>
                <input type="password" id="login-password" name="password" class="form-input"
                  placeholder="Masukkan kata sandi Anda" required autocomplete="current-password"
                  aria-describedby="login-password-error">
              </div>
              <small id="login-password-error" class="form-error-message" aria-live="polite"></small>
              <a href="#lupa-sandi" class="form-link-forgot" data-route="lupa-sandi">Lupa kata sandi?</a>
            </div>
            <button type="submit" class="btn btn-primary btn-block btn-submit-auth">Masuk Sekarang</button>
          </form>
        </main>
        <footer class="modal-footer">
          <p>Belum punya akun? <button type="button" class="link-text" id="show-register-modal-from-login"
              aria-label="Pindah ke halaman pendaftaran">Daftar di sini</button></p>
        </footer>
      </div>
    </div>

    <!-- Modal untuk Registrasi -->
    <div id="register-modal" class="modal" aria-labelledby="registerModalLabel" aria-hidden="true" role="dialog"
      tabindex="-1">
      <div class="modal-overlay" tabindex="-1" data-dismiss="modal" aria-label="Area luar modal, klik untuk menutup">
      </div>
      <div class="modal-content" role="document">
        <header class="modal-header">
          <h2 id="registerModalLabel" class="modal-title">Buat Akun Baru</h2>
          <button class="modal-close-btn" aria-label="Tutup Modal Registrasi" data-dismiss="modal" title="Tutup">
            <i class="fas fa-times"></i>
          </button>
        </header>
        <main class="modal-body">
          <form id="register-form" class="auth-form" novalidate>
            <div class="form-group">
              <label for="register-name" class="form-label">Nama Lengkap</label>
              <div class="input-icon-wrapper">
                <i class="fas fa-user input-icon"></i>
                <input type="text" id="register-name" name="fullname" class="form-input"
                  placeholder="Masukkan nama lengkap Anda" required autocomplete="name"
                  aria-describedby="register-name-error">
              </div>
              <small id="register-name-error" class="form-error-message" aria-live="polite"></small>
            </div>
            <div class="form-group">
              <label for="register-email" class="form-label">Alamat Email</label>
              <div class="input-icon-wrapper">
                <i class="fas fa-envelope input-icon"></i>
                <input type="email" id="register-email" name="email" class="form-input" placeholder="contoh@email.com"
                  required autocomplete="email" aria-describedby="register-email-error">
              </div>
              <small id="register-email-error" class="form-error-message" aria-live="polite"></small>
            </div>
            <div class="form-group">
              <label for="register-password" class="form-label">Kata Sandi</label>
              <div class="input-icon-wrapper">
                <i class="fas fa-lock input-icon"></i>
                <input type="password" id="register-password" name="password" class="form-input"
                  placeholder="Buat kata sandi (minimal 8 karakter)" required minlength="8" autocomplete="new-password"
                  aria-describedby="register-password-error">
              </div>
              <small id="register-password-error" class="form-error-message" aria-live="polite"></small>
            </div>
            <div class="form-group">
              <label for="register-confirm-password" class="form-label">Konfirmasi Kata Sandi</label>
              <div class="input-icon-wrapper">
                <i class="fas fa-check-circle input-icon"></i>
                <input type="password" id="register-confirm-password" name="confirmPassword" class="form-input"
                  placeholder="Ulangi kata sandi Anda" required autocomplete="new-password"
                  aria-describedby="register-confirm-password-error">
              </div>
              <small id="register-confirm-password-error" class="form-error-message" aria-live="polite"></small>
            </div>
            <div class="form-group form-group-checkbox">
              <input type="checkbox" id="agree-terms" name="agreeTerms" required aria-describedby="agree-terms-error">
              <label for="agree-terms" class="form-label-checkbox">Saya menyatakan bahwa saya telah membaca dan
                menyetujui <a href="#syarat-ketentuan" class="link-text" data-route="syarat-ketentuan" target="_blank"
                  rel="noopener noreferrer">Syarat & Ketentuan</a> serta <a href="#kebijakan-privasi" class="link-text"
                  data-route="kebijakan-privasi" target="_blank" rel="noopener noreferrer">Kebijakan Privasi</a> yang
                berlaku.</label>
            </div>
            <small id="agree-terms-error" class="form-error-message checkbox-error-message" aria-live="polite"></small>
            <button type="submit" class="btn btn-primary btn-block btn-submit-auth">Daftar Akun</button>
          </form>
        </main>
        <footer class="modal-footer">
          <p>Sudah punya akun? <button type="button" class="link-text" id="show-login-modal-from-register"
              aria-label="Pindah ke halaman masuk">Masuk di sini</button></p>
        </footer>
      </div>
    </div>

    <!-- Template untuk Halaman-Halaman SPA (Konten akan disalin dari sini) -->
    <!-- Halaman Beranda -->
    <template id="page-beranda">
      <section class="hero-section" aria-labelledby="hero-title-main">
        <div class="hero-background-elements" aria-hidden="true">
          <span class="hero-bg-shape shape-1"></span>
          <span class="hero-bg-shape shape-2"></span>
          <span class="hero-bg-shape shape-3"></span>
        </div>
        <div class="container hero-container">
          <div class="hero-content">
            <h1 id="hero-title-main" class="hero-title">Temukan Hunian <span class="highlight-text">Nyaman &
                Fancy</span> Sesuai Keinginanmu
            </h1>
            <p class="hero-subtitle">Cari dan kelola properti sewa dengan mudah, aman, dan terpercaya bersama Green
              Valley. Nikmati desain modern dan pengalaman pengguna yang memanjakan mata.</p>

            <div class="hero-search-tabs" role="tablist" aria-label="Tipe Pencarian Properti">
              <button role="tab" aria-selected="true" aria-controls="panel-sewa" id="tab-sewa"
                class="hero-tab-btn active">
                <i class="fas fa-home tab-icon" aria-hidden="true"></i> Sewa
              </button>
              <button role="tab" aria-selected="false" aria-controls="panel-kost" id="tab-kost" class="hero-tab-btn">
                <i class="fas fa-bed tab-icon" aria-hidden="true"></i> Kost
              </button>
              <button role="tab" aria-selected="false" aria-controls="panel-apartemen" id="tab-apartemen"
                class="hero-tab-btn">
                <i class="fas fa-building tab-icon" aria-hidden="true"></i> Apartemen
              </button>
            </div>

            <form id="hero-search-form" class="hero-search-form">
              <!-- Panel untuk Sewa -->
              <div role="tabpanel" id="panel-sewa" class="hero-search-panel active" aria-labelledby="tab-sewa">
                <div class="form-group-inline">
                  <label for="lokasi-sewa" class="visually-hidden">Lokasi Sewa</label>
                  <i class="fas fa-map-marker-alt search-icon" aria-hidden="true"></i>
                  <input type="text" id="lokasi-sewa" name="lokasi_sewa"
                    placeholder="Masukkan Lokasi (cth: Jakarta Selatan)" class="form-input-hero"
                    autocomplete="address-level2">
                </div>
                <div class="form-group-inline">
                  <label for="tipe-properti-sewa" class="visually-hidden">Tipe Properti Sewa</label>
                  <i class="fas fa-house-user search-icon" aria-hidden="true"></i>
                  <select id="tipe-properti-sewa" name="tipe_properti_sewa" class="form-select-hero">
                    <option value="">Semua Tipe Properti</option>
                    <option value="rumah">Rumah</option>
                    <option value="apartemen">Apartemen</option>
                    <option value="villa">Villa</option>
                    <option value="ruko">Ruko / Rukan</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary btn-search-hero" aria-label="Cari Properti Sewa">
                  <i class="fas fa-search" aria-hidden="true"></i> Cari
                </button>
              </div>
              <!-- Panel untuk Kost -->
              <div role="tabpanel" id="panel-kost" class="hero-search-panel" aria-labelledby="tab-kost" hidden>
                <div class="form-group-inline">
                  <label for="lokasi-kost" class="visually-hidden">Lokasi Kost</label>
                  <i class="fas fa-map-signs search-icon" aria-hidden="true"></i>
                  <input type="text" id="lokasi-kost" name="lokasi_kost"
                    placeholder="Area Kost (cth: Sudirman, dekat UI)" class="form-input-hero"
                    autocomplete="street-address">
                </div>
                <div class="form-group-inline">
                  <label for="tipe-kamar-kost" class="visually-hidden">Tipe Kamar Kost</label>
                  <i class="fas fa-person-booth search-icon" aria-hidden="true"></i>
                  <select id="tipe-kamar-kost" name="tipe_kamar_kost" class="form-select-hero">
                    <option value="">Semua Tipe Kamar</option>
                    <option value="putra">Khusus Putra</option>
                    <option value="putri">Khusus Putri</option>
                    <option value="campur">Campur (Pria/Wanita)</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary btn-search-hero" aria-label="Cari Kost">
                  <i class="fas fa-search" aria-hidden="true"></i> Cari
                </button>
              </div>
              <!-- Panel untuk Apartemen -->
              <div role="tabpanel" id="panel-apartemen" class="hero-search-panel" aria-labelledby="tab-apartemen"
                hidden>
                <div class="form-group-inline">
                  <label for="lokasi-apartemen" class="visually-hidden">Lokasi Apartemen</label>
                  <i class="fas fa-city search-icon" aria-hidden="true"></i>
                  <input type="text" id="lokasi-apartemen" name="lokasi_apartemen"
                    placeholder="Nama Gedung atau Area (cth: Bassura City)" class="form-input-hero">
                </div>
                <div class="form-group-inline">
                  <label for="jumlah-kamar-apartemen" class="visually-hidden">Jumlah Kamar Apartemen</label>
                  <i class="fas fa-door-open search-icon" aria-hidden="true"></i>
                  <select id="jumlah-kamar-apartemen" name="jumlah_kamar_apartemen" class="form-select-hero">
                    <option value="">Jumlah Kamar Tidur</option>
                    <option value="studio">Studio</option>
                    <option value="1br">1 Kamar Tidur (1BR)</option>
                    <option value="2br">2 Kamar Tidur (2BR)</option>
                    <option value="3br+">3+ Kamar Tidur</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary btn-search-hero" aria-label="Cari Apartemen">
                  <i class="fas fa-search" aria-hidden="true"></i> Cari
                </button>
              </div>
            </form>
            <p class="hero-search-suggestion">Atau <a href="#peta" class="link-text animated-link"
                data-route="peta">jelajahi via peta interaktif <i class="fas fa-map-marked-alt"
                  aria-hidden="true"></i></a></p>
          </div>
          <div class="hero-image-container" aria-hidden="true">
            <img
              src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8bHV4dXJ5JTIwaG91c2V8ZW58MHx8MHx8fDA%3D&w=1000&q=80"
              alt="Ilustrasi perumahan modern dan nyaman dengan desain arsitektur mewah" class="hero-image">
            <div class="hero-image-overlay"></div>
          </div>
        </div>
      </section>

      <section class="featured-properties-section section-padding" aria-labelledby="featured-props-title">
        <div class="container">
          <header class="section-header">
            <h2 id="featured-props-title" class="section-title">Rekomendasi <span class="highlight-text">Properti
                Unggulan</span></h2>
            <p class="section-subtitle">Pilihan properti terbaik yang kami kurasi khusus untuk Anda, dengan detail yang
              memukau dan fasilitas lengkap.</p>
          </header>
          <div class="property-grid" id="beranda-property-grid">
            <!-- Kartu Properti akan di-render oleh JavaScript dari appState.properties -->
          </div>
          <div class="section-footer-action">
            <a href="#cari-properti" data-route="cari-properti" class="btn btn-primary btn-lg animated-arrow-btn">
              Lihat Semua Properti <i class="fas fa-arrow-right" aria-hidden="true"></i>
            </a>
          </div>
        </div>
      </section>

      <section class="features-overview-section section-padding bg-light" aria-labelledby="why-choose-us-title">
        <div class="container">
          <header class="section-header">
            <h2 id="why-choose-us-title" class="section-title">Mengapa Memilih <span class="highlight-text">Green
                Valley?</span></h2>
            <p class="section-subtitle">Kami menawarkan lebih dari sekadar properti; kami memberikan kemudahan,
              kenyamanan, keamanan, dan desain yang memanjakan mata.</p>
          </header>
          <div class="features-grid">
            <div class="feature-item">
              <div class="feature-icon-wrapper" aria-hidden="true"><i class="fas fa-shield-alt feature-icon"></i></div>
              <h3 class="feature-title">Transaksi Aman & Terjamin</h3>
              <p class="feature-description">Proses transaksi yang terjamin keamanannya melalui sistem verifikasi
                berlapis dan enkripsi data modern.</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrapper" aria-hidden="true"><i class="fas fa-search-location feature-icon"></i>
              </div>
              <h3 class="feature-title">Pencarian Cerdas & Akurat</h3>
              <p class="feature-description">Filter pencarian lengkap dan intuitif untuk menemukan properti sesuai
                kriteria spesifik Anda dengan cepat.</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrapper" aria-hidden="true"><i class="fas fa-headset feature-icon"></i></div>
              <h3 class="feature-title">Dukungan Pelanggan Prioritas</h3>
              <p class="feature-description">Tim support profesional kami siap membantu Anda 24/7 melalui berbagai kanal
                komunikasi.</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrapper" aria-hidden="true"><i class="fas fa-check-double feature-icon"></i>
              </div>
              <h3 class="feature-title">Listing Properti Terverifikasi</h3>
              <p class="feature-description">Semua properti telah melalui proses verifikasi ketat untuk menjamin
                kualitas dan keakuratan informasi.</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrapper" aria-hidden="true"><i class="fas fa-palette feature-icon"></i></div>
              <h3 class="feature-title">Desain Fancy & Intuitif</h3>
              <p class="feature-description">Antarmuka pengguna yang modern, bersih, dan memanjakan mata, dirancang
                untuk pengalaman terbaik.</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrapper" aria-hidden="true"><i class="fas fa-mobile-alt feature-icon"></i></div>
              <h3 class="feature-title">Responsif Sepenuhnya</h3>
              <p class="feature-description">Akses Green Valley dengan nyaman dari perangkat apapun, kapanpun, dan
                dimanapun.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="call-to-action-section section-padding" aria-labelledby="cta-main-title">
        <div class="container cta-container">
          <div class="cta-content">
            <h2 id="cta-main-title" class="cta-title">Siap Menemukan <span class="highlight-text-alt">Properti
                Impian</span> Anda?</h2>
            <p class="cta-subtitle">Jelajahi ribuan listing properti terverifikasi atau daftarkan properti Anda bersama
              kami dan jangkau calon penyewa potensial sekarang juga!</p>
          </div>
          <div class="cta-actions">
            <a href="#cari-properti" data-route="cari-properti" class="btn btn-primary btn-cta animated-arrow-btn">
              Cari Properti Sekarang <i class="fas fa-arrow-right" aria-hidden="true"></i>
            </a>
            <a href="#daftar-properti" data-route="daftar-properti"
              class="btn btn-outline-light btn-cta animated-arrow-btn">
              Daftarkan Properti Anda <i class="fas fa-plus-circle" aria-hidden="true"></i>
            </a>
          </div>
        </div>
      </section>
    </template>

    <!-- Halaman Cari Properti -->
    <template id="page-cari-properti">
      <section class="search-page-section section-padding" aria-labelledby="search-page-main-title">
        <div class="container">
          <header class="section-header">
            <h1 id="search-page-main-title" class="section-title">Pencarian <span class="highlight-text">Properti
                Lanjutan</span></h1>
            <p class="section-subtitle">Gunakan filter komprehensif di bawah ini untuk menemukan properti yang paling
              sesuai dengan kebutuhan dan gaya hidup Anda.</p>
          </header>

          <div class="search-layout">
            <aside class="search-filters-sidebar" aria-labelledby="filters-sidebar-title">
              <h3 id="filters-sidebar-title" class="sidebar-title">Filter Properti</h3>
              <form id="advanced-search-form">
                <div class="form-group">
                  <label for="filter-keyword" class="form-label">Kata Kunci</label>
                  <input type="text" id="filter-keyword" name="keyword" class="form-input"
                    placeholder="Nama properti, area, dll.">
                </div>
                <div class="form-group">
                  <label for="filter-location" class="form-label">Lokasi</label>
                  <select id="filter-location" name="location" class="form-select">
                    <!-- Opsi akan diisi oleh JS -->
                  </select>
                </div>
                <div class="form-group">
                  <label for="filter-type" class="form-label">Tipe Properti</label>
                  <select id="filter-type" name="type" class="form-select">
                    <!-- Opsi akan diisi oleh JS -->
                  </select>
                </div>
                <div class="form-group">
                  <label for="filter-price-min" class="form-label">Rentang Harga (per periode)</label>
                  <div class="price-range-inputs">
                    <input type="number" id="filter-price-min" name="price_min" class="form-input" placeholder="Min"
                      min="0" aria-label="Harga Minimum">
                    <span>-</span>
                    <input type="number" id="filter-price-max" name="price_max" class="form-input" placeholder="Maks"
                      min="0" aria-label="Harga Maksimum">
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label" id="bedrooms-label">Jumlah Kamar Tidur</label>
                  <div class="button-group-filter" role="group" aria-labelledby="bedrooms-label">
                    <button type="button" class="btn-filter-option" data-value="studio"
                      aria-pressed="false">Studio</button>
                    <button type="button" class="btn-filter-option" data-value="1" aria-pressed="false">1</button>
                    <button type="button" class="btn-filter-option" data-value="2" aria-pressed="false">2</button>
                    <button type="button" class="btn-filter-option" data-value="3" aria-pressed="false">3</button>
                    <button type="button" class="btn-filter-option" data-value="4+" aria-pressed="false">4+</button>
                  </div>
                  <input type="hidden" name="bedrooms" id="filter-bedrooms">
                </div>
                <div class="form-group">
                  <label class="form-label" id="facilities-label">Fasilitas</label>
                  <div class="checkbox-group-filter" role="group" aria-labelledby="facilities-label">
                    <label class="checkbox-filter-label"><input type="checkbox" name="facilities" value="ac"> AC</label>
                    <label class="checkbox-filter-label"><input type="checkbox" name="facilities" value="wifi">
                      WiFi</label>
                    <label class="checkbox-filter-label"><input type="checkbox" name="facilities" value="parking">
                      Parkir</label>
                    <label class="checkbox-filter-label"><input type="checkbox" name="facilities" value="pool"> Kolam
                      Renang</label>
                    <label class="checkbox-filter-label"><input type="checkbox" name="facilities" value="furnished">
                      Furnished</label>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Terapkan Filter</button>
                <button type="reset" class="btn btn-outline btn-block" style="margin-top: 10px;">Reset Filter</button>
              </form>
            </aside>
            <div class="search-results-area">
              <div class="search-results-header">
                <p><span id="search-results-count">0</span> properti ditemukan</p>
                <select id="sort-by" class="form-select" aria-label="Urutkan hasil berdasarkan">
                  <option value="relevance">Relevansi</option>
                  <option value="price-asc">Harga Terendah</option>
                  <option value="price-desc">Harga Tertinggi</option>
                  <option value="newest">Terbaru</option>
                </select>
              </div>
              <div id="search-results-grid" class="property-grid" aria-live="polite">
                <!-- Hasil pencarian properti akan ditampilkan di sini oleh JS -->
                <p class="text-center no-results-message"><i>Silakan gunakan filter di samping untuk memulai pencarian
                    properti Anda.</i></p>
              </div>
              <nav class="pagination" aria-label="Navigasi Halaman Hasil Pencarian">
                <!-- Kontrol paginasi akan ditambahkan oleh JS jika hasil banyak -->
              </nav>
            </div>
          </div>
        </div>
      </section>
    </template>

    <!-- Halaman Fitur -->
    <template id="page-fitur">
      <section class="features-detail-page-section section-padding" aria-labelledby="features-page-main-title">
        <div class="container">
          <header class="section-header">
            <h1 id="features-page-main-title" class="section-title">Fitur <span class="highlight-text">Unggulan</span>
              Green Valley</h1>
            <p class="section-subtitle">Temukan berbagai kemudahan dan teknologi canggih yang kami tawarkan untuk
              pengalaman mencari dan mengelola properti terbaik.</p>
          </header>
          <div class="features-detailed-grid">
            <article class="feature-detail-item">
              <div class="feature-detail-icon-wrapper" aria-hidden="true"><i
                  class="fas fa-vr-cardboard feature-detail-icon"></i></div>
              <div>
                <h3 class="feature-detail-title">Tur Virtual 360Â° Interaktif</h3>
                <p class="feature-detail-description">Jelajahi setiap sudut properti secara virtual dari kenyamanan
                  rumah
                  Anda dengan tur 360Â° kami yang imersif dan interaktif. Rasakan suasana properti seolah-olah Anda
                  berada
                  di sana sebelum memutuskan untuk berkunjung langsung.</p>
              </div>
            </article>
            <article class="feature-detail-item">
              <div class="feature-detail-icon-wrapper" aria-hidden="true"><i
                  class="fas fa-comments-dollar feature-detail-icon"></i></div>
              <div>
                <h3 class="feature-detail-title">Negosiasi Harga Online Aman</h3>
                <p class="feature-detail-description">Lakukan proses negosiasi harga sewa atau beli properti secara
                  transparan dan aman langsung melalui platform kami. Semua percakapan dan penawaran tercatat dengan
                  baik.
                </p>
              </div>
            </article>
            <article class="feature-detail-item">
              <div class="feature-detail-icon-wrapper" aria-hidden="true"><i
                  class="fas fa-file-signature feature-detail-icon"></i></div>
              <div>
                <h3 class="feature-detail-title">Kontrak Digital Terenkripsi</h3>
                <p class="feature-detail-description">Proses penandatanganan kontrak sewa menjadi lebih mudah, cepat,
                  dan
                  sah secara hukum dengan fitur kontrak digital kami yang menggunakan enkripsi standar industri untuk
                  keamanan data Anda.</p>
              </div>
            </article>
            <article class="feature-detail-item">
              <div class="feature-detail-icon-wrapper" aria-hidden="true"><i
                  class="fas fa-calendar-check feature-detail-icon"></i></div>
              <div>
                <h3 class="feature-detail-title">Jadwalkan Kunjungan Mudah</h3>
                <p class="feature-detail-description">Atur jadwal kunjungan properti langsung dengan pemilik atau agen
                  melalui sistem penjadwalan terintegrasi kami. Dapatkan notifikasi pengingat agar tidak terlewat.</p>
              </div>
            </article>
            <article class="feature-detail-item">
              <div class="feature-detail-icon-wrapper" aria-hidden="true"><i
                  class="fas fa-map-marked-alt feature-detail-icon"></i></div>
              <div>
                <h3 class="feature-detail-title">Peta Interaktif Cerdas</h3>
                <p class="feature-detail-description">Temukan properti berdasarkan lokasi yang Anda inginkan menggunakan
                  peta interaktif kami. Lihat fasilitas sekitar, akses transportasi, dan informasi lingkungan penting
                  lainnya.</p>
              </div>
            </article>
            <article class="feature-detail-item">
              <div class="feature-detail-icon-wrapper" aria-hidden="true"><i
                  class="fas fa-bell feature-detail-icon"></i></div>
              <div>
                <h3 class="feature-detail-title">Notifikasi Properti Kustom</h3>
                <p class="feature-detail-description">Simpan kriteria pencarian Anda dan dapatkan notifikasi instan
                  ketika
                  ada properti baru yang sesuai dengan keinginan Anda masuk ke dalam listing kami.</p>
              </div>
            </article>
          </div>
        </div>
      </section>
    </template>

    <!-- Halaman Daftar Properti -->
    <template id="page-daftar-properti">
      <section class="list-property-page-section section-padding bg-light" aria-labelledby="list-prop-page-main-title">
        <div class="container">
          <header class="section-header">
            <h1 id="list-prop-page-main-title" class="section-title">Daftarkan <span class="highlight-text">Properti
                Anda</span> Bersama Kami</h1>
            <p class="section-subtitle">Jangkau ribuan calon penyewa atau pembeli potensial dengan mendaftarkan properti
              Anda di Green Valley. Proses mudah, cepat, dan efektif untuk hasil maksimal.</p>
          </header>
          <div class="list-property-content">
            <div class="list-property-form-container">
              <h2 class="form-section-title">Formulir Pendaftaran Properti</h2>
              <form id="list-property-form" novalidate>
                <div class="form-group">
                  <label for="prop-title" class="form-label">Judul Iklan Properti</label>
                  <input type="text" id="prop-title" name="title" class="form-input"
                    placeholder="Contoh: Apartemen Mewah 2BR di SCBD" required>
                  <small class="form-error-message" aria-live="polite"></small>
                </div>
                <div class="form-group">
                  <label for="prop-type" class="form-label">Tipe Properti</label>
                  <select id="prop-type" name="type" class="form-select" required>
                    <option value="">Pilih Tipe</option>
                    <option value="apartemen">Apartemen</option>
                    <option value="rumah">Rumah</option>
                    <option value="kost">Kost</option>
                    <option value="villa">Villa</option>
                    <option value="ruko">Ruko/Rukan</option>
                  </select>
                  <small class="form-error-message" aria-live="polite"></small>
                </div>
                <div class="form-group">
                  <label for="prop-address" class="form-label">Alamat Lengkap Properti</label>
                  <textarea id="prop-address" name="address" class="form-textarea" rows="3"
                    placeholder="Masukkan alamat detail properti Anda" required></textarea>
                  <small class="form-error-message" aria-live="polite"></small>
                </div>
                <div class="form-grid-2-cols">
                  <div class="form-group">
                    <label for="prop-price" class="form-label">Harga Sewa</label>
                    <input type="number" id="prop-price" name="price" class="form-input" placeholder="Contoh: 8500000"
                      required min="0">
                    <small class="form-error-message" aria-live="polite"></small>
                  </div>
                  <div class="form-group">
                    <label for="prop-price-period" class="form-label">Periode Sewa</label>
                    <select id="prop-price-period" name="price_period" class="form-select" required>
                      <option value="bulan">Per Bulan</option>
                      <option value="tahun">Per Tahun</option>
                      <option value="malam">Per Malam</option>
                    </select>
                    <small class="form-error-message" aria-live="polite"></small>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label" for="prop-photos">Unggah Foto Properti (Maks. 5 Foto)</label>
                  <input type="file" id="prop-photos" name="photos" class="form-input" multiple
                    accept="image/png, image/jpeg, image/webp">
                  <small class="form-info-message">Pilih foto-foto terbaik properti Anda. Format: JPG, PNG,
                    WebP.</small>
                  <div id="photo-preview-container" class="photo-preview-container" aria-live="polite"></div>
                </div>
                <button type="submit" class="btn btn-primary btn-lg btn-block">Daftarkan Properti Saya</button>
              </form>
            </div>
            <aside class="list-property-benefits" aria-labelledby="list-prop-benefits-title">
              <h3 id="list-prop-benefits-title" class="sidebar-title">Keuntungan Mendaftar di Green Valley</h3>
              <ul>
                <li><i class="fas fa-users benefit-icon" aria-hidden="true"></i> Jangkauan luas ke ribuan calon penyewa.
                </li>
                <li><i class="fas fa-bullhorn benefit-icon" aria-hidden="true"></i> Promosi efektif dan tertarget.</li>
                <li><i class="fas fa-tachometer-alt benefit-icon" aria-hidden="true"></i> Dashboard pengelolaan listing
                  yang mudah.</li>
                <li><i class="fas fa-shield-alt benefit-icon" aria-hidden="true"></i> Proses aman dan terpercaya.</li>
                <li><i class="fas fa-headset benefit-icon" aria-hidden="true"></i> Dukungan khusus untuk pemilik
                  properti.</li>
              </ul>
              <div class="call-us-box">
                <h4>Butuh Bantuan?</h4>
                <p>Tim kami siap membantu Anda mendaftarkan properti. Hubungi kami di:</p>
                <p><i class="fas fa-phone" aria-hidden="true"></i> <a href="tel:+62217654321">(021) 765-4321</a></p>
              </div>
            </aside>
          </div>
        </div>
      </section>
    </template>

    <!-- Halaman Tentang Kami -->
    <template id="page-tentang">
      <section class="about-us-page-section section-padding" aria-labelledby="about-page-main-title">
        <div class="container">
          <header class="section-header">
            <h1 id="about-page-main-title" class="section-title">Tentang <span class="highlight-text">Green
                Valley</span></h1>
            <p class="section-subtitle">Kenali lebih jauh tentang misi, visi, nilai-nilai, dan tim profesional di balik
              Green Valley yang berdedikasi untuk merevolusi pasar properti di Indonesia.</p>
          </header>
          <article class="about-us-content">
            <div class="about-us-grid">
              <div class="about-us-text">
                <h2 id="our-mission-title">Misi Kami: Menghubungkan Impian dengan Kenyataan</h2>
                <p>Green Valley didirikan dengan visi untuk menjadi platform properti terdepan yang menghubungkan
                  pencari hunian dengan properti impian mereka melalui teknologi inovatif, desain yang memukau, dan
                  layanan pelanggan yang tak tertandingi. Kami percaya bahwa mencari tempat tinggal harus menjadi
                  pengalaman yang menyenangkan, mudah, dan bebas stres. Oleh karena itu, kami berkomitmen untuk
                  menyediakan platform yang tidak hanya fungsional, tetapi juga intuitif dan memanjakan mata.</p>

                <h3>Visi Kami</h3>
                <p>Menjadi ekosistem properti digital nomor satu di Indonesia yang memberdayakan setiap individu untuk
                  membuat keputusan properti terbaik dengan percaya diri dan kemudahan.</p>

                <h3 id="our-values-title">Nilai-Nilai Inti Perusahaan</h3>
                <ul>
                  <li><i class="fas fa-lightbulb value-icon" aria-hidden="true"></i> <strong>Inovasi:</strong> Terus
                    menerus mencari cara
                    baru untuk meningkatkan pengalaman pengguna.</li>
                  <li><i class="fas fa-handshake value-icon" aria-hidden="true"></i> <strong>Integritas:</strong>
                    Menjalankan bisnis dengan
                    jujur, transparan, dan bertanggung jawab.</li>
                  <li><i class="fas fa-users-cog value-icon" aria-hidden="true"></i> <strong>Berpusat pada
                      Pelanggan:</strong> Menempatkan
                    kebutuhan dan kepuasan pelanggan sebagai prioritas utama.</li>
                  <li><i class="fas fa-star value-icon" aria-hidden="true"></i> <strong>Keunggulan:</strong> Berusaha
                    memberikan kualitas
                    layanan dan produk terbaik dalam segala aspek.</li>
                  <li><i class="fas fa-leaf value-icon" aria-hidden="true"></i> <strong>Keberlanjutan:</strong>
                    Mendukung praktik properti
                    yang ramah lingkungan dan berkelanjutan.</li>
                </ul>
              </div>
              <div class="about-us-image-container">
                <img
                  src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHRlYW0lMjBjb2xsYWJvcmF0aW9ufGVufDB8fDB8fHww&w=1000&q=80"
                  alt="Tim Green Valley sedang berdiskusi dan berkolaborasi dalam lingkungan kerja yang modern."
                  class="about-us-image">
                <p class="image-caption">Tim profesional kami yang berdedikasi di Green Valley.</p>
              </div>
            </div>

            <section class="team-section section-padding-sm" aria-labelledby="our-team-title">
              <h2 id="our-team-title" class="section-title text-center">Tim <span class="highlight-text">Kami</span>
              </h2>
              <p class="section-subtitle text-center">Bertemu dengan beberapa individu berbakat di balik kesuksesan
                Green Valley.</p>
              <div class="team-grid">
                <!-- Contoh Anggota Tim 1 -->
                <div class="team-member-card">
                  <img src="https://picsum.photos/seed/ceo/200/200" alt="Foto John Doe, CEO Green Valley"
                    class="team-member-photo">
                  <h4 class="team-member-name">Andi Wijaya</h4>
                  <p class="team-member-title">Chief Executive Officer</p>
                  <p class="team-member-bio">Visioner dengan pengalaman 15+ tahun di industri teknologi dan real estate.
                  </p>
                </div>
                <!-- Contoh Anggota Tim 2 -->
                <div class="team-member-card">
                  <img src="https://picsum.photos/seed/cto/200/200" alt="Foto Jane Smith, CTO Green Valley"
                    class="team-member-photo">
                  <h4 class="team-member-name">Siti Aminah</h4>
                  <p class="team-member-title">Chief Technology Officer</p>
                  <p class="team-member-bio">Pakar teknologi yang memimpin inovasi produk dan infrastruktur Green
                    Valley.</p>
                </div>
                <!-- Contoh Anggota Tim 3 -->
                <div class="team-member-card">
                  <img src="https://picsum.photos/seed/cmo/200/200" alt="Foto Alex Johnson, CMO Green Valley"
                    class="team-member-photo">
                  <h4 class="team-member-name">Budi Santoso</h4>
                  <p class="team-member-title">Chief Marketing Officer</p>
                  <p class="team-member-bio">Strategis pemasaran yang membawa Green Valley lebih dekat dengan Anda.</p>
                </div>
              </div>
            </section>
          </article>
        </div>
      </section>
    </template>

    <!-- Halaman Detail Properti (Konten Dinamis) -->
    <template id="page-properti-detail">
      <section class="property-detail-section section-padding">
        <div class="container">
          <div id="property-detail-content-area" aria-live="polite">
            <!-- Konten detail properti akan dimuat di sini oleh JavaScript -->
            <p class="text-center loading-text"><i>Memuat detail properti, mohon tunggu... <i
                  class="fas fa-spinner fa-spin" aria-hidden="true"></i></i></p>
          </div>
        </div>
      </section>
    </template>

    <!-- Halaman Tidak Ditemukan (404) -->
    <template id="page-not-found">
      <section class="not-found-section section-padding" aria-labelledby="not-found-main-title">
        <div class="container text-center">
          <div class="not-found-icon-wrapper" aria-hidden="true">
            <i class="fas fa-compass fa-spin-slow"></i> <!-- Ikon kompas yang berputar pelan -->
            <span class="not-found-status-code">404</span>
          </div>
          <h1 id="not-found-main-title" class="section-title">Oops! Halaman <span class="highlight-text">Tidak
              Ditemukan</span></h1>
          <p class="section-subtitle">Maaf, halaman yang Anda cari sepertinya tersesat atau tidak (lagi) ada di sini.
            Mungkin Anda salah ketik URL atau tautannya sudah usang.</p>
          <div class="not-found-actions">
            <a href="#beranda" data-route="beranda" class="btn btn-primary animated-arrow-btn">
              <i class="fas fa-home" aria-hidden="true"></i> Kembali ke Beranda
            </a>
            <a href="#bantuan" data-route="bantuan" class="btn btn-outline">
              <i class="fas fa-question-circle" aria-hidden="true"></i> Pusat Bantuan
            </a>
          </div>
        </div>
      </section>
    </template>

    <!-- Template untuk kartu properti (digunakan oleh JS) -->
    <template id="property-card-template">
      <article class="property-card">
        <figure class="property-card-image-wrapper">
          <img src="" alt="" class="property-card-image" loading="lazy">
          <span class="property-card-status"></span>
          <button class="property-card-favorite-btn" aria-label="Tambahkan ke favorit">
            <i class="far fa-heart" aria-hidden="true"></i>
          </button>
        </figure>
        <div class="property-card-content">
          <div class="property-card-tags"></div>
          <h3 class="property-card-title"><a href="" class="stretched-link"></a></h3>
          <p class="property-card-location"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> </p>
          <div class="property-card-features"></div>
          <div class="property-card-price-wrapper">
            <p class="property-card-price"> <span class="price-period"></span></p>
            <a href="" class="btn btn-sm btn-outline-primary">Lihat Detail</a>
          </div>
        </div>
      </article>
    </template>


  </div> <!-- Akhir #app-container -->

  <!-- Tombol Scroll ke Atas (Fancy) -->
  <button id="scroll-to-top-btn" class="scroll-to-top-btn" aria-label="Kembali ke atas halaman" title="Kembali ke Atas">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
  </button>

  <!-- Skrip Kustom (Semua logika JavaScript ada di sini, native) -->
  <script defer>
    /**
     * Green Valley - Native JavaScript SPA Logic
     * Penjelasan: Skrip ini menangani semua fungsionalitas interaktif aplikasi Green Valley,
     * termasuk routing SPA, manajemen tema, modal, menu mobile, validasi form,
     * dan interaksi UI lainnya. Ditulis dalam JavaScript vanilla (native)
     * untuk performa optimal dan tanpa dependensi eksternal.
     *
     * Arsitektur:
     * - Monolith: Semua kode JS ada di satu tempat untuk kesederhanaan dalam konteks ini.
     * - SPA: Navigasi berbasis hash, konten dinamis dari <template>.
     * - State Management: Objek `appState` sederhana.
     * - Event-driven: Interaksi UI ditangani melalui event listener.
     * - Utilities: Fungsi helper untuk tugas umum.
     *
     * Prinsip yang diikuti:
     * - Reusability: Komponen UI (CSS) dan fungsi JS dirancang agar bisa digunakan kembali.
     * - Maintainability: Kode terstruktur, variabel & fungsi dengan nama jelas, komentar.
     * - Accessibility (A11y): Atribut ARIA, manajemen fokus, navigasi keyboard.
     * - Performance: Defer script, optimasi DOM manipulation (meski minim).
     * - Responsiveness: Dikelola oleh CSS, JS hanya untuk state menu mobile.
     * - "Fancy Design" Support: JS mengelola state untuk tema, animasi, dan transisi CSS.
     */

    document.addEventListener('DOMContentLoaded', () => {
      // === GLOBAL STATE & KONSTANTA === //
      const appState = {
        currentPage: null,
        isMobileMenuOpen: false,
        isDarkMode: localStorage.getItem('greenValleyDarkMode') === 'true',
        activeModal: null,
        // Data properti dummy (untuk simulasi)
        // Struktur data diperkaya untuk demo yang lebih baik
        properties: [
          { id: 1, title: "Apartemen Mewah Elegan di Pusat Kota", location: "Jakarta Pusat, DKI Jakarta", price: "8.500.000", period: "bulan", type: "Apartemen", tags: ["Apartemen", "Full Furnished"], features: ["2 KT", "1 KM", "70 mÂ²", "Lantai 15"], image: "https://picsum.photos/seed/modernhouse1/600/400", status: "Populer", description: "Apartemen mewah dengan 2 kamar tidur, full furnished, di lokasi strategis pusat kota. Fasilitas lengkap termasuk kolam renang, gym, dan keamanan 24 jam. Pemandangan kota yang menakjubkan dari lantai 15.", bedrooms: 2, facilities: ["furnished", "pool", "gym"], rawPrice: 8500000, dateAdded: "2024-07-10" },
          { id: 2, title: "Rumah Cluster Asri dan Nyaman", location: "BSD City, Tangerang Selatan", price: "95.000.000", period: "tahun", type: "Rumah", tags: ["Rumah", "24/7 Security"], features: ["3+1 KT", "2+1 KM", "120 mÂ²", "2 Parkir"], image: "https://picsum.photos/seed/greencluster2/600/400", status: "Baru", description: "Rumah cluster modern dan asri di BSD City. Lingkungan aman dengan keamanan 24 jam. Cocok untuk keluarga yang mencari kenyamanan dan ketenangan.", bedrooms: 3, facilities: ["parking", "security"], rawPrice: 95000000, dateAdded: "2024-07-15" },
          { id: 3, title: "Kost Eksklusif Putri Fasilitas Lengkap", location: "Pogung Baru, Yogyakarta (Dekat UGM)", price: "1.800.000", period: "bulan", type: "Kost Putri", tags: ["Kost Putri", "AC & WiFi"], features: ["1 Kamar", "K. Mandi Dalam", "16 mÂ²", "Internet Cepat"], image: "https://picsum.photos/seed/fancykost3/600/400", status: null, description: "Kost eksklusif khusus putri dengan fasilitas lengkap (AC, WiFi, kamar mandi dalam). Lokasi sangat strategis dekat kampus UGM. Lingkungan nyaman dan aman.", bedrooms: 1, facilities: ["ac", "wifi"], rawPrice: 1800000, dateAdded: "2024-07-01" },
          { id: 4, title: "Apartemen Studio Modern di Kuningan", location: "Kuningan, Jakarta Selatan", price: "6.000.000", period: "bulan", type: "Apartemen", tags: ["Apartemen", "Pool & Gym"], features: ["Studio", "1 KM", "35 mÂ²", "City View"], image: "https://picsum.photos/seed/urbanloft4/600/400", status: "Hot Deal!", description: "Apartemen tipe studio dengan desain modern di area premium Kuningan. Akses mudah ke pusat bisnis dan hiburan. Dilengkapi fasilitas kolam renang dan gym.", bedrooms: 0, facilities: ["pool", "gym", "furnished"], rawPrice: 6000000, dateAdded: "2024-06-20" },
          { id: 5, title: "Villa Pribadi Tepi Pantai Bali", location: "Seminyak, Bali", price: "3.500.000", period: "malam", type: "Villa", tags: ["Villa", "Private Pool"], features: ["4 KT", "4 KM", "300 mÂ²", "Kolam Pribadi"], image: "https://picsum.photos/seed/balivilla5/600/400", status: "Populer", description: "Villa mewah pribadi dengan 4 kamar tidur, kolam renang pribadi, dan akses langsung ke pantai Seminyak. Ideal untuk liburan keluarga atau grup.", bedrooms: 4, facilities: ["pool", "furnished", "parking"], rawPrice: 3500000, dateAdded: "2024-05-10" },
          { id: 6, title: "Ruko Strategis di Pusat Bisnis Surabaya", location: "Surabaya Pusat, Jawa Timur", price: "150.000.000", period: "tahun", type: "Ruko", tags: ["Ruko", "Area Komersil"], features: ["3 Lantai", "Area Parkir", "200 mÂ²", "Lokasi Utama"], image: "https://picsum.photos/seed/rukosurabaya6/600/400", status: null, description: "Ruko 3 lantai di lokasi sangat strategis, cocok untuk berbagai jenis usaha. Area parkir luas dan akses mudah dari jalan utama.", bedrooms: null, facilities: ["parking"], rawPrice: 150000000, dateAdded: "2024-07-05" },
        ],
        filteredProperties: [],
        searchResultsPerPage: 6,
        currentPageNumber: 1,
      };

      // === DOM ELEMENT SELECTORS (CACHE) === //
      const mainContent = document.getElementById('main-content');
      const appHeader = document.getElementById('app-header');
      const themeToggleBtn = document.getElementById('theme-toggle-btn');
      const mobileMenuToggleBtn = document.getElementById('mobile-menu-toggle-btn');
      const mobileNavMenu = document.getElementById('mobileNavMenu');
      const allNavLinks = document.querySelectorAll('a[data-route]'); // Termasuk di footer, dll.
      const mainNavLinks = document.querySelectorAll('#mainNav .nav-link');
      const mobileNavLinks = document.querySelectorAll('#mobileNavMenu .mobile-nav-link');
      const scrollTopBtn = document.getElementById('scroll-to-top-btn');
      const currentYearSpan = document.getElementById('current-year');
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');

      // === FUNGSI UTILITAS === //
      const $ = (selector, context = document) => context.querySelector(selector);
      const $$ = (selector, context = document) => Array.from(context.querySelectorAll(selector));

      // Fungsi untuk mencegah transisi saat load awal tema atau perubahan mendadak
      const preventGlobalTransition = (element = document.body, duration = 100) => {
        element.classList.add('no-transition');
        setTimeout(() => {
          element.classList.remove('no-transition');
        }, duration);
      };

      // Mendapatkan nilai variabel CSS sebagai angka (misal, '72px' -> 72)
      const getCssVariableAsNumber = (varName) => {
        const value = getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
        return parseFloat(value.replace('px', ''));
      };

      // === MANAJEMEN TEMA (TERANG/GELAP) === //
      const applyTheme = () => {
        preventGlobalTransition();
        document.documentElement.classList.toggle('dark', appState.isDarkMode);
        if (themeToggleBtn) {
          themeToggleBtn.innerHTML = appState.isDarkMode ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
          themeToggleBtn.setAttribute('aria-label', appState.isDarkMode ? 'Ganti ke Mode Terang' : 'Ganti ke Mode Gelap');
          themeToggleBtn.setAttribute('title', appState.isDarkMode ? 'Ganti ke Mode Terang' : 'Ganti ke Mode Gelap');
        }
        localStorage.setItem('greenValleyDarkMode', appState.isDarkMode);
      };

      const toggleTheme = () => {
        appState.isDarkMode = !appState.isDarkMode;
        applyTheme();
      };

      // === MANAJEMEN MENU MOBILE === //
      const toggleMobileMenu = () => {
        appState.isMobileMenuOpen = !appState.isMobileMenuOpen;
        mobileNavMenu.hidden = !appState.isMobileMenuOpen;
        mobileNavMenu.classList.toggle('open', appState.isMobileMenuOpen);
        mobileMenuToggleBtn.setAttribute('aria-expanded', appState.isMobileMenuOpen);
        mobileMenuToggleBtn.innerHTML = appState.isMobileMenuOpen ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        mobileMenuToggleBtn.setAttribute('aria-label', appState.isMobileMenuOpen ? 'Tutup Menu Navigasi' : 'Buka Menu Navigasi');
        document.body.classList.toggle('no-scroll', appState.isMobileMenuOpen);
      };

      const closeMobileMenu = () => {
        if (appState.isMobileMenuOpen) {
          toggleMobileMenu();
        }
      };

      // === MANAJEMEN MODAL === //
      let lastFocusedElement = null; // Untuk mengembalikan fokus setelah modal ditutup

      const openModal = (modalId) => {
        const modal = document.getElementById(modalId);
        if (modal) {
          lastFocusedElement = document.activeElement; // Simpan elemen yang sedang fokus
          if (appState.activeModal && appState.activeModal !== modal) {
            closeModal(appState.activeModal.id);
          }
          modal.classList.add('open');
          modal.setAttribute('aria-hidden', 'false');
          modal.focus();
          document.body.classList.add('no-scroll');
          appState.activeModal = modal;
          const form = modal.querySelector('form');
          if (form) {
            form.reset();
            clearAllFormErrors(form);
          }
        }
      };

      const closeModal = (modalId) => {
        const modal = document.getElementById(modalId) || appState.activeModal;
        if (modal && modal.classList.contains('open')) {
          modal.classList.remove('open');
          modal.setAttribute('aria-hidden', 'true');
          document.body.classList.remove('no-scroll');
          appState.activeModal = null;
          if (lastFocusedElement) {
            lastFocusedElement.focus(); // Kembalikan fokus
            lastFocusedElement = null;
          }
        }
      };

      const setupModalEventListeners = () => {
        $$('[data-dismiss="modal"]').forEach(btn => {
          btn.addEventListener('click', () => {
            const modal = btn.closest('.modal');
            if (modal) closeModal(modal.id);
          });
        });
        $$('.btn-login').forEach(btn => btn.addEventListener('click', () => openModal('login-modal')));
        $$('.btn-register').forEach(btn => btn.addEventListener('click', () => openModal('register-modal')));
        $('#show-register-modal-from-login')?.addEventListener('click', () => { closeModal('login-modal'); openModal('register-modal'); });
        $('#show-login-modal-from-register')?.addEventListener('click', () => { closeModal('register-modal'); openModal('login-modal'); });
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && appState.activeModal) {
            closeModal(appState.activeModal.id);
          }
        });
      };

      // === ROUTING SPA === //
      const routes = { // Kunci adalah path hash, nilai adalah objek konfigurasi
        'beranda': { templateId: 'page-beranda', title: 'Beranda - Hunian Nyaman Impian Anda', init: initHomePage },
        'cari-properti': { templateId: 'page-cari-properti', title: 'Cari Properti - Green Valley', init: initSearchPage },
        'fitur': { templateId: 'page-fitur', title: 'Fitur Unggulan - Green Valley' },
        'daftar-properti': { templateId: 'page-daftar-properti', title: 'Daftarkan Properti Anda - Green Valley', init: initListPropertyPage },
        'tentang': { templateId: 'page-tentang', title: 'Tentang Kami - Green Valley' },
        'properti/detail/:id': { templateId: 'page-properti-detail', title: 'Detail Properti - Green Valley', dynamic: true, init: initPropertyDetailPage },
        // Rute placeholder untuk link footer (bisa dikembangkan menjadi halaman nyata)
        'lupa-sandi': { templateId: 'page-beranda', title: 'Lupa Sandi - Green Valley', init: initHomePage },
        'kebijakan-privasi': { templateId: 'page-beranda', title: 'Kebijakan Privasi - Green Valley', init: initHomePage },
        'syarat-ketentuan': { templateId: 'page-beranda', title: 'Syarat & Ketentuan - Green Valley', init: initHomePage },
        'bantuan': { templateId: 'page-beranda', title: 'Pusat Bantuan - Green Valley', init: initHomePage },
        'faq': { templateId: 'page-beranda', title: 'FAQ - Green Valley', init: initHomePage },
        'blog': { templateId: 'page-beranda', title: 'Blog - Green Valley', init: initHomePage },
        'peta': { templateId: 'page-beranda', title: 'Peta Properti - Green Valley', init: initHomePage },
        'not-found': { templateId: 'page-not-found', title: '404 Halaman Tidak Ditemukan - Green Valley' }
      };

      const renderPage = (routeKey, params = {}) => {
        const routeConfig = routes[routeKey] || routes['not-found'];
        const template = document.getElementById(routeConfig.templateId);

        if (template) {
          const pageContent = template.content.cloneNode(true);
          mainContent.innerHTML = '';
          mainContent.appendChild(pageContent);
          document.title = routeConfig.title;
          appState.currentPage = routeKey;

          if (routeConfig.init) {
            routeConfig.init(params); // Panggil fungsi inisialisasi halaman jika ada
          }
          updateActiveNavLinks(routeKey);
          window.scrollTo({ top: 0, behavior: 'auto' }); // Scroll ke atas (auto agar tidak konflik dengan smooth scroll dari link)
          closeMobileMenu();
        } else {
          console.error(`Kesalahan: Template dengan ID "${routeConfig.templateId}" tidak ditemukan.`);
          renderPage('not-found');
        }
      };

      const parseRoute = (hash) => {
        const path = hash.substring(1) || 'beranda';
        for (const routePattern in routes) {
          if (routes[routePattern].dynamic) {
            const patternParts = routePattern.split('/');
            const pathParts = path.split('/');
            if (patternParts.length === pathParts.length) {
              let match = true;
              const params = {};
              for (let i = 0; i < patternParts.length; i++) {
                if (patternParts[i].startsWith(':')) {
                  params[patternParts[i].substring(1)] = pathParts[i];
                } else if (patternParts[i] !== pathParts[i]) {
                  match = false;
                  break;
                }
              }
              if (match) return { routeKey: routePattern, params: params };
            }
          }
        }
        return { routeKey: path, params: {} }; // Untuk rute statis
      };

      const handleRouteChange = () => {
        const { routeKey, params } = parseRoute(window.location.hash);
        const targetRoute = routes[routeKey] ? routeKey : 'not-found';
        renderPage(targetRoute, params);
      };

      const updateActiveNavLinks = (currentRouteKey) => {
        [...mainNavLinks, ...mobileNavLinks].forEach(link => {
          const linkRoute = link.getAttribute('data-route');
          // Logika pencocokan yang lebih fleksibel untuk rute dinamis dan default
          if (linkRoute === currentRouteKey ||
            (currentRouteKey.startsWith(linkRoute + '/') && routes[currentRouteKey]?.dynamic) ||
            (linkRoute === 'beranda' && (currentRouteKey === '' || currentRouteKey === 'beranda'))) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });
      };

      // === VALIDASI FORMULIR === //
      const setFormError = (inputElement, message) => {
        const formGroup = inputElement.closest('.form-group, .form-group-checkbox');
        if (!formGroup) return;
        inputElement.classList.add('is-invalid');
        inputElement.classList.remove('is-valid');
        const errorElementId = inputElement.getAttribute('aria-describedby');
        const errorElement = errorElementId ? document.getElementById(errorElementId) : formGroup.querySelector('.form-error-message, .checkbox-error-message');
        if (errorElement) errorElement.textContent = message;
        inputElement.setAttribute('aria-invalid', 'true');
      };

      const clearFormError = (inputElement) => {
        const formGroup = inputElement.closest('.form-group, .form-group-checkbox');
        if (!formGroup) return;
        inputElement.classList.remove('is-invalid');
        inputElement.removeAttribute('aria-invalid');
        const errorElementId = inputElement.getAttribute('aria-describedby');
        const errorElement = errorElementId ? document.getElementById(errorElementId) : formGroup.querySelector('.form-error-message, .checkbox-error-message');
        if (errorElement) errorElement.textContent = '';
      };

      const clearAllFormErrors = (formContainer) => {
        $$('.form-input, .form-select, .form-textarea, input[type="checkbox"]', formContainer).forEach(clearFormError);
      };

      const validateEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(email).toLowerCase());

      const validateAndHandleForm = (form, validationFn, successMessage) => {
        if (!form) return;
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          if (validationFn(form)) {
            console.log('Form valid, data (simulasi):', Object.fromEntries(new FormData(form)));
            alert(successMessage); // Ganti dengan feedback UI yang lebih baik (misal, notifikasi toast)
            if (form.closest('.modal')) closeModal(form.closest('.modal').id);
            form.reset();
            // Hapus preview foto jika ada di form ini
            const previewContainer = form.querySelector('#photo-preview-container');
            if (previewContainer) previewContainer.innerHTML = '';
          } else {
            console.log('Form tidak valid.');
            // Fokus ke input pertama yang error untuk aksesibilitas
            const firstInvalidInput = form.querySelector('.is-invalid, [aria-invalid="true"]');
            if (firstInvalidInput) firstInvalidInput.focus();
          }
        });
      };

      const validateLoginForm = (form) => {
        let isValid = true;
        const emailInput = $('#login-email', form);
        const passwordInput = $('#login-password', form);

        clearFormError(emailInput);
        if (!emailInput.value.trim()) { setFormError(emailInput, 'Alamat email tidak boleh kosong.'); isValid = false; }
        else if (!validateEmail(emailInput.value.trim())) { setFormError(emailInput, 'Format alamat email tidak valid.'); isValid = false; }

        clearFormError(passwordInput);
        if (!passwordInput.value) { setFormError(passwordInput, 'Kata sandi tidak boleh kosong.'); isValid = false; }
        return isValid;
      };

      const validateRegisterForm = (form) => {
        let isValid = true;
        const nameInput = $('#register-name', form);
        const emailInput = $('#register-email', form);
        const passwordInput = $('#register-password', form);
        const confirmPasswordInput = $('#register-confirm-password', form);
        const agreeTermsCheckbox = $('#agree-terms', form);

        clearFormError(nameInput);
        if (!nameInput.value.trim()) { setFormError(nameInput, 'Nama lengkap tidak boleh kosong.'); isValid = false; }

        clearFormError(emailInput);
        if (!emailInput.value.trim()) { setFormError(emailInput, 'Alamat email tidak boleh kosong.'); isValid = false; }
        else if (!validateEmail(emailInput.value.trim())) { setFormError(emailInput, 'Format alamat email tidak valid.'); isValid = false; }

        clearFormError(passwordInput);
        if (!passwordInput.value) { setFormError(passwordInput, 'Kata sandi tidak boleh kosong.'); isValid = false; }
        else if (passwordInput.value.length < 8) { setFormError(passwordInput, 'Kata sandi minimal 8 karakter.'); isValid = false; }

        clearFormError(confirmPasswordInput);
        if (!confirmPasswordInput.value) { setFormError(confirmPasswordInput, 'Konfirmasi kata sandi tidak boleh kosong.'); isValid = false; }
        else if (confirmPasswordInput.value !== passwordInput.value) { setFormError(confirmPasswordInput, 'Konfirmasi kata sandi tidak cocok.'); isValid = false; }

        clearFormError(agreeTermsCheckbox);
        if (!agreeTermsCheckbox.checked) { setFormError(agreeTermsCheckbox, 'Anda harus menyetujui Syarat & Ketentuan.'); isValid = false; }
        return isValid;
      };

      // === FUNGSI TOMBOL SCROLL TO TOP === //
      const handleScrollToTopButtonVisibility = () => {
        if (scrollTopBtn) {
          scrollTopBtn.classList.toggle('visible', window.scrollY > 300);
        }
      };

      // === FUNGSI HEADER SCROLLED & HIDDEN === //
      let lastScrollY = window.scrollY;
      const handleHeaderScrollEffects = () => {
        if (!appHeader) return;
        const currentScrollY = window.scrollY;
        const headerHeight = getCssVariableAsNumber('--header-height');

        appHeader.classList.toggle('header-scrolled', currentScrollY > headerHeight);
        appHeader.classList.toggle('header-hidden', currentScrollY > lastScrollY && currentScrollY > headerHeight * 2);
        lastScrollY = currentScrollY;
      };


      // === FUNGSI RENDER KARTU PROPERTI (REUSABLE) === //
      const createPropertyCard = (property) => {
        const template = document.getElementById('property-card-template');
        if (!template) {
          console.error("Template kartu properti tidak ditemukan!");
          return null;
        }
        const cardClone = template.content.cloneNode(true);
        const cardElement = $('.property-card', cardClone);
        cardElement.dataset.propertyId = property.id;

        $('.property-card-image', cardClone).src = property.image;
        $('.property-card-image', cardClone).alt = property.title;

        const statusEl = $('.property-card-status', cardClone);
        if (property.status) {
          statusEl.textContent = property.status;
          statusEl.className = `property-card-status ${property.status.toLowerCase().replace(/\s+/g, '-').replace('!', '')}`;
        } else {
          statusEl.remove();
        }

        const favBtn = $('.property-card-favorite-btn', cardClone);
        favBtn.setAttribute('aria-label', `Tambahkan ${property.title} ke favorit`);
        // Logika status favorit (contoh, bisa diperluas dengan localstorage/API)
        const isFavorite = (localStorage.getItem('favoriteProperties') || '').includes(property.id.toString());
        if (isFavorite) {
          favBtn.classList.add('active');
          $('i', favBtn).classList.replace('far', 'fas');
        }
        favBtn.addEventListener('click', (e) => {
          e.preventDefault(); e.stopPropagation();
          favBtn.classList.toggle('active');
          $('i', favBtn).classList.toggle('far');
          $('i', favBtn).classList.toggle('fas');
          // Update local storage (contoh sederhana)
          let favorites = (localStorage.getItem('favoriteProperties') || '').split(',').filter(Boolean);
          if (favBtn.classList.contains('active')) {
            if (!favorites.includes(property.id.toString())) favorites.push(property.id.toString());
          } else {
            favorites = favorites.filter(id => id !== property.id.toString());
          }
          localStorage.setItem('favoriteProperties', favorites.join(','));
          console.log(`Properti ID ${property.id} favorit status: ${favBtn.classList.contains('active')}`);
        });

        const tagsContainer = $('.property-card-tags', cardClone);
        tagsContainer.innerHTML = '';
        (property.tags || []).forEach(tagText => {
          const tagEl = document.createElement('span');
          tagEl.classList.add('tag');
          const tagTypeClass = tagText.toLowerCase().includes('apartemen') || tagText.toLowerCase().includes('rumah') || tagText.toLowerCase().includes('kost') || tagText.toLowerCase().includes('villa') || tagText.toLowerCase().includes('ruko') ? 'tag-type'
            : tagText.toLowerCase().includes('furnished') ? 'tag-furnished'
              : tagText.toLowerCase().includes('security') ? 'tag-security'
                : 'tag-facility';
          tagEl.classList.add(tagTypeClass);
          tagEl.textContent = tagText;
          tagsContainer.appendChild(tagEl);
        });

        const titleLink = $('.property-card-title a', cardClone);
        titleLink.href = `#properti/detail/${property.id}`;
        titleLink.dataset.route = `properti/detail/${property.id}`;
        titleLink.textContent = property.title;

        $('.property-card-location', cardClone).innerHTML = `<i class="fas fa-map-marker-alt" aria-hidden="true"></i> ${property.location}`;

        const featuresContainer = $('.property-card-features', cardClone);
        featuresContainer.innerHTML = '';
        (property.features || []).forEach(featText => {
          const featureEl = document.createElement('span');
          let iconClass = 'fa-info-circle'; // Default icon
          if (featText.toLowerCase().includes('kt') || featText.toLowerCase().includes('kamar')) iconClass = 'fa-bed';
          else if (featText.toLowerCase().includes('km')) iconClass = 'fa-bath';
          else if (featText.toLowerCase().includes('mÂ²')) iconClass = 'fa-ruler-combined';
          else if (featText.toLowerCase().includes('parkir')) iconClass = 'fa-car';
          else if (featText.toLowerCase().includes('internet')) iconClass = 'fa-wifi';
          else if (featText.toLowerCase().includes('lantai')) iconClass = 'fa-building';
          else if (featText.toLowerCase().includes('view')) iconClass = 'fa-mountain-city';


          featureEl.innerHTML = `<i class="fas ${iconClass}" aria-hidden="true"></i> ${featText}`;
          featuresContainer.appendChild(featureEl);
        });

        $('.property-card-price', cardClone).innerHTML = `Rp ${property.price} <span class="price-period">/ ${property.period}</span>`;
        const detailBtn = $('.btn-outline-primary', cardClone);
        detailBtn.href = `#properti/detail/${property.id}`;
        detailBtn.dataset.route = `properti/detail/${property.id}`;

        return cardClone;
      };


      // === INISIALISASI HALAMAN SPESIFIK === //
      function initHomePage() {
        // Hero Search Tabs
        const heroSearchForm = $('#hero-search-form');
        if (heroSearchForm) {
          const heroTabs = $$('.hero-tab-btn', heroSearchForm.parentElement); // Cari tab di parent form
          const heroPanels = $$('.hero-search-panel', heroSearchForm);

          heroTabs.forEach(tab => {
            tab.addEventListener('click', () => {
              heroTabs.forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected', 'false'); });
              tab.classList.add('active');
              tab.setAttribute('aria-selected', 'true');
              const targetPanelId = tab.getAttribute('aria-controls');
              heroPanels.forEach(panel => {
                panel.hidden = (panel.id !== targetPanelId);
                panel.classList.toggle('active', panel.id === targetPanelId);
              });
            });
          });
          // Handle form submission (redirect to search page with params)
          heroSearchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            // Kumpulkan parameter dari panel yang aktif
            const activePanel = $('.hero-search-panel.active', heroSearchForm);
            if (!activePanel) return;
            const formData = new FormData(activePanel); // Hanya dari panel aktif
            const params = new URLSearchParams();
            for (const [key, value] of formData.entries()) {
              if (value) params.append(key.replace(/_sewa|_kost|_apartemen/g, ''), value); // Normalisasi key
            }
            window.location.hash = `#cari-properti?${params.toString()}`;
          });
        }
        // Render Properti Unggulan di Beranda
        const featuredGrid = $('#beranda-property-grid');
        if (featuredGrid) {
          featuredGrid.innerHTML = ''; // Kosongkan
          appState.properties.slice(0, 4).forEach(prop => { // Ambil 4 properti pertama
            const card = createPropertyCard(prop);
            if (card) featuredGrid.appendChild(card);
          });
        }
      }

      function initPropertyDetailPage(params) {
        const propertyId = parseInt(params.id);
        const property = appState.properties.find(p => p.id === propertyId);
        const contentArea = $('#property-detail-content-area');

        if (!contentArea) return;

        if (property) {
          contentArea.innerHTML = `
                <header class="section-header text-left">
                    <h1 class="section-title">${property.title}</h1>
                    <p class="property-detail-location"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> ${property.location}</p>
                </header>
                <div class="property-detail-layout">
                    <div class="property-detail-gallery">
                        <img src="${property.image}" alt="Foto utama ${property.title}" class="property-detail-main-image">
                        <!-- Tambahkan thumbnail gallery di sini jika ada lebih banyak foto -->
                    </div>
                    <aside class="property-detail-info">
                        <div class="property-detail-price-box">
                            <p class="detail-price">Rp ${property.price} <span class="price-period">/ ${property.period}</span></p>
                            <button class="btn btn-primary btn-block btn-lg"><i class="fas fa-phone-alt" aria-hidden="true"></i> Hubungi Agen</button>
                            <button class="btn btn-outline btn-block" style="margin-top:10px;"><i class="fas fa-calendar-alt" aria-hidden="true"></i> Jadwalkan Kunjungan</button>
                        </div>
                        <h3>Detail Properti</h3>
                        <ul class="property-specs-list">
                            <li><i class="fas fa-home" aria-hidden="true"></i> <strong>Tipe:</strong> ${property.type}</li>
                            ${property.bedrooms !== null ? `<li><i class="fas fa-bed" aria-hidden="true"></i> <strong>Kamar Tidur:</strong> ${property.bedrooms === 0 ? 'Studio' : property.bedrooms}</li>` : ''}
                            <li><i class="fas fa-bath" aria-hidden="true"></i> <strong>Kamar Mandi:</strong> ${property.features.find(f => f.includes('KM'))?.split(' ')[0] || 'N/A'}</li>
                            <li><i class="fas fa-ruler-combined" aria-hidden="true"></i> <strong>Luas:</strong> ${property.features.find(f => f.includes('mÂ²'))?.split(' ')[0] || 'N/A'} mÂ²</li>
                            ${property.features.find(f => f.includes('Lantai')) ? `<li><i class="fas fa-building" aria-hidden="true"></i> <strong>Lantai:</strong> ${property.features.find(f => f.includes('Lantai')).split(' ')[1]}</li>` : ''}
                            ${property.features.find(f => f.includes('Parkir')) ? `<li><i class="fas fa-car" aria-hidden="true"></i> <strong>Parkir:</strong> ${property.features.find(f => f.includes('Parkir')).split(' ')[0]}</li>` : ''}
                            ${property.tags.includes('Full Furnished') ? `<li><i class="fas fa-couch" aria-hidden="true"></i> <strong>Kondisi:</strong> Full Furnished</li>` : ''}
                        </ul>
                        <h3>Deskripsi</h3>
                        <p>${property.description || 'Deskripsi properti tidak tersedia.'}</p>
                        <h3>Fasilitas Tambahan</h3>
                        <p>${property.facilities ? property.facilities.join(', ').replace(/\b\w/g, l => l.toUpperCase()) : 'Tidak ada data fasilitas tambahan.'}</p>
                    </aside>
                </div>
            `;
          document.title = `${property.title} - Green Valley`;
        } else {
          contentArea.innerHTML = '<p class="text-center error-text">Maaf, detail properti tidak ditemukan.</p>';
          document.title = 'Properti Tidak Ditemukan - Green Valley';
        }
      }

      function initSearchPage() {
        const locations = ["Semua Lokasi", ...new Set(appState.properties.map(p => p.location.split(',')[0].trim()))]; // Ambil kota/area utama
        const types = ["Semua Tipe", ...new Set(appState.properties.map(p => p.type))];

        const locationSelect = $('#filter-location');
        const typeSelect = $('#filter-type');

        if (locationSelect) {
          locationSelect.innerHTML = ''; // Kosongkan dulu
          locations.forEach(loc => {
            const option = document.createElement('option');
            option.value = loc === "Semua Lokasi" ? "" : loc.toLowerCase().replace(/ /g, '-');
            option.textContent = loc;
            locationSelect.appendChild(option);
          });
        }
        if (typeSelect) {
          typeSelect.innerHTML = ''; // Kosongkan dulu
          types.forEach(type => {
            const option = document.createElement('option');
            option.value = type === "Semua Tipe" ? "" : type.toLowerCase().replace(/ /g, '-');
            option.textContent = type;
            typeSelect.appendChild(option);
          });
        }

        $$('.button-group-filter .btn-filter-option').forEach(btn => {
          btn.addEventListener('click', () => {
            btn.classList.toggle('active');
            btn.setAttribute('aria-pressed', btn.classList.contains('active'));
            const bedroomFilterInput = $('#filter-bedrooms');
            if (bedroomFilterInput) {
              bedroomFilterInput.value = $$('.button-group-filter .btn-filter-option.active').map(b => b.dataset.value).join(',');
            }
          });
        });

        const searchForm = $('#advanced-search-form');
        if (searchForm) {
          searchForm.addEventListener('submit', handleAdvancedSearch);
          searchForm.addEventListener('reset', () => {
            $$('.button-group-filter .btn-filter-option.active').forEach(btn => { btn.classList.remove('active'); btn.setAttribute('aria-pressed', 'false'); });
            if ($('#filter-bedrooms')) $('#filter-bedrooms').value = '';
            appState.currentPageNumber = 1; // Reset halaman
            performSearchAndRender({});
          });
        }

        // Cek apakah ada query params dari hero search
        const urlParams = new URLSearchParams(window.location.hash.split('?')[1]);
        const initialFilters = {};
        let hasInitialFilters = false;
        for (const [key, value] of urlParams.entries()) {
          initialFilters[key] = value;
          hasInitialFilters = true;
          // Update form fields based on URL params
          const inputField = $(`[name="${key}"]`, searchForm) || $(`[name^="${key}_"]`, searchForm); // handle _sewa, _kost etc
          if (inputField) inputField.value = value;
        }

        if (hasInitialFilters) {
          performSearchAndRender(initialFilters);
        } else {
          performSearchAndRender({}); // Render properti awal (semua atau sesuai default)
        }
      }

      function handleAdvancedSearch(e) {
        if (e) e.preventDefault(); // Jika dipanggil dari event submit
        const searchForm = $('#advanced-search-form');
        if (!searchForm) return;

        const formData = new FormData(searchForm);
        const filters = {};
        for (const [key, value] of formData.entries()) {
          if (value) filters[key] = value; // Hanya ambil filter yang ada nilainya
        }
        // Ambil nilai dari button group filter (jika ada) dan checkbox
        const activeBedrooms = $$('.button-group-filter .btn-filter-option.active[data-value]').map(b => b.dataset.value);
        if (activeBedrooms.length > 0) filters.bedrooms = activeBedrooms;

        filters.facilities = $$('input[name="facilities"]:checked', searchForm).map(cb => cb.value);

        console.log("Menerapkan filter:", filters);
        appState.currentPageNumber = 1; // Reset ke halaman pertama saat filter baru
        performSearchAndRender(filters);
      }


      function performSearchAndRender(filters) {
        appState.filteredProperties = appState.properties.filter(prop => {
          let match = true;
          if (filters.keyword && !(prop.title.toLowerCase().includes(filters.keyword.toLowerCase()) || prop.location.toLowerCase().includes(filters.keyword.toLowerCase()))) match = false;
          if (filters.location && prop.location.toLowerCase().replace(/ /g, '-').split(',')[0].trim() !== filters.location) match = false;
          if (filters.type && prop.type.toLowerCase().replace(/ /g, '-') !== filters.type) match = false;
          if (filters.price_min && prop.rawPrice < parseFloat(filters.price_min)) match = false;
          if (filters.price_max && prop.rawPrice > parseFloat(filters.price_max)) match = false;

          if (filters.bedrooms && filters.bedrooms.length > 0) {
            let bedMatch = filters.bedrooms.some(reqBed => {
              if (reqBed === 'studio') return prop.bedrooms === 0;
              if (reqBed.includes('+')) return prop.bedrooms >= parseInt(reqBed);
              return prop.bedrooms == parseInt(reqBed);
            });
            if (!bedMatch) match = false;
          }
          if (filters.facilities && filters.facilities.length > 0) {
            if (!filters.facilities.every(fac => (prop.facilities && prop.facilities.includes(fac)))) match = false;
          }
          return match;
        });

        // Sorting (jika ada)
        const sortBy = $('#sort-by')?.value || 'relevance';
        if (sortBy === 'price-asc') appState.filteredProperties.sort((a, b) => a.rawPrice - b.rawPrice);
        else if (sortBy === 'price-desc') appState.filteredProperties.sort((a, b) => b.rawPrice - a.rawPrice);
        else if (sortBy === 'newest') appState.filteredProperties.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
        // 'relevance' (default) tidak melakukan sorting tambahan di sini, bisa dipercanggih

        renderPaginatedResults();
      }

      function renderPaginatedResults() {
        const resultsGrid = $('#search-results-grid');
        const resultsCountEl = $('#search-results-count');
        const paginationContainer = $('.pagination');

        if (!resultsGrid || !resultsCountEl || !paginationContainer) return;

        resultsGrid.innerHTML = '';
        resultsCountEl.textContent = appState.filteredProperties.length;

        const startIndex = (appState.currentPageNumber - 1) * appState.searchResultsPerPage;
        const endIndex = startIndex + appState.searchResultsPerPage;
        const paginatedItems = appState.filteredProperties.slice(startIndex, endIndex);

        if (paginatedItems.length === 0) {
          resultsGrid.innerHTML = `<p class="text-center no-results-message"><i>Tidak ada properti yang cocok dengan kriteria Anda.</i></p>`;
        } else {
          paginatedItems.forEach(prop => {
            const card = createPropertyCard(prop);
            if (card) resultsGrid.appendChild(card);
          });
        }
        renderPaginationControls();
      }

      function renderPaginationControls() {
        const paginationContainer = $('.pagination');
        if (!paginationContainer) return;
        paginationContainer.innerHTML = '';

        const totalPages = Math.ceil(appState.filteredProperties.length / appState.searchResultsPerPage);
        if (totalPages <= 1) return; // Tidak perlu paginasi jika hanya 1 halaman atau kurang

        // Tombol "Sebelumnya"
        const prevButton = document.createElement('button');
        prevButton.innerHTML = '&laquo; <span class="visually-hidden">Sebelumnya</span>';
        prevButton.disabled = appState.currentPageNumber === 1;
        prevButton.setAttribute('aria-label', 'Halaman Sebelumnya');
        prevButton.addEventListener('click', () => {
          if (appState.currentPageNumber > 1) {
            appState.currentPageNumber--;
            renderPaginatedResults();
          }
        });
        paginationContainer.appendChild(prevButton);

        // Nomor Halaman (sederhana, bisa dipercanggih dengan ellipsis)
        for (let i = 1; i <= totalPages; i++) {
          const pageButton = document.createElement('button');
          pageButton.textContent = i;
          pageButton.setAttribute('aria-label', `Halaman ${i}`);
          if (i === appState.currentPageNumber) {
            pageButton.classList.add('active');
            pageButton.setAttribute('aria-current', 'page');
          }
          pageButton.addEventListener('click', () => {
            appState.currentPageNumber = i;
            renderPaginatedResults();
          });
          paginationContainer.appendChild(pageButton);
        }

        // Tombol "Berikutnya"
        const nextButton = document.createElement('button');
        nextButton.innerHTML = '<span class="visually-hidden">Berikutnya</span> &raquo;';
        nextButton.disabled = appState.currentPageNumber === totalPages;
        nextButton.setAttribute('aria-label', 'Halaman Berikutnya');
        nextButton.addEventListener('click', () => {
          if (appState.currentPageNumber < totalPages) {
            appState.currentPageNumber++;
            renderPaginatedResults();
          }
        });
        paginationContainer.appendChild(nextButton);
      }


      function initListPropertyPage() {
        const photoInput = $('#prop-photos');
        const previewContainer = $('#photo-preview-container');
        const maxPhotos = 5;

        if (photoInput && previewContainer) {
          photoInput.addEventListener('change', (event) => {
            previewContainer.innerHTML = '';
            const files = Array.from(event.target.files).slice(0, maxPhotos);

            if (event.target.files.length > maxPhotos) {
              alert(`Anda hanya dapat mengunggah maksimal ${maxPhotos} foto.`);
            }
            files.forEach(file => {
              if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                  const previewItem = document.createElement('div');
                  previewItem.classList.add('photo-preview-item');
                  const img = document.createElement('img');
                  img.src = e.target.result;
                  img.alt = `Preview ${file.name}`;
                  previewItem.appendChild(img);
                  previewContainer.appendChild(previewItem);
                }
                reader.readAsDataURL(file);
              }
            });
          });
        }
        validateAndHandleForm($('#list-property-form'), validateListPropertyForm, "Properti (simulasi) berhasil didaftarkan!");
      }

      const validateListPropertyForm = (form) => { // Validasi untuk form daftar properti
        let isValid = true;
        const title = $('#prop-title', form);
        const type = $('#prop-type', form);
        const address = $('#prop-address', form);
        const price = $('#prop-price', form);

        clearFormError(title);
        if (!title.value.trim()) { setFormError(title, 'Judul iklan tidak boleh kosong.'); isValid = false; }

        clearFormError(type);
        if (!type.value) { setFormError(type, 'Tipe properti harus dipilih.'); isValid = false; }

        clearFormError(address);
        if (!address.value.trim()) { setFormError(address, 'Alamat tidak boleh kosong.'); isValid = false; }

        clearFormError(price);
        if (!price.value.trim() || parseFloat(price.value) <= 0) { setFormError(price, 'Harga sewa harus valid dan lebih dari 0.'); isValid = false; }

        // Validasi foto bisa ditambahkan (misal, minimal 1 foto)
        return isValid;
      };


      // === INISIALISASI APLIKASI GLOBAL === //
      const initApp = () => {
        preventGlobalTransition(document.documentElement, 0); // Cegah transisi awal pada html element
        applyTheme();
        if (themeToggleBtn) themeToggleBtn.addEventListener('click', toggleTheme);

        if (mobileMenuToggleBtn && mobileNavMenu) {
          mobileMenuToggleBtn.addEventListener('click', toggleMobileMenu);
          $$('a', mobileNavMenu).forEach(link => link.addEventListener('click', closeMobileMenu));
        }

        setupModalEventListeners();
        validateAndHandleForm(loginForm, validateLoginForm, "Login (simulasi) berhasil!");
        validateAndHandleForm(registerForm, validateRegisterForm, "Registrasi (simulasi) berhasil!");

        window.addEventListener('hashchange', handleRouteChange);
        handleRouteChange(); // Render halaman awal

        if (scrollTopBtn) {
          window.addEventListener('scroll', handleScrollToTopButtonVisibility, { passive: true });
          scrollTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        }
        window.addEventListener('scroll', handleHeaderScrollEffects, { passive: true });

        if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();

        // Pastikan semua link internal SPA ditangani oleh router
        document.body.addEventListener('click', (e) => {
          const link = e.target.closest('a[data-route]');
          if (link && link.getAttribute('href').startsWith('#')) {
            // e.preventDefault(); // hashchange akan menangani navigasi
            // Tidak perlu preventDefault jika hanya hash, browser akan menanganinya
            if (link.closest('.mobile-nav')) closeMobileMenu();
          }
        });
      };

      initApp();
    });
  </script>
</body>

</html>