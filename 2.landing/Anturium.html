<!DOCTYPE html>
<html lang="id" data-bs-theme="light"> {/* Atribut data-bs-theme untuk Bootstrap */}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Green Valley: Platform penyewaan apartemen premium dengan pencarian canggih, antarmuka pengguna yang memukau, dan manajemen properti yang mudah. Temukan hunian impian Anda.">
    <meta name="keywords" content="apartemen, sewa, premium, green valley, hunian, properti, mewah, modern">
    <meta name="author" content="Green Valley Development">
    <link rel="icon" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/pngs/solid/leaf.png"
        type="image/png"> {/* Favicon menggunakan Font Awesome PNG sebagai contoh, bisa diganti */}

    <title>Green Valley | Sewa Apartemen Premium & Modern</title>

    <!-- Pustaka Eksternal: Bootstrap CSS & Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts: Poppins & Inter untuk desain yang elegan dan modern -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Flatpickr CSS untuk pilihan tanggal yang canggih -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <style>
        /* --- CSS Global: Variabel Tema, Reset Dasar, dan Utilitas --- */
        :root {
            --gv-primary: #2a9d8f;
            /* Tealish Green - Warna utama yang segar dan menenangkan */
            --gv-primary-rgb: 42, 157, 143;
            --gv-primary-darker: #228073;
            /* Lebih gelap untuk hover */
            --gv-secondary: #e9c46a;
            /* Sandy Yellow - Warna sekunder yang hangat */
            --gv-secondary-darker: #d0ad55;
            --gv-accent: #f4a261;
            /* Orange-ish - Aksen untuk call-to-action */
            --gv-accent-darker: #e08f4c;
            --gv-dark: #264653;
            /* Dark Blue-Green - Untuk teks kontras tinggi atau latar belakang footer */
            --gv-dark-rgb: 38, 70, 83;
            --gv-light: #f8f9fa;
            /* Sangat terang - Hampir putih, untuk latar belakang utama */
            --gv-text: #343a40;
            /* Abu-abu gelap untuk teks utama */
            --gv-text-muted: #6c757d;
            /* Abu-abu lebih terang untuk teks sekunder */
            --gv-bg: #ffffff;
            /* Latar belakang halaman utama */
            --gv-card-bg: #ffffff;
            /* Latar belakang kartu */
            --gv-border-color: #dee2e6;
            /* Warna border standar */
            --gv-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.08);
            /* Bayangan lembut dan modern */
            --gv-shadow-strong: 0 1rem 2rem rgba(0, 0, 0, 0.12);
            --gv-radius: 0.75rem;
            /* Radius border yang lebih modern */
            --gv-radius-sm: 0.375rem;
            --font-primary: 'Poppins', 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            --font-secondary: 'Inter', 'Poppins', sans-serif;
            /* Untuk heading atau aksen */
            --transition-speed: 0.3s;
            /* Kecepatan transisi standar */
        }

        .dark-theme {
            --gv-primary: #38c1ad;
            --gv-primary-rgb: 56, 193, 173;
            --gv-primary-darker: #2aa793;
            --gv-secondary: #f0c059;
            --gv-secondary-darker: #d8ac46;
            --gv-accent: #f6a96e;
            --gv-accent-darker: #e2965b;
            --gv-dark: #a7d5e0;
            --gv-dark-rgb: 167, 213, 224;
            --gv-light: #1a202c;
            /* Latar belakang gelap untuk kartu atau elemen sekunder */
            --gv-text: #e2e8f0;
            /* Teks terang pada tema gelap */
            --gv-text-muted: #a0aec0;
            /* Teks sekunder lebih redup */
            --gv-bg: #121212;
            /* Latar belakang utama sangat gelap */
            --gv-card-bg: #1e1e1e;
            /* Latar belakang kartu sedikit lebih terang dari bg utama */
            --gv-border-color: #4a5568;
            /* Border yang lebih gelap */
            --gv-shadow: 0 0.75rem 1.5rem rgba(255, 255, 255, 0.04);
            --gv-shadow-strong: 0 1rem 2rem rgba(255, 255, 255, 0.06);
        }

        /* Reset dan Gaya Dasar */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--gv-bg);
            color: var(--gv-text);
            transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
            line-height: 1.7;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            font-size: 16px;
            /* Ukuran font dasar */
        }

        main {
            flex-grow: 1;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .h1,
        .h2,
        .h3,
        .h4,
        .h5,
        .h6 {
            /* Override Bootstrap classes */
            font-family: var(--font-secondary);
            font-weight: 700;
            color: var(--gv-primary);
            margin-bottom: 0.75em;
            /* Spasi bawah standar untuk heading */
            line-height: 1.3;
        }

        h1,
        .h1 {
            font-size: 2.5rem;
        }

        /* Ukuran heading responsif diatur Bootstrap */
        h2,
        .h2 {
            font-size: 2rem;
        }

        h3,
        .h3 {
            font-size: 1.75rem;
        }

        a {
            color: var(--gv-accent);
            text-decoration: none;
            transition: color var(--transition-speed) ease;
        }

        a:hover {
            color: var(--gv-accent-darker);
            text-decoration: underline;
        }

        /* Tombol Kustom yang Fancy */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: var(--gv-radius-sm);
            font-weight: 600;
            transition: all var(--transition-speed) ease;
            text-transform: capitalize;
            /* Bisa juga none atau uppercase */
            letter-spacing: 0.5px;
            border: 1px solid transparent;
        }

        .btn:focus {
            box-shadow: 0 0 0 0.25rem rgba(var(--gv-primary-rgb), 0.5);
        }

        .btn-primary {
            background-color: var(--gv-primary);
            border-color: var(--gv-primary);
            color: #fff;
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background-color: var(--gv-primary-darker);
            border-color: var(--gv-primary-darker);
            color: #fff;
            transform: translateY(-2px);
            box-shadow: var(--gv-shadow);
        }

        .dark-theme .btn-primary {
            /* Teks gelap pada tombol primer di tema gelap jika warna primer terlalu terang */
            /* color: var(--gv-dark);  Sesuaikan jika perlu kontras */
        }

        .btn-secondary {
            background-color: var(--gv-secondary);
            border-color: var(--gv-secondary);
            color: var(--gv-dark);
            /* Pastikan kontras teks */
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background-color: var(--gv-secondary-darker);
            border-color: var(--gv-secondary-darker);
            color: var(--gv-dark);
            transform: translateY(-2px);
            box-shadow: var(--gv-shadow);
        }

        .dark-theme .btn-secondary {
            color: var(--gv-text);
            /* Teks terang pada tombol sekunder di tema gelap */
            /* background-color: var(--gv-light);  Jika perlu */
            /* border-color: var(--gv-light); */
        }

        .dark-theme .btn-secondary:hover,
        .dark-theme .btn-secondary:focus {
            /* background-color: #3e4c5a; */
            /* Contoh jika button sekunder perlu bg lebih gelap */
        }

        .btn-outline-primary {
            color: var(--gv-primary);
            border-color: var(--gv-primary);
        }

        .btn-outline-primary:hover {
            background-color: var(--gv-primary);
            color: #fff;
        }

        .dark-theme .btn-outline-primary {
            color: var(--gv-primary);
            /* Warna primer tema gelap */
            border-color: var(--gv-primary);
        }

        .dark-theme .btn-outline-primary:hover {
            background-color: var(--gv-primary);
            color: var(--gv-bg);
            /* Teks gelap jika bg primer terang */
        }

        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }

        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }

        /* Formulir Kustom */
        .form-control,
        .form-select {
            background-color: var(--gv-bg);
            color: var(--gv-text);
            border: 1px solid var(--gv-border-color);
            border-radius: var(--gv-radius-sm);
            padding: 0.75rem 1rem;
            transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: var(--gv-primary);
            box-shadow: 0 0 0 0.2rem rgba(var(--gv-primary-rgb), 0.25);
            background-color: var(--gv-bg);
            /* Pastikan bg tetap sama saat fokus */
            color: var(--gv-text);
            /* Pastikan warna teks tetap sama */
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--gv-text);
        }

        .dark-theme .form-control,
        .dark-theme .form-select {
            background-color: var(--gv-card-bg);
            /* Latar belakang input di tema gelap */
            color: var(--gv-text);
            border: 1px solid var(--gv-border-color);
        }

        .dark-theme .form-control::placeholder {
            color: var(--gv-text-muted);
        }

        .dark-theme .form-select {
            /* Bootstrap mungkin perlu override untuk ikon dropdown */
        }


        /* --- CSS: Tata Letak dan Komponen Global (Konsep: assets/css/main.css) --- */
        .page-section {
            display: none;
            /* Disembunyikan secara default, JS akan menampilkan halaman aktif */
            padding-top: 100px;
            /* Perkiraan tinggi navbar + sedikit ruang */
            padding-bottom: 3rem;
            min-height: calc(100vh - 100px - 100px);
            /* viewport - navbar - footer approx */
        }

        .page-section.active {
            display: block;
            animation: fadeInPage 0.6s ease-in-out;
        }

        @keyframes fadeInPage {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Navbar Fancy */
        .navbar {
            background-color: rgba(var(--gv-bg-rgb, 255, 255, 255), 0.85);
            /* Default to light theme */
            backdrop-filter: blur(12px) saturate(180%);
            -webkit-backdrop-filter: blur(12px) saturate(180%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 1rem 0;
            /* Padding lebih besar untuk tampilan modern */
            transition: background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
        }

        .light-theme .navbar {
            --gv-bg-rgb: 255, 255, 255;
        }

        .dark-theme .navbar {
            --gv-bg-rgb: 30, 30, 30;
            /* Warna RGB untuk --gv-card-bg tema gelap */
            background-color: rgba(var(--gv-bg-rgb), 0.85);
            /* Lebih gelap dengan transparansi */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .navbar-brand {
            font-weight: 800;
            font-size: 1.85rem;
            /* Sedikit lebih besar */
            color: var(--gv-primary) !important;
        }

        .navbar-brand .fa-leaf {
            color: var(--gv-secondary);
            font-size: 1.6rem;
            /* Sesuaikan ukuran ikon */
            vertical-align: -2px;
        }

        .navbar .nav-link {
            color: var(--gv-text) !important;
            font-weight: 500;
            margin: 0 0.5rem;
            padding: 0.5rem 1rem !important;
            /* Padding lebih pada link */
            border-radius: var(--gv-radius-sm);
            transition: color var(--transition-speed) ease, background-color var(--transition-speed) ease;
        }

        .navbar .nav-link:hover,
        .navbar .nav-link.active {
            color: var(--gv-primary) !important;
            background-color: rgba(var(--gv-primary-rgb), 0.1);
        }

        .dark-theme .navbar .nav-link {
            color: var(--gv-text) !important;
        }

        .dark-theme .navbar .nav-link:hover,
        .dark-theme .navbar .nav-link.active {
            color: var(--gv-primary) !important;
            /* Warna primer tema gelap */
            background-color: rgba(var(--gv-primary-rgb), 0.15);
            /* Warna primer tema gelap */
        }

        .navbar-toggler {
            border-color: rgba(var(--gv-text-rgb, 52, 58, 64), 0.3);
        }

        .navbar-toggler-icon {
            /* Dikelola Bootstrap, bisa di-override jika ikon default kurang pas */
        }

        .light-theme .navbar-toggler {
            --gv-text-rgb: 52, 58, 64;
        }

        /* Teks default untuk light */
        .dark-theme .navbar-toggler {
            --gv-text-rgb: 226, 232, 240;
            /* Teks default untuk dark */
            border-color: rgba(var(--gv-text-rgb), 0.4);
        }

        /* Bootstrap 5.3 menggunakan variabel untuk ikon toggler, pastikan html data-bs-theme diatur */
        .navbar-toggler-icon {
            background-image: var(--bs-navbar-toggler-icon-bg);
        }

        .dark-theme .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28226, 232, 240, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }


        /* Footer Fancy */
        footer {
            background-color: var(--gv-dark);
            color: var(--gv-light);
            padding: 3rem 0;
            text-align: center;
            margin-top: auto;
            /* Mendorong footer ke bawah jika konten pendek */
            font-size: 0.9rem;
        }

        .dark-theme footer {
            background-color: #101010;
            /* Sedikit berbeda dari bg utama tema gelap */
            color: var(--gv-text-muted);
        }

        footer p {
            margin-bottom: 0.5rem;
        }

        footer .fab {
            font-size: 1.5rem;
            margin: 0 0.75rem;
            color: var(--gv-light);
            transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
        }

        footer .fab:hover {
            color: var(--gv-secondary);
            transform: scale(1.2);
        }

        .dark-theme footer .fab {
            color: var(--gv-text-muted);
        }

        .dark-theme footer .fab:hover {
            color: var(--gv-secondary);
        }


        /* --- CSS: Komponen Spesifik (Konsep: components/*.css) --- */

        /* Kartu Properti (Konsep: components/PropertyCard.css) */
        .property-card {
            background-color: var(--gv-card-bg);
            border: 1px solid var(--gv-border-color);
            border-radius: var(--gv-radius);
            box-shadow: var(--gv-shadow);
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
            /* Untuk konsistensi tinggi dalam grid row */
        }

        .property-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--gv-shadow-strong);
        }

        .property-card .property-image-wrapper {
            width: 100%;
            height: 220px;
            /* Tinggi gambar konsisten */
            overflow: hidden;
        }

        .property-card .property-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Gambar akan mengisi tanpa distorsi */
            transition: transform 0.4s ease;
        }

        .property-card:hover .property-image {
            transform: scale(1.05);
            /* Efek zoom halus pada gambar saat hover kartu */
        }

        .property-card .card-body {
            padding: 1.5rem;
            /* Padding lebih besar */
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .property-card .card-title {
            font-size: 1.35rem;
            /* Judul kartu lebih menonjol */
            margin-bottom: 0.5rem;
            color: var(--gv-dark);
            /* Warna judul lebih gelap dari primary untuk kontras */
            font-weight: 600;
        }

        .dark-theme .property-card .card-title {
            color: var(--gv-text);
        }

        .property-card .property-location {
            color: var(--gv-text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }

        .property-card .property-location .fa-map-marker-alt {
            color: var(--gv-accent);
        }

        .property-card .features {
            color: var(--gv-text-muted);
            font-size: 0.85rem;
            margin-bottom: 1rem;
            display: flex;
            flex-wrap: wrap;
            /* Agar fitur tidak tumpah jika terlalu banyak */
            gap: 0.75rem;
            /* Spasi antar fitur */
        }

        .property-card .features span {
            display: inline-flex;
            /* Untuk align ikon dan teks */
            align-items: center;
        }

        .property-card .features .fa-solid {
            margin-right: 6px;
            color: var(--gv-secondary);
            font-size: 0.9em;
            /* Ukuran ikon relatif terhadap teks fitur */
        }

        .property-card .property-description {
            color: var(--gv-text-muted);
            font-size: 0.9rem;
            margin-bottom: 1.25rem;
            line-height: 1.6;
            flex-grow: 1;
            /* Mendorong harga/tombol ke bawah */
            /* Batasi jumlah baris deskripsi jika perlu */
            display: -webkit-box;
            -webkit-line-clamp: 3;
            /* Tampilkan maksimal 3 baris */
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .property-card .price-cta-wrapper {
            margin-top: auto;
            /* Mendorong ke bawah */
            padding-top: 1rem;
            /* Spasi dari deskripsi */
            border-top: 1px solid var(--gv-border-color);
            /* Pemisah halus */
        }

        .property-card .price {
            font-size: 1.5rem;
            /* Harga lebih besar */
            font-weight: 700;
            /* Bold */
            color: var(--gv-primary);
            /* Warna primer untuk harga */
        }

        .property-card .property-details-link {
            font-size: 0.9rem;
        }


        /* Kontainer Formulir Pencarian (Konsep: components/SearchForm.css) */
        .search-form-container {
            background-color: rgba(var(--gv-primary-rgb), 0.05);
            /* Latar belakang lembut */
            padding: 2.5rem;
            /* Padding lebih besar */
            border-radius: var(--gv-radius);
            margin-bottom: 3rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .dark-theme .search-form-container {
            background-color: rgba(var(--gv-primary-rgb), 0.1);
            /* Sedikit lebih terlihat di tema gelap */
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.03);
        }


        /* --- CSS: Spesifik Halaman (Konsep: pages/*.css) --- */
        /* Halaman Beranda (Konsep: pages/Home.css) */
        #page-home .hero-section {
            background: linear-gradient(rgba(var(--gv-dark-rgb), 0.65), rgba(var(--gv-dark-rgb), 0.65)), url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80') no-repeat center center;
            background-size: cover;
            color: var(--gv-light);
            /* Warna teks terang untuk kontras */
            padding: 8rem 1rem;
            /* Padding lebih besar */
            text-align: center;
            min-height: 80vh;
            /* Lebih tinggi */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 0 0 var(--gv-radius) var(--gv-radius);
            /* Rounded bottom corners */
            margin-bottom: 3rem;
            /* Space below hero */
        }

        #page-home .hero-section h1 {
            font-size: 3.5rem;
            /* Judul hero lebih besar */
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: #fff;
            /* Pastikan warna putih untuk kontras maksimal */
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            /* Bayangan teks untuk keterbacaan */
        }

        #page-home .hero-section p {
            font-size: 1.35rem;
            /* Subjudul lebih besar */
            margin-bottom: 2.5rem;
            max-width: 750px;
            /* Batas lebar subjudul */
            color: rgba(255, 255, 255, 0.9);
        }

        #page-home .hero-section .btn-primary {
            /* Tombol di hero mungkin butuh styling khusus */
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
        }

        /* Fitur "Kenapa Memilih Kami" */
        .feature-item {
            background-color: var(--gv-card-bg);
            padding: 2rem;
            border-radius: var(--gv-radius);
            box-shadow: var(--gv-shadow);
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            height: 100%;
            /* Agar semua item sama tinggi */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--gv-shadow-strong);
        }

        .feature-item .feature-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: var(--gv-primary);
            background-color: rgba(var(--gv-primary-rgb), 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .feature-item h3 {
            font-size: 1.5rem;
            color: var(--gv-dark);
            margin-bottom: 0.5rem;
        }

        .dark-theme .feature-item h3 {
            color: var(--gv-text);
        }

        .feature-item p {
            color: var(--gv-text-muted);
            font-size: 0.95rem;
        }


        /* Halaman Daftar Apartemen (Konsep: pages/Listings.css) */
        #page-listings .filter-sort-bar {
            margin-bottom: 2rem;
            padding: 1rem 1.5rem;
            background-color: rgba(var(--gv-primary-rgb), 0.03);
            /* Lebih subtil */
            border-radius: var(--gv-radius-sm);
            border: 1px solid var(--gv-border-color);
        }

        .dark-theme #page-listings .filter-sort-bar {
            background-color: rgba(var(--gv-primary-rgb), 0.08);
            border-color: var(--gv-border-color);
        }

        #listing-count {
            color: var(--gv-text-muted);
            font-size: 0.9rem;
        }

        /* Halaman Dasbor (Konsep: pages/Dashboard.css) */
        #page-dashboard .stat-card {
            background-color: var(--gv-card-bg);
            border: 1px solid var(--gv-border-color);
            border-left: 6px solid var(--gv-primary);
            /* Border kiri lebih tebal */
            padding: 2rem;
            /* Padding lebih besar */
            border-radius: var(--gv-radius);
            margin-bottom: 1.5rem;
            position: relative;
            box-shadow: var(--gv-shadow);
            transition: transform var(--transition-speed) ease;
        }

        #page-dashboard .stat-card:hover {
            transform: translateY(-3px);
        }

        #page-dashboard .stat-card .stat-value {
            font-size: 2.5rem;
            /* Nilai statistik lebih besar */
            font-weight: 700;
            color: var(--gv-dark);
        }

        .dark-theme #page-dashboard .stat-card .stat-value {
            color: var(--gv-text);
        }

        #page-dashboard .stat-card .stat-label {
            font-size: 1rem;
            /* Label lebih jelas */
            color: var(--gv-text-muted);
            margin-bottom: 0;
        }

        #page-dashboard .stat-card .stat-icon {
            font-size: 2.5rem;
            /* Ikon lebih besar */
            opacity: 0.1;
            /* Lebih transparan agar tidak terlalu mendominasi */
            position: absolute;
            top: 50%;
            right: 1.5rem;
            transform: translateY(-50%);
            color: var(--gv-primary);
        }

        #page-dashboard .stat-card.border-secondary {
            border-left-color: var(--gv-secondary) !important;
        }

        #page-dashboard .stat-card.border-secondary .stat-icon {
            color: var(--gv-secondary);
        }

        #page-dashboard .stat-card.border-accent {
            border-left-color: var(--gv-accent) !important;
        }

        #page-dashboard .stat-card.border-accent .stat-icon {
            color: var(--gv-accent);
        }

        /* Halaman CRUD (Konsep: pages/Crud.css) */
        #page-crud .form-section {
            background-color: var(--gv-card-bg);
            padding: 2.5rem;
            /* Padding lebih besar */
            border-radius: var(--gv-radius);
            box-shadow: var(--gv-shadow-strong);
            /* Bayangan lebih kuat untuk form penting */
        }

        .list-group-item {
            background-color: var(--gv-card-bg);
            color: var(--gv-text);
            border-color: var(--gv-border-color);
            padding: 1rem 1.25rem;
            /* Padding lebih pada item list */
            transition: background-color var(--transition-speed) ease;
        }

        .list-group-item:hover {
            background-color: rgba(var(--gv-primary-rgb), 0.05);
        }

        .dark-theme .list-group-item:hover {
            background-color: rgba(var(--gv-primary-rgb), 0.1);
        }

        .crud-item-price {
            font-size: 0.85em;
            color: var(--gv-accent);
        }


        /* Tombol Pengalih Tema */
        #theme-toggle {
            font-size: 1.3rem;
            /* Ukuran ikon lebih besar */
            cursor: pointer;
            color: var(--gv-text) !important;
            /* Warna sama dengan nav-link */
            background: none;
            border: none;
            padding: 0.5rem 0.75rem;
            /* Area klik lebih besar */
            line-height: 1;
            border-radius: var(--gv-radius-sm);
            transition: color var(--transition-speed) ease, background-color var(--transition-speed) ease;
        }

        #theme-toggle:hover {
            color: var(--gv-primary) !important;
            /* Warna primary saat hover */
            background-color: rgba(var(--gv-primary-rgb), 0.1);
        }

        .dark-theme #theme-toggle {
            color: var(--gv-text) !important;
        }

        .dark-theme #theme-toggle:hover {
            color: var(--gv-primary) !important;
            /* Warna primer tema gelap */
            background-color: rgba(var(--gv-primary-rgb), 0.15);
        }

        /* Pesan "Tidak Ada Hasil" */
        #no-results-message {
            padding: 2rem;
            background-color: rgba(var(--gv-secondary-rgb, 233, 196, 106), 0.1);
            /* Menggunakan secondary sebagai base */
            border: 1px dashed var(--gv-secondary);
            border-radius: var(--gv-radius-sm);
            color: var(--gv-text-muted);
        }

        .light-theme #no-results-message {
            --gv-secondary-rgb: 233, 196, 106;
        }

        .dark-theme #no-results-message {
            --gv-secondary-rgb: 240, 192, 89;
            /* Warna RGB untuk --gv-secondary tema gelap */
            background-color: rgba(var(--gv-secondary-rgb), 0.15);
            border-color: var(--gv-secondary);
            /* Warna sekunder tema gelap */
            color: var(--gv-text);
        }
    </style>
</head>

<body>

    <!-- Header/Navbar (Konsep: components/Navbar.html) -->
    <header>
        <nav class="navbar navbar-expand-lg fixed-top" aria-label="Navigasi Utama">
            <div class="container">
                <a class="navbar-brand" href="#home" aria-label="Green Valley - Beranda">
                    <i class="fas fa-leaf me-2"></i>Green Valley
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Buka/Tutup navigasi">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto align-items-center">
                        <li class="nav-item">
                            <a class="nav-link" href="#home">Beranda</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#listings">Apartemen</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#dashboard">Dasbor</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#crud">Manajemen</a>
                        </li>
                        <li class="nav-item ms-lg-3">
                            <button id="theme-toggle" aria-label="Ganti tema gelap/terang" title="Ganti Tema">
                                <i class="fas fa-moon"></i> {/* Ikon akan diubah oleh JS */}
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Area Konten Utama - Halaman akan dimuat di sini oleh JS -->
    <main id="main-content" role="main">
        <!-- Halaman Beranda (Konsep: pages/Home.html) -->
        <section id="page-home" class="page-section" aria-labelledby="home-heading">
            <div class="hero-section">
                <div class="container">
                    <h1 id="home-heading">Temukan Hunian Impian Anda di Green Valley</h1>
                    <p>Apartemen premium dengan fasilitas lengkap dan lokasi strategis. Nikmati kenyamanan dan kemewahan
                        dalam satu genggaman.</p>
                    <a href="#listings" class="btn btn-primary btn-lg">
                        Lihat Semua Properti <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
            <div class="container py-5">
                <h2 class="text-center mb-5">Kenapa Memilih Green Valley?</h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-map-marked-alt"></i></div>
                            <h3>Lokasi Strategis</h3>
                            <p>Akses mudah dan cepat ke pusat bisnis, area perbelanjaan ternama, dan berbagai pilihan
                                hiburan kota.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-concierge-bell"></i></div>
                            <h3>Fasilitas Premium</h3>
                            <p>Nikmati kolam renang eksklusif, pusat kebugaran modern, keamanan 24 jam, dan layanan
                                berkualitas lainnya.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                            <h3>Kenyamanan & Keamanan</h3>
                            <p>Lingkungan yang asri, tenang, desain interior memukau, serta sistem keamanan terpadu
                                untuk ketenangan Anda.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Halaman Daftar Apartemen (Konsep: pages/Listings.html) -->
        <section id="page-listings" class="page-section" aria-labelledby="listings-heading">
            <div class="container py-5">
                <h2 id="listings-heading" class="text-center mb-5">Daftar Apartemen Pilihan</h2>

                <!-- Komponen Formulir Pencarian -->
                <div class="search-form-container mb-5">
                    <form id="apartment-search-form" class="row g-3 align-items-end">
                        <div class="col-lg-3 col-md-6">
                            <label for="search-location" class="form-label">Lokasi</label>
                            <input type="text" class="form-control" id="search-location"
                                placeholder="cth: Jakarta Selatan">
                        </div>
                        <div class="col-lg-2 col-md-6">
                            <label for="search-type" class="form-label">Tipe Unit</label>
                            <select id="search-type" class="form-select" aria-label="Pilih tipe unit apartemen">
                                <option selected value="">Semua Tipe</option>
                                <option value="1BR">1 Kamar Tidur</option>
                                <option value="2BR">2 Kamar Tidur</option>
                                <option value="3BR+">3+ Kamar Tidur</option>
                                <option value="Studio">Studio</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <label for="search-checkin" class="form-label">Tanggal Check-in</label>
                            <input type="text" class="form-control datepicker" id="search-checkin"
                                placeholder="Pilih tanggal" aria-label="Tanggal Check-in">
                        </div>
                        <div class="col-lg-2 col-md-6">
                            <label for="search-price" class="form-label">Harga Maks (Juta)</label>
                            <input type="number" class="form-control" id="search-price" placeholder="cth: 15" min="0"
                                step="0.5" aria-label="Harga maksimal per bulan dalam jutaan Rupiah">
                        </div>
                        <div class="col-lg-2 col-md-12">
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="fas fa-search me-2"></i>Cari
                            </button>
                        </div>
                    </form>
                </div>

                <div class="filter-sort-bar d-flex flex-wrap justify-content-between align-items-center">
                    <p class="mb-2 mb-md-0" id="listing-count">Menampilkan 0 properti</p>
                    <div class="d-flex align-items-center">
                        <label for="sort-by" class="me-2 form-label mb-0 visually-hidden">Urutkan berdasarkan:</label>
                        <select id="sort-by" class="form-select form-select-sm d-inline-block w-auto"
                            aria-label="Urutkan properti">
                            <option value="default">Urutan Standar</option>
                            <option value="price-asc">Harga Terendah</option>
                            <option value="price-desc">Harga Tertinggi</option>
                            <option value="name-asc">Nama A-Z</option>
                        </select>
                    </div>
                </div>

                <div id="property-listings-container" class="row g-4 mt-3">
                    <!-- {/* Kartu properti akan disuntikkan di sini oleh JavaScript */} -->
                    <p id="no-results-message" class="text-center text-muted d-none col-12 py-4">
                        <i class="fas fa-search-minus fa-2x mb-3 d-block"></i>
                        Oops! Tidak ada properti yang sesuai dengan kriteria pencarian Anda. <br>Coba ubah filter atau
                        kata kunci pencarian.
                    </p>
                </div>
            </div>
        </section>

        <!-- Halaman Dasbor (Konsep: pages/Dashboard.html) -->
        <section id="page-dashboard" class="page-section" aria-labelledby="dashboard-heading">
            <div class="container py-5">
                <h2 id="dashboard-heading" class="text-center mb-5">Dasbor Pengguna</h2>
                <div class="row">
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-value" id="stat-viewed">12</div>
                            <p class="stat-label">Properti Dilihat</p>
                            <i class="fas fa-eye stat-icon"></i>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="stat-card border-secondary">
                            <div class="stat-value" id="stat-favorites">3</div>
                            <p class="stat-label">Favorit Saya</p>
                            <i class="fas fa-heart stat-icon"></i>
                        </div>
                    </div>
                    <!-- <div class="col-lg-4 col-md-12 mb-4"> {/* col-md-12 agar full width di medium jika hanya 3 item */} -->
                    <div class="stat-card border-accent">
                        <div class="stat-value" id="stat-bookings">1</div>
                        <p class="stat-label">Pemesanan Aktif</p>
                        <i class="fas fa-calendar-check stat-icon"></i>
                    </div>
                </div>
            </div>
            <div class="mt-5">
                <h3 class="h4 mb-3">Aktivitas Terbaru Anda</h3>
                <div class="list-group" id="recent-activity-list">
                    <a href="#"
                        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-eye me-2 text-muted"></i> Anda melihat "Apartemen Serene Heights"
                        </div>
                        <span class="badge bg-primary rounded-pill">2 jam lalu</span>
                    </a>
                    <a href="#"
                        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-heart me-2 text-danger"></i> Menambahkan "Villa Evergreen" ke favorit
                        </div>
                        <span class="badge bg-success rounded-pill">Kemarin</span>
                    </a>
                    <!-- {/* Aktivitas lain akan ditambahkan di sini */} -->
                </div>
            </div>
            </div>
        </section>

        <!-- Halaman CRUD (Konsep: pages/Crud.html) -->
        <section id="page-crud" class="page-section" aria-labelledby="crud-heading">
            <div class="container py-5">
                <h2 id="crud-heading" class="text-center mb-5">Manajemen Properti Anda</h2>
                <div class="form-section mb-5">
                    <h3 class="mb-4 h4" id="crud-form-title">Tambah Properti Baru</h3>
                    <form id="crud-property-form" novalidate>
                        <input type="hidden" id="crud-editing-id">
                        <div class="row g-3">
                            <div class="col-md-6 mb-3">
                                <label for="prop-name" class="form-label">Nama Properti <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="prop-name" required
                                    placeholder="cth: The Grand Apartment">
                                <div class="invalid-feedback">Nama properti wajib diisi.</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="prop-location" class="form-label">Lokasi <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="prop-location" required
                                    placeholder="cth: Jakarta Pusat">
                                <div class="invalid-feedback">Lokasi properti wajib diisi.</div>
                            </div>
                        </div>
                        <div class="row g-3">
                            <div class="col-md-4 mb-3">
                                <label for="prop-price" class="form-label">Harga (Juta Rp/bulan) <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="prop-price" step="0.1" min="0.1" required
                                    placeholder="cth: 10.5">
                                <div class="invalid-feedback">Harga harus angka positif.</div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="prop-type-crud" class="form-label">Tipe Unit <span
                                        class="text-danger">*</span></label>
                                <select id="prop-type-crud" class="form-select" required>
                                    <option value="" disabled selected>Pilih tipe...</option>
                                    <option value="Studio">Studio</option>
                                    <option value="1BR">1 Kamar Tidur</option>
                                    <option value="2BR">2 Kamar Tidur</option>
                                    <option value="3BR+">3+ Kamar Tidur</option>
                                </select>
                                <div class="invalid-feedback">Tipe unit wajib dipilih.</div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="prop-beds" class="form-label">K. Tidur <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="prop-beds" min="0" value="1" required>
                                <div class="invalid-feedback">Jumlah kamar tidur min. 0.</div>
                            </div>
                            <div class="col-md-2 mb-3">
                                <label for="prop-baths" class="form-label">K. Mandi <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="prop-baths" min="1" value="1" required>
                                <div class="invalid-feedback">Jumlah kamar mandi min. 1.</div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="prop-image-url" class="form-label">URL Gambar</label>
                            <input type="url" class="form-control" id="prop-image-url"
                                placeholder="https://example.com/image.jpg">
                            <div class="form-text">Gunakan URL gambar yang valid (jpg, png, webp). Jika kosong, gambar
                                placeholder akan digunakan.</div>
                        </div>
                        <div class="mb-3">
                            <label for="prop-description" class="form-label">Deskripsi Singkat</label>
                            <textarea class="form-control" id="prop-description" rows="3"
                                placeholder="Jelaskan keunggulan properti Anda..."></textarea>
                        </div>
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary" id="crud-submit-btn">
                                <i class="fas fa-plus-circle me-2"></i>Tambah Properti
                            </button>
                            <button type="button" class="btn btn-outline-secondary d-none" id="crud-cancel-edit-btn">
                                <i class="fas fa-times me-2"></i>Batal Edit
                            </button>
                        </div>
                    </form>
                </div>

                <h3 class="mt-5 mb-3 h4">Daftar Properti Saya</h3>
                <div id="crud-property-list" class="list-group">
                    <!-- {/* Item CRUD akan terdaftar di sini */} -->
                    <p class="text-muted" id="crud-empty-message">Belum ada properti yang Anda tambahkan. Silakan
                        gunakan formulir di atas.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer (Konsep: components/Footer.html) -->
    <footer class="mt-auto">
        <div class="container">
            <p class="mb-2">Â© <span id="current-year"></span> Green Valley Apartments. Hak Cipta Dilindungi
                Undang-Undang.</p>
            <p class="mb-2">Dirancang dengan <i class="fas fa-heart text-danger"></i> untuk kemudahan Anda.</p>
            <div>
                <a href="#" class="text-light me-2" aria-label="Kunjungi Facebook kami" title="Facebook"><i
                        class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-light me-2" aria-label="Kunjungi Twitter kami" title="Twitter"><i
                        class="fab fa-twitter"></i></a>
                <a href="#" class="text-light" aria-label="Kunjungi Instagram kami" title="Instagram"><i
                        class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    <!-- Templates HTML (Konsep: components/*.template.html) -->
    <template id="property-card-template">
        <div class="col-md-6 col-lg-4 mb-4"> {/* Pastikan ada margin bottom di sini atau di g-4 row */}
            <article class="property-card h-100">
                <div class="property-image-wrapper">
                    <img src="https://via.placeholder.com/400x250.png?text=Apartemen+Modern" alt="Gambar Properti"
                        class="property-image">
                </div>
                <div class="card-body">
                    <h3 class="card-title property-name h5">Nama Properti Akan Tampil Di Sini</h3>
                    <p class="property-location mb-2"><i class="fas fa-map-marker-alt me-1"></i> <span
                            class="location-text">Lokasi Properti</span></p>
                    <div class="features text-muted mb-3">
                        <span class="property-type" title="Tipe Unit"><i class="fas fa-door-open"></i> Tipe</span>
                        <span class="property-beds" title="Jumlah Kamar Tidur"><i class="fas fa-bed"></i> - Kamar</span>
                        <span class="property-baths" title="Jumlah Kamar Mandi"><i class="fas fa-bath"></i> -
                            K.Mandi</span>
                    </div>
                    <p class="property-description small mb-3">Deskripsi singkat properti akan muncul di sini,
                        memberikan gambaran umum tentang unit yang ditawarkan.</p>
                    <div class="price-cta-wrapper d-flex justify-content-between align-items-center mt-auto">
                        <p class="price property-price mb-0">Rp X.XXX.XXX</p>
                        <a href="#" class="btn btn-sm btn-outline-primary property-details-link">Lihat Detail</a>
                    </div>
                </div>
            </article>
        </div>
    </template>

    <template id="crud-list-item-template">
        <div class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center"
            style="background-color: var(--gv-card-bg); color: var(--gv-text); border-color: var(--gv-border-color);">
            <div class="me-auto mb-2 mb-md-0">
                <h4 class="mb-1 h6 crud-item-name">Nama Properti</h4>
                <small class="crud-item-location text-muted d-block"><i class="fas fa-map-pin me-1"></i> Lokasi</small>
                <small class="crud-item-price text-muted d-block"><i class="fas fa-dollar-sign me-1"></i> Harga: Rp
                    X.XXX.XXX</small>
            </div>
            <div class="ms-md-3">
                <button class="btn btn-sm btn-outline-secondary me-2 crud-edit-btn" title="Edit Properti"
                    aria-label="Edit Properti">
                    <i class="fas fa-edit"></i> Edit
                </button>
                <button class="btn btn-sm btn-outline-danger crud-delete-btn" title="Hapus Properti"
                    aria-label="Hapus Properti">
                    <i class="fas fa-trash"></i> Hapus
                </button>
            </div>
        </div>
    </template>


    <!-- Pustaka JavaScript Eksternal -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/id.js"></script> {/* Lokal untuk flatpickr Bahasa Indonesia */}

    <script>
        // --- JavaScript: Logika Aplikasi Utama (Konsep: assets/js/app.js) ---
        document.addEventListener('DOMContentLoaded', () => {

            // --- Utilitas Umum ---
            const $ = (selector) => document.querySelector(selector);
            const $$ = (selector) => document.querySelectorAll(selector);

            // --- Manajemen Tema (Gelap/Terang) ---
            const themeToggle = $('#theme-toggle');
            const htmlElement = document.documentElement;
            const moonIcon = 'fa-moon';
            const sunIcon = 'fa-sun';

            function applyTheme(theme) {
                htmlElement.setAttribute('data-bs-theme', theme); // Untuk komponen Bootstrap
                document.body.classList.toggle('dark-theme', theme === 'dark');
                document.body.classList.toggle('light-theme', theme === 'light');
                themeToggle.innerHTML = `<i class="fas ${theme === 'dark' ? sunIcon : moonIcon}"></i>`;
                localStorage.setItem('theme', theme);
            }

            const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            applyTheme(savedTheme);

            themeToggle.addEventListener('click', () => {
                const currentTheme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });


            // --- Router SPA Sederhana Berbasis Hash ---
            const pages = $$('.page-section');
            const navLinks = $$('.navbar .nav-link[href^="#"]');
            const mainContent = $('#main-content');

            function activatePage(pageId) {
                let pageFound = false;
                pages.forEach(page => {
                    const isActive = page.id === pageId;
                    page.classList.toggle('active', isActive);
                    if (isActive) {
                        pageFound = true;
                        // Atur fokus ke heading utama halaman untuk aksesibilitas
                        const mainHeading = page.querySelector('h1, h2');
                        if (mainHeading) {
                            mainHeading.setAttribute('tabindex', '-1'); // Buat bisa difokuskan
                            mainHeading.focus();
                        }
                    }
                });

                if (!pageFound && pageId !== 'page-home') { // Jika halaman tidak ditemukan, fallback ke home
                    console.warn(`Halaman dengan ID "${pageId}" tidak ditemukan. Mengarahkan ke beranda.`);
                    window.location.hash = '#home'; // Ini akan memicu handleRouteChange lagi
                    return; // Hentikan eksekusi lebih lanjut untuk pemanggilan ini
                }

                navLinks.forEach(link => {
                    const linkHref = link.getAttribute('href');
                    constisActive = linkHref === `#${pageId.replace('page-', '')}` || (pageId === 'page-home' && linkHref === '#home');
                    link.classList.toggle('active', isActive);
                    link.setAttribute('aria-current', isActive ? 'page' : 'false');
                });
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function handleRouteChange() {
                const hash = window.location.hash.substring(1) || 'home';
                activatePage(`page-${hash}`);
            }

            window.addEventListener('hashchange', handleRouteChange);
            handleRouteChange(); // Panggilan awal saat memuat halaman

            // Tutup navbar mobile setelah link diklik
            const navbarNav = $('#navbarNav');
            if (navbarNav) {
                navbarNav.addEventListener('click', (event) => {
                    if (event.target.matches('.nav-link') && navbarNav.classList.contains('show')) {
                        const toggler = $('.navbar-toggler');
                        if (getComputedStyle(toggler).display !== 'none') { // Hanya jika toggler terlihat (layar kecil)
                            try {
                                bootstrap.Collapse.getInstance(navbarNav)?.hide();
                            } catch (e) {
                                console.error("Gagal menyembunyikan navbar:", e);
                            }
                        }
                    }
                });
            }


            // --- Data Properti Awal (Konsep: assets/js/data.js) ---
            let apartments = [
                { id: Date.now() + 1, name: 'Apartemen Serene Heights', location: 'Jakarta Selatan', type: '2BR', beds: 2, baths: 1, price: 12000000, imageUrl: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=60', description: 'Pemandangan kota yang menakjubkan dengan interior modern dan akses mudah ke pusat bisnis utama.' },
                { id: Date.now() + 2, name: 'Green Valley Residence', location: 'BSD City, Tangerang', type: '3BR+', beds: 3, baths: 2, price: 18500000, imageUrl: 'https://images.unsplash.com/photo-1560185007-c5ca91ba2960?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=60', description: 'Lingkungan hijau asri, sangat cocok untuk keluarga yang mendambakan ketenangan dan fasilitas lengkap.' },
                { id: Date.now() + 3, name: 'Urban Oasis Loft', location: 'Jakarta Pusat', type: 'Studio', beds: 1, baths: 1, price: 8250000, imageUrl: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=60', description: 'Desain industrial chic di jantung kota, sangat dekat dengan berbagai moda transportasi publik dan pusat hiburan.' },
                { id: Date.now() + 4, name: 'Skyline View Apartment', location: 'Surabaya Barat', type: '1BR', beds: 1, baths: 1, price: 7500000, imageUrl: 'https://images.unsplash.com/photo-1480074568708-e7b720bb3f09?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=60', description: 'Nikmati pemandangan cakrawala kota yang spektakuler setiap hari dari apartemen elegan Anda.' },
                { id: Date.now() + 5, name: 'Cozy Nest Studio', location: 'Bandung Kota', type: 'Studio', beds: 0, baths: 1, price: 5000000, imageUrl: 'https://images.unsplash.com/photo-1501183638710-841dd1904471?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=60', description: 'Apartemen studio yang kecil namun sangat nyaman, terletak strategis di pusat kota Bandung, cocok untuk profesional muda.' },
                { id: Date.now() + 6, name: 'Riverside Retreat', location: 'Jakarta Timur', type: '2BR', beds: 2, baths: 2, price: 10000000, imageUrl: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=60', description: 'Hunian tenang di tepi sungai, menawarkan pelarian sempurna dari hiruk pikuk kota metropolitan, lengkap dengan jogging track.' },
            ];
            // Inisialisasi data CRUD dengan salinan data apartemen utama
            let crudProperties = JSON.parse(JSON.stringify(apartments));

            // --- Komponen: Logika Kartu Properti ---
            const propertyCardTemplate = $('#property-card-template');
            const listingsContainer = $('#property-listings-container');
            const noResultsMessage = $('#no-results-message');
            const listingCountElement = $('#listing-count');

            function formatPrice(price) {
                return `Rp ${new Intl.NumberFormat('id-ID').format(price)}`;
            }

            function renderPropertyCard(property) {
                if (!propertyCardTemplate) {
                    console.error("Template kartu properti tidak ditemukan!");
                    return document.createDocumentFragment(); // Kembalikan fragment kosong
                }
                const cardClone = propertyCardTemplate.content.cloneNode(true);
                const imageEl = cardClone.querySelector('.property-image');
                imageEl.src = property.imageUrl || `https://via.placeholder.com/400x250.png?text=${encodeURIComponent(property.name || 'Properti')}`;
                imageEl.alt = `Gambar ${property.name || 'Properti'}`;

                cardClone.querySelector('.property-name').textContent = property.name || 'Nama Tidak Tersedia';
                cardClone.querySelector('.location-text').textContent = property.location || 'Lokasi Tidak Diketahui';

                const typeText = property.type === '1BR' ? '1 Kamar' :
                    property.type === '2BR' ? '2 Kamar' :
                        property.type === '3BR+' ? '3+ Kamar' :
                            property.type === 'Studio' ? 'Studio' : 'Tipe Tidak Diketahui';
                cardClone.querySelector('.property-type').innerHTML = `<i class="fas fa-door-open"></i> ${typeText}`;

                cardClone.querySelector('.property-beds').innerHTML = `<i class="fas fa-bed"></i> ${property.beds} K.Tidur`;
                cardClone.querySelector('.property-baths').innerHTML = `<i class="fas fa-bath"></i> ${property.baths} K.Mandi`;
                cardClone.querySelector('.property-price').textContent = formatPrice(property.price);
                cardClone.querySelector('.property-description').textContent = property.description || 'Deskripsi tidak tersedia untuk properti ini.';

                // Tautan detail bisa diubah untuk navigasi ke halaman detail jika ada
                cardClone.querySelector('.property-details-link').href = `#detail-properti?id=${property.id}`; // Contoh link, belum diimplementasikan
                cardClone.querySelector('.property-details-link').setAttribute('aria-label', `Lihat detail untuk ${property.name}`);

                return cardClone;
            }

            function displayProperties(propertiesToDisplay) {
                if (!listingsContainer || !noResultsMessage || !listingCountElement) {
                    console.error("Elemen DOM untuk daftar properti tidak lengkap.");
                    return;
                }
                listingsContainer.innerHTML = ''; // Bersihkan yang ada
                if (propertiesToDisplay.length === 0) {
                    noResultsMessage.classList.remove('d-none');
                    listingsContainer.appendChild(noResultsMessage); // Pindahkan pesan ke dalam container
                } else {
                    noResultsMessage.classList.add('d-none');
                    propertiesToDisplay.forEach(prop => {
                        listingsContainer.appendChild(renderPropertyCard(prop));
                    });
                }
                listingCountElement.textContent = `Menampilkan ${propertiesToDisplay.length} dari ${apartments.length} properti`;
            }

            // Tampilan awal properti
            displayProperties(apartments);


            // --- Komponen: Logika Pencarian & Penyaringan ---
            const searchForm = $('#apartment-search-form');
            const sortBySelect = $('#sort-by');

            if (searchForm) {
                searchForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    filterAndSortProperties();
                });
            }
            if (sortBySelect) {
                sortBySelect.addEventListener('change', filterAndSortProperties);
            }

            function filterAndSortProperties() {
                const locationQuery = ($('#search-location')?.value || '').toLowerCase().trim();
                const typeQuery = $('#search-type')?.value || '';
                const priceVal = $('#search-price')?.value;
                const priceQuery = priceVal ? parseFloat(priceVal) * 1000000 : null;
                // const checkinQuery = $('#search-checkin').value; // Untuk penggunaan di masa depan

                let filtered = apartments.filter(apt => {
                    const matchesLocation = locationQuery ? (apt.location?.toLowerCase() || '').includes(locationQuery) : true;
                    const matchesType = typeQuery ? apt.type === typeQuery : true;
                    const matchesPrice = (priceQuery !== null && !isNaN(priceQuery)) ? apt.price <= priceQuery : true;
                    return matchesLocation && matchesType && matchesPrice;
                });

                const sortBy = sortBySelect?.value || 'default';
                if (sortBy === 'price-asc') {
                    filtered.sort((a, b) => a.price - b.price);
                } else if (sortBy === 'price-desc') {
                    filtered.sort((a, b) => b.price - a.price);
                } else if (sortBy === 'name-asc') {
                    filtered.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
                }
                displayProperties(filtered);
            }

            // Inisialisasi Flatpickr untuk pilihan tanggal
            try {
                flatpickr(".datepicker", {
                    dateFormat: "d-m-Y",
                    locale: "id", // Lokal Bahasa Indonesia
                    altInput: true, // Input alternatif yang lebih ramah pengguna
                    altFormat: "j F Y",
                    allowInput: true // Izinkan input manual
                });
            } catch (e) {
                console.warn("Flatpickr gagal diinisialisasi:", e);
            }


            // --- Halaman: Logika CRUD (Create, Read, Update, Delete) ---
            const crudForm = $('#crud-property-form');
            const crudListContainer = $('#crud-property-list');
            const crudListItemTemplate = $('#crud-list-item-template');
            const crudFormTitle = $('#crud-form-title');
            const crudSubmitBtn = $('#crud-submit-btn');
            const crudCancelEditBtn = $('#crud-cancel-edit-btn');
            const crudEditingIdInput = $('#crud-editing-id');
            const crudEmptyMessage = $('#crud-empty-message');

            function renderCrudListItem(property) {
                if (!crudListItemTemplate) {
                    console.error("Template item daftar CRUD tidak ditemukan!");
                    return document.createDocumentFragment();
                }
                const itemClone = crudListItemTemplate.content.cloneNode(true);
                const listItemElement = itemClone.firstElementChild;
                listItemElement.dataset.id = property.id;

                itemClone.querySelector('.crud-item-name').textContent = property.name || 'Tanpa Nama';
                itemClone.querySelector('.crud-item-location').textContent = property.location || 'Tanpa Lokasi';
                itemClone.querySelector('.crud-item-price').textContent = `Harga: ${formatPrice(property.price)}`;

                itemClone.querySelector('.crud-edit-btn').addEventListener('click', () => startEditProperty(property.id));
                itemClone.querySelector('.crud-delete-btn').addEventListener('click', () => deleteProperty(property.id, property.name));

                return itemClone;
            }

            function renderCrudList() {
                if (!crudListContainer || !crudEmptyMessage) {
                    console.error("Elemen DOM untuk daftar CRUD tidak lengkap.");
                    return;
                }
                crudListContainer.innerHTML = ''; // Bersihkan
                if (crudProperties.length === 0) {
                    crudEmptyMessage.classList.remove('d-none');
                    crudListContainer.appendChild(crudEmptyMessage);
                } else {
                    crudEmptyMessage.classList.add('d-none');
                    const sortedCrudProperties = [...crudProperties].sort((a, b) => (a.name || '').localeCompare(b.name || ''));
                    sortedCrudProperties.forEach(prop => {
                        crudListContainer.appendChild(renderCrudListItem(prop));
                    });
                }
            }

            function resetCrudForm() {
                crudForm.reset();
                crudForm.classList.remove('was-validated'); // Hapus status validasi Bootstrap
                crudFormTitle.textContent = 'Tambah Properti Baru';
                crudSubmitBtn.innerHTML = '<i class="fas fa-plus-circle me-2"></i>Tambah Properti';
                crudCancelEditBtn.classList.add('d-none');
                crudEditingIdInput.value = '';
                $('#prop-name').focus(); // Fokus ke input pertama
            }

            function startEditProperty(propertyId) {
                const propToEdit = crudProperties.find(p => p.id === propertyId);
                if (!propToEdit) return;

                crudFormTitle.textContent = 'Edit Properti';
                crudSubmitBtn.innerHTML = '<i class="fas fa-save me-2"></i>Simpan Perubahan';
                crudCancelEditBtn.classList.remove('d-none');
                crudEditingIdInput.value = propToEdit.id;

                $('#prop-name').value = propToEdit.name;
                $('#prop-location').value = propToEdit.location;
                $('#prop-price').value = propToEdit.price / 1000000; // Konversi kembali ke juta
                $('#prop-type-crud').value = propToEdit.type;
                $('#prop-beds').value = propToEdit.beds;
                $('#prop-baths').value = propToEdit.baths;
                $('#prop-image-url').value = propToEdit.imageUrl;
                $('#prop-description').value = propToEdit.description;

                crudForm.scrollIntoView({ behavior: 'smooth', block: 'start' });
                $('#prop-name').focus();
            }

            function deleteProperty(propertyId, propertyName) {
                if (confirm(`Anda yakin ingin menghapus properti "${propertyName || 'ini'}"? Tindakan ini tidak dapat diurungkan.`)) {
                    // Hapus dari daftar CRUD
                    crudProperties = crudProperties.filter(p => p.id !== propertyId);
                    // Hapus juga dari daftar utama (apartments)
                    apartments = apartments.filter(apt => apt.id !== propertyId);

                    renderCrudList();
                    filterAndSortProperties(); // Perbarui tampilan di halaman daftar properti utama
                    alert(`Properti "${propertyName || 'Tanpa Nama'}" berhasil dihapus.`);
                }
            }

            if (crudCancelEditBtn) {
                crudCancelEditBtn.addEventListener('click', resetCrudForm);
            }

            if (crudForm) {
                crudForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    if (!crudForm.checkValidity()) {
                        e.stopPropagation();
                        crudForm.classList.add('was-validated');
                        // Cari input invalid pertama dan fokuskan
                        const firstInvalidField = crudForm.querySelector(':invalid');
                        if (firstInvalidField) firstInvalidField.focus();
                        return;
                    }
                    crudForm.classList.add('was-validated'); // Tandai sebagai sudah divalidasi

                    const editingId = crudEditingIdInput.value ? parseInt(crudEditingIdInput.value) : null;

                    const propertyData = {
                        name: ($('#prop-name').value || '').trim(),
                        location: ($('#prop-location').value || '').trim(),
                        price: parseFloat($('#prop-price').value) * 1000000,
                        type: $('#prop-type-crud').value,
                        beds: parseInt($('#prop-beds').value) || 0,
                        baths: parseInt($('#prop-baths').value) || 1,
                        imageUrl: ($('#prop-image-url').value || '').trim(),
                        description: ($('#prop-description').value || '').trim(),
                    };

                    if (isNaN(propertyData.price) || propertyData.price <= 0) {
                        alert("Harga properti tidak valid. Mohon masukkan angka positif.");
                        $('#prop-price').focus();
                        return;
                    }
                    if (!propertyData.imageUrl) { // Gunakan placeholder jika URL gambar kosong
                        propertyData.imageUrl = `https://via.placeholder.com/400x250.png?text=${encodeURIComponent(propertyData.name || 'Properti Baru')}`;
                    }

                    let message = "";
                    if (editingId) { // Mode Edit
                        const indexInCrud = crudProperties.findIndex(p => p.id === editingId);
                        const indexInMain = apartments.findIndex(apt => apt.id === editingId);

                        if (indexInCrud !== -1) {
                            crudProperties[indexInCrud] = { ...crudProperties[indexInCrud], ...propertyData };
                        }
                        if (indexInMain !== -1) {
                            apartments[indexInMain] = { ...apartments[indexInMain], ...propertyData };
                        }
                        message = `Properti "${propertyData.name}" berhasil diperbarui.`;
                    } else { // Mode Tambah Baru
                        const newProperty = {
                            id: Date.now(), // ID unik sederhana berbasis waktu
                            ...propertyData
                        };
                        crudProperties.push(newProperty);
                        apartments.push(newProperty); // Tambahkan juga ke daftar utama
                        message = `Properti "${propertyData.name}" berhasil ditambahkan.`;
                    }

                    renderCrudList();
                    filterAndSortProperties(); // Perbarui tampilan di halaman daftar properti
                    resetCrudForm();
                    alert(message);
                });
            }

            // Render awal daftar CRUD
            renderCrudList();


            // --- Footer: Tahun Sekarang ---
            const currentYearElement = $('#current-year');
            if (currentYearElement) {
                currentYearElement.textContent = new Date().getFullYear();
            }

            // --- Inisialisasi State Dasbor (Contoh Sederhana) ---
            // Ini bisa diperbarui berdasarkan interaksi pengguna
            const statViewedEl = $('#stat-viewed');
            const statFavoritesEl = $('#stat-favorites');
            const statBookingsEl = $('#stat-bookings');

            if (statViewedEl) statViewedEl.textContent = '23'; // Contoh angka
            if (statFavoritesEl) statFavoritesEl.textContent = '5';  // Contoh angka
            if (statBookingsEl) statBookingsEl.textContent = '2';   // Contoh angka

            console.log("Aplikasi Green Valley berhasil dimuat dan diinisialisasi.");
        });
    </script>

</body>

</html>