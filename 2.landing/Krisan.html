<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Jelajahi properti terbaik di Green Valley. Temukan rumah, apartemen, dan villa impian Anda dengan pengalaman modern dan desain yang memukau.">
    <meta name="keywords"
        content="properti, real estate, rumah dijual, apartemen, villa, green valley, properti mewah, investasi properti">
    <meta name="author" content="Green Valley Premier Properties">
    <meta name="theme-color" content="#10b981"> <!-- Warna tema utama untuk UI browser di mobile -->
    <title>Green Valley Properties - Properti Impian Anda Menanti</title>

    <!-- Favicon (Emoji teks sebagai pengganti SVG/file, sesuai permintaan menghindari SVG jika memungkinkan) -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè°</text></svg>">
    <!-- Alternatif jika data URI SVG juga tidak diizinkan (misal, PNG base64 kecil):
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEQ0QjREMzA2NzREMTFFQUJCNzNGRkQ2RDg3NEI0NDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEQ0QjREMzE2NzREMTFFQUJCNzNGRkQ2RDg3NEI0NDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowRDRCNERDRTY3NEQxMUVBQkI3M0ZGRDZEODc0QjQ0MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowRDRCNERDRjY3NEQxMUVBQkI3M0ZGRDZEODc0QjQ0MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpHIJWMAAACPSURBVHjaYvz//z8DLsD8WqlGDBgwALEGjg3Q9H8P8g9M36cBAwYMsDEkIMNAIgYGht9gYqCAUXQkMM3FzJhEaGMQAWqgA5RCe2DIQGgHIsP//1g4GdgYFeXzMAlkZGRgeHgYkAUysrCwMDAwsTAx0UDFAAFGAKedFh0MDAwAAAAASUVORK5CYII=">
    -->

    <!-- Font Awesome Icons (CDN) - Sesuai permintaan -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- Variabel CSS Global untuk Tema dan Desain Fancy --- */
        :root {
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-secondary: 'Poppins', var(--font-primary);
            /* Font alternatif untuk heading */

            --color-primary: #10b981;
            /* Hijau Emerald Cerah */
            --color-primary-dark: #059669;
            --color-primary-light: #34d399;
            --color-secondary: #064e3b;
            /* Hijau Tua untuk Kontras atau Aksen Heading */
            --color-accent: #f59e0b;
            /* Kuning Keemasan untuk CTA dan elemen penting */
            --color-accent-dark: #d97706;

            --text-light: #f9fafb;
            /* Teks untuk background gelap */
            --text-dark: #1f2937;
            /* Teks untuk background terang */
            --text-muted-light: #6b7280;
            /* Teks sekunder/abu-abu pada background terang */
            --text-muted-dark: #9ca3af;
            /* Teks sekunder/abu-abu pada background gelap */

            --bg-light: #f7fafc;
            /* Background utama mode terang */
            --bg-light-alt: #ffffff;
            /* Background alternatif (mis. card) mode terang */
            --bg-dark: #111827;
            /* Background utama mode gelap */
            --bg-dark-alt: #1f2937;
            /* Background alternatif (mis. card) mode gelap */

            --border-light: #e5e7eb;
            --border-dark: #374151;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-fancy: 0px 8px 20px rgba(16, 185, 129, 0.2), 0px 4px 8px rgba(0, 0, 0, 0.08);
            /* Bayangan khas dengan warna primer */

            --border-radius-sm: 0.25rem;
            /* 4px */
            --border-radius-md: 0.5rem;
            /* 8px */
            --border-radius-lg: 0.75rem;
            /* 12px */
            --border-radius-xl: 1rem;
            /* 16px */
            --border-radius-full: 9999px;
            /* Untuk elemen bulat seperti tombol ikon */

            --transition-speed-fast: 0.15s;
            --transition-speed-medium: 0.3s;
            --transition-speed-slow: 0.5s;
            --transition-timing-function: ease-in-out;
            /* Fungsi transisi yang halus */

            --max-width-container: 1280px;
            /* Lebar maksimum kontainer utama */
            --spacing-unit: 1rem;
            /* 16px, unit dasar untuk padding/margin */
        }

        /* --- Reset CSS yang Lebih Komprehensif dan Base Styles --- */
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            /* Hilangkan highlight biru saat tap di mobile */
        }

        html {
            scroll-behavior: smooth;
            /* Scrolling halus saat navigasi anchor */
            font-size: 100%;
            /* Umumnya 16px */
            -webkit-text-size-adjust: 100%;
            /* Mencegah pembesaran font otomatis di iOS */
        }

        body {
            font-family: var(--font-primary);
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--bg-light);
            -webkit-font-smoothing: antialiased;
            /* Teks lebih halus di Webkit */
            -moz-osx-font-smoothing: grayscale;
            /* Teks lebih halus di Firefox */
            text-rendering: optimizeLegibility;
            transition: background-color var(--transition-speed-medium) var(--transition-timing-function),
                color var(--transition-speed-medium) var(--transition-timing-function);
            min-height: 100vh;
            display: flex;
            /* Memastikan footer menempel di bawah jika konten pendek */
            flex-direction: column;
        }

        body.dark-mode {
            color: var(--text-light);
            background-color: var(--bg-dark);
        }

        /* --- Aturan Tipografi yang Lebih Fancy --- */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-secondary);
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: calc(var(--spacing-unit) * 0.75);
            color: var(--color-secondary);
        }

        body.dark-mode h1,
        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode h4,
        body.dark-mode h5,
        body.dark-mode h6 {
            color: var(--color-primary-light);
        }

        h1 {
            font-size: 2.5rem;
        }

        /* 40px */
        h2 {
            font-size: 2rem;
        }

        /* 32px */
        h3 {
            font-size: 1.5rem;
        }

        /* 24px */
        h4 {
            font-size: 1.25rem;
        }

        /* 20px */
        p {
            margin-bottom: var(--spacing-unit);
        }

        @media (min-width: 768px) {

            /* Ukuran font lebih besar di layar lebih lebar */
            h1 {
                font-size: 3.25rem;
            }

            /* 52px */
            h2 {
                font-size: 2.5rem;
            }

            /* 40px */
            h3 {
                font-size: 1.75rem;
            }

            /* 28px */
        }

        a {
            text-decoration: none;
            color: var(--color-primary);
            transition: color var(--transition-speed-fast) var(--transition-timing-function);
        }

        a:hover,
        a:focus-visible {
            /* Menggunakan focus-visible untuk aksesibilitas keyboard yang lebih baik */
            color: var(--color-primary-dark);
            outline: 2px solid var(--color-accent);
            /* Outline jelas untuk focus */
            outline-offset: 2px;
        }

        body.dark-mode a {
            color: var(--color-primary-light);
        }

        body.dark-mode a:hover,
        body.dark-mode a:focus-visible {
            color: var(--text-light);
        }

        button,
        input,
        select,
        textarea {
            font-family: inherit;
            font-size: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius-md);
            padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 0.8);
            transition: border-color var(--transition-speed-fast) var(--transition-timing-function),
                box-shadow var(--transition-speed-fast) var(--transition-timing-function);
        }

        body.dark-mode button,
        body.dark-mode input,
        body.dark-mode select,
        body.dark-mode textarea {
            background-color: var(--bg-dark-alt);
            border-color: var(--border-dark);
            color: var(--text-light);
        }

        input:focus,
        select:focus,
        textarea:focus,
        button:focus-visible {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
            /* Shadow halus saat focus */
        }

        button:focus-visible {
            /* Khusus untuk button agar tidak selalu ada outline jika bukan dari keyboard */
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.4);
        }

        img,
        video {
            /* Gambar dan video responsif secara default */
            max-width: 100%;
            height: auto;
            display: block;
            /* Menghilangkan spasi di bawah gambar inline */
        }

        /* --- Sistem Grid dan Flexbox Utilities yang Ditingkatkan --- */
        .container {
            width: 100%;
            max-width: var(--max-width-container);
            margin-left: auto;
            margin-right: auto;
            padding-left: var(--spacing-unit);
            padding-right: var(--spacing-unit);
        }

        .grid {
            display: grid;
            gap: calc(var(--spacing-unit) * 1.5);
        }

        /* Grid otomatis yang menyesuaikan jumlah kolom berdasarkan lebar minimal item */
        .grid-auto-fit {
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
        }

        /* Utilitas kolom grid responsif (contoh) */
        @media (min-width: 640px) {

            /* sm */
            .sm\:grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 768px) {

            /* md */
            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
            }

            .md\:grid-cols-3 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {

            /* lg */
            .lg\:grid-cols-3 {
                grid-template-columns: repeat(3, 1fr);
            }

            .lg\:grid-cols-4 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Utilitas Flexbox dasar */
        .flex {
            display: flex;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .items-start {
            align-items: flex-start;
        }

        .items-end {
            align-items: flex-end;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-around {
            justify-content: space-around;
        }

        .justify-start {
            justify-content: flex-start;
        }

        .justify-end {
            justify-content: flex-end;
        }

        /* Utilitas Gap (untuk Flexbox & Grid) */
        .gap-1 {
            gap: calc(var(--spacing-unit) * 0.25);
        }

        .gap-2 {
            gap: calc(var(--spacing-unit) * 0.5);
        }

        .gap-4 {
            gap: var(--spacing-unit);
        }

        .gap-6 {
            gap: calc(var(--spacing-unit) * 1.5);
        }

        .gap-8 {
            gap: calc(var(--spacing-unit) * 2);
        }

        /* --- Komponen UI yang Ditingkatkan --- */
        .btn {
            display: inline-flex;
            /* Agar ikon dan teks sejajar */
            align-items: center;
            justify-content: center;
            padding: calc(var(--spacing-unit) * 0.75) calc(var(--spacing-unit) * 1.5);
            border-radius: var(--border-radius-md);
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            border: none;
            transition: background-color var(--transition-speed-fast) var(--transition-timing-function),
                transform var(--transition-speed-fast) var(--transition-timing-function),
                box-shadow var(--transition-speed-fast) var(--transition-timing-function);
            box-shadow: var(--shadow-sm);
        }

        .btn:hover {
            transform: translateY(-2px);
            /* Efek mengangkat saat hover */
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0px);
            /* Kembali ke posisi normal saat ditekan */
            box-shadow: var(--shadow-sm);
        }

        .btn--primary {
            background-color: var(--color-primary);
            color: var(--text-light);
        }

        .btn--primary:hover {
            background-color: var(--color-primary-dark);
        }

        body.dark-mode .btn--primary {
            background-color: var(--color-primary-light);
            color: var(--text-dark);
        }

        body.dark-mode .btn--primary:hover {
            background-color: var(--color-primary);
        }

        .btn--secondary {
            background-color: var(--bg-light-alt);
            color: var(--text-dark);
            border: 1px solid var(--border-light);
        }

        .btn--secondary:hover {
            background-color: #e9edf1;
        }

        body.dark-mode .btn--secondary {
            background-color: var(--bg-dark-alt);
            color: var(--text-light);
            border-color: var(--border-dark);
        }

        body.dark-mode .btn--secondary:hover {
            background-color: #374151;
        }

        .btn--accent {
            background-color: var(--color-accent);
            color: var(--text-light);
            /* Atau var(--text-dark) jika kuningnya sangat terang */
        }

        .btn--accent:hover {
            background-color: var(--color-accent-dark);
        }

        .btn--lg {
            /* Tombol lebih besar */
            padding: calc(var(--spacing-unit) * 0.9) calc(var(--spacing-unit) * 2);
            font-size: 1.1rem;
        }

        .btn--icon {
            /* Tombol hanya berisi ikon */
            padding: calc(var(--spacing-unit) * 0.5);
            min-width: auto;
        }

        .btn--icon i {
            font-size: 1.25rem;
        }

        /* Komponen Kartu (Card) */
        .card {
            background-color: var(--bg-light-alt);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            /* Penting untuk border-radius pada gambar */
            transition: transform var(--transition-speed-medium) var(--transition-timing-function),
                box-shadow var(--transition-speed-medium) var(--transition-timing-function);
            display: flex;
            flex-direction: column;
            /* Konten kartu tersusun vertikal */
            cursor: pointer;
            /* Menandakan bisa diklik */
        }

        .card:hover {
            transform: translateY(-6px) scale(1.02);
            /* Efek mengangkat dan sedikit membesar */
            box-shadow: var(--shadow-fancy);
            /* Bayangan lebih menonjol */
        }

        body.dark-mode .card {
            background-color: var(--bg-dark-alt);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            /* Penyesuaian bayangan untuk mode gelap */
        }

        body.dark-mode .card:hover {
            box-shadow: 0px 8px 20px rgba(16, 185, 129, 0.3), 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .card__image-container {
            width: 100%;
            aspect-ratio: 16 / 10;
            /* Rasio aspek gambar yang konsisten */
            overflow: hidden;
        }

        .card__image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Gambar mengisi kontainer tanpa distorsi */
            transition: transform var(--transition-speed-slow) var(--transition-timing-function);
        }

        .card:hover .card__image {
            transform: scale(1.05);
            /* Efek zoom pada gambar saat card di-hover */
        }

        .card__content {
            padding: var(--spacing-unit);
            flex-grow: 1;
            /* Konten mengisi sisa ruang di kartu */
            display: flex;
            flex-direction: column;
        }

        .card__title {
            font-size: 1.25rem;
            margin-bottom: calc(var(--spacing-unit) * 0.5);
            color: var(--color-secondary);
            /* Fitur untuk memotong teks jika terlalu panjang (ellipsis) */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        body.dark-mode .card__title {
            color: var(--color-primary-light);
        }

        .card__price {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: calc(var(--spacing-unit) * 0.25);
        }

        body.dark-mode .card__price {
            color: var(--color-primary-light);
        }

        .card__location {
            font-size: 0.9rem;
            color: var(--text-muted-light);
            margin-bottom: var(--spacing-unit);
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 0.25);
        }

        body.dark-mode .card__location {
            color: var(--text-muted-dark);
        }

        .card__footer {
            margin-top: auto;
            /* Mendorong footer kartu (mis. tombol) ke bawah */
            padding-top: var(--spacing-unit);
        }

        /* --- Navbar yang Lebih Fancy dengan Efek Glassmorphism --- */
        .navbar {
            background-color: rgba(255, 255, 255, 0.85);
            /* Semi-transparan untuk efek kaca */
            backdrop-filter: blur(10px);
            /* Efek blur di belakang navbar */
            -webkit-backdrop-filter: blur(10px);
            /* Untuk Safari */
            box-shadow: var(--shadow-md);
            position: sticky;
            /* Navbar menempel di atas saat scroll */
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            /* Di atas konten lain */
            padding: calc(var(--spacing-unit) * 0.75) 0;
            transition: background-color var(--transition-speed-medium) var(--transition-timing-function),
                box-shadow var(--transition-speed-medium) var(--transition-timing-function);
        }

        body.dark-mode .navbar {
            background-color: rgba(31, 41, 55, 0.85);
            /* Warna kaca mode gelap */
        }

        .navbar__container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .navbar__brand {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--color-secondary);
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 0.5);
        }

        .navbar__brand i {
            color: var(--color-primary);
        }

        body.dark-mode .navbar__brand {
            color: var(--color-primary-light);
        }

        .nav__list {
            display: flex;
            gap: calc(var(--spacing-unit) * 0.5);
            list-style: none;
        }

        .nav__item a {
            padding: calc(var(--spacing-unit) * 0.5) var(--spacing-unit);
            border-radius: var(--border-radius-md);
            font-weight: 500;
            transition: background-color var(--transition-speed-fast) var(--transition-timing-function),
                color var(--transition-speed-fast) var(--transition-timing-function);
            color: var(--text-dark);
        }

        .nav__item a:hover,
        .nav__item a.active {
            /* Kelas 'active' akan ditambahkan oleh JavaScript */
            background-color: var(--color-primary);
            color: var(--text-light) !important;
            /* Penting untuk override default link color */
        }

        body.dark-mode .nav__item a {
            color: var(--text-light);
        }

        body.dark-mode .nav__item a:hover,
        body.dark-mode .nav__item a.active {
            background-color: var(--color-primary-light);
            color: var(--text-dark) !important;
        }

        /* Tombol Menu Mobile & Navigasi Mobile */
        .mobile-menu-button {
            display: none;
            /* Tampil hanya di mobile, diatur oleh media query di bawah */
        }

        .mobile-nav {
            display: none;
            /* Defaultnya tersembunyi */
            flex-direction: column;
            position: absolute;
            top: 100%;
            /* Tepat di bawah navbar */
            left: 0;
            right: 0;
            background-color: var(--bg-light-alt);
            box-shadow: var(--shadow-lg);
            padding: var(--spacing-unit);
            border-bottom-left-radius: var(--border-radius-lg);
            border-bottom-right-radius: var(--border-radius-lg);
            /* Animasi buka-tutup */
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-10px);
            transition: max-height var(--transition-speed-medium) ease-out,
                opacity var(--transition-speed-medium) ease-out,
                transform var(--transition-speed-medium) ease-out;
        }

        .mobile-nav.open {
            /* Kelas untuk membuka menu mobile */
            display: flex;
            max-height: 80vh;
            /* Batas tinggi menu agar tidak terlalu panjang */
            opacity: 1;
            transform: translateY(0);
        }

        body.dark-mode .mobile-nav {
            background-color: var(--bg-dark-alt);
        }

        .mobile-nav .nav__item {
            width: 100%;
        }

        .mobile-nav .nav__item a {
            display: block;
            width: 100%;
            text-align: left;
            padding: var(--spacing-unit);
            /* Padding lebih besar untuk tap */
        }

        .mobile-nav .btn {
            width: 100%;
            margin-top: var(--spacing-unit);
        }


        /* --- Hero Section yang Lebih Dramatis --- */
        .hero {
            /* Gambar latar dengan overlay gradient untuk kontras teks */
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80&blur=2') no-repeat center center;
            background-size: cover;
            /* Gambar mengisi seluruh area hero */
            min-height: 85vh;
            /* Tinggi hero lebih besar */
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            text-align: center;
            padding: calc(var(--spacing-unit) * 2) var(--spacing-unit);
            position: relative;
            /* Untuk overlay tambahan jika diperlukan */
        }

        .hero::before {
            /* Overlay gradient halus tambahan di bagian bawah */
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0) 50%);
            z-index: 1;
            /* Di bawah konten, di atas background utama */
        }

        .hero__content {
            position: relative;
            /* Agar di atas overlay ::before */
            z-index: 2;
            max-width: 800px;
            /* Batasi lebar konten agar mudah dibaca */
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 800;
            /* Sangat tebal untuk judul hero */
            color: var(--text-light);
            /* Teks terang di atas background gelap */
            margin-bottom: var(--spacing-unit);
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
            /* Bayangan teks agar lebih terbaca */
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: calc(var(--spacing-unit) * 2);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.5);
        }

        @media (min-width: 768px) {
            .hero h1 {
                font-size: 4.5rem;
            }

            .hero p {
                font-size: 1.5rem;
            }
        }

        /* Form Pencarian di Hero dengan Efek Kaca */
        .hero__form {
            background-color: rgba(255, 255, 255, 0.15);
            /* Background semi-transparan */
            backdrop-filter: blur(8px);
            /* Efek blur untuk glassmorphism */
            -webkit-backdrop-filter: blur(8px);
            padding: calc(var(--spacing-unit) * 1.5);
            border-radius: var(--border-radius-lg);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
            /* Shadow lembut */
            border: 1px solid rgba(255, 255, 255, 0.18);
            /* Border halus untuk efek kaca */
            display: grid;
            gap: var(--spacing-unit);
            margin-top: calc(var(--spacing-unit) * 2);
        }

        body.dark-mode .hero__form {
            background-color: rgba(17, 24, 39, 0.25);
            /* Warna kaca mode gelap */
            border-color: rgba(255, 255, 255, 0.1);
        }

        @media (min-width: 768px) {

            /* Layout form di desktop */
            .hero__form {
                grid-template-columns: 1fr 1fr auto;
                /* Lokasi, Tipe, Tombol Cari */
                align-items: center;
            }
        }

        .hero__form input,
        .hero__form select {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            /* Input field lebih solid */
            color: var(--text-dark);
            border: 1px solid transparent;
            /* Hilangkan border default, akan di-style oleh .form-group */
        }

        body.dark-mode .hero__form input,
        body.dark-mode .hero__form select {
            background-color: rgba(31, 41, 55, 0.8);
            color: var(--text-light);
        }

        .hero__form input::placeholder {
            color: var(--text-muted-light);
        }

        body.dark-mode .hero__form input::placeholder {
            color: var(--text-muted-dark);
        }

        /* Styling untuk grup input dengan ikon */
        .hero__form .form-group {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.8);
            /* Background menyatu untuk ikon dan input */
            border-radius: var(--border-radius-md);
            padding-left: var(--spacing-unit);
            border: 1px solid var(--border-light);
            /* Border untuk grup */
        }

        body.dark-mode .hero__form .form-group {
            background-color: rgba(31, 41, 55, 0.8);
            border-color: var(--border-dark);
        }

        .hero__form .form-group i {
            color: var(--text-muted-light);
            margin-right: calc(var(--spacing-unit) * 0.5);
        }

        body.dark-mode .hero__form .form-group i {
            color: var(--text-muted-dark);
        }

        .hero__form .form-group input,
        .hero__form .form-group select {
            background-color: transparent;
            /* Input/select transparan di dalam .form-group */
            border: none;
            /* Border sudah di .form-group */
            padding-left: 0;
        }

        .hero__form .form-group input:focus,
        .hero__form .form-group select:focus {
            box-shadow: none;
            /* Hilangkan shadow focus karena grup sudah punya styling */
        }

        .hero__form .form-group:focus-within {
            /* Styling grup saat input di dalamnya fokus */
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
        }

        .hero__form .btn--primary {
            padding: calc(var(--spacing-unit) * 0.85) calc(var(--spacing-unit) * 2);
            /* Tombol search sedikit lebih besar */
            width: 100%;
        }

        @media (min-width: 768px) {
            .hero__form .btn--primary {
                width: auto;
            }
        }

        /* --- Section Styling Umum --- */
        .section {
            padding-top: calc(var(--spacing-unit) * 3);
            padding-bottom: calc(var(--spacing-unit) * 3);
        }

        .section--highlight {
            background-color: var(--bg-light-alt);
        }

        /* Section dengan background berbeda */
        body.dark-mode .section--highlight {
            background-color: var(--bg-dark-alt);
        }

        .section__header {
            /* Header untuk setiap section (judul & subjudul) */
            text-align: center;
            margin-bottom: calc(var(--spacing-unit) * 2.5);
        }

        .section__title {
            font-size: 2.25rem;
            margin-bottom: calc(var(--spacing-unit) * 0.5);
        }

        .section__subtitle {
            font-size: 1.1rem;
            color: var(--text-muted-light);
            max-width: 600px;
            /* Batasi lebar subjudul */
            margin-left: auto;
            margin-right: auto;
        }

        body.dark-mode .section__subtitle {
            color: var(--text-muted-dark);
        }

        /* --- Footer yang Lebih Profesional --- */
        .footer {
            background-color: var(--color-secondary);
            /* Warna hijau tua yang elegan */
            color: var(--text-light);
            padding: calc(var(--spacing-unit) * 3) 0;
            margin-top: auto;
            /* Memastikan footer menempel di bawah jika konten pendek */
        }

        .footer a {
            color: var(--color-primary-light);
        }

        .footer a:hover {
            color: var(--text-light);
            text-decoration: underline;
        }

        .footer__grid {
            display: grid;
            gap: calc(var(--spacing-unit) * 2);
        }

        @media (min-width: 768px) {

            /* Layout footer di desktop */
            .footer__grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        .footer__column h5 {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: var(--spacing-unit);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            /* Sedikit spasi antar huruf */
        }

        .footer__column ul {
            list-style: none;
        }

        .footer__column ul li {
            margin-bottom: calc(var(--spacing-unit) * 0.5);
        }

        .footer__socials {
            display: flex;
            gap: var(--spacing-unit);
        }

        .footer__socials a {
            font-size: 1.5rem;
            /* Ikon sosial lebih besar */
        }

        .footer__bottom {
            /* Bagian copyright di bawah footer */
            text-align: center;
            margin-top: calc(var(--spacing-unit) * 2);
            padding-top: calc(var(--spacing-unit) * 1.5);
            border-top: 1px solid var(--border-dark);
            /* Garis pemisah halus */
            font-size: 0.9rem;
            color: var(--text-muted-dark);
            /* Warna teks muted di footer gelap */
        }

        /* --- Animasi Halus dan Efek Visual --- */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Kelas utilitas untuk menerapkan animasi */
        .animate-fade-in {
            animation: fadeIn var(--transition-speed-slow) var(--transition-timing-function) both;
        }

        .animate-fade-in-up {
            animation: fadeInUp var(--transition-speed-slow) var(--transition-timing-function) both;
        }

        .animate-scale-in {
            animation: scaleIn var(--transition-speed-medium) var(--transition-timing-function) both;
        }

        /* Animasi stagger untuk memunculkan elemen satu per satu */
        .stagger-animation>* {
            opacity: 0;
            /* Mulai tidak terlihat */
        }

        .stagger-animation.animate-children>* {
            animation: fadeInUp var(--transition-speed-slow) var(--transition-timing-function) forwards;
            /* 'forwards' agar state akhir animasi tetap */
        }

        /* JavaScript akan menambahkan kelas .animate-children dan mengatur delay animasi */

        /* --- Scrollbar Kustom yang Fancy (Opsional, dukungan browser bervariasi) --- */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-light);
        }

        body.dark-mode ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-primary);
            border-radius: var(--border-radius-full);
            border: 2px solid var(--bg-light);
            /* Memberi sedikit jarak dari track */
        }

        body.dark-mode ::-webkit-scrollbar-thumb {
            background: var(--color-primary-light);
            border-color: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary-dark);
        }

        body.dark-mode ::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary);
        }

        /* Untuk Firefox */
        html {
            scrollbar-width: thin;
            /* 'auto' atau 'thin' */
            scrollbar-color: var(--color-primary) var(--bg-light);
            /* thumb track */
        }

        body.dark-mode html {
            scrollbar-color: var(--color-primary-light) var(--bg-dark);
        }


        /* --- Utilitas Aksesibilitas --- */
        .sr-only {
            /* Screen Reader Only: Menyembunyikan elemen secara visual tapi tetap terbaca oleh screen reader */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Focus visible global sudah diatur di a:focus-visible dan button:focus-visible */

        /* --- Utilitas Tambahan --- */
        .text-center {
            text-align: center;
        }

        .text-left {
            text-align: left;
        }

        .text-right {
            text-align: right;
        }

        .w-full {
            width: 100%;
        }

        .truncate {
            /* Memotong teks panjang dengan ellipsis */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Utilitas padding & margin sederhana (bisa diperbanyak jika perlu) */
        .py-8 {
            padding-top: calc(var(--spacing-unit) * 2);
            padding-bottom: calc(var(--spacing-unit) * 2);
        }

        .py-12 {
            padding-top: calc(var(--spacing-unit) * 3);
            padding-bottom: calc(var(--spacing-unit) * 3);
        }

        .px-4 {
            padding-left: var(--spacing-unit);
            padding-right: var(--spacing-unit);
        }

        .mt-4 {
            margin-top: var(--spacing-unit);
        }

        .mt-8 {
            margin-top: calc(var(--spacing-unit) * 2);
        }

        .mb-4 {
            margin-bottom: var(--spacing-unit);
        }

        .mb-8 {
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .mr-2 {
            margin-right: calc(var(--spacing-unit) * 0.5);
        }

        /* Utilitas Responsif untuk Menampilkan/Menyembunyikan Elemen */
        .hidden {
            display: none !important;
        }

        @media (max-width: 767px) {

            /* Mobile dan tablet kecil */
            .md\:hidden {
                display: none !important;
            }

            /* Sembunyikan di atas ukuran md (tablet) */
            .mobile-menu-button {
                display: inline-flex !important;
            }

            /* Tampilkan tombol menu mobile */
        }

        @media (min-width: 768px) {

            /* Medium devices (tablet) dan ke atas */
            .md\:block {
                display: block !important;
            }

            .md\:flex {
                display: flex !important;
            }

            .md\:grid {
                display: grid !important;
            }

            .hidden-md-up {
                display: none !important;
            }

            /* Sembunyikan di mobile, tampil di md ke atas */
        }

        /* Loading Spinner & Overlay untuk Transisi Halaman/Aksi */
        .loading-spinner-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            /* Overlay gelap transparan */
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);
            /* Efek blur tambahan */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            /* Di atas segalanya kecuali mungkin modal khusus */
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-speed-medium) ease, visibility 0s var(--transition-speed-medium) ease;
        }

        .loading-spinner-overlay.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity var(--transition-speed-medium) ease, visibility 0s ease;
        }

        .spinner {
            /* Spinner animasi CSS */
            width: 60px;
            height: 60px;
            border: 6px solid rgba(255, 255, 255, 0.3);
            /* Warna dasar border spinner */
            border-top-color: var(--color-primary-light);
            /* Warna bagian yang berputar (lebih kontras) */
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Loader Awal Aplikasi */
        .initial-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: fixed;
            /* Menutupi seluruh layar awal */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-light);
            color: var(--text-dark);
            z-index: 10000;
            /* Di atas segalanya saat loading awal */
            transition: opacity 0.3s ease-out, visibility 0s 0.3s ease-out;
            /* Transisi menghilang */
        }

        body.dark-mode .initial-loader {
            background-color: var(--bg-dark);
            color: var(--text-light);
        }

        .initial-loader .spinner {
            /* Spinner untuk loader awal */
            border-color: rgba(0, 0, 0, 0.1);
            /* Warna dasar berbeda sedikit */
            border-top-color: var(--color-primary);
        }

        body.dark-mode .initial-loader .spinner {
            border-color: rgba(255, 255, 255, 0.1);
            border-top-color: var(--color-primary-light);
        }

        .initial-loader p {
            margin-top: var(--spacing-unit);
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Gaya Spesifik Halaman Detail Properti */
        .property-detail__image {
            width: 100%;
            max-height: 60vh;
            /* Batasi tinggi gambar utama */
            object-fit: cover;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .property-detail__features {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            /* Grid responsif untuk fitur */
            gap: var(--spacing-unit);
            margin: calc(var(--spacing-unit) * 1.5) 0;
        }

        .property-detail__features li {
            background-color: var(--bg-light);
            /* Sedikit beda dari card biasa agar lebih menyatu */
            padding: var(--spacing-unit);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 0.5);
        }

        body.dark-mode .property-detail__features li {
            background-color: var(--bg-dark);
        }

        .property-detail__features i {
            color: var(--color-primary);
            font-size: 1.2rem;
        }

        /* Kartu Agen di Halaman Detail */
        .property-detail__agent-card {
            background-color: var(--bg-light);
            padding: calc(var(--spacing-unit) * 1.5);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            margin-top: calc(var(--spacing-unit) * 2);
        }

        body.dark-mode .property-detail__agent-card {
            background-color: var(--bg-dark);
        }

        .agent-card__avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: var(--spacing-unit);
            border: 3px solid var(--color-primary);
            /* Border dengan warna primer */
        }

        /* Styling untuk teks dari AI (mirip kelas 'prose' di Tailwind) */
        .prose {
            color: var(--text-dark);
            max-width: 65ch;
            /* Lebar optimal untuk keterbacaan teks panjang */
        }

        .prose h4 {
            /* Heading di dalam konten AI */
            color: var(--color-secondary);
            font-size: 1.15rem;
            /* Sedikit lebih kecil dari h3 global */
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }

        .prose p,
        .prose ul,
        .prose ol {
            font-size: 1rem;
            line-height: 1.7;
            /* Spasi baris yang nyaman */
            margin-bottom: 1em;
        }

        .prose ul,
        .prose ol {
            padding-left: 1.5em;
            /* Indentasi list */
        }

        .prose li>p {
            margin-bottom: 0.5em;
            /* Jarak antar paragraf dalam list item */
        }

        .prose strong {
            font-weight: 600;
            color: var(--color-secondary);
        }

        .prose em {
            font-style: italic;
            color: var(--color-primary-dark);
        }

        .prose a {
            color: var(--color-primary);
            text-decoration: underline;
        }

        .prose a:hover {
            color: var(--color-primary-dark);
        }

        /* Mode gelap untuk .prose */
        body.dark-mode .prose {
            color: var(--text-light);
        }

        body.dark-mode .prose h4 {
            color: var(--color-primary-light);
        }

        body.dark-mode .prose strong {
            color: var(--color-primary-light);
        }

        body.dark-mode .prose em {
            color: var(--color-primary-light);
            opacity: 0.9;
        }

        body.dark-mode .prose a {
            color: var(--color-primary-light);
        }

        body.dark-mode .prose a:hover {
            color: var(--text-light);
        }

        .max-w-none {
            max-width: none;
        }

        /* Utility untuk menghapus max-width jika .prose perlu full width */
    </style>
</head>

<body>
    <!-- Root element untuk aplikasi SPA -->
    <div id="app-root">
        <!-- Loader awal saat aplikasi pertama kali dimuat -->
        <div class="initial-loader">
            <div class="spinner"></div>
            <p>Memuat Green Valley Properties...</p>
        </div>
    </div>

    <!-- Overlay untuk loading state antar halaman/aksi -->
    <div id="loading-overlay" class="loading-spinner-overlay">
        <div class="spinner"></div>
    </div>

    <script type="module">
        // --- KONFIGURASI APLIKASI ---
        const CONFIG = {
            appName: "Green Valley Properties",
            defaultPath: '/', // Halaman default jika tidak ada hash
            apiBaseUrl: "https://mock-api.greenvalley.com", // Placeholder, tidak digunakan secara nyata
            geminiApiKey: "YOUR_MOCK_API_KEY_HERE", // Placeholder, tidak digunakan secara nyata
            themeKey: 'greenValleyTheme' // Key untuk localStorage tema
        };

        // --- MOCK GOOGLE GEN AI SERVICE (Simulasi, seperti di kode asli) ---
        // Kelas ini mensimulasikan panggilan ke layanan AI generatif untuk konten.
        class MockGoogleGenAI {
            constructor(apiKey) {
                this.apiKey = apiKey; // Disimpan tapi tidak digunakan untuk validasi di mock ini
                if (!this.apiKey || this.apiKey === "YOUR_MOCK_API_KEY_HERE") {
                    console.warn("Kunci API Mock Gemini tidak disetel atau menggunakan placeholder. Fitur AI akan menghasilkan teks default.");
                }
            }

            // Fungsi utama untuk menghasilkan konten berdasarkan prompt
            async generateContent({ prompt, propertyDetails = null }) {
                // Simulasi delay jaringan agar terasa seperti panggilan API sungguhan
                await new Promise(resolve => setTimeout(resolve, 400 + Math.random() * 600));

                let responseText = `Konten AI simulasi untuk prompt: "${String(prompt).substring(0, 50)}...".`;
                const lowerPrompt = String(prompt).toLowerCase(); // Ubah prompt ke huruf kecil untuk pencocokan yang lebih mudah

                // Logika untuk menghasilkan teks berbeda berdasarkan prompt
                if (lowerPrompt.includes("deskripsi listing properti")) {
                    const prop = propertyDetails || {}; // Gunakan detail properti jika ada, atau objek kosong
                    // Ambil detail properti dengan fallback jika tidak ada
                    const tipe = prop.type || 'properti menawan';
                    const lokasi = prop.location || 'lokasi strategis';
                    const kamar = prop.beds || 'beberapa';
                    const mandi = prop.baths || 'beberapa';
                    const luas = prop.area || 'yang lapang';
                    const harga = prop.price ? `Rp ${prop.price.toLocaleString('id-ID')}` : 'harga menarik';
                    const fasilitas = prop.amenities?.slice(0, 3).join(', ') || 'berbagai fasilitas modern'; // Ambil 3 fasilitas pertama atau default

                    // Format teks deskripsi dengan HTML
                    responseText = `
                        <h4>‚ú® <strong>${tipe.charAt(0).toUpperCase() + tipe.slice(1)} Impian Anda di ${lokasi}!</strong> ‚ú®</h4>
                        <p>Selamat datang di ${tipe} eksklusif ini, sebuah mahakarya arsitektur yang menawarkan perpaduan sempurna antara kemewahan kontemporer dan kenyamanan hunian. Terletak strategis di jantung ${lokasi}, properti ini adalah oasis kedamaian di tengah hiruk pikuk kota, atau surga ketenangan di destinasi pilihan.</p>
                        <p>Dengan <strong>${kamar} kamar tidur</strong> yang dirancang elegan dan <strong>${mandi} kamar mandi</strong> berfasilitas premium, setiap sudut properti ini memancarkan kualitas dan perhatian terhadap detail. Ruang utama seluas <strong>${luas} m¬≤</strong> menyediakan area yang lapang untuk aktivitas keluarga dan menjamu tamu dengan gaya.</p>
                        <p>Nikmati beragam fasilitas unggulan termasuk: <em>${fasilitas}${prop.amenities && prop.amenities.length > 3 ? ', dan masih banyak lagi' : ''}</em>. Semua keistimewaan ini dapat menjadi milik Anda dengan penawaran ${harga}.</p>
                        <p>Jangan lewatkan kesempatan langka untuk memiliki properti idaman ini. Hubungi kami sekarang untuk mengatur jadwal kunjungan eksklusif dan biarkan tim profesional kami membantu Anda mewujudkan impian properti Anda bersama Green Valley!</p>
                    `;
                } else if (lowerPrompt.includes("slogan iklan")) {
                    const slogans = [ // Pilihan slogan acak
                        "Green Valley: Membangun Masa Depan, Satu Rumah Impian.",
                        "Di Green Valley, Setiap Properti Adalah Permata.",
                        "Green Valley: Investasi Cerdas, Kehidupan Berkualitas.",
                        "Wujudkan Hunian Ideal Anda Bersama Green Valley Properties."
                    ];
                    responseText = slogans[Math.floor(Math.random() * slogans.length)];
                } else if (lowerPrompt.includes("tips membeli properti")) {
                    responseText = `
                        <h5>Tips Cerdas Membeli Properti dari Green Valley:</h5>
                        <ul>
                            <li><strong>Definisikan Kebutuhan & Anggaran:</strong> Pahami apa yang Anda cari dan berapa kemampuan finansial Anda secara realistis.</li>
                            <li><strong>Riset Lokasi Mendalam:</strong> Pertimbangkan aksesibilitas, fasilitas umum, potensi pertumbuhan, dan keamanan lingkungan.</li>
                            <li><strong>Gunakan Jasa Agen Terpercaya:</strong> Agen profesional seperti di Green Valley dapat menghemat waktu, tenaga, dan memberikan saran ahli.</li>
                            <li><strong>Inspeksi Properti Secara Teliti:</strong> Periksa kondisi fisik bangunan, legalitas dokumen, dan potensi biaya tersembunyi.</li>
                            <li><strong>Jangan Terburu-buru:</strong> Pembelian properti adalah keputusan besar. Ambil waktu Anda untuk mempertimbangkan semua aspek.</li>
                        </ul>
                    `;
                } else if (lowerPrompt.includes("visi dan misi")) {
                    responseText = `
                        <h4>Visi Kami</h4>
                        <p>Menjadi perusahaan properti terdepan dan paling tepercaya di Indonesia, dikenal karena inovasi, integritas, dan komitmen kami dalam menciptakan nilai berkelanjutan bagi klien, mitra, dan masyarakat.</p>
                        <h4>Misi Kami</h4>
                        <ul>
                            <li>Menyediakan solusi properti yang komprehensif dan personal, melebihi ekspektasi klien melalui layanan berkualitas tinggi.</li>
                            <li>Mengembangkan dan memasarkan properti inovatif yang meningkatkan kualitas hidup dan memberikan investasi optimal.</li>
                            <li>Membangun hubungan jangka panjang yang didasarkan pada kepercayaan, profesionalisme, dan transparansi.</li>
                            <li>Berkontribusi positif terhadap pengembangan komunitas dan lingkungan di mana kami beroperasi.</li>
                        </ul>
                    `;
                }
                // Mengembalikan objek yang meniru respons API Gemini
                return { text: () => responseText };
            }
        }
        // Inisialisasi layanan Gemini (mock)
        const geminiService = {
            ai: new MockGoogleGenAI(CONFIG.geminiApiKey),
            generateText: async (prompt, propertyDetails = null) => {
                try {
                    const result = await geminiService.ai.generateContent({ prompt, propertyDetails });
                    return result.text();
                } catch (error) {
                    console.error("Kesalahan saat menghasilkan teks dari Mock Gemini:", error);
                    return "<p class='text-red-500'>Maaf, terjadi kesalahan saat menghasilkan konten. Silakan coba lagi nanti.</p>"; // Pesan error fallback
                }
            }
        };


        // --- MANAJEMEN STATE APLIKASI ---
        // Objek global untuk menyimpan state aplikasi.
        let appState = {
            currentPath: window.location.hash.slice(1) || CONFIG.defaultPath, // Path halaman saat ini
            properties: [], // Array untuk menyimpan data semua properti
            searchFilters: { location: '', type: '', minPrice: '', maxPrice: '', beds: '' }, // Filter pencarian
            isDarkMode: localStorage.getItem(CONFIG.themeKey) === 'dark' || // Cek tema dari localStorage atau preferensi sistem
                (!localStorage.getItem(CONFIG.themeKey) && window.matchMedia('(prefers-color-scheme: dark)').matches),
            isLoading: false, // Status loading global
            mobileMenuOpen: false, // Status menu mobile (terbuka/tertutup)
            propertyDetailCache: {}, // Cache sederhana untuk detail properti yang sudah dibuka
            currentPageTitle: CONFIG.appName, // Judul halaman saat ini
        };

        // --- DATA MOCK PROPERTI (Lebih beragam dan detail) ---
        // Data properti statis untuk digunakan dalam aplikasi.
        const mockProperties = [
            { id: 1, name: 'Villa Azure Dengan Pemandangan Samudra', type: 'Villa', location: 'Bukit Jimbaran, Bali', price: 7500000000, beds: 5, baths: 6, area: 650, image: 'https://images.unsplash.com/photo-1613490493576-7fde63acd811?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', featured: true, amenities: ['Kolam Renang Pribadi Infinity', 'Bioskop Mini', 'Gym & Spa Pribadi', 'Pemandangan Laut Lepas 180¬∞', 'Garasi 3 Mobil', 'Taman Tropis Luas', 'Ruang Anggur', 'Sistem Keamanan Canggih'], agent: { name: 'Rizky Pratama', phone: '0812-3456-7890', avatar: 'https://randomuser.me/api/portraits/men/32.jpg' } },
            { id: 2, name: 'Apartemen Urban Chic di Jantung Metropolis', type: 'Apartemen', location: 'SCBD, Jakarta Selatan', price: 3200000000, beds: 2, baths: 2, area: 120, image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', featured: true, amenities: ['Akses Lift Pribadi', 'Smart Home System Terintegrasi', 'Kolam Renang Rooftop dengan Pemandangan Kota', 'Fitness Center & Sauna', 'Area BBQ & Lounge', 'Parkir Basement Khusus'], agent: { name: 'Siti Aminah', phone: '0812-9876-5432', avatar: 'https://randomuser.me/api/portraits/women/44.jpg' } },
            { id: 3, name: 'Rumah Keluarga Klasik Elegan dan Luas', type: 'Rumah', location: 'Pondok Indah, Jakarta Selatan', price: 15000000000, beds: 4, baths: 4, area: 450, image: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', featured: false, amenities: ['Taman Belakang Luas dengan Gazebo', 'Ruang Kerja Pribadi', 'Dapur Kering & Basah Modern', 'Garasi 2 Mobil + Carport 2 Mobil', 'Keamanan 24 Jam One Gate System', 'Dekat Sekolah Internasional'], agent: { name: 'Budi Santoso', phone: '0812-1122-3344', avatar: 'https://randomuser.me/api/portraits/men/35.jpg' } },
            { id: 4, name: 'Studio Minimalis Modern untuk Profesional', type: 'Apartemen', location: 'BSD City, Tangerang', price: 850000000, beds: 1, baths: 1, area: 45, image: 'https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', featured: true, amenities: ['Co-working Space & Library', 'Kolam Renang Bersama Olympic Size', 'Jogging Track & Outdoor Gym', 'Dekat Stasiun KRL & Akses Tol', 'Shuttle Bus ke Area Komersial'], agent: { name: 'Lina Mariska', phone: '0812-5566-7788', avatar: 'https://randomuser.me/api/portraits/women/30.jpg' } },
            { id: 5, name: 'Townhouse Eksklusif Komunitas Asri', type: 'Rumah', location: 'Sentul City, Bogor', price: 2100000000, beds: 3, baths: 3, area: 180, image: 'https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', featured: false, amenities: ['Clubhouse Komunitas Lengkap', 'Taman Bermain Anak Tematik', 'Sistem Satu Gerbang dengan CCTV', 'Udara Segar Pegunungan', 'Dekat Area Wisata Alam'], agent: { name: 'Agus Wijaya', phone: '0812-9988-7766', avatar: 'https://randomuser.me/api/portraits/men/40.jpg' } },
            { id: 6, name: 'Penthouse Mewah Pemandangan Kota 360¬∞', type: 'Apartemen', location: 'Kuningan, Jakarta Pusat', price: 25000000000, beds: 4, baths: 5, area: 500, image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', featured: true, amenities: ['Jacuzzi Pribadi di Balkon Utama', 'Rooftop Garden Pribadi', 'Layanan Concierge 24/7', 'Akses Helipad (Opsional)', 'Interior Desainer Ternama', 'Material Impor Berkualitas Tinggi'], agent: { name: 'Dewi Lestari', phone: '0812-0011-2233', avatar: 'https://randomuser.me/api/portraits/women/50.jpg' } },
        ];
        appState.properties = mockProperties; // Isi state dengan data mock


        // --- FUNGSI UTILITAS ---
        // Kumpulan fungsi helper untuk berbagai keperluan.
        const utils = {
            /**
             * Membuat elemen HTML dengan properti dan anak-anaknya.
             * @param {string} tag Nama tag HTML.
             * @param {object} props Properti elemen (mis. className, id, onClick).
             * @param  {...(Node|string|null|undefined|false)} children Anak-anak elemen.
             * @returns {HTMLElement} Elemen HTML yang dibuat.
             */
            createElement: (tag, props = {}, ...children) => {
                const element = document.createElement(tag);
                Object.entries(props).forEach(([key, value]) => {
                    if (key.startsWith('on') && typeof value === 'function') { // Penanganan event listener
                        element.addEventListener(key.substring(2).toLowerCase(), value);
                    } else if (key === 'className') { // Set kelas CSS
                        element.className = value;
                    } else if (key === 'style' && typeof value === 'object') { // Set gaya inline
                        Object.assign(element.style, value);
                    } else if (key === 'dangerouslySetInnerHTML' && value && typeof value.__html === 'string') {
                        // Hati-hati menggunakan ini, hanya untuk konten tepercaya (seperti dari AI mock kita)
                        element.innerHTML = value.__html;
                    } else if (key === 'ref' && typeof value === 'function') { // Callback untuk mendapatkan referensi elemen
                        value(element);
                    }
                    // Set atribut lain jika value tidak null, undefined, atau false
                    else if (value !== null && value !== undefined && value !== false) {
                        element.setAttribute(key, value);
                    }
                });
                // Tambahkan anak-anak elemen
                children.flat().forEach(child => { // .flat() untuk menangani array anak
                    if (child instanceof Node) { // Jika anak adalah Node DOM
                        element.appendChild(child);
                    } else if (child !== null && child !== undefined && child !== false) { // Jika anak adalah string atau angka
                        element.appendChild(document.createTextNode(String(child)));
                    }
                });
                return element;
            },
            /**
             * Debounce: Menunda eksekusi fungsi sampai setelah `delay` ms tidak ada panggilan baru.
             * @param {Function} func Fungsi yang akan di-debounce.
             * @param {number} delay Waktu tunda dalam milidetik.
             * @returns {Function} Fungsi yang sudah di-debounce.
             */
            debounce: (func, delay) => {
                let timeout;
                return (...args) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), delay);
                };
            },
            /**
             * Throttle: Membatasi eksekusi fungsi agar tidak lebih dari sekali setiap `limit` ms.
             * (Tidak terlalu dibutuhkan di aplikasi ini, tapi sebagai utilitas umum)
             * @param {Function} func Fungsi yang akan di-throttle.
             * @param {number} limit Batas waktu dalam milidetik.
             * @returns {Function} Fungsi yang sudah di-throttle.
             */
            throttle: (func, limit) => {
                let inThrottle;
                return (...args) => {
                    if (!inThrottle) {
                        func.apply(this, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                };
            },
            /**
             * Mengatur status loading global dan menampilkan/menyembunyikan overlay.
             * @param {boolean} isLoading True jika loading, false jika tidak.
             */
            setLoading: (isLoading) => {
                appState.isLoading = isLoading;
                const overlay = document.getElementById('loading-overlay');
                if (overlay) {
                    overlay.classList.toggle('visible', isLoading);
                }
            },
            /**
             * Memformat angka menjadi string mata uang Rupiah.
             * @param {number} amount Jumlah uang.
             * @returns {string} String mata uang (mis. "Rp 1.000.000").
             */
            formatCurrency: (amount) => {
                if (typeof amount !== 'number') return 'N/A';
                return `Rp ${amount.toLocaleString('id-ID', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
            },
            /**
             * Menerapkan animasi stagger (muncul satu per satu) pada anak-anak elemen.
             * @param {HTMLElement} parentElement Elemen induk yang anaknya akan dianimasikan.
             * @param {number} [delayIncrement=100] Penambahan delay antar anak (ms).
             */
            applyStaggerAnimation: (parentElement, delayIncrement = 100) => {
                if (!parentElement || !parentElement.classList.contains('stagger-animation')) return;
                const children = Array.from(parentElement.children);
                parentElement.classList.add('animate-children'); // Aktifkan rule CSS untuk animasi
                children.forEach((child, index) => {
                    child.style.animationDelay = `${index * delayIncrement}ms`; // Set delay animasi
                });
            },
            /** Gulir halaman ke atas dengan smooth. */
            scrollToTop: () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            },
            /**
             * Mengupdate judul dokumen HTML.
             * @param {string} pageTitle Judul halaman baru.
             */
            updateDocumentTitle: (pageTitle) => {
                document.title = `${pageTitle} | ${CONFIG.appName}`;
                appState.currentPageTitle = pageTitle;
            }
        };

        // --- ROUTER SEDERHANA (Berbasis Hash) ---
        // Mengelola navigasi antar halaman dalam SPA.
        const router = {
            routes: {}, // Objek untuk menyimpan definisi rute
            /**
             * Menambahkan definisi rute baru.
             * @param {string} path Path rute (mis. '/', '/search').
             * @param {Function} componentFunction Fungsi yang merender komponen halaman.
             * @param {string} title Judul halaman untuk rute ini.
             */
            addRoute: (path, componentFunction, title) => {
                router.routes[path] = { component: componentFunction, title };
            },
            /**
             * Navigasi ke path tertentu dengan parameter.
             * @param {string} path Path tujuan (bisa mengandung placeholder seperti '/property/:id').
             * @param {object} [params={}] Parameter untuk mengisi placeholder di path.
             */
            navigateTo: async (path, params = {}) => {
                let targetPath = path;
                // Ganti placeholder di path dengan nilai parameter
                for (const key in params) {
                    targetPath = targetPath.replace(`:${key}`, encodeURIComponent(params[key]));
                }
                // Hanya navigasi jika path berbeda untuk menghindari reload yang tidak perlu
                if (window.location.hash.slice(1) === targetPath) {
                    console.log("Navigasi ke path yang sama, tidak ada perubahan hash.");
                    // Jika perlu refresh paksa meski path sama, bisa panggil renderApp() di sini.
                    return;
                }
                window.location.hash = targetPath; // Mengubah hash URL, akan memicu 'hashchange'
                // Perubahan hash akan secara otomatis memanggil renderApp() melalui event listener.
            },
            /**
             * Mencari dan mengembalikan komponen dan parameter yang sesuai dengan hash URL saat ini.
             * @returns {{component: Function, title: string, params: object}} Objek berisi komponen, judul, dan parameter.
             */
            resolveRoute: () => {
                const rawPath = window.location.hash.slice(1) || CONFIG.defaultPath;
                const pathName = rawPath.split('?')[0]; // Abaikan query string untuk pencocokan rute

                // Iterasi melalui rute yang terdaftar untuk menemukan yang cocok
                for (const routePattern in router.routes) {
                    const routePatternParts = routePattern.split('/');
                    const pathNameParts = pathName.split('/');

                    if (routePatternParts.length === pathNameParts.length) { // Cocokkan jumlah segmen path
                        const params = {}; // Objek untuk menyimpan parameter dari path
                        let match = true;
                        for (let i = 0; i < routePatternParts.length; i++) {
                            if (routePatternParts[i].startsWith(':')) { // Jika segmen adalah parameter (mis. ':id')
                                params[routePatternParts[i].slice(1)] = decodeURIComponent(pathNameParts[i]);
                            } else if (routePatternParts[i] !== pathNameParts[i]) { // Jika segmen statis tidak cocok
                                match = false;
                                break;
                            }
                        }
                        if (match) { // Jika semua segmen cocok
                            appState.currentPath = routePattern; // Simpan pola rute yang cocok (bukan path dengan parameter)
                            return { ...router.routes[routePattern], params };
                        }
                    }
                }
                // Jika tidak ada rute yang cocok, kembalikan rute 404
                appState.currentPath = '/404'; // Pastikan rute /404 terdaftar
                return { ...router.routes['/404'], params: {} };
            }
        };

        // --- KOMPONEN-KOMPONEN UI (Fungsi yang mengembalikan elemen DOM) ---
        // Setiap komponen adalah fungsi yang merender bagian dari UI.

        /** Komponen Navbar (Header Aplikasi) */
        function NavbarComponent() {
            const { createElement } = utils;
            const navItems = [ // Definisi item navigasi
                { path: '/', label: 'Beranda', icon: 'fa-solid fa-house-chimney' },
                { path: '/search', label: 'Cari Properti', icon: 'fa-solid fa-magnifying-glass-location' },
                { path: '/about', label: 'Tentang Kami', icon: 'fa-solid fa-users' },
                { path: '/contact', label: 'Hubungi Kami', icon: 'fa-solid fa-envelope' },
            ];

            // Fungsi untuk membuat link navigasi, bisa untuk desktop atau mobile
            const createNavLink = (item, isMobile = false) => {
                let classNames = appState.currentPath === item.path ? 'active' : ''; // Tambah kelas 'active' jika path cocok
                if (isMobile) { // Gaya khusus untuk link mobile
                    classNames = `btn btn--secondary w-full text-left ${appState.currentPath === item.path ? 'active' : ''}`;
                }
                return createElement('a', {
                    href: `#${item.path}`,
                    className: classNames,
                    onClick: (e) => { // Penanganan klik untuk navigasi SPA
                        e.preventDefault();
                        router.navigateTo(item.path);
                        if (isMobile) toggleMobileMenu(false); // Tutup menu mobile setelah klik
                    }
                }, createElement('i', { className: `${item.icon} mr-2` }), item.label);
            };

            // Navigasi Desktop
            const desktopNav = createElement('ul', { className: 'nav__list hidden md:flex' }, // Sembunyikan di mobile (md:flex)
                ...navItems.map(item => createElement('li', { className: 'nav__item' }, createNavLink(item)))
            );

            // Menu Navigasi Mobile (awalnya kosong, diisi oleh updateMobileNavItems)
            const mobileNavMenu = createElement('nav', { id: 'mobile-nav-menu', className: 'mobile-nav' });

            // Fungsi untuk mengisi/memperbarui item di menu mobile
            const updateMobileNavItems = () => {
                mobileNavMenu.innerHTML = ''; // Kosongkan menu sebelum mengisi ulang
                navItems.forEach(item => {
                    mobileNavMenu.appendChild(createElement('li', { className: 'nav__item' }, createNavLink(item, true)));
                });
                // Tambah tombol "Masuk/Daftar" di menu mobile
                mobileNavMenu.appendChild(
                    createElement('button', {
                        className: 'btn btn--primary w-full mt-2',
                        onClick: () => {
                            alert('Fitur login/autentikasi akan segera hadir!');
                            toggleMobileMenu(false); // Tutup menu
                        }
                    }, createElement('i', { className: 'fa-solid fa-right-to-bracket mr-2' }), 'Masuk / Daftar')
                );
            };

            // Fungsi untuk membuka/menutup menu mobile
            const toggleMobileMenu = (forceState) => {
                // Tentukan state menu (buka/tutup)
                appState.mobileMenuOpen = typeof forceState === 'boolean' ? forceState : !appState.mobileMenuOpen;
                mobileNavMenu.classList.toggle('open', appState.mobileMenuOpen); // Tambah/hapus kelas 'open'

                // Update ikon tombol menu (bars/times)
                const menuIcon = document.getElementById('mobile-menu-icon');
                if (menuIcon) menuIcon.className = `fas ${appState.mobileMenuOpen ? 'fa-times' : 'fa-bars'}`;

                // Update atribut ARIA untuk aksesibilitas
                const button = document.getElementById('mobile-menu-button');
                if (button) button.setAttribute('aria-expanded', appState.mobileMenuOpen.toString());

                // Isi item menu jika menu dibuka atau saat inisialisasi
                if (appState.mobileMenuOpen || forceState === undefined) {
                    updateMobileNavItems();
                }
            };

            // Panggil updateMobileNavItems sekali saat komponen pertama kali dibuat
            // Ini memastikan konten menu mobile sudah ada (meskipun tersembunyi) dan siap ditampilkan.
            updateMobileNavItems();

            // Tombol untuk membuka/menutup menu mobile
            const mobileMenuButton = createElement('button', {
                id: 'mobile-menu-button',
                className: 'btn btn--icon btn--secondary mobile-menu-button', // Tampil hanya di mobile (CSS rule)
                onClick: () => toggleMobileMenu(),
                'aria-label': 'Buka Menu Navigasi',
                'aria-expanded': 'false', // Default tertutup
                'aria-controls': 'mobile-nav-menu' // Menunjuk ke ID menu mobile
            }, createElement('i', { id: 'mobile-menu-icon', className: 'fas fa-bars' })); // Ikon awal (bars)

            // Struktur utama Navbar
            return createElement('header', { className: 'navbar', id: 'main-navbar' },
                createElement('div', { className: 'container navbar__container' },
                    // Brand/Logo Aplikasi
                    createElement('a', {
                        href: '#/',
                        className: 'navbar__brand',
                        title: `Kembali ke Beranda ${CONFIG.appName}`,
                        onClick: (e) => { e.preventDefault(); router.navigateTo('/'); }
                    },
                        createElement('i', { className: 'fas fa-mountain-city' }), // Ikon terkait properti/kota
                        CONFIG.appName.split(' ')[0] // Ambil kata pertama dari nama aplikasi untuk brand pendek
                    ),
                    desktopNav, // Navigasi desktop
                    // Grup tombol di kanan navbar (mode gelap, login, menu mobile)
                    createElement('div', { className: 'flex items-center gap-2' },
                        // Tombol Mode Gelap/Terang
                        createElement('button', {
                            className: 'btn btn--icon btn--secondary',
                            onClick: () => { // Logika ganti tema
                                appState.isDarkMode = !appState.isDarkMode; // Toggle state
                                document.body.classList.toggle('dark-mode', appState.isDarkMode); // Ganti kelas di body
                                localStorage.setItem(CONFIG.themeKey, appState.isDarkMode ? 'dark' : 'light'); // Simpan ke localStorage
                            },
                            'aria-label': appState.isDarkMode ? 'Aktifkan Mode Terang' : 'Aktifkan Mode Gelap',
                            title: appState.isDarkMode ? 'Mode Terang' : 'Mode Gelap'
                        }, createElement('i', { className: `fas ${appState.isDarkMode ? 'fa-sun' : 'fa-moon'}` })), // Ikon berubah sesuai mode
                        // Tombol Masuk (hanya di desktop)
                        createElement('button', {
                            className: 'btn btn--primary hidden md:flex', // Sembunyikan di mobile
                            onClick: () => alert('Fitur login/autentikasi akan segera hadir!')
                        }, createElement('i', { className: 'fa-solid fa-right-to-bracket mr-2' }), 'Masuk'),
                        mobileMenuButton // Tombol menu mobile
                    )
                ),
                mobileNavMenu // Menu mobile (akan tampil di bawah navbar saat 'open')
            );
        }

        /** Komponen Footer Aplikasi */
        function FooterComponent() {
            const { createElement } = utils;
            const currentYear = new Date().getFullYear(); // Tahun saat ini untuk copyright
            return createElement('footer', { className: 'footer' },
                createElement('div', { className: 'container' },
                    createElement('div', { className: 'footer__grid' }, // Grid untuk layout kolom footer
                        // Kolom 1: Tentang Aplikasi
                        createElement('div', { className: 'footer__column' },
                            createElement('h5', {}, CONFIG.appName),
                            createElement('p', { style: { fontSize: '0.9rem', color: 'var(--text-muted-dark)' } }, 'Menemukan properti impian Anda adalah misi kami. Dengan layanan profesional dan daftar properti pilihan, kami siap membantu Anda mengambil langkah selanjutnya.')
                        ),
                        // Kolom 2: Navigasi Cepat
                        createElement('div', { className: 'footer__column' },
                            createElement('h5', {}, 'Navigasi Cepat'),
                            createElement('ul', {},
                                ['Beranda', 'Cari Properti', 'Tentang Kami', 'Hubungi Kami', 'Syarat & Ketentuan'].map(label => {
                                    // Mapping label ke path rute
                                    const pathMap = { 'Beranda': '/', 'Cari Properti': '/search', 'Tentang Kami': '/about', 'Hubungi Kami': '/contact', 'Syarat & Ketentuan': '/terms' };
                                    return createElement('li', {}, createElement('a', { href: `#${pathMap[label]}`, onClick: e => { e.preventDefault(); router.navigateTo(pathMap[label]); } }, label));
                                })
                            )
                        ),
                        // Kolom 3: Info Kontak
                        createElement('div', { className: 'footer__column' },
                            createElement('h5', {}, 'Hubungi Kami'),
                            createElement('p', { style: { fontSize: '0.9rem', color: 'var(--text-muted-dark)' } }, 'Jl. Properti Impian No. 123, Green Valley City'),
                            createElement('p', { style: { fontSize: '0.9rem', color: 'var(--text-muted-dark)' } }, 'Email: info@greenvalley.com'),
                            createElement('p', { style: { fontSize: '0.9rem', color: 'var(--text-muted-dark)' } }, 'Telepon: (021) 555-0123')
                        ),
                        // Kolom 4: Media Sosial
                        createElement('div', { className: 'footer__column' },
                            createElement('h5', {}, 'Ikuti Kami'),
                            createElement('div', { className: 'footer__socials' },
                                // Array ikon sosial untuk iterasi
                                [['facebook-f', 'Facebook'], ['twitter', 'Twitter'], ['instagram', 'Instagram'], ['linkedin-in', 'LinkedIn']].map(([icon, title]) =>
                                    createElement('a', { href: `https://${title.toLowerCase()}.com/greenvalleyproperties`, target: '_blank', rel: 'noopener noreferrer', title: `${title} Green Valley`, 'aria-label': `Kunjungi ${title} kami` },
                                        createElement('i', { className: `fab fa-${icon}` }) // Menggunakan kelas ikon Font Awesome
                                    )
                                )
                            )
                        )
                    ),
                    // Bagian Bawah Footer (Copyright)
                    createElement('div', { className: 'footer__bottom' },
                        createElement('p', {}, `Hak Cipta ¬© ${currentYear} ${CONFIG.appName}. Semua Hak Dilindungi. Dirancang dengan ‚ù§Ô∏è untuk Anda.`)
                    )
                )
            );
        }

        /** Komponen Kartu Properti */
        function PropertyCardComponent({ property, index = 0, animate = true }) { // animate default true
            const { createElement, formatCurrency } = utils;
            return createElement('article', {
                className: `card ${animate ? 'animate-fade-in-up' : ''}`, // Tambah animasi jika `animate` true
                style: animate ? { animationDelay: `${index * 100}ms` } : {}, // Delay animasi untuk efek stagger
                onClick: () => router.navigateTo('/property/:id', { id: property.id }), // Navigasi ke detail saat diklik
                'aria-labelledby': `property-title-${property.id}`, // Untuk aksesibilitas, judul kartu
                role: 'listitem' // Jika kartu ada di dalam daftar
            },
                // Kontainer Gambar
                createElement('div', { className: 'card__image-container' },
                    createElement('img', {
                        src: `${property.image}&random=${property.id}`, // Tambah query random untuk variasi gambar dari Unsplash
                        alt: `Eksterior menawan dari ${property.name}`,
                        className: 'card__image',
                        loading: 'lazy' // Lazy loading untuk performa
                    })
                ),
                // Konten Kartu
                createElement('div', { className: 'card__content' },
                    createElement('h3', { id: `property-title-${property.id}`, className: 'card__title' }, property.name),
                    createElement('p', { className: 'card__price' }, formatCurrency(property.price)),
                    createElement('p', { className: 'card__location' },
                        createElement('i', { className: 'fas fa-map-marker-alt' }), // Ikon lokasi
                        property.location
                    ),
                    // Info singkat (kamar tidur, kamar mandi, luas)
                    createElement('div', { className: 'flex flex-wrap gap-2 mt-2 text-xs' }, // Gaya untuk info ini
                        createElement('span', { className: 'px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-md' }, `${property.beds} KT`),
                        createElement('span', { className: 'px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-md' }, `${property.baths} KM`),
                        createElement('span', { className: 'px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-md' }, `${property.area} m¬≤`)
                    ),
                    // Footer Kartu (Tombol)
                    createElement('div', { className: 'card__footer' },
                        createElement('button', { className: 'btn btn--primary w-full', 'aria-label': `Lihat detail untuk ${property.name}` }, 'Lihat Detail')
                    )
                )
            );
        }


        // --- HALAMAN-HALAMAN APLIKASI ---
        // Setiap fungsi halaman mengembalikan elemen DOM yang mewakili konten halaman tersebut.
        // Fungsi-fungsi ini bisa `async` jika perlu melakukan operasi asinkron (mis. fetch data, panggil AI).

        /** Halaman Beranda (Home) */
        async function HomePage() {
            utils.updateDocumentTitle('Beranda'); // Set judul dokumen
            const { createElement } = utils;
            const featuredProperties = appState.properties.filter(p => p.featured).slice(0, 3); // Ambil 3 properti unggulan

            // Elemen untuk slogan AI (diisi secara asinkron)
            const aiSloganElement = createElement('p', { className: 'text-lg italic text-emerald-300 animate-fade-in', style: { animationDelay: '0.5s', minHeight: '1.5em' } });
            geminiService.generateText("slogan iklan singkat dan menarik untuk perusahaan properti Green Valley")
                .then(slogan => { aiSloganElement.innerHTML = `<em>"${slogan}"</em>`; })
                .catch(() => { aiSloganElement.textContent = "Green Valley: Wujudkan Rumah Impian Anda."; }); // Fallback jika AI gagal

            // State lokal untuk form pencarian di hero
            let searchLocation = appState.searchFilters.location || '';
            let searchType = appState.searchFilters.type || '';

            // Form Pencarian di Hero Section
            const heroForm = createElement('form', {
                className: 'hero__form animate-fade-in-up', // Animasi form
                style: { animationDelay: '0.7s' },
                onSubmit: (e) => { // Saat form disubmit
                    e.preventDefault();
                    appState.searchFilters = { ...appState.searchFilters, location: searchLocation, type: searchType }; // Update filter global
                    router.navigateTo('/search'); // Navigasi ke halaman pencarian
                }
            },
                createElement('div', { className: 'form-group' }, // Grup input lokasi
                    createElement('i', { className: 'fas fa-map-marker-alt' }),
                    createElement('input', { type: 'text', id: 'hero-location', value: searchLocation, onInput: (e) => searchLocation = e.target.value, placeholder: 'Mis: Jakarta, Bali', 'aria-label': 'Lokasi Properti' })
                ),
                createElement('div', { className: 'form-group' }, // Grup input tipe properti
                    createElement('i', { className: 'fas fa-building' }),
                    createElement('select', { id: 'hero-type', value: searchType, onChange: (e) => searchType = e.target.value, 'aria-label': 'Tipe Properti' },
                        createElement('option', { value: '' }, 'Semua Tipe'), // Opsi default
                        ['Rumah', 'Apartemen', 'Villa', 'Tanah'].map(type => createElement('option', { value: type }, type)) // Opsi dari array
                    )
                ),
                createElement('button', { type: 'submit', className: 'btn btn--primary' }, createElement('i', { className: 'fas fa-search mr-2' }), 'Cari Properti')
            );

            // Struktur Konten Halaman Beranda
            const pageContent = createElement('div', {},
                // Hero Section
                createElement('section', { className: 'hero' },
                    createElement('div', { className: 'hero__content' },
                        createElement('h1', { className: 'animate-fade-in-up' }, 'Temukan Properti Impian Anda di ', createElement('span', { style: { color: 'var(--color-primary-light)' } }, 'Green Valley')),
                        createElement('p', { className: 'animate-fade-in-up', style: { animationDelay: '0.3s' } }, 'Jelajahi koleksi properti eksklusif kami dan temukan tempat yang benar-benar Anda sebut rumah.'),
                        aiSloganElement, // Slogan dari AI
                        heroForm // Form pencarian
                    )
                ),
                // Section Properti Unggulan
                createElement('section', { className: 'section', id: 'featured-properties', 'aria-labelledby': 'featured-title' },
                    createElement('div', { className: 'container' },
                        createElement('div', { className: 'section__header animate-fade-in-up' },
                            createElement('h2', { id: 'featured-title', className: 'section__title' }, 'Properti Unggulan Kami'),
                            createElement('p', { className: 'section__subtitle' }, 'Pilihan terbaik yang dikurasi khusus untuk Anda.')
                        ),
                        // Tampilkan kartu properti unggulan atau pesan jika tidak ada
                        featuredProperties.length > 0
                            ? createElement('div', { className: 'grid grid-auto-fit gap-6 lg:gap-8 stagger-animation', role: 'list', ref: el => utils.applyStaggerAnimation(el) }, // 'ref' untuk trigger animasi stagger
                                ...featuredProperties.map((prop, idx) => PropertyCardComponent({ property: prop, index: idx, animate: false })) // 'animate' false karena dikontrol stagger
                            )
                            : createElement('p', { className: 'text-center' }, 'Saat ini belum ada properti unggulan.'),
                        // Tombol untuk melihat semua properti
                        createElement('div', { className: 'text-center mt-8 animate-fade-in-up', style: { animationDelay: '0.5s' } },
                            createElement('button', { onClick: () => router.navigateTo('/search'), className: 'btn btn--accent btn--lg' }, createElement('i', { className: 'fas fa-th-list mr-2' }), 'Lihat Semua Properti')
                        )
                    )
                ),
                // Section "Mengapa Memilih Kami"
                createElement('section', { className: 'section section--highlight', id: 'why-us', 'aria-labelledby': 'why-us-title' },
                    createElement('div', { className: 'container' },
                        createElement('div', { className: 'section__header animate-fade-in-up' },
                            createElement('h2', { id: 'why-us-title', className: 'section__title' }, 'Mengapa Memilih Green Valley?'),
                            createElement('p', { className: 'section__subtitle' }, 'Kami berkomitmen memberikan pengalaman terbaik dalam perjalanan properti Anda.')
                        ),
                        // Grid untuk poin-poin keunggulan
                        createElement('div', { className: 'grid md:grid-cols-3 gap-8 stagger-animation', ref: el => utils.applyStaggerAnimation(el, 150) }, // Animasi stagger dengan delay berbeda
                            [ // Array data untuk poin keunggulan
                                { icon: 'fa-award', title: 'Pilihan Properti Terbaik', desc: 'Koleksi properti berkualitas tinggi yang telah diverifikasi.' },
                                { icon: 'fa-headset', title: 'Layanan Profesional', desc: 'Tim agen berpengalaman kami siap membantu Anda di setiap langkah.' },
                                { icon: 'fa-shield-alt', title: 'Transparan & Aman', desc: 'Kami menjunjung tinggi integritas dan keamanan dalam setiap transaksi.' }
                            ].map(item => // Iterasi untuk membuat elemen
                                createElement('div', { className: 'text-center p-6' },
                                    createElement('i', { className: `fas ${item.icon} fa-3x text-primary mb-4`, style: { color: 'var(--color-primary)' }, 'aria-hidden': 'true' }),
                                    createElement('h4', {}, item.title),
                                    createElement('p', { className: 'text-sm text-muted-light dark:text-muted-dark' }, item.desc)
                                )
                            )
                        )
                    )
                ),
                // Section Testimonial
                createElement('section', { className: 'section', id: 'testimonials', 'aria-labelledby': 'testimonials-title' },
                    createElement('div', { className: 'container' },
                        createElement('div', { className: 'section__header animate-fade-in-up' },
                            createElement('h2', { id: 'testimonials-title', className: 'section__title' }, 'Apa Kata Mereka?'),
                            createElement('p', { className: 'section__subtitle' }, 'Dengarkan pengalaman klien kami yang puas.')
                        ),
                        // Grid untuk testimonial
                        createElement('div', { className: 'grid md:grid-cols-2 gap-8 stagger-animation', ref: el => utils.applyStaggerAnimation(el, 150) },
                            [ // Array data testimonial
                                { quote: '"Proses pembelian rumah pertama saya sangat lancar berkat Green Valley. Agennya sangat membantu!"', name: 'Anisa Putri', role: 'Pembeli Rumah, Jakarta', avatar: 'https://randomuser.me/api/portraits/women/68.jpg' },
                                { quote: '"Menjual apartemen saya melalui Green Valley adalah keputusan tepat. Profesional dan cepat!"', name: 'David Lee', role: 'Penjual Apartemen, Surabaya', avatar: 'https://randomuser.me/api/portraits/men/75.jpg' }
                            ].map(testimonial => // Iterasi untuk membuat elemen testimonial
                                createElement('blockquote', { className: 'card p-6' }, // Menggunakan tag 'blockquote' untuk kutipan
                                    createElement('p', { className: 'italic mb-4 text-muted-light dark:text-muted-dark' }, testimonial.quote),
                                    createElement('footer', { className: 'flex items-center' }, // Footer untuk info klien
                                        createElement('img', { src: testimonial.avatar, alt: `Foto Klien ${testimonial.name}`, className: 'w-12 h-12 rounded-full mr-4' }),
                                        createElement('div', {},
                                            createElement('h5', { className: 'font-semibold' }, testimonial.name),
                                            createElement('p', { className: 'text-sm text-primary' }, testimonial.role)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
            return pageContent; // Kembalikan elemen konten halaman
        }


        /** Halaman Pencarian Properti */
        async function SearchPage() {
            utils.updateDocumentTitle('Cari Properti');
            const { createElement } = utils;
            let localFilters = { ...appState.searchFilters }; // State filter lokal untuk form, disinkronkan dengan global

            // Fungsi untuk menangani perubahan filter, dengan debounce agar tidak terlalu sering update
            const handleFilterChange = utils.debounce((filterName, value) => {
                localFilters[filterName] = value;
                appState.searchFilters = { ...localFilters }; // Update filter global
                renderApp(); // Render ulang aplikasi untuk menampilkan hasil filter baru
            }, 500); // Debounce 500ms

            // Filter properti berdasarkan state filter global
            const filteredProperties = appState.properties.filter(property => {
                const { location, type, minPrice, maxPrice, beds } = appState.searchFilters;
                let match = true; // Asumsikan cocok, lalu cek setiap filter
                if (location && !property.location.toLowerCase().includes(location.toLowerCase())) match = false;
                if (type && property.type !== type) match = false;
                if (minPrice && property.price < parseInt(minPrice)) match = false;
                if (maxPrice && property.price > parseInt(maxPrice)) match = false;
                if (beds && property.beds < parseInt(beds)) match = false; // Hanya >= (minimal)
                return match;
            });

            // Form Filter
            const filterForm = createElement('form', {
                className: 'p-6 mb-8 bg-light-alt dark:bg-dark-alt rounded-lg shadow-lg grid md:grid-cols-3 lg:grid-cols-5 gap-4 items-end animate-fade-in-up',
                id: 'search-filters-form',
                onSubmit: e => e.preventDefault() // Form tidak disubmit secara tradisional
            },
                // Input Lokasi
                createElement('div', {},
                    createElement('label', { htmlFor: 'filter-location', className: 'block text-sm font-medium mb-1' }, 'Lokasi'),
                    createElement('input', { type: 'text', id: 'filter-location', placeholder: 'cth. Jakarta', value: localFilters.location, onInput: e => handleFilterChange('location', e.target.value), className: 'w-full' })
                ),
                // Select Tipe Properti
                createElement('div', {},
                    createElement('label', { htmlFor: 'filter-type', className: 'block text-sm font-medium mb-1' }, 'Tipe Properti'),
                    createElement('select', { id: 'filter-type', value: localFilters.type, onChange: e => handleFilterChange('type', e.target.value), className: 'w-full' },
                        createElement('option', { value: '' }, 'Semua Tipe'),
                        ['Rumah', 'Apartemen', 'Villa', 'Tanah'].map(type => createElement('option', { value: type }, type))
                    )
                ),
                // Select Jumlah Kamar Tidur Minimal
                createElement('div', {},
                    createElement('label', { htmlFor: 'filter-beds', className: 'block text-sm font-medium mb-1' }, 'Min. Kamar Tidur'),
                    createElement('select', { id: 'filter-beds', value: localFilters.beds, onChange: e => handleFilterChange('beds', e.target.value), className: 'w-full' },
                        createElement('option', { value: '' }, 'Semua'),
                        [1, 2, 3, 4, 5].map(n => createElement('option', { value: n.toString() }, `${n}+ KT`))
                    )
                ),
                // Input Harga Minimal
                createElement('div', {},
                    createElement('label', { htmlFor: 'filter-min-price', className: 'block text-sm font-medium mb-1' }, 'Harga Min.'),
                    createElement('input', { type: 'number', id: 'filter-min-price', placeholder: 'Rp', value: localFilters.minPrice, onInput: e => handleFilterChange('minPrice', e.target.value), className: 'w-full', step: 100000000, min: "0" })
                ),
                // Input Harga Maksimal
                createElement('div', {},
                    createElement('label', { htmlFor: 'filter-max-price', className: 'block text-sm font-medium mb-1' }, 'Harga Maks.'),
                    createElement('input', { type: 'number', id: 'filter-max-price', placeholder: 'Rp', value: localFilters.maxPrice, onInput: e => handleFilterChange('maxPrice', e.target.value), className: 'w-full', step: 100000000, min: "0" })
                )
            );

            // Konten Halaman Pencarian
            const pageContent = createElement('main', { className: 'container py-8 animate-fade-in', 'aria-live': 'polite' }, // 'aria-live' agar screen reader mengumumkan perubahan hasil
                createElement('div', { className: 'section__header' },
                    createElement('h1', { className: 'section__title' }, 'Temukan Properti Ideal Anda'),
                    createElement('p', { className: 'section__subtitle' }, `Menampilkan ${filteredProperties.length} properti yang sesuai. Gunakan filter untuk menyaring.`)
                ),
                filterForm, // Form filter
                // Daftar Properti Hasil Filter atau Pesan Jika Kosong
                filteredProperties.length > 0
                    ? createElement('div', { className: 'grid grid-auto-fit gap-6 lg:gap-8 stagger-animation', role: 'list', ref: el => utils.applyStaggerAnimation(el) },
                        ...filteredProperties.map((prop, idx) => PropertyCardComponent({ property: prop, index: idx, animate: false })) // Animasi dikontrol stagger
                    )
                    : createElement('div', { className: 'text-center py-16 animate-fade-in-up' }, // Pesan jika tidak ada hasil
                        createElement('i', { className: 'fas fa-search-minus fa-4x text-gray-400 dark:text-gray-500 mb-4', 'aria-hidden': 'true' }),
                        createElement('h3', { className: 'text-xl font-semibold mb-2' }, 'Tidak Ada Properti Ditemukan'),
                        createElement('p', { className: 'text-muted-light dark:text-muted-dark' }, 'Coba sesuaikan filter pencarian Anda atau periksa kembali nanti.')
                    )
            );
            return pageContent;
        }


        /** Halaman Detail Properti */
        async function PropertyDetailPage({ id }) { // Menerima 'id' properti dari parameter rute
            const propertyId = parseInt(id); // Konversi ID ke integer
            let property = appState.propertyDetailCache[propertyId]; // Coba ambil dari cache

            // Jika tidak ada di cache, cari di daftar properti utama
            if (!property) {
                property = appState.properties.find(p => p.id === propertyId);
                if (property) appState.propertyDetailCache[propertyId] = property; // Simpan ke cache jika ditemukan
            }

            const { createElement, formatCurrency } = utils;

            // Jika properti tidak ditemukan, tampilkan halaman 404
            if (!property) {
                utils.updateDocumentTitle('Properti Tidak Ditemukan');
                return NotFoundPage(); // Kembalikan promise dari NotFoundPage
            }

            utils.updateDocumentTitle(property.name); // Set judul dokumen sesuai nama properti

            // Elemen untuk deskripsi AI (diisi asinkron)
            const aiDescriptionElement = createElement('div', { className: 'prose dark:prose-invert max-w-none mt-6 animate-fade-in-up', style: { animationDelay: '0.5s', minHeight: '10em' } });
            aiDescriptionElement.innerHTML = '<p class="italic text-muted-light dark:text-muted-dark">Memuat deskripsi menarik dari AI...</p>'; // Placeholder
            geminiService.generateText("Buatkan deskripsi listing properti yang menarik dan profesional", property)
                .then(desc => { aiDescriptionElement.innerHTML = desc; }) // Isi dengan hasil AI
                .catch(err => { // Fallback jika AI gagal
                    console.error(err);
                    aiDescriptionElement.innerHTML = `<p>Properti ${property.type} ini berlokasi di ${property.location}, dengan ${property.beds} kamar tidur dan ${property.baths} kamar mandi. Luas total ${property.area} m¬≤.</p>`;
                });

            const agent = property.agent || { name: 'Agen Green Valley', phone: 'N/A', avatar: `https://ui-avatars.com/api/?name=Agent&background=random&color=fff&size=80` }; // Data agen dengan fallback

            // Konten Halaman Detail
            const pageContent = createElement('main', { className: 'container py-8 animate-fade-in' },
                // Tombol Kembali
                createElement('div', { className: 'mb-6' },
                    createElement('button', {
                        onClick: () => window.history.length > 2 ? window.history.back() : router.navigateTo('/search'), // Kembali ke halaman sebelumnya atau ke search
                        className: 'btn btn--secondary'
                    }, createElement('i', { className: 'fas fa-arrow-left mr-2' }), 'Kembali')
                ),
                // Artikel Detail Properti
                createElement('article', { className: 'bg-light-alt dark:bg-dark-alt p-4 md:p-8 rounded-lg shadow-xl' }, // Kontainer utama detail
                    createElement('div', { className: 'grid md:grid-cols-3 gap-8' }, // Grid untuk layout gambar dan info
                        // Kolom Kiri: Gambar Utama & Galeri Mini
                        createElement('div', { className: 'md:col-span-2' },
                            createElement('img', { src: `${property.image}&w=1200&h=800&fit=crop`, alt: `Pemandangan utama ${property.name}`, className: 'property-detail__image animate-scale-in' }),
                            // Galeri gambar tambahan (placeholder dengan Picsum)
                            createElement('div', { className: 'grid grid-cols-3 sm:grid-cols-4 gap-2 mt-4', 'aria-label': 'Galeri gambar tambahan' },
                                ...[1, 2, 3, 4].map(i => createElement('img', { // Iterasi untuk 4 gambar placeholder
                                    src: `https://picsum.photos/seed/prop${property.id}_img${i}/200/150`, // Seed berdasarkan ID properti agar gambar konsisten
                                    alt: `Detail gambar ${i} dari ${property.name}`,
                                    className: 'rounded-md object-cover aspect-video cursor-pointer hover:opacity-80 transition-opacity',
                                    loading: 'lazy'
                                }))
                            )
                        ),
                        // Kolom Kanan: Info Properti, Fasilitas, Deskripsi AI, Info Agen
                        createElement('div', { className: 'md:col-span-1' },
                            createElement('h1', { className: 'text-3xl md:text-4xl font-bold mb-2 animate-fade-in-up' }, property.name),
                            createElement('p', { className: 'text-lg text-muted-light dark:text-muted-dark mb-1 animate-fade-in-up', style: { animationDelay: '0.1s' } },
                                createElement('i', { className: 'fas fa-map-marker-alt mr-2 text-primary' }), property.location
                            ),
                            createElement('p', { className: 'text-2xl md:text-3xl font-bold text-primary mb-6 animate-fade-in-up', style: { animationDelay: '0.2s' } }, formatCurrency(property.price)),

                            createElement('h4', { className: 'text-xl font-semibold mb-2 mt-4' }, 'Detail Properti:'),
                            createElement('ul', { className: 'property-detail__features animate-fade-in-up', style: { animationDelay: '0.3s' } },
                                [ // Array data detail untuk iterasi
                                    { icon: 'fa-bed', text: `${property.beds} Kamar Tidur` },
                                    { icon: 'fa-bath', text: `${property.baths} Kamar Mandi` },
                                    { icon: 'fa-ruler-combined', text: `${property.area} m¬≤ Luas` },
                                    { icon: 'fa-home', text: `Tipe: ${property.type}` }
                                ].map(item => createElement('li', {}, createElement('i', { className: `fas ${item.icon}` }), item.text))
                            ),
                            createElement('h4', { className: 'text-xl font-semibold mb-2 mt-6' }, 'Fasilitas Unggulan:'),
                            createElement('ul', { className: 'list-disc list-inside pl-1 space-y-1 text-muted-light dark:text-muted-dark animate-fade-in-up', style: { animationDelay: '0.4s' } },
                                ...(property.amenities || ['Tidak ada data fasilitas']).slice(0, 5).map(item => createElement('li', {}, item)), // Batasi 5 fasilitas utama
                                (property.amenities && property.amenities.length > 5) ? createElement('li', {}, '...dan lainnya.') : null // Indikasi jika ada lebih banyak
                            ),
                            aiDescriptionElement, // Deskripsi dari AI
                            // Kartu Info Agen
                            createElement('div', { className: 'property-detail__agent-card mt-8 animate-fade-in-up', style: { animationDelay: '0.6s' } },
                                createElement('h4', { className: 'text-xl font-semibold mb-4 text-center' }, 'Hubungi Agen Kami'),
                                createElement('div', { className: 'flex items-center mb-4' }, // Layout info agen
                                    createElement('img', { src: agent.avatar, alt: `Foto agen ${agent.name}`, className: 'agent-card__avatar' }),
                                    createElement('div', {},
                                        createElement('h5', { className: 'text-lg font-semibold' }, agent.name),
                                        createElement('p', { className: 'text-sm text-primary' }, 'Agen Properti Profesional')
                                    )
                                ),
                                // Tombol kontak agen
                                createElement('a', { href: `tel:${agent.phone.replace(/\D/g, '')}`, className: 'btn btn--primary w-full mb-2' }, createElement('i', { className: 'fas fa-phone-alt mr-2' }), `Telepon: ${agent.phone}`),
                                createElement('a', { href: `https://wa.me/${agent.phone.replace(/\D/g, '')}?text=${encodeURIComponent(`Halo ${agent.name}, saya tertarik dengan properti ${property.name} (ID: ${property.id}) di Green Valley.`)}`, target: '_blank', rel: 'noopener noreferrer', className: 'btn btn--secondary w-full flex items-center justify-center' }, createElement('i', { className: 'fab fa-whatsapp mr-2' }), 'Chat via WhatsApp')
                            )
                        )
                    )
                )
            );
            return pageContent;
        }


        /** Halaman Tentang Kami */
        async function AboutPage() {
            utils.updateDocumentTitle('Tentang Kami');
            const { createElement } = utils;
            // Elemen untuk visi & misi dari AI (diisi asinkron)
            const aiMissionElement = createElement('div', { className: 'prose dark:prose-invert max-w-none mt-4', style: { minHeight: '10em' } });
            geminiService.generateText("visi dan misi perusahaan properti Green Valley yang inspiratif dan profesional dalam 2-3 paragraf dengan heading H4 untuk Visi dan Misi")
                .then(text => aiMissionElement.innerHTML = text) // Isi dengan hasil AI
                .catch(() => aiMissionElement.innerHTML = "<p>Visi kami adalah menjadi mitra properti terdepan. Misi kami adalah menyediakan solusi properti komprehensif.</p>"); // Fallback

            // Konten Halaman Tentang Kami
            const pageContent = createElement('main', { className: 'container py-12 animate-fade-in' },
                createElement('div', { className: 'section__header mb-12' },
                    createElement('h1', { className: 'section__title' }, 'Tentang Green Valley Properties'),
                    createElement('p', { className: 'section__subtitle' }, 'Mitra Anda dalam mewujudkan impian hunian.')
                ),
                // Grid untuk kisah perusahaan dan gambar
                createElement('div', { className: 'grid md:grid-cols-2 gap-12 items-center mb-12' },
                    createElement('div', { className: 'animate-fade-in-up' }, // Kolom teks
                        createElement('h2', { className: 'text-2xl font-semibold mb-4' }, 'Kisah Kami'),
                        createElement('p', { className: 'mb-4 text-muted-light dark:text-muted-dark' }, 'Didirikan dengan semangat menghubungkan orang dengan tempat tinggal ideal, Green Valley Properties telah tumbuh menjadi nama tepercaya. Kami percaya rumah adalah fondasi kebahagiaan.'),
                        createElement('p', { className: 'text-muted-light dark:text-muted-dark' }, 'Tim kami terdiri dari profesional berpengalaman dengan pengetahuan pasar mendalam dan komitmen terhadap layanan pelanggan.'),
                        aiMissionElement // Visi & Misi dari AI
                    ),
                    createElement('div', { className: 'animate-scale-in', style: { animationDelay: '0.2s' } }, // Kolom gambar
                        createElement('img', { src: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=70', alt: 'Tim Green Valley Properties sedang berdiskusi', className: 'rounded-lg shadow-xl w-full h-auto object-cover' })
                    )
                ),
                // Section Tim Profesional
                createElement('div', { className: 'section--highlight py-12 rounded-lg' }, // Section dengan background berbeda
                    createElement('h2', { className: 'text-2xl font-semibold text-center mb-8' }, 'Tim Profesional Kami'),
                    // Grid untuk anggota tim
                    createElement('div', { className: 'grid sm:grid-cols-2 lg:grid-cols-4 gap-8 stagger-animation', ref: el => utils.applyStaggerAnimation(el, 100) },
                        [ // Array data anggota tim
                            { name: 'Dr. Amanda Sari', role: 'CEO & Founder', avatar: 'https://randomuser.me/api/portraits/women/1.jpg' },
                            { name: 'Bambang Wijaya', role: 'Head of Sales', avatar: 'https://randomuser.me/api/portraits/men/2.jpg' },
                            { name: 'Citra Kirana', role: 'Marketing Director', avatar: 'https://randomuser.me/api/portraits/women/3.jpg' },
                            { name: 'Dharma Putra', role: 'Lead Property Analyst', avatar: 'https://randomuser.me/api/portraits/men/4.jpg' }
                        ].map((member, idx) => // Iterasi untuk membuat elemen anggota tim
                            createElement('div', { className: 'text-center animate-fade-in-up', style: { animationDelay: `${idx * 100}ms` } }, // Animasi dengan delay
                                createElement('img', { src: member.avatar, alt: `Foto ${member.name}`, className: 'w-32 h-32 rounded-full mx-auto mb-4 shadow-md border-4 border-primary-light' }), // Avatar dengan border
                                createElement('h5', { className: 'text-lg font-semibold' }, member.name),
                                createElement('p', { className: 'text-sm text-primary' }, member.role)
                            )
                        )
                    )
                )
            );
            return pageContent;
        }


        /** Halaman Hubungi Kami */
        async function ContactPage() {
            utils.updateDocumentTitle('Hubungi Kami');
            const { createElement } = utils;
            // Fungsi untuk menangani submit form kontak (simulasi)
            const handleSubmit = async (event) => {
                event.preventDefault(); // Mencegah submit form standar
                utils.setLoading(true); // Tampilkan overlay loading
                const formData = new FormData(event.target); // Ambil data form
                // Simulasi: Kumpulkan data, tapi jangan kirim ke server sungguhan
                const data = Object.fromEntries(formData.entries());
                console.log("Data Formulir Kontak (Simulasi):", data);

                await new Promise(resolve => setTimeout(resolve, 1500)); // Simulasi delay pengiriman
                utils.setLoading(false); // Sembunyikan overlay loading
                alert(`Terima kasih, ${data.name}! Pesan Anda telah diterima (simulasi). Kami akan segera menghubungi Anda melalui ${data.email}.`);
                event.target.reset(); // Reset form setelah submit
            };

            // Konten Halaman Kontak
            const pageContent = createElement('main', { className: 'container py-12 animate-fade-in' },
                createElement('div', { className: 'section__header mb-12' },
                    createElement('h1', { className: 'section__title' }, 'Hubungi Tim Green Valley'),
                    createElement('p', { className: 'section__subtitle' }, 'Kami siap mendengar dari Anda. Jangan ragu untuk menghubungi kami.')
                ),
                // Grid untuk form kontak dan info kontak lainnya
                createElement('div', { className: 'grid md:grid-cols-2 gap-12' },
                    // Kolom Form Kontak
                    createElement('div', { className: 'animate-fade-in-up' },
                        createElement('h2', { className: 'text-2xl font-semibold mb-6' }, 'Kirim Pesan Langsung'),
                        createElement('form', { className: 'space-y-6', onSubmit: handleSubmit }, // Gunakan `space-y` untuk jarak antar field
                            // Iterasi untuk membuat field input dasar (Nama, Email, Subjek)
                            ['Nama Lengkap Anda', 'Alamat Email Anda', 'Subjek Pesan'].map(label => {
                                const name = label.split(' ')[0].toLowerCase(); // Ambil kata pertama sebagai 'name' atribut
                                const type = name === 'email' ? 'email' : 'text'; // Tipe input
                                const placeholder = label.includes('Nama') ? 'cth. Budi Doremi' : label.includes('Email') ? 'cth. budi@example.com' : 'cth. Pertanyaan Properti';
                                return createElement('div', {},
                                    createElement('label', { htmlFor: `contact-${name}`, className: 'block text-sm font-medium mb-1' }, label),
                                    createElement('input', { type: type, name: name, id: `contact-${name}`, required: true, className: 'w-full', placeholder: placeholder })
                                )
                            }),
                            // Field Textarea untuk Pesan
                            createElement('div', {},
                                createElement('label', { htmlFor: 'contact-message', className: 'block text-sm font-medium mb-1' }, 'Pesan Anda'),
                                createElement('textarea', { name: 'message', id: `contact-message`, rows: '5', required: true, className: 'w-full', placeholder: 'Tuliskan pesan detail Anda di sini...' })
                            ),
                            // Tombol Submit
                            createElement('button', { type: 'submit', className: 'btn btn--primary btn--lg' }, createElement('i', { className: 'fas fa-paper-plane mr-2' }), 'Kirim Pesan')
                        )
                    ),
                    // Kolom Info Kontak Lainnya & Peta (Placeholder)
                    createElement('div', { className: 'animate-fade-in-up', style: { animationDelay: '0.2s' } },
                        createElement('h2', { className: 'text-2xl font-semibold mb-6' }, 'Informasi Kontak Lainnya'),
                        // Daftar info kontak
                        createElement('div', { className: 'space-y-4 text-muted-light dark:text-muted-dark' },
                            [ // Array data info kontak
                                { icon: 'fa-map-marker-alt', title: 'Alamat Kantor Pusat:', lines: ['Green Valley Tower, Lt. 25, Jl. Properti Sejahtera No. 1, Jakarta Pusat, Indonesia 10220'] },
                                { icon: 'fa-phone-alt', title: 'Telepon:', lines: [{ text: '(021) 555-0123', href: 'tel:+62215550123' }] }, // Objek untuk link
                                { icon: 'fa-envelope', title: 'Email:', lines: [{ text: 'info@greenvalley.com', href: 'mailto:info@greenvalley.com' }] },
                                { icon: 'fa-clock', title: 'Jam Operasional:', lines: ['Senin - Jumat: 09:00 - 18:00 WIB', 'Sabtu: 10:00 - 15:00 WIB (By Appointment)'] }
                            ].map(item => // Iterasi untuk membuat elemen info kontak
                                createElement('div', { className: 'flex items-start gap-3' },
                                    createElement('i', { className: `fas ${item.icon} fa-fw text-xl text-primary mt-1`, 'aria-hidden': 'true' }),
                                    createElement('div', {},
                                        createElement('h5', { className: 'font-semibold text-dark dark:text-light' }, item.title),
                                        // Iterasi untuk baris teks (bisa string atau objek link)
                                        ...item.lines.map(line => typeof line === 'string' ? createElement('p', {}, line) : createElement('p', {}, createElement('a', { href: line.href, className: 'hover:underline' }, line.text)))
                                    )
                                )
                            )
                        ),
                        // Placeholder Peta
                        createElement('div', { className: 'mt-8 rounded-lg overflow-hidden shadow-lg aspect-video bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400', role: 'img', 'aria-label': 'Peta lokasi kantor Green Valley Properties' },
                            createElement('div', { className: 'text-center' },
                                createElement('i', { className: 'fas fa-map-marked-alt fa-3x mb-2', 'aria-hidden': 'true' }),
                                createElement('p', {}, 'Lokasi Peta Kantor Kami (Placeholder)')
                            )
                        )
                    )
                )
            );
            return pageContent;
        }


        /** Halaman Syarat & Ketentuan (Contoh halaman statis) */
        async function TermsPage() {
            utils.updateDocumentTitle('Syarat & Ketentuan');
            const { createElement } = utils;
            // Konten Halaman Syarat & Ketentuan
            const pageContent = createElement('main', { className: 'container py-12 animate-fade-in' },
                createElement('div', { className: 'section__header mb-8' },
                    createElement('h1', { className: 'section__title' }, 'Syarat dan Ketentuan Penggunaan'),
                    createElement('p', { className: 'section__subtitle' }, 'Harap baca dengan saksama sebelum menggunakan layanan kami.')
                ),
                // Konten teks menggunakan kelas 'prose' untuk styling teks panjang
                createElement('div', { className: 'prose dark:prose-invert max-w-none' }, // `max-w-none` agar mengambil lebar kontainer
                    createElement('p', {}, 'Selamat datang di situs web Green Valley Properties ("Situs"). Dengan mengakses atau menggunakan Situs ini, Anda setuju untuk terikat oleh Syarat dan Ketentuan ini ("Syarat"). Jika Anda tidak setuju dengan semua Syarat ini, jangan gunakan Situs ini.'),
                    // Iterasi untuk membuat section S&K
                    ['Penggunaan Situs', 'Konten Properti', 'Kekayaan Intelektual', 'Batasan Tanggung Jawab', 'Perubahan Syarat'].map((title, index) =>
                        createElement('div', { key: index }, // `key` untuk React-like rendering jika diperlukan (tidak esensial di vanilla JS murni ini)
                            createElement('h3', { className: 'mt-6 !text-xl' }, `${index + 1}. ${title}`), // `!text-xl` untuk override gaya .prose jika perlu
                            createElement('p', {}, `Isi detail mengenai ${title.toLowerCase()} akan dijelaskan di sini. Green Valley Properties berhak mengubah syarat ini kapan saja. Informasi properti disediakan "sebagaimana adanya" dan kami tidak menjamin keakuratannya sepenuhnya. Anda bertanggung jawab atas penggunaan situs ini. Seluruh konten adalah milik ${CONFIG.appName} atau pemasoknya.`)
                        )
                    ),
                    createElement('p', { className: 'mt-8' }, `Syarat dan Ketentuan ini terakhir diperbarui pada: ${new Date().toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' })}.`)
                )
            );
            return pageContent;
        }


        /** Halaman 404 Tidak Ditemukan */
        async function NotFoundPage() {
            utils.updateDocumentTitle('404 Halaman Tidak Ditemukan');
            const { createElement } = utils;
            // Konten Halaman 404
            const pageContent = createElement('main', { className: 'container flex flex-col items-center justify-center text-center py-16 min-h-[70vh] animate-fade-in' }, // `min-h-[70vh]` agar konten di tengah vertikal
                createElement('i', { className: 'fas fa-compass-slash fa-5x text-red-500 mb-6', 'aria-hidden': 'true' }), // Ikon besar untuk error
                createElement('h1', { className: 'text-4xl md:text-6xl font-bold mb-4' }, '404 - Oops!'),
                createElement('h2', { className: 'text-2xl md:text-3xl text-muted-light dark:text-muted-dark mb-6' }, 'Halaman Tidak Ditemukan'),
                createElement('p', { className: 'text-lg mb-8 max-w-md' }, 'Maaf, halaman yang Anda cari sepertinya tersesat atau tidak pernah ada. Mungkin tautannya salah atau halaman telah dipindahkan.'),
                // Tombol aksi
                createElement('div', { className: 'flex flex-wrap gap-4 justify-center' }, // `flex-wrap` untuk mobile
                    createElement('button', { onClick: () => window.history.length > 2 ? window.history.back() : router.navigateTo('/'), className: 'btn btn--secondary btn--lg' }, createElement('i', { className: 'fas fa-arrow-left mr-2' }), 'Kembali'),
                    createElement('button', { onClick: () => router.navigateTo('/'), className: 'btn btn--primary btn--lg' }, createElement('i', { className: 'fas fa-home mr-2' }), 'Ke Beranda')
                )
            );
            return pageContent;
        }

        // --- STRUKTUR APLIKASI UTAMA (SHELL) ---
        // Fungsi ini merender "kerangka" aplikasi yang berisi Navbar, konten halaman dinamis, dan Footer.
        function AppShell() {
            const { createElement } = utils;
            // Ambil komponen, parameter, dan judul halaman yang sesuai dengan rute saat ini
            const { component: CurrentPage, params } = router.resolveRoute();
            const pageContainer = createElement('div', { id: 'page-content', className: 'flex-grow' }); // Kontainer untuk konten halaman

            utils.setLoading(true); // Tampilkan overlay loading saat halaman mulai dimuat

            // Panggil fungsi komponen halaman (bisa async) dan render hasilnya
            if (CurrentPage) {
                Promise.resolve(CurrentPage(params || {})) // Pastikan CurrentPage selalu menghasilkan Promise (meskipun sinkron)
                    .then(pageElement => { // Jika Promise berhasil
                        pageContainer.innerHTML = ''; // Kosongkan kontainer sebelum menambah konten baru
                        if (pageElement instanceof Node) { // Pastikan yang dikembalikan adalah Node DOM
                            pageContainer.appendChild(pageElement);
                        } else { // Jika tidak, tampilkan error
                            console.error("Komponen halaman tidak mengembalikan elemen DOM yang valid.");
                            pageContainer.appendChild(NotFoundPage()); // Fallback ke halaman 404
                        }
                    })
                    .catch(error => { // Jika Promise gagal (error saat render halaman)
                        console.error("Gagal merender halaman:", error);
                        pageContainer.innerHTML = '';
                        pageContainer.appendChild(NotFoundPage()); // Tampilkan halaman 404
                    })
                    .finally(() => { // Selalu jalankan ini setelah Promise selesai (berhasil atau gagal)
                        utils.setLoading(false); // Sembunyikan overlay loading
                        utils.scrollToTop(); // Gulir ke atas halaman setelah konten baru dimuat
                    });
            } else { // Seharusnya tidak pernah terjadi jika routing 404 benar
                console.error("Tidak ada komponen untuk rute saat ini:", appState.currentPath);
                pageContainer.appendChild(NotFoundPage());
                utils.setLoading(false);
            }

            // Kembalikan struktur shell aplikasi
            return createElement('div', { className: 'app-wrapper min-h-screen flex flex-col' }, // Wrapper utama
                NavbarComponent(), // Render Navbar
                pageContainer,    // Kontainer untuk konten halaman yang dinamis
                FooterComponent()  // Render Footer
            );
        }

        // --- INISIALISASI DAN RENDER APLIKASI ---
        const rootElement = document.getElementById('app-root'); // Elemen root di HTML

        /** Fungsi utama untuk merender atau me-render ulang seluruh aplikasi. */
        const renderApp = () => {
            rootElement.innerHTML = ''; // Hapus semua konten lama dari root
            rootElement.appendChild(AppShell()); // Tambahkan shell aplikasi yang baru dirender

            // Pastikan kelas mode gelap di body selalu sinkron dengan state
            document.body.classList.toggle('dark-mode', appState.isDarkMode);

            // Update UI Navbar yang mungkin berubah (mis. ikon dark mode, status aktif link, ikon menu mobile)
            // Ini penting karena NavbarComponent dirender ulang dan state-nya mungkin sudah berubah.
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const menuIcon = document.getElementById('mobile-menu-icon');
            if (mobileMenuButton && menuIcon) { // Perbarui ikon tombol menu mobile
                mobileMenuButton.setAttribute('aria-expanded', appState.mobileMenuOpen.toString());
                menuIcon.className = `fas ${appState.mobileMenuOpen ? 'fa-times' : 'fa-bars'}`;
            }
            const mobileNavMenu = document.getElementById('mobile-nav-menu');
            if (mobileNavMenu) { // Perbarui visibilitas menu mobile
                mobileNavMenu.classList.toggle('open', appState.mobileMenuOpen);
                // Jika menu mobile terbuka, pastikan itemnya ter-update (sudah dihandle di NavbarComponent)
            }
        };

        // Daftarkan Rute-rute Aplikasi
        router.addRoute('/', HomePage, 'Beranda');
        router.addRoute('/search', SearchPage, 'Cari Properti');
        router.addRoute('/property/:id', PropertyDetailPage, 'Detail Properti'); // Judul akan di-set dinamis oleh halaman
        router.addRoute('/about', AboutPage, 'Tentang Kami');
        router.addRoute('/contact', ContactPage, 'Hubungi Kami');
        router.addRoute('/terms', TermsPage, 'Syarat & Ketentuan');
        router.addRoute('/404', NotFoundPage, 'Halaman Tidak Ditemukan'); // Rute untuk halaman error

        // Event Listener untuk Perubahan Hash URL (Memicu Navigasi SPA)
        window.addEventListener('hashchange', () => {
            // Simpan path sebelum merender untuk perbandingan di Navbar atau logika lain
            // appState.currentPath sudah diupdate oleh router.resolveRoute() di dalam AppShell()

            // Selalu tutup menu mobile saat navigasi halaman baru
            if (appState.mobileMenuOpen) {
                appState.mobileMenuOpen = false; // Update state
                // Perubahan UI menu mobile akan dihandle oleh renderApp()
            }
            renderApp(); // Render ulang aplikasi saat hash berubah
        });

        // Event listener untuk menutup menu mobile jika diklik di luar area menu atau tombolnya
        document.addEventListener('click', (event) => {
            const mobileNav = document.getElementById('mobile-nav-menu');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            // Cek jika menu mobile terbuka dan elemen yang diklik bukan bagian dari menu atau tombolnya
            if (appState.mobileMenuOpen && mobileNav && mobileMenuButton) {
                if (!mobileMenuButton.contains(event.target) && !mobileNav.contains(event.target)) {
                    appState.mobileMenuOpen = false; // Tutup menu
                    renderApp(); // Render ulang untuk update UI menu
                }
            }
        });

        // Inisialisasi Aplikasi Pertama Kali
        const initializeApp = () => {
            const initialLoader = document.querySelector('.initial-loader');
            if (initialLoader) { // Jika loader awal ada
                // Transisi menghilangnya loader
                initialLoader.style.opacity = '0';
                initialLoader.style.visibility = 'hidden';
                setTimeout(() => { // Setelah transisi selesai
                    initialLoader.remove(); // Hapus loader dari DOM
                    renderApp(); // Render aplikasi utama
                }, 300); // Waktu transisi harus sama dengan CSS
            } else { // Jika tidak ada loader (mis. saat hot reload di development)
                renderApp();
            }
        };

        // Pastikan DOM siap sebelum inisialisasi aplikasi
        if (document.readyState === 'loading') { // Jika DOM belum siap
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else { // Jika DOM sudah siap
            initializeApp();
        }

    </script>
</body>

</html>