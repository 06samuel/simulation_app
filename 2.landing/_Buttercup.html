<!DOCTYPE html>
<html lang="id" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Green Valley - Platform sewa apartemen premium dengan desain modern dan pengalaman pengguna yang luar biasa.">
    <meta name="keywords" content="sewa apartemen, apartemen premium, green valley, hunian modern, properti">
    <meta name="author" content="Green Valley Development">

    <title>Green Valley - Sewa Apartemen Premium</title>

    <!-- Favicon (Contoh, ganti dengan favicon Anda) -->
    <link rel="icon" href="https://img.icons8.com/fluency/48/000000/building.png" type="image/png">

    <!-- Font Awesome Icons (Sesuai permintaan untuk ikon online gratis) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts (Sesuai permintaan untuk desain fancy) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- CSS Kustom (Menggantikan Bootstrap CSS untuk pendekatan native) -->
    <style>
        /* -------------------------------------------------------------------------- */
        /*                            VARIABEL CSS & RESET                            */
        /* -------------------------------------------------------------------------- */
        :root {
            /* Palet Warna Modern & Fancy */
            --primary-color: #4A90E2;
            /* Biru yang lebih lembut dan modern */
            --primary-color-dark: #357ABD;
            --secondary-color: #50E3C2;
            /* Mint green yang segar */
            --accent-color: #F5A623;
            /* Oranye hangat */
            --success-color: #7ED321;
            /* Hijau cerah */
            --warning-color: #F8E71C;
            /* Kuning lemon */
            --danger-color: #D0021B;
            /* Merah kuat */

            --text-color-light: #F7F9FC;
            --text-color-dark: #24292E;
            --bg-color-light: #FFFFFF;
            --bg-color-dark: #0D1117;
            /* GitHub dark mode inspired */

            --neutral-100: #F1F3F5;
            --neutral-200: #E9ECEF;
            --neutral-300: #DEE2E6;
            --neutral-400: #CED4DA;
            --neutral-500: #ADB5BD;
            --neutral-600: #868E96;
            --neutral-700: #495057;
            --neutral-800: #343A40;
            --neutral-900: #212529;

            /* Sistem Desain yang Ditingkatkan */
            --border-radius-sm: 6px;
            --border-radius-md: 12px;
            --border-radius-lg: 20px;
            --box-shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.08);
            --box-shadow-md: 0 5px 15px rgba(0, 0, 0, 0.12);
            --box-shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.15);
            --transition-cubic: all 0.35s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            /* Transisi dengan sedikit 'bounce' */
            --transition-ease: all 0.25s ease-in-out;
            --spacing-unit: 8px;

            /* Tipografi */
            --font-family-primary: 'Poppins', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            --font-family-secondary: 'Inter', sans-serif;
            /* Untuk teks konten */

            --font-size-xs: 0.75rem;
            /* 12px */
            --font-size-sm: 0.875rem;
            /* 14px */
            --font-size-md: 1rem;
            /* 16px - base */
            --font-size-lg: 1.125rem;
            /* 18px */
            --font-size-xl: 1.25rem;
            /* 20px */
            --font-size-2xl: 1.5rem;
            /* 24px */
            --font-size-3xl: 2rem;
            /* 32px */
            --font-size-4xl: 2.75rem;
            /* 44px */
            --font-size-5xl: 3.5rem;
            /* 56px */

            --line-height-tight: 1.2;
            --line-height-normal: 1.6;
            --line-height-loose: 1.8;

            /* Atribut untuk tema saat ini */
            --current-bg-color: var(--bg-color-light);
            --current-text-color: var(--text-color-dark);
            --current-card-bg: var(--bg-color-light);
            --current-border-color: var(--neutral-300);
            --current-input-bg: var(--neutral-100);
            --current-input-border: var(--neutral-400);
            --current-header-bg: rgba(255, 255, 255, 0.85);
        }

        [data-theme="dark"] {
            --primary-color: #58A6FF;
            --primary-color-dark: #388BFD;
            --secondary-color: #39D3BB;
            --accent-color: #F7B731;

            --current-bg-color: var(--bg-color-dark);
            --current-text-color: var(--text-color-light);
            --current-card-bg: var(--neutral-900);
            /* Sedikit lebih terang dari background utama */
            --current-border-color: var(--neutral-700);
            --current-input-bg: var(--neutral-800);
            --current-input-border: var(--neutral-600);
            --current-header-bg: rgba(13, 17, 23, 0.85);
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: var(--font-size-md);
            /* 16px base */
            -webkit-tap-highlight-color: transparent;
            /* Menghilangkan highlight biru pada tap di mobile */
        }

        body {
            font-family: var(--font-family-secondary);
            line-height: var(--line-height-normal);
            color: var(--current-text-color);
            background-color: var(--current-bg-color);
            transition: background-color var(--transition-ease), color var(--transition-ease);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            /* Mencegah scroll horizontal yang tidak diinginkan */
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-family-primary);
            line-height: var(--line-height-tight);
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: calc(var(--spacing-unit) * 2);
            color: var(--current-text-color);
        }

        h1 {
            font-size: var(--font-size-4xl);
        }

        h2 {
            font-size: var(--font-size-3xl);
        }

        h3 {
            font-size: var(--font-size-2xl);
        }

        h4 {
            font-size: var(--font-size-xl);
        }

        p {
            margin-bottom: calc(var(--spacing-unit) * 2);
            color: var(--neutral-600);
            /* Default paragraph color, bisa di-override di dark mode jika perlu */
        }

        [data-theme="dark"] p {
            color: var(--neutral-400);
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-ease);
        }

        a:hover,
        a:focus {
            color: var(--primary-color-dark);
            text-decoration: underline;
        }

        img,
        picture,
        video,
        canvas {
            /* Tidak ada SVG sesuai permintaan */
            display: block;
            max-width: 100%;
            height: auto;
        }

        button {
            cursor: pointer;
            font-family: inherit;
            border: none;
            background: none;
        }

        input,
        select,
        textarea {
            font-family: inherit;
            font-size: var(--font-size-md);
            padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
            border: 1px solid var(--current-input-border);
            border-radius: var(--border-radius-sm);
            background-color: var(--current-input-bg);
            color: var(--current-text-color);
            transition: border-color var(--transition-ease), box-shadow var(--transition-ease);
            width: 100%;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 20%, transparent);
        }

        ::placeholder {
            color: var(--neutral-500);
            opacity: 1;
        }

        [data-theme="dark"] ::placeholder {
            color: var(--neutral-600);
        }

        /* -------------------------------------------------------------------------- */
        /*                             LAYOUT & GRID SYSTEM                             */
        /* -------------------------------------------------------------------------- */
        .container {
            width: 100%;
            max-width: 1400px;
            /* Max width lebih besar untuk tampilan modern */
            margin-left: auto;
            margin-right: auto;
            padding-left: calc(var(--spacing-unit) * 3);
            padding-right: calc(var(--spacing-unit) * 3);
        }

        /* Sistem Grid Native (Flexbox based) */
        .row {
            display: flex;
            flex-wrap: wrap;
            margin-left: calc(var(--spacing-unit) * -1.5);
            margin-right: calc(var(--spacing-unit) * -1.5);
        }

        .col {
            flex-basis: 0;
            flex-grow: 1;
            max-width: 100%;
            padding-left: calc(var(--spacing-unit) * 1.5);
            padding-right: calc(var(--spacing-unit) * 1.5);
        }

        /* Contoh kolom untuk grid, bisa ditambahkan lebih banyak (col-1 s/d col-12) */
        .col-3 {
            flex: 0 0 25%;
            max-width: 25%;
        }

        .col-4 {
            flex: 0 0 33.3333%;
            max-width: 33.3333%;
        }

        .col-6 {
            flex: 0 0 50%;
            max-width: 50%;
        }

        .col-8 {
            flex: 0 0 66.6667%;
            max-width: 66.6667%;
        }

        .col-12 {
            flex: 0 0 100%;
            max-width: 100%;
        }

        /* Untuk responsivitas, tambahkan prefix md, lg, dll. */
        @media (min-width: 768px) {
            .col-md-3 {
                flex: 0 0 25%;
                max-width: 25%;
            }

            .col-md-4 {
                flex: 0 0 33.3333%;
                max-width: 33.3333%;
            }

            .col-md-6 {
                flex: 0 0 50%;
                max-width: 50%;
            }

            .col-md-8 {
                flex: 0 0 66.6667%;
                max-width: 66.6667%;
            }
        }


        /* -------------------------------------------------------------------------- */
        /*                             SECTION & SPA                                  */
        /* -------------------------------------------------------------------------- */
        .main-content {
            padding-top: 80px;
            /* Space untuk fixed header */
            min-height: calc(100vh - 80px);
            /* Pastikan konten mengisi layar */
        }

        .app-section {
            padding: calc(var(--spacing-unit) * 6) 0;
            display: none;
            /* Semua section disembunyikan secara default */
            opacity: 0;
            animation: fadeIn 0.6s var(--transition-ease) forwards;
        }

        .app-section.active {
            display: block;
            /* Hanya section aktif yang ditampilkan */
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            text-align: center;
            margin-bottom: calc(var(--spacing-unit) * 5);
            font-size: var(--font-size-3xl);
            font-weight: 700;
            position: relative;
            padding-bottom: calc(var(--spacing-unit) * 1.5);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--primary-color);
            border-radius: var(--border-radius-sm);
        }


        /* -------------------------------------------------------------------------- */
        /*                            HEADER & NAVIGATION                             */
        /* -------------------------------------------------------------------------- */
        .app-header {
            background-color: var(--current-header-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: calc(var(--spacing-unit) * 1.5) 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: var(--box-shadow-sm);
            transition: background-color var(--transition-ease), box-shadow var(--transition-ease);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: var(--primary-color);
            font-size: var(--font-size-2xl);
            font-weight: 700;
            font-family: var(--font-family-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: var(--spacing-unit);
            font-size: var(--font-size-3xl);
        }

        .logo:hover,
        .logo:focus {
            color: var(--primary-color-dark);
            text-decoration: none;
        }

        .main-nav ul {
            display: flex;
            gap: var(--spacing-unit);
            list-style: none;
            margin: 0;
            align-items: center;
        }

        .main-nav a {
            color: var(--current-text-color);
            text-decoration: none;
            font-weight: 500;
            font-size: var(--font-size-sm);
            padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5);
            border-radius: var(--border-radius-md);
            transition: var(--transition-ease);
            position: relative;
        }

        .main-nav a::after {
            /* Efek underline fancy */
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            display: block;
            margin-top: 4px;
            right: 0;
            background: var(--primary-color);
            transition: width 0.3s ease, left 0.3s ease;
        }

        .main-nav a:hover::after,
        .main-nav a:focus::after,
        .main-nav a.active-link::after {
            width: 100%;
            left: 0;
        }

        .main-nav a:hover,
        .main-nav a:focus,
        .main-nav a.active-link {
            color: var(--primary-color);
            background-color: color-mix(in srgb, var(--primary-color) 10%, transparent);
            text-decoration: none;
        }

        #theme-toggle {
            background-color: transparent;
            border: 1px solid var(--current-border-color);
            color: var(--current-text-color);
            padding: calc(var(--spacing-unit)*1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-ease);
        }

        #theme-toggle:hover {
            background-color: var(--current-input-bg);
            color: var(--primary-color);
            border-color: var(--primary-color);
            transform: rotate(15deg) scale(1.1);
        }

        .menu-toggle {
            display: none;
            /* Hanya tampil di mobile */
            font-size: var(--font-size-xl);
            color: var(--current-text-color);
        }


        /* -------------------------------------------------------------------------- */
        /*                                HERO SECTION                                */
        /* -------------------------------------------------------------------------- */
        .hero-section {
            min-height: 100vh;
            /* Untuk home, buat fullscreen */
            background: linear-gradient(rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.55)),
                url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80') no-repeat center center;
            background-size: cover;
            background-attachment: fixed;
            /* Efek parallax */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--text-color-light);
            padding: calc(var(--spacing-unit) * 4);
        }

        .hero-content {
            max-width: 850px;
            animation: heroTextAppear 1s ease-out 0.5s forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        @keyframes heroTextAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-content h1 {
            font-size: var(--font-size-5xl);
            margin-bottom: calc(var(--spacing-unit) * 3);
            font-weight: 700;
            line-height: 1.1;
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);
            color: var(--text-color-light);
            /* Override warna h1 default */
        }

        .hero-content p {
            font-size: var(--font-size-lg);
            margin-bottom: calc(var(--spacing-unit) * 5);
            opacity: 0.9;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: var(--neutral-200);
            /* Override warna p default */
        }


        /* -------------------------------------------------------------------------- */
        /*                              SEARCH CONTAINER                              */
        /* -------------------------------------------------------------------------- */
        .search-section {
            /* Container untuk form pencarian di bawah hero */
            background-color: var(--current-bg-color);
            /* Agar kontras dengan hero */
            padding-top: calc(var(--spacing-unit) * 6);
        }

        .search-container {
            background: var(--current-card-bg);
            padding: calc(var(--spacing-unit) * 4);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            margin-top: calc(var(--spacing-unit) * -10);
            /* Overlap dengan hero */
            position: relative;
            z-index: 10;
            /* Agar di atas hero sedikit */
            max-width: 1000px;
            /* Batasi lebar form pencarian */
            margin-left: auto;
            margin-right: auto;
            transition: var(--transition-ease);
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: calc(var(--spacing-unit) * 2.5);
            align-items: end;
            /* Align items ke bawah, bagus untuk tombol */
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: var(--font-size-sm);
            font-weight: 500;
            margin-bottom: var(--spacing-unit);
            color: var(--current-text-color);
        }


        /* -------------------------------------------------------------------------- */
        /*                             PROPERTY GRID & CARD                           */
        /* -------------------------------------------------------------------------- */
        .property-grid {
            display: grid;
            /* Buat kolom dinamis, minimal 300px, isi sisa ruang */
            grid-template-columns: repeat(auto-fill, minmax(min(100%, 340px), 1fr));
            gap: calc(var(--spacing-unit) * 4);
            margin-top: calc(var(--spacing-unit) * 4);
        }

        .property-card {
            background: var(--current-card-bg);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition-cubic);
            /* Transisi 'bounce' */
            box-shadow: var(--box-shadow-md);
            display: flex;
            flex-direction: column;
            /* Penting untuk footer tombol */
            border: 1px solid var(--current-border-color);
        }

        .property-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--box-shadow-lg);
        }

        .property-image-placeholder {
            /* Untuk gambar properti */
            height: 240px;
            background-size: cover;
            background-position: center;
            position: relative;
            border-bottom: 1px solid var(--current-border-color);
        }

        .property-image-placeholder::before {
            /* Overlay gradien subtil */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0) 40%);
        }

        .property-badge {
            /* Untuk status 'Disewa', 'Baru', dll. */
            position: absolute;
            top: calc(var(--spacing-unit) * 2);
            right: calc(var(--spacing-unit) * 2);
            background-color: var(--primary-color);
            color: white;
            padding: calc(var(--spacing-unit)*0.75) calc(var(--spacing-unit)*1.5);
            border-radius: var(--border-radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .property-info {
            padding: calc(var(--spacing-unit) * 2.5);
            flex-grow: 1;
            /* Agar info mengisi ruang */
            display: flex;
            flex-direction: column;
        }

        .property-info h3 {
            font-size: var(--font-size-xl);
            margin-bottom: var(--spacing-unit);
            color: var(--current-text-color);
            font-weight: 600;
        }

        .property-info .location,
        .property-info .price,
        .property-info .type {
            display: flex;
            align-items: center;
            color: var(--neutral-600);
            margin-bottom: calc(var(--spacing-unit) * 1);
            font-size: var(--font-size-sm);
        }

        [data-theme="dark"] .property-info .location,
        [data-theme="dark"] .property-info .price,
        [data-theme="dark"] .property-info .type {
            color: var(--neutral-400);
        }

        .property-info i {
            margin-right: var(--spacing-unit);
            color: var(--primary-color);
            width: 18px;
            /* Jaga ikon tetap sejajar */
            text-align: center;
        }

        .property-info .price {
            font-weight: 600;
            color: var(--accent-color);
            font-size: var(--font-size-lg);
        }

        .property-description-short {
            font-size: var(--font-size-sm);
            color: var(--neutral-500);
            margin-bottom: calc(var(--spacing-unit) * 2);
            line-height: 1.5;
            flex-grow: 1;
            /* Agar deskripsi mengisi ruang sebelum tombol */
            /* Batasi jumlah baris deskripsi */
            display: -webkit-box;
            /* -webkit-line-clamp: 2; */
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        [data-theme="dark"] .property-description-short {
            color: var(--neutral-500);
        }

        .property-card-actions {
            margin-top: auto;
            /* Dorong tombol ke bawah */
            padding-top: calc(var(--spacing-unit) * 2);
            /* Jarak dari konten di atasnya */
            border-top: 1px solid var(--current-border-color);
        }


        /* -------------------------------------------------------------------------- */
        /*                                 BUTTONS                                    */
        /* -------------------------------------------------------------------------- */
        .btn {
            display: inline-flex;
            /* Agar ikon dan teks sejajar */
            align-items: center;
            justify-content: center;
            padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: var(--font-size-md);
            text-align: center;
            transition: var(--transition-ease);
            text-decoration: none;
            line-height: 1;
            /* Jaga tinggi tombol konsisten */
            white-space: nowrap;
            /* Mencegah teks tombol wrap */
        }

        .btn i {
            margin-right: var(--spacing-unit);
        }

        .btn:hover,
        .btn:focus {
            text-decoration: none;
            /* Hapus underline default pada hover */
            transform: translateY(-2px);
            box-shadow: var(--box-shadow-sm);
        }

        .btn:active {
            transform: translateY(0px);
            box-shadow: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background-color: var(--primary-color-dark);
            color: white;
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--text-color-dark);
            /* Kontras baik dengan mint green */
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background-color: color-mix(in srgb, var(--secondary-color) 85%, black);
            color: var(--text-color-dark);
        }

        .btn-outline-primary {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-outline-primary:hover,
        .btn-outline-primary:focus {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-lg {
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            font-size: var(--font-size-lg);
        }

        .btn-full-width {
            width: 100%;
        }


        /* -------------------------------------------------------------------------- */
        /*                               MODAL (CUSTOM)                               */
        /* -------------------------------------------------------------------------- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.65);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            display: none;
            /* Awalnya tersembunyi */
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal-overlay.visible {
            display: flex;
            /* Ubah ke flex saat visible */
            opacity: 1;
        }

        .modal-container {
            background-color: var(--current-card-bg);
            padding: calc(var(--spacing-unit) * 4);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            width: 90%;
            max-width: 700px;
            /* Lebar modal */
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.95) translateY(20px);
            opacity: 0;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease-in-out;
        }

        .modal-overlay.visible .modal-container {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: calc(var(--spacing-unit) * 2);
            margin-bottom: calc(var(--spacing-unit) * 2);
            border-bottom: 1px solid var(--current-border-color);
        }

        .modal-title {
            font-size: var(--font-size-2xl);
            margin-bottom: 0;
            /* Hapus margin bawah default dari h_ */
        }

        .modal-close-btn {
            font-size: var(--font-size-xl);
            color: var(--neutral-500);
            background: none;
            border: none;
            padding: var(--spacing-unit);
        }

        .modal-close-btn:hover {
            color: var(--danger-color);
            transform: rotate(90deg);
        }

        .modal-body {
            margin-bottom: calc(var(--spacing-unit) * 3);
        }

        .modal-body img.modal-property-image {
            /* Styling khusus untuk gambar di modal */
            width: 100%;
            height: auto;
            max-height: 400px;
            object-fit: cover;
            border-radius: var(--border-radius-md);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .modal-body .property-detail-item {
            margin-bottom: var(--spacing-unit);
            font-size: var(--font-size-md);
        }

        .modal-body .property-detail-item strong {
            color: var(--current-text-color);
        }

        .modal-body .facilities-list {
            list-style: none;
            padding-left: 0;
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-unit);
        }

        .modal-body .facilities-list li {
            background-color: var(--current-input-bg);
            padding: calc(var(--spacing-unit)*0.75) calc(var(--spacing-unit)*1.5);
            border-radius: var(--border-radius-sm);
            font-size: var(--font-size-sm);
            color: var(--current-text-color);
            border: 1px solid var(--current-border-color);
        }

        .modal-body .facilities-list li i {
            margin-right: calc(var(--spacing-unit)*0.5);
            color: var(--secondary-color);
        }

        .modal-footer {
            text-align: right;
            padding-top: calc(var(--spacing-unit) * 2);
            border-top: 1px solid var(--current-border-color);
        }


        /* -------------------------------------------------------------------------- */
        /*                              TOAST (CUSTOM)                                */
        /* -------------------------------------------------------------------------- */
        .toast-container {
            position: fixed;
            bottom: calc(var(--spacing-unit) * 3);
            right: calc(var(--spacing-unit) * 3);
            z-index: 2500;
            /* Di atas modal */
            display: flex;
            flex-direction: column;
            gap: calc(var(--spacing-unit) * 1.5);
        }

        .toast {
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 2.5);
            border-radius: var(--border-radius-md);
            box-shadow: var(--box-shadow-lg);
            color: white;
            min-width: 280px;
            max-width: 350px;
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
            opacity: 0;
            transform: translateX(100%);
            animation: toastSlideIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards,
                toastFadeOut 0.5s ease-in-out 2.5s forwards;
            /* 2.5s sebelum fade out */
        }

        .toast i {
            margin-right: var(--spacing-unit);
            font-size: var(--font-size-lg);
        }

        @keyframes toastSlideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes toastFadeOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }

            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        .toast.success {
            background-color: var(--success-color);
        }

        .toast.error {
            background-color: var(--danger-color);
        }

        .toast.warning {
            background-color: var(--warning-color);
            color: var(--text-color-dark);
        }

        .toast.info {
            background-color: var(--primary-color);
        }

        .toast-close-btn {
            background: none;
            border: none;
            color: inherit;
            margin-left: auto;
            padding: calc(var(--spacing-unit) * 0.5);
            opacity: 0.7;
        }

        .toast-close-btn:hover {
            opacity: 1;
        }


        /* -------------------------------------------------------------------------- */
        /*                             DASHBOARD SECTION                              */
        /* -------------------------------------------------------------------------- */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: calc(var(--spacing-unit) * 3);
        }

        .stat-card {
            background-color: var(--current-card-bg);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-md);
            text-align: center;
            border: 1px solid var(--current-border-color);
            transition: var(--transition-cubic);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-lg);
        }

        .stat-card i {
            font-size: var(--font-size-3xl);
            color: var(--primary-color);
            margin-bottom: var(--spacing-unit);
        }

        .stat-card h3 {
            font-size: var(--font-size-lg);
            color: var(--neutral-600);
            margin-bottom: calc(var(--spacing-unit) * 0.5);
        }

        [data-theme="dark"] .stat-card h3 {
            color: var(--neutral-400);
        }

        .stat-number {
            font-size: var(--font-size-4xl);
            font-weight: 700;
            color: var(--current-text-color);
            margin-bottom: 0;
        }


        /* -------------------------------------------------------------------------- */
        /*                            ABOUT US SECTION                                */
        /* -------------------------------------------------------------------------- */
        .about-content {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }

        .about-content img.company-image {
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-md);
            margin-bottom: calc(var(--spacing-unit) * 3);
            max-height: 400px;
            object-fit: cover;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: calc(var(--spacing-unit) * 3);
            margin-top: calc(var(--spacing-unit) * 4);
        }

        .team-member-card {
            background-color: var(--current-card-bg);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-md);
            text-align: center;
            border: 1px solid var(--current-border-color);
            transition: var(--transition-cubic);
        }

        .team-member-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: var(--box-shadow-lg);
        }

        .team-member-card img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto calc(var(--spacing-unit) * 2) auto;
            border: 4px solid var(--primary-color);
        }

        .team-member-card h4 {
            font-size: var(--font-size-lg);
            margin-bottom: calc(var(--spacing-unit) * 0.5);
        }

        .team-member-card .role {
            font-size: var(--font-size-sm);
            color: var(--secondary-color);
            font-weight: 500;
            margin-bottom: var(--spacing-unit);
        }


        /* -------------------------------------------------------------------------- */
        /*                                  FOOTER                                    */
        /* -------------------------------------------------------------------------- */
        .app-footer {
            background-color: var(--neutral-900);
            color: var(--neutral-400);
            padding: calc(var(--spacing-unit) * 5) 0;
            text-align: center;
            margin-top: calc(var(--spacing-unit) * 6);
            /* Jarak dari konten terakhir */
        }

        [data-theme="dark"] .app-footer {
            background-color: var(--bg-color-dark);
            /* Lebih gelap dari dark theme biasa */
            border-top: 1px solid var(--neutral-700);
        }

        .footer-content p {
            margin-bottom: var(--spacing-unit);
            font-size: var(--font-size-sm);
            color: var(--neutral-400);
            /* Pastikan kontras */
        }

        .footer-social-links a {
            color: var(--neutral-400);
            margin: 0 calc(var(--spacing-unit) * 1.5);
            font-size: var(--font-size-xl);
            transition: var(--transition-ease);
        }

        .footer-social-links a:hover {
            color: var(--primary-color);
            transform: scale(1.2);
        }


        /* -------------------------------------------------------------------------- */
        /*                          RESPONSIVE ADJUSTMENTS                            */
        /* -------------------------------------------------------------------------- */
        @media (max-width: 1024px) {
            :root {
                --font-size-4xl: 2.25rem;
                /* 36px */
                --font-size-5xl: 3rem;
                /* 48px */
            }

            .hero-content h1 {
                font-size: var(--font-size-5xl);
            }

            .search-container {
                max-width: 90%;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding-left: calc(var(--spacing-unit) * 2);
                padding-right: calc(var(--spacing-unit) * 2);
            }

            .main-nav {
                display: none;
                /* Sembunyikan nav utama */
                position: absolute;
                top: 100%;
                /* Di bawah header */
                left: 0;
                width: 100%;
                background-color: var(--current-header-bg);
                /* Sama dengan header */
                box-shadow: var(--box-shadow-sm);
                padding: var(--spacing-unit);
                border-top: 1px solid var(--current-border-color);
            }

            .main-nav.active {
                display: block;
            }

            /* Tampilkan saat menu-toggle diklik */
            .main-nav ul {
                flex-direction: column;
                gap: 0;
            }

            .main-nav ul li {
                width: 100%;
            }

            .main-nav ul li a {
                display: block;
                width: 100%;
                padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
                text-align: left;
            }

            .main-nav ul li a::after {
                display: none;
            }

            /* Hilangkan efek underline di mobile nav */
            .main-nav ul li a:hover,
            .main-nav ul li a.active-link {
                background-color: color-mix(in srgb, var(--primary-color) 15%, transparent);
            }

            .menu-toggle {
                display: block;
                /* Tampilkan hamburger menu */
            }

            .hero-content h1 {
                font-size: var(--font-size-4xl);
            }

            .hero-content p {
                font-size: var(--font-size-md);
            }

            .search-container {
                margin-top: calc(var(--spacing-unit) * -8);
                padding: calc(var(--spacing-unit) * 3);
            }

            .search-filters {
                grid-template-columns: 1fr;
                /* Satu kolom di mobile */
                gap: calc(var(--spacing-unit) * 2);
            }

            .property-grid {
                grid-template-columns: repeat(auto-fill, minmax(min(100%, 280px), 1fr));
                gap: calc(var(--spacing-unit) * 3);
            }

            .modal-container {
                width: 95%;
            }

            .toast-container {
                right: calc(var(--spacing-unit) * 1.5);
                bottom: calc(var(--spacing-unit) * 1.5);
                left: calc(var(--spacing-unit) * 1.5);
                width: auto;
                /* Agar toast bisa full width jika diperlukan */
            }

            .toast {
                max-width: none;
            }

            /* Izinkan toast mengambil lebar penuh jika perlu */
        }

        @media (max-width: 480px) {
            :root {
                --font-size-3xl: 1.75rem;
                /* 28px */
                --font-size-4xl: 2rem;
                /* 32px */
            }

            .hero-content h1 {
                font-size: var(--font-size-4xl);
            }

            .app-section {
                padding: calc(var(--spacing-unit) * 4) 0;
            }

            .container {
                padding-left: calc(var(--spacing-unit) * 2);
                padding-right: calc(var(--spacing-unit) * 2);
            }
        }

        /* -------------------------------------------------------------------------- */
        /*                        AKSESIBILITAS & PREFERENSI                          */
        /* -------------------------------------------------------------------------- */
        @media (prefers-reduced-motion: reduce) {
            html {
                scroll-behavior: auto;
            }

            /* Nonaktifkan smooth scroll */
            *,
            *::before,
            *::after {
                animation: none !important;
                transition: none !important;
            }
        }

        :focus-visible {
            /* Style fokus yang jelas untuk navigasi keyboard */
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
            box-shadow: 0 0 0 5px color-mix(in srgb, var(--primary-color) 20%, transparent);
        }

        /* Khusus untuk elemen yang mungkin sulit diberi outline default */
        .logo:focus-visible,
        .main-nav a:focus-visible,
        #theme-toggle:focus-visible,
        .menu-toggle:focus-visible,
        .btn:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 3px;
        }

        .property-card:focus-within {
            /* Saat elemen di dalam kartu mendapat fokus */
            outline: 2px solid var(--primary-color);
            outline-offset: 3px;
            box-shadow: var(--box-shadow-lg), 0 0 0 3px color-mix(in srgb, var(--primary-color) 30%, transparent) !important;
        }
    </style>
</head>

<body>
    <!-- Header Aplikasi -->
    <header class="app-header" id="appHeader">
        <div class="container nav-container">
            <a href="#home" class="logo nav-link" aria-label="Green Valley Homepage">
                <i class="fas fa-building-columns"></i> Green Valley
            </a>
            <nav class="main-nav" id="mainNav" aria-label="Navigasi Utama">
                <ul>
                    <li><a href="#home" class="nav-link active-link">Beranda</a></li>
                    <li><a href="#properties" class="nav-link">Properti</a></li>
                    <li><a href="#dashboard" class="nav-link">Dasbor</a></li>
                    <li><a href="#about" class="nav-link">Tentang Kami</a></li>
                    <li>
                        <button id="theme-toggle" class="nav-link-button" aria-label="Ganti Tema Gelap/Terang"
                            title="Ganti Tema">
                            <i class="fas fa-moon"></i>
                        </button>
                    </li>
                </ul>
            </nav>
            <button class="menu-toggle" id="menuToggle" aria-label="Buka Menu Navigasi" aria-expanded="false"
                aria-controls="mainNav">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Konten Utama Aplikasi (SPA) -->
    <main class="main-content">
        <!-- Section: Beranda (Hero & Pencarian) -->
        <section id="home" class="app-section hero-section active">
            <div class="hero-content">
                <h1>Temukan Hunian Premium <span style="color: var(--secondary-color);">Impian Anda</span></h1>
                <p>Green Valley menawarkan solusi hunian modern eksklusif dengan lokasi strategis, fasilitas lengkap,
                    dan desain memukau untuk gaya hidup urban Anda.</p>
                <a href="#properties" class="btn btn-primary btn-lg nav-link">
                    <i class="fas fa-search"></i> Mulai Jelajahi Properti
                </a>
            </div>
        </section>

        <section id="search-tool" class="app-section search-section">
            <div class="container">
                <div class="search-container">
                    <form id="searchForm" class="search-filters">
                        <div class="form-group">
                            <label for="location-search">Lokasi</label>
                            <input type="text" placeholder="cth: Jakarta Pusat" id="location-search"
                                aria-label="Cari berdasarkan lokasi">
                        </div>
                        <div class="form-group">
                            <label for="type-select">Tipe Unit</label>
                            <select id="type-select" aria-label="Pilih tipe unit">
                                <option value="">Semua Tipe</option>
                                <option value="Studio">Studio</option>
                                <option value="1BR">1 Kamar Tidur</option>
                                <option value="2BR">2 Kamar Tidur</option>
                                <option value="3BR+">3+ Kamar Tidur</option>
                                <option value="Penthouse">Penthouse</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="budget-search">Budget Maks (Rp/bulan)</label>
                            <input type="number" placeholder="cth: 15000000" id="budget-search" min="0" step="500000"
                                aria-label="Masukkan budget maksimal per bulan">
                        </div>
                        <button type="submit" class="btn btn-primary btn-full-width">
                            <i class="fas fa-filter"></i> Terapkan Filter
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Section: Daftar Properti -->
        <section id="properties" class="app-section">
            <div class="container">
                <h2 class="section-title">Daftar Properti Tersedia</h2>
                <p
                    style="text-align: center; max-width: 700px; margin-left: auto; margin-right:auto; margin-top: calc(var(--spacing-unit) * -3); margin-bottom: calc(var(--spacing-unit) * 4);">
                    Jelajahi koleksi apartemen premium kami. Gunakan filter di atas untuk menemukan yang paling sesuai
                    dengan kebutuhan Anda.
                </p>
                <div class="property-grid" id="propertyGrid" aria-live="polite">
                    <!-- Kartu properti akan dirender di sini oleh JavaScript -->
                    <p id="noResultsMessage"
                        style="display: none; text-align: center; grid-column: 1 / -1; font-size: var(--font-size-lg);">
                        <i class="fas fa-search-minus"
                            style="font-size: 2rem; margin-bottom: 1rem; color: var(--accent-color);"></i><br>
                        Oops! Tidak ada properti yang cocok dengan kriteria pencarian Anda. Coba ubah filter atau lihat
                        semua properti.
                    </p>
                </div>
            </div>
        </section>

        <!-- Section: Dasbor (Contoh statistik) -->
        <section id="dashboard" class="app-section">
            <div class="container">
                <h2 class="section-title">Dasbor Ringkasan</h2>
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <i class="fas fa-city"></i>
                        <h3>Total Properti Terdaftar</h3>
                        <p id="total-properties-stat" class="stat-number">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle"></i>
                        <h3>Unit Tersedia</h3>
                        <p id="available-units-stat" class="stat-number">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>Lokasi Populer</h3>
                        <p id="popular-location-stat" class="stat-number" style="font-size: var(--font-size-2xl);">
                            Jakarta Selatan</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <h3>Klien Puas (Simulasi)</h3>
                        <p id="satisfied-clients-stat" class="stat-number">1,200+</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Tentang Kami -->
        <section id="about" class="app-section">
            <div class="container">
                <h2 class="section-title">Tentang Green Valley</h2>
                <div class="about-content">
                    <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                        alt="Interior apartemen modern dan mewah" class="company-image">
                    <p>Green Valley adalah platform penyewaan apartemen premium yang berdedikasi untuk menyediakan
                        pengalaman hidup urban terbaik bagi Anda. Kami percaya bahwa tempat tinggal bukan hanya sekadar
                        bangunan, tetapi sebuah ruang yang mencerminkan gaya hidup, kenyamanan, dan aspirasi.</p>
                    <p>Misi kami adalah menghubungkan Anda dengan hunian-hunian eksklusif di lokasi-lokasi paling
                        strategis, dilengkapi dengan fasilitas modern dan layanan prima. Dengan Green Valley, proses
                        pencarian dan penyewaan apartemen impian menjadi lebih mudah, transparan, dan menyenangkan.</p>

                    <h3 style="margin-top: calc(var(--spacing-unit) * 5); font-size: var(--font-size-2xl);">Tim
                        Profesional Kami</h3>
                    <div class="team-grid">
                        <div class="team-member-card">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Foto John Doe">
                            <h4>John Doe</h4>
                            <p class="role">CEO & Founder</p>
                            <p>Visioner di balik Green Valley, membawa pengalaman bertahun-tahun di industri properti.
                            </p>
                        </div>
                        <div class="team-member-card">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Foto Jane Smith">
                            <h4>Jane Smith</h4>
                            <p class="role">Head of Operations</p>
                            <p>Memastikan semua operasional berjalan lancar dan layanan pelanggan yang prima.</p>
                        </div>
                        <div class="team-member-card">
                            <img src="https://randomuser.me/api/portraits/men/36.jpg" alt="Foto Alex Johnson">
                            <h4>Alex Johnson</h4>
                            <p class="role">Lead Property Consultant</p>
                            <p>Ahli dalam mencocokkan klien dengan properti yang sempurna sesuai kebutuhan.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Aplikasi -->
    <footer class="app-footer">
        <div class="container footer-content">
            <p>© <span id="currentYear"></span> Green Valley Properties. Hak Cipta Dilindungi.</p>
            <p>Platform Sewa Apartemen Premium Pilihan Anda.</p>
            <div class="footer-social-links">
                <a href="#" aria-label="Green Valley di Facebook" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Green Valley di Instagram" title="Instagram"><i
                        class="fab fa-instagram"></i></a>
                <a href="#" aria-label="Green Valley di Twitter" title="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Green Valley di LinkedIn" title="LinkedIn"><i
                        class="fab fa-linkedin-in"></i></a>
            </div>
        </div>
    </footer>

    <!-- Modal Kustom untuk Detail Properti -->
    <div class="modal-overlay" id="propertyModalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle"
        style="display: none;">
        <div class="modal-container" id="propertyModalContainer">
            <div class="modal-header">
                <h3 id="modalTitle" class="modal-title">Detail Properti</h3>
                <button class="modal-close-btn" id="modalCloseBtn" aria-label="Tutup Modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBodyContent">
                <!-- Konten detail properti akan diisi oleh JavaScript -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="modalBookBtn">
                    <i class="fas fa-calendar-check"></i> Ajukan Sewa
                </button>
                <button class="btn btn-outline-primary" id="modalContactBtn" style="margin-left: var(--spacing-unit);">
                    <i class="fas fa-phone-alt"></i> Hubungi Agen
                </button>
            </div>
        </div>
    </div>

    <!-- Kontainer untuk Toast Notification Kustom -->
    <div class="toast-container" id="toastContainer" aria-live="assertive" aria-atomic="true"></div>

    <!-- Script Aplikasi Kustom (Vanilla JS) -->
    <script>
        // Pastikan DOM siap sebelum menjalankan skrip
        document.addEventListener('DOMContentLoaded', () => {

            /* -------------------------------------------------------------------------- */
            /*                               STATE APLIKASI                               */
            /* -------------------------------------------------------------------------- */
            const appState = {
                currentPage: 'home',
                theme: localStorage.getItem('theme') || 'light',
                properties: [
                    // Data properti yang lebih beragam dan "fancy"
                    {
                        id: 1,
                        name: "The Royal Penthouse",
                        location: "Jakarta Pusat",
                        price: 75000000,
                        type: "Penthouse",
                        bedrooms: 4,
                        bathrooms: 5,
                        size: 450, // m2
                        image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                        description: "Penthouse ultra-mewah dengan pemandangan 360 derajat kota Jakarta, kolam renang pribadi, dan lift pribadi. Interior dirancang oleh desainer ternama.",
                        facilities: ["Kolam Renang Pribadi", "Lift Pribadi", "Gym Lengkap", "Bioskop Mini", "Sky Lounge", "Keamanan 24 Jam", "Parkir Valet", "Smart Home System"],
                        status: "available",
                        agent: { name: "Riana Dewi", phone: "081234567890" }
                    },
                    {
                        id: 2,
                        name: "Sky Garden Residence",
                        location: "Jakarta Selatan",
                        price: 25000000,
                        type: "3BR+",
                        bedrooms: 3,
                        bathrooms: 2,
                        size: 180,
                        image: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                        description: "Apartemen luas dengan 3 kamar tidur, balkon dengan taman vertikal, dan akses langsung ke fasilitas premium. Cocok untuk keluarga modern.",
                        facilities: ["Kolam Renang Infinity", "Gym & Spa", "Area BBQ", "Playground Anak", "Jogging Track", "Ruang Serbaguna", "Akses Kartu"],
                        status: "available",
                        agent: { name: "Budi Santoso", phone: "081298765432" }
                    },
                    {
                        id: 3,
                        name: "Urban Oasis Studio",
                        location: "Jakarta Barat",
                        price: 8500000,
                        type: "Studio",
                        bedrooms: 1, // Studio dianggap 1BR untuk filter mudah
                        bathrooms: 1,
                        size: 45,
                        image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                        description: "Studio modern dan fungsional di jantung kota, dekat dengan pusat bisnis dan hiburan. Fully furnished dengan perabotan berkualitas.",
                        facilities: ["Co-working Space", "Rooftop Cafe", "Gym Mini", "Laundry Service", "Keamanan 24 Jam", "Parkir Basement"],
                        status: "rented",
                        agent: { name: "Citra Lestari", phone: "081122334455" }
                    },
                    {
                        id: 4,
                        name: "The Grandieur Apartment",
                        location: "Surabaya Pusat",
                        price: 18000000,
                        type: "2BR",
                        bedrooms: 2,
                        bathrooms: 2,
                        size: 90,
                        image: "https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                        description: "Apartemen 2 kamar tidur dengan desain elegan dan pemandangan kota Surabaya. Fasilitas lengkap untuk kenyamanan maksimal.",
                        facilities: ["Kolam Renang Olympic", "Tennis Court", "Fitness Center", "Sauna", "Jacuzzi", "Perpustakaan Digital", "Concierge"],
                        status: "available",
                        agent: { name: "Agus Wijaya", phone: "085678901234" }
                    },
                    {
                        id: 5,
                        name: "Serene Lakeside Villa",
                        location: "Bogor",
                        price: 35000000,
                        type: "3BR+",
                        bedrooms: 4,
                        bathrooms: 3,
                        size: 250,
                        image: "https://images.unsplash.com/photo-1598228723793-52759bba239c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                        description: "Villa eksklusif dengan pemandangan danau yang menenangkan. Menawarkan privasi dan kemewahan di tengah alam.",
                        facilities: ["Private Pool", "Taman Luas", "Gazebo", "Area Api Unggun", "Dapur Outdoor", "Garasi 2 Mobil", "Sistem Keamanan Canggih"],
                        status: "available",
                        agent: { name: "Putri Ayu", phone: "087711223344" }
                    },
                    {
                        id: 6,
                        name: "Compact City Living",
                        location: "Jakarta Utara",
                        price: 12000000,
                        type: "1BR",
                        bedrooms: 1,
                        bathrooms: 1,
                        size: 60,
                        image: "https://images.unsplash.com/photo-1494203484021-3c454daf695d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                        description: "Apartemen satu kamar tidur yang cerdas dan ringkas, ideal untuk profesional muda. Lokasi strategis dekat dengan transportasi publik.",
                        facilities: ["Smart Lock System", "High-speed Internet", "Gym", "Swimming Pool", "Minimarket 24 Jam", "Kafe"],
                        status: "available",
                        agent: { name: "Kevin Hartono", phone: "089955443322" }
                    }
                ],
                filteredProperties: [],
            };

            /* -------------------------------------------------------------------------- */
            /*                              ELEMEN DOM UTAMA                              */
            /* -------------------------------------------------------------------------- */
            const mainContent = document.querySelector('.main-content');
            const appSections = document.querySelectorAll('.app-section');
            const navLinks = document.querySelectorAll('.nav-link');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeIcon = themeToggleBtn.querySelector('i');
            const propertyGrid = document.getElementById('propertyGrid');
            const searchForm = document.getElementById('searchForm');
            const locationInput = document.getElementById('location-search');
            const typeInput = document.getElementById('type-select');
            const budgetInput = document.getElementById('budget-search');
            const noResultsMessage = document.getElementById('noResultsMessage');

            // Modal Elements
            const modalOverlay = document.getElementById('propertyModalOverlay');
            const modalContainer = document.getElementById('propertyModalContainer');
            const modalTitleEl = document.getElementById('modalTitle');
            const modalBodyContentEl = document.getElementById('modalBodyContent');
            const modalCloseBtn = document.getElementById('modalCloseBtn');
            const modalBookBtn = document.getElementById('modalBookBtn');
            const modalContactBtn = document.getElementById('modalContactBtn');

            // Toast Container
            const toastContainer = document.getElementById('toastContainer');

            // Mobile Menu
            const menuToggle = document.getElementById('menuToggle');
            const mainNav = document.getElementById('mainNav');

            /* -------------------------------------------------------------------------- */
            /*                              FUNGSI UTILITAS                               */
            /* -------------------------------------------------------------------------- */

            /**
             * Menampilkan Toast Notification kustom.
             * @param {string} message Pesan yang akan ditampilkan.
             * @param {string} type Tipe toast ('success', 'error', 'warning', 'info'). Default 'info'.
             * @param {number} duration Durasi tampilan toast dalam milidetik. Default 3000ms.
             */
            const showToast = (message, type = 'info', duration = 3000) => {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.setAttribute('role', 'alert');

                let iconClass = 'fa-info-circle';
                if (type === 'success') iconClass = 'fa-check-circle';
                else if (type === 'error') iconClass = 'fa-exclamation-circle';
                else if (type === 'warning') iconClass = 'fa-exclamation-triangle';

                toast.innerHTML = `
                <i class="fas ${iconClass}"></i>
                <span>${message}</span>
                <button class="toast-close-btn" aria-label="Tutup notifikasi">×</button>
            `;

                toastContainer.appendChild(toast);

                // Fungsi untuk menghapus toast
                const removeToast = () => {
                    toast.style.animation = 'toastFadeOut 0.5s ease-in-out forwards';
                    toast.addEventListener('animationend', () => {
                        if (toast.parentNode) { // Cek apakah toast masih ada di DOM
                            toast.remove();
                        }
                    }, { once: true });
                };

                // Tombol tutup manual
                toast.querySelector('.toast-close-btn').addEventListener('click', removeToast);

                // Hapus otomatis setelah durasi
                setTimeout(removeToast, duration);
            };

            /**
             * Format angka menjadi format mata uang Rupiah.
             * @param {number} number Angka yang akan diformat.
             * @returns {string} String angka dalam format Rupiah.
             */
            const formatCurrency = (number) => {
                if (typeof number !== 'number') return 'N/A';
                return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(number);
            };

            /**
             * Memotong teks jika terlalu panjang dan menambahkan elipsis.
             * @param {string} text Teks yang akan dipotong.
             * @param {number} maxLength Panjang maksimum teks.
             * @returns {string} Teks yang sudah dipotong atau teks asli.
             */
            const truncateText = (text, maxLength = 100) => {
                if (text.length <= maxLength) return text;
                return text.substring(0, maxLength).trim() + "...";
            };

            /* -------------------------------------------------------------------------- */
            /*                                  TEMA                                      */
            /* -------------------------------------------------------------------------- */
            const applyTheme = (theme) => {
                document.documentElement.setAttribute('data-theme', theme);
                appState.theme = theme;
                localStorage.setItem('theme', theme);
                if (theme === 'dark') {
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
            };

            themeToggleBtn.addEventListener('click', () => {
                const newTheme = appState.theme === 'light' ? 'dark' : 'light';
                applyTheme(newTheme);
                showToast(`Tema diubah ke ${newTheme === 'light' ? 'Terang' : 'Gelap'}`, 'info', 2000);
            });

            // Terapkan tema yang tersimpan saat memuat halaman
            applyTheme(appState.theme);

            /* -------------------------------------------------------------------------- */
            /*                              NAVIGASI SPA                                  */
            /* -------------------------------------------------------------------------- */
            const setActiveSection = (targetId) => {
                // Sembunyikan hero search jika tidak di halaman home atau properties
                const searchToolSection = document.getElementById('search-tool');
                if (targetId === 'home' || targetId === 'properties') {
                    searchToolSection.classList.add('active');
                } else {
                    searchToolSection.classList.remove('active');
                }

                appSections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === targetId) {
                        section.classList.add('active');
                        appState.currentPage = targetId;
                        // Update judul dokumen
                        const pageTitle = section.querySelector('h1, h2')?.textContent || 'Green Valley';
                        document.title = `${pageTitle} - Green Valley`;
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-link');
                    if (link.getAttribute('href') === `#${targetId}`) {
                        link.classList.add('active-link');
                    }
                });

                // Gulir ke atas halaman
                window.scrollTo(0, 0);

                // Tutup menu mobile jika terbuka
                if (mainNav.classList.contains('active')) {
                    mainNav.classList.remove('active');
                    menuToggle.setAttribute('aria-expanded', 'false');
                    menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
                }
            };

            // Navigasi berdasarkan hash URL saat halaman dimuat
            const handleInitialNavigation = () => {
                const hash = window.location.hash.substring(1);
                const targetSection = document.getElementById(hash);
                if (hash && targetSection) {
                    setActiveSection(hash);
                } else {
                    setActiveSection('home'); // Default ke 'home'
                    window.location.hash = 'home'; // Set hash default jika tidak ada
                }
            };

            // Event listener untuk link navigasi
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    if (document.getElementById(targetId)) {
                        window.location.hash = targetId; // Ini akan memicu 'hashchange'
                    }
                });
            });

            // Event listener untuk perubahan hash URL
            window.addEventListener('hashchange', handleInitialNavigation);


            /* -------------------------------------------------------------------------- */
            /*                             RENDER PROPERTI                                */
            /* -------------------------------------------------------------------------- */
            const renderProperties = (propertiesToRender = appState.properties) => {
                propertyGrid.innerHTML = ''; // Kosongkan grid sebelum render ulang
                if (propertiesToRender.length === 0) {
                    noResultsMessage.style.display = 'block';
                    return;
                }
                noResultsMessage.style.display = 'none';

                propertiesToRender.forEach(property => {
                    const card = document.createElement('article');
                    card.className = 'property-card';
                    card.setAttribute('tabindex', '0'); // Aksesibilitas: agar bisa di-fokus
                    card.setAttribute('aria-labelledby', `property-title-${property.id}`);
                    card.setAttribute('aria-describedby', `property-desc-${property.id}`);

                    const availabilityBadge = property.status === 'available' ?
                        `<span class="property-badge" style="background-color: var(--success-color);">Tersedia</span>` :
                        `<span class="property-badge" style="background-color: var(--danger-color);">Disewa</span>`;

                    card.innerHTML = `
                    <div class="property-image-placeholder" style="background-image: url('${property.image}');" role="img" aria-label="${property.name}">
                        ${availabilityBadge}
                    </div>
                    <div class="property-info">
                        <h3 id="property-title-${property.id}">${truncateText(property.name, 30)}</h3>
                        <p class="location"><i class="fas fa-map-marker-alt"></i> ${property.location}</p>
                        <p class="price"><i class="fas fa-dollar-sign"></i> ${formatCurrency(property.price)}<span style="font-size: var(--font-size-xs); color: var(--neutral-500);">/bulan</span></p>
                        <p class="type"><i class="fas fa-home"></i> ${property.type} (${property.bedrooms} Kamar, ${property.size} m²)</p>
                        <p class="property-description-short" id="property-desc-${property.id}">${truncateText(property.description, 80)}</p>
                        <div class="property-card-actions">
                            <button class="btn btn-primary btn-full-width view-details-btn" data-id="${property.id}" ${property.status !== 'available' ? 'disabled' : ''}>
                                <i class="fas fa-info-circle"></i> ${property.status === 'available' ? 'Lihat Detail' : 'Sudah Disewa'}
                            </button>
                        </div>
                    </div>
                `;
                    // Event listener untuk tombol "Lihat Detail"
                    card.querySelector('.view-details-btn').addEventListener('click', () => {
                        if (property.status === 'available') {
                            openPropertyModal(property.id);
                        }
                    });
                    // Event listener untuk 'Enter' pada kartu (aksesibilitas)
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' && property.status === 'available') {
                            openPropertyModal(property.id);
                        }
                    });
                    propertyGrid.appendChild(card);
                });
            };


            /* -------------------------------------------------------------------------- */
            /*                             FILTER PROPERTI                                */
            /* -------------------------------------------------------------------------- */
            const filterProperties = () => {
                const locationQuery = locationInput.value.toLowerCase().trim();
                const typeQuery = typeInput.value;
                const budgetQuery = parseFloat(budgetInput.value) || Infinity; // Jika kosong, anggap budget tak terbatas

                appState.filteredProperties = appState.properties.filter(property => {
                    const matchesLocation = !locationQuery || property.location.toLowerCase().includes(locationQuery);
                    const matchesType = !typeQuery || property.type === typeQuery || (typeQuery === "1BR" && property.type === "Studio"); // Studio bisa dianggap 1BR
                    const matchesBudget = property.price <= budgetQuery;

                    // Tambahan filter untuk bedrooms jika tipe spesifik dipilih
                    let matchesBedrooms = true;
                    if (typeQuery === "1BR") matchesBedrooms = property.bedrooms === 1;
                    else if (typeQuery === "2BR") matchesBedrooms = property.bedrooms === 2;
                    else if (typeQuery === "3BR+") matchesBedrooms = property.bedrooms >= 3;
                    else if (typeQuery === "Penthouse") matchesBedrooms = property.type === "Penthouse"; // Penthouse adalah tipe khusus

                    return matchesLocation && matchesType && matchesBudget && matchesBedrooms;
                });

                renderProperties(appState.filteredProperties);
                showToast(`${appState.filteredProperties.length} properti ditemukan.`, 'info', 2000);

                // Jika bukan di halaman properti, pindah ke sana
                if (appState.currentPage !== 'properties') {
                    window.location.hash = 'properties';
                }
            };

            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                filterProperties();
            });


            /* -------------------------------------------------------------------------- */
            /*                            MODAL PROPERTI (CUSTOM)                         */
            /* -------------------------------------------------------------------------- */
            let currentFocusedElement = null; // Untuk mengembalikan fokus setelah modal ditutup

            const openPropertyModal = (propertyId) => {
                currentFocusedElement = document.activeElement; // Simpan elemen yang sedang fokus

                const property = appState.properties.find(p => p.id === propertyId);
                if (!property) {
                    showToast('Properti tidak ditemukan.', 'error');
                    return;
                }

                modalTitleEl.textContent = property.name;
                modalBodyContentEl.innerHTML = `
                <img src="${property.image}" alt="Gambar ${property.name}" class="modal-property-image">
                <p class="property-detail-item"><strong>Lokasi:</strong> ${property.location}</p>
                <p class="property-detail-item"><strong>Harga Sewa:</strong> ${formatCurrency(property.price)} / bulan</p>
                <p class="property-detail-item"><strong>Tipe:</strong> ${property.type} (${property.bedrooms} kamar tidur, ${property.bathrooms} kamar mandi)</p>
                <p class="property-detail-item"><strong>Luas:</strong> ${property.size} m²</p>
                <p class="property-detail-item"><strong>Deskripsi Lengkap:</strong><br>${property.description}</p>
                <p class="property-detail-item"><strong>Fasilitas Unggulan:</strong></p>
                <ul class="facilities-list">
                    ${property.facilities.map(f => `<li><i class="fas fa-check-square"></i>${f}</li>`).join('')}
                </ul>
                <p class="property-detail-item" style="margin-top: 1rem;"><strong>Agen:</strong> ${property.agent.name} (${property.agent.phone})</p>
            `;

                modalOverlay.style.display = 'flex'; // Gunakan flex untuk centering
                // Timeout kecil untuk memastikan display sudah diterapkan sebelum animasi opacity/transform
                setTimeout(() => {
                    modalOverlay.classList.add('visible');
                    modalContainer.classList.add('visible'); // Untuk animasi modal-container
                    modalContainer.focus(); // Set fokus ke kontainer modal
                }, 10); // Penundaan kecil

                // Menangani fokus di dalam modal (focus trapping)
                const focusableElements = modalContainer.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                const firstFocusableElement = focusableElements[0];
                const lastFocusableElement = focusableElements[focusableElements.length - 1];

                modalContainer.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        if (e.shiftKey) { // Shift + Tab
                            if (document.activeElement === firstFocusableElement) {
                                lastFocusableElement.focus();
                                e.preventDefault();
                            }
                        } else { // Tab
                            if (document.activeElement === lastFocusableElement) {
                                firstFocusableElement.focus();
                                e.preventDefault();
                            }
                        }
                    }
                });

                // Simpan ID properti untuk tombol aksi
                modalBookBtn.dataset.propertyId = propertyId;
                modalContactBtn.dataset.propertyId = propertyId; // atau data agen
            };

            const closeModal = () => {
                modalOverlay.classList.remove('visible');
                modalContainer.classList.remove('visible');

                modalOverlay.addEventListener('transitionend', () => {
                    modalOverlay.style.display = 'none';
                    if (currentFocusedElement) {
                        currentFocusedElement.focus(); // Kembalikan fokus
                        currentFocusedElement = null;
                    }
                }, { once: true });
            };

            modalCloseBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) { // Hanya tutup jika klik di overlay, bukan di konten modal
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => { // Tutup dengan tombol Escape
                if (e.key === 'Escape' && modalOverlay.classList.contains('visible')) {
                    closeModal();
                }
            });

            modalBookBtn.addEventListener('click', () => {
                showToast(`Pengajuan sewa untuk properti #${modalBookBtn.dataset.propertyId} sedang diproses.`, 'success');
                closeModal();
            });
            modalContactBtn.addEventListener('click', () => {
                const propertyId = parseInt(modalBookBtn.dataset.propertyId);
                const property = appState.properties.find(p => p.id === propertyId);
                showToast(`Silakan hubungi agen ${property.agent.name} di ${property.agent.phone}.`, 'info', 5000);
                // Mungkin bisa ditambahkan: window.location.href = `tel:${property.agent.phone}`;
                closeModal();
            });


            /* -------------------------------------------------------------------------- */
            /*                              UPDATE DASBOR                                 */
            /* -------------------------------------------------------------------------- */
            const updateDashboard = () => {
                document.getElementById('total-properties-stat').textContent = appState.properties.length;
                const availableUnits = appState.properties.filter(p => p.status === 'available').length;
                document.getElementById('available-units-stat').textContent = availableUnits;
                // Logika untuk lokasi populer bisa lebih kompleks, ini contoh sederhana
                // Untuk 'satisfied-clients-stat' adalah data simulasi, jadi biarkan statis di HTML atau update dengan angka acak.
            };


            /* -------------------------------------------------------------------------- */
            /*                             MOBILE MENU TOGGLE                             */
            /* -------------------------------------------------------------------------- */
            menuToggle.addEventListener('click', () => {
                const isExpanded = mainNav.classList.toggle('active');
                menuToggle.setAttribute('aria-expanded', isExpanded);
                if (isExpanded) {
                    menuToggle.innerHTML = '<i class="fas fa-times"></i>'; // Ganti ikon ke 'close'
                } else {
                    menuToggle.innerHTML = '<i class="fas fa-bars"></i>'; // Ganti ikon ke 'hamburger'
                }
            });


            /* -------------------------------------------------------------------------- */
            /*                               FOOTER DINAMIS                               */
            /* -------------------------------------------------------------------------- */
            document.getElementById('currentYear').textContent = new Date().getFullYear();


            /* -------------------------------------------------------------------------- */
            /*                               INISIALISASI APLIKASI                        */
            /* -------------------------------------------------------------------------- */
            const initializeApp = () => {
                appState.filteredProperties = [...appState.properties]; // Awalnya tampilkan semua
                renderProperties(appState.filteredProperties);
                updateDashboard();
                handleInitialNavigation(); // Panggil ini untuk set halaman aktif berdasarkan hash awal

                // Pesan selamat datang
                setTimeout(() => {
                    showToast('Selamat datang di Green Valley! Mulai cari hunian impian Anda.', 'info', 4000);
                }, 1000);
            };

            initializeApp();

        }); // Akhir dari DOMContentLoaded
    </script>
</body>

</html>