<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Green Valley - Platform sewa apartemen premium dengan pengalaman digital yang mudah, aman, dan terpercaya. Temukan hunian impian Anda dengan desain fancy dan antarmuka yang memanjakan mata.">
  <meta name="keywords"
    content="sewa apartemen, rumah, kost, properti, Green Valley, ulasan terpercaya, desain fancy, modern, SPA">
  <title>Green Valley - Sewa Hunian Impianmu | Desain Fancy & Modern</title>
  <!-- Favicon: Menggunakan emoji sebagai data URI SVG seperti pada kode asli, karena permintaan menyebut "favicon" sebagai salah satu opsi ikon.
       Jika larangan SVG bersifat absolut, ini bisa diganti dengan data URI PNG atau file .ico.
       Namun, untuk ikon di dalam aplikasi, Font Awesome (basis font) akan digunakan. -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">

  <!-- Preconnect dan Preload Fonts untuk performa -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
    as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet">
  </noscript>

  <!-- Font Awesome untuk ikon (non-SVG) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer">

  <style>
    /* === ROOT VARIABLES === */
    :root {
      /* Skema Warna (Light Mode - Fancy & Modern) */
      --background: 220 20% 98%;
      /* Latar belakang utama aplikasi */
      --foreground: 220 15% 20%;
      /* Warna teks utama */
      --card: 0 0% 100%;
      /* Latar belakang kartu */
      --card-foreground: 220 15% 25%;
      /* Warna teks pada kartu */
      --primary: 160 70% 45%;
      /* Warna utama (hijau kebiruan) */
      --primary-foreground: 0 0% 100%;
      /* Warna teks pada elemen utama */
      --primary-hover: 160 70% 40%;
      /* Warna hover untuk elemen utama */
      --secondary: 210 60% 55%;
      /* Warna sekunder (biru lembut) */
      --secondary-foreground: 0 0% 100%;
      --muted: 220 20% 94%;
      /* Warna untuk elemen yang diredam */
      --muted-foreground: 220 10% 45%;
      /* Teks pada elemen diredam */
      --accent: 45 90% 55%;
      /* Warna aksen (kuning/emas) */
      --accent-foreground: 220 15% 20%;
      --destructive: 0 70% 50%;
      /* Warna untuk aksi destruktif (merah) */
      --destructive-foreground: 0 0% 100%;
      --border: 220 20% 88%;
      /* Warna border */
      --input: 220 20% 92%;
      /* Latar belakang input */
      --ring: 160 70% 55%;
      /* Warna ring fokus */

      /* Tipografi */
      --font-main: 'Poppins', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      --font-heading: 'Poppins', 'Inter', system-ui, sans-serif;

      /* Spacing & Radius */
      --radius-sm: 0.3rem;
      --radius-md: 0.6rem;
      --radius-lg: 1rem;
      --space-xxs: 0.25rem;
      --space-xs: 0.5rem;
      --space-sm: 0.75rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;

      /* Shadows (Fancy) */
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.07);
      --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
      --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.05);

      /* Transitions (Fancy) */
      --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-normal: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);

      /* Z-index */
      --z-header: 1000;
      --z-modal: 2000;
      --z-notification: 3000;
    }

    /* === DARK MODE === */
    .dark {
      --background: 220 25% 12%;
      --foreground: 220 15% 90%;
      --card: 220 25% 18%;
      --card-foreground: 220 15% 88%;
      --primary: 160 65% 55%;
      --primary-hover: 160 65% 50%;
      --secondary: 210 55% 65%;
      --muted: 220 25% 22%;
      --muted-foreground: 220 10% 65%;
      --accent: 45 85% 65%;
      --border: 220 25% 25%;
      --input: 220 25% 20%;
      --ring: 160 65% 60%;
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
      --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.25);
      --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    /* === GLOBAL STYLES === */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-color: hsl(var(--border));
    }

    html {
      font-size: 16px;
      /* Basis font size */
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      font-family: var(--font-main);
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
      line-height: 1.7;
      overflow-x: hidden;
      /* Mencegah scroll horizontal */
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: background-color var(--transition-normal), color var(--transition-normal);
    }

    main {
      flex-grow: 1;
    }

    /* === UTILITIES === */
    .container {
      width: 100%;
      max-width: 1280px;
      /* Max width untuk konten */
      margin-left: auto;
      margin-right: auto;
      padding: 0 var(--space-lg);
      /* Padding horizontal */
    }

    .l-flex {
      display: flex;
      gap: var(--space-md);
    }

    .l-grid {
      display: grid;
      gap: var(--space-md);
    }

    .items-center {
      align-items: center;
    }

    .justify-center {
      justify-content: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .flex-col {
      flex-direction: column;
    }

    .flex-wrap {
      flex-wrap: wrap;
    }

    .text-center {
      text-align: center;
    }

    .hidden {
      display: none !important;
    }

    /* Penting untuk override */

    /* === TYPOGRAPHY === */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: var(--font-heading);
      font-weight: 700;
      line-height: 1.3;
      color: hsl(var(--card-foreground));
      margin-bottom: var(--space-sm);
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: var(--space-md);
    }

    h2 {
      font-size: 2.2rem;
    }

    h3 {
      font-size: 1.6rem;
    }

    p {
      margin-bottom: var(--space-md);
    }

    a {
      color: hsl(var(--primary));
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    a:hover {
      color: hsl(var(--primary-hover));
    }

    /* === HEADER === */
    header {
      background-color: hsl(var(--card));
      padding: var(--space-md) 0;
      position: sticky;
      top: 0;
      z-index: var(--z-header);
      box-shadow: var(--shadow-sm);
      transition: background-color var(--transition-normal);
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 800;
      color: hsl(var(--primary));
      letter-spacing: -1px;
      transition: transform var(--transition-fast);
    }

    .logo:hover {
      transform: scale(1.05);
    }

    .logo i {
      margin-right: var(--space-xs);
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: var(--space-xs);
      /* Mengurangi gap agar muat lebih banyak */
    }

    nav a {
      color: hsl(var(--muted-foreground));
      text-decoration: none;
      font-weight: 600;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-sm);
      position: relative;
      transition: color var(--transition-fast), background-color var(--transition-fast);
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 5px;
      /* Posisi garis bawah */
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 2px;
      background-color: hsl(var(--primary));
      transition: width var(--transition-normal);
    }

    nav a:hover,
    nav a.active {
      color: hsl(var(--primary));
    }

    nav a.active::after {
      width: 60%;
      /* Lebar garis bawah untuk link aktif */
    }

    .nav-toggle {
      display: none;
      /* Sembunyikan di desktop */
      background: none;
      border: none;
      font-size: 1.8rem;
      color: hsl(var(--primary));
      cursor: pointer;
      padding: var(--space-xs);
      transition: transform var(--transition-fast);
    }

    .nav-toggle:hover {
      transform: scale(1.1);
    }

    /* === BUTTONS (Fancy) === */
    .c-button {
      padding: var(--space-sm) var(--space-lg);
      background-image: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-hover)));
      color: hsl(var(--primary-foreground));
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: var(--transition-normal);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-xs);
      box-shadow: var(--shadow-sm);
      text-decoration: none;
      /* Untuk link yang distyle seperti button */
    }

    .c-button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-md);
      filter: brightness(1.1);
    }

    .c-button:active {
      transform: translateY(-1px) scale(0.98);
      box-shadow: var(--shadow-sm);
    }

    .c-button i {
      font-size: 1.1em;
    }

    .c-button.btn-outline {
      background: transparent;
      background-image: none;
      border: 2px solid hsl(var(--primary));
      color: hsl(var(--primary));
      box-shadow: none;
    }

    .c-button.btn-outline:hover {
      background-color: hsl(var(--primary) / 0.1);
      color: hsl(var(--primary-hover));
      border-color: hsl(var(--primary-hover));
      transform: translateY(-2px);
      /* Efek hover lebih halus */
      box-shadow: 0 2px 5px hsl(var(--primary) / 0.2);
    }

    .c-button.btn-secondary {
      background-image: linear-gradient(135deg, hsl(var(--secondary)), hsl(var(--secondary) / 0.8));
      color: hsl(var(--secondary-foreground));
    }

    .c-button.btn-danger {
      background-image: linear-gradient(135deg, hsl(var(--destructive)), hsl(var(--destructive) / 0.8));
      color: hsl(var(--destructive-foreground));
    }

    .c-button.btn-danger.btn-outline {
      border-color: hsl(var(--destructive));
      color: hsl(var(--destructive));
    }

    .c-button.btn-danger.btn-outline:hover {
      background-color: hsl(var(--destructive) / 0.1);
    }

    /* === HERO SECTION (Fancy) === */
    .c-hero {
      background: linear-gradient(135deg, hsl(var(--primary) / 0.8), hsl(var(--secondary) / 0.7)),
        url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=1300&q=80') no-repeat center center/cover;
      color: hsl(var(--primary-foreground));
      padding: var(--space-3xl) 0;
      position: relative;
      overflow: hidden;
      text-align: center;
    }

    .c-hero::before {
      /* Overlay gelap untuk kontras teks */
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .hero-content {
      position: relative;
      /* Agar di atas overlay */
      z-index: 1;
      max-width: 700px;
      /* Lebih lebar untuk hero */
      margin: 0 auto;
    }

    .c-hero h1 {
      font-size: 3.5rem;
      /* Lebih besar */
      font-weight: 800;
      margin-bottom: var(--space-md);
      line-height: 1.2;
      color: #fff;
      /* Pastikan putih agar kontras */
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      animation: hero-title-pop-in 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    @keyframes hero-title-pop-in {
      0% {
        transform: translateY(50px) scale(0.8);
        opacity: 0;
      }

      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    .c-hero p {
      font-size: 1.3rem;
      /* Lebih besar */
      margin-bottom: var(--space-xl);
      opacity: 0.9;
      color: #eee;
      /* Warna lebih terang */
      animation: hero-subtitle-fade-in 1s 0.3s ease-out forwards;
      opacity: 0;
      /* Mulai dari transparan */
    }

    @keyframes hero-subtitle-fade-in {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 0.9;
        transform: translateY(0);
      }
    }

    .c-hero .c-button {
      padding: var(--space-md) var(--space-xl);
      font-size: 1.1rem;
      animation: hero-button-scale-up 1s 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
      transform: scale(0);
      /* Mulai dari kecil */
    }

    @keyframes hero-button-scale-up {
      from {
        transform: scale(0);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }


    /* === SECTIONS === */
    .section {
      padding: var(--space-2xl) 0;
      animation: section-fade-in 0.8s ease-out forwards;
    }

    @keyframes section-fade-in {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section-title {
      font-size: 2.5rem;
      /* Sedikit lebih besar */
      font-weight: 700;
      margin-bottom: var(--space-sm);
      text-align: center;
      position: relative;
      padding-bottom: var(--space-sm);
      color: hsl(var(--foreground));
      /* Menggunakan foreground agar jelas di light/dark mode */
    }

    .section-title::after {
      /* Garis bawah dekoratif */
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background-color: hsl(var(--primary));
      border-radius: 2px;
    }

    .section-subtitle {
      font-size: 1.15rem;
      color: hsl(var(--muted-foreground));
      margin-bottom: var(--space-2xl);
      /* Lebih banyak jarak ke konten */
      text-align: center;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    /* === CARDS (Fancy) === */
    .c-card {
      background-color: hsl(var(--card));
      border-radius: var(--radius-lg);
      /* Lebih bulat */
      box-shadow: var(--shadow-md);
      padding: var(--space-lg);
      transition: var(--transition-normal);
      overflow: hidden;
      /* Untuk gambar di dalam card */
    }

    .c-card:hover {
      transform: translateY(-8px) scale(1.01);
      /* Efek angkat lebih dramatis */
      box-shadow: var(--shadow-lg);
    }

    /* Grid untuk Properti & Ulasan */
    .property-list,
    .review-list,
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      /* Ukuran minimum lebih besar */
      gap: var(--space-lg);
    }

    /* Property Card */
    .property-card {
      position: relative;
    }

    .property-card img {
      width: 100%;
      height: 220px;
      /* Sedikit lebih tinggi */
      object-fit: cover;
      border-radius: var(--radius-md);
      /* Radius di gambar */
      margin-bottom: var(--space-md);
      transition: transform var(--transition-slow);
    }

    .property-card:hover img {
      transform: scale(1.05);
      /* Efek zoom pada gambar saat card dihover */
    }

    .property-card .property-image-container {
      overflow: hidden;
      /* Kliping untuk efek zoom gambar */
      border-radius: var(--radius-md);
      margin-bottom: var(--space-md);
    }

    .property-card h3 {
      color: hsl(var(--primary));
      font-size: 1.4rem;
    }

    .property-card p {
      font-size: 0.95rem;
      color: hsl(var(--muted-foreground));
      margin-bottom: var(--space-sm);
    }

    .property-card .price {
      font-size: 1.3rem;
      font-weight: 700;
      color: hsl(var(--accent));
      margin-bottom: var(--space-md);
    }

    .property-status {
      position: absolute;
      top: var(--space-md);
      right: var(--space-md);
      background-color: hsl(var(--accent));
      color: hsl(var(--accent-foreground));
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      box-shadow: var(--shadow-sm);
    }

    .property-status.available {
      background-color: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
    }

    .property-status.rented {
      background-color: hsl(var(--destructive));
      color: hsl(var(--destructive-foreground));
    }

    .property-card .actions {
      margin-top: var(--space-md);
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
      /* Agar tombol tidak tumpang tindih di layar kecil */
    }

    .property-card .actions .c-button {
      flex-grow: 1;
      /* Tombol mengambil ruang yang sama */
      padding: var(--space-sm) var(--space-md);
      /* Padding lebih kecil untuk tombol di card */
      font-size: 0.9rem;
    }


    /* Review Card */
    .review-card {
      display: flex;
      flex-direction: column;
    }

    .review-card .rating {
      color: hsl(var(--accent));
      font-size: 1.3rem;
      /* Bintang lebih besar */
      margin-bottom: var(--space-xs);
    }

    .review-card .review-text {
      font-style: italic;
      color: hsl(var(--card-foreground));
      margin-bottom: var(--space-sm);
      flex-grow: 1;
    }

    .review-card .review-author,
    .review-card time {
      font-size: 0.9rem;
      color: hsl(var(--muted-foreground));
      text-align: right;
    }

    .review-card .review-author {
      font-weight: 600;
    }

    /* === FORMS (Fancy) === */
    .c-form-field {
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
      margin-bottom: var(--space-md);
    }

    .c-form-field label {
      font-size: 0.9rem;
      font-weight: 600;
      color: hsl(var(--muted-foreground));
    }

    .c-form-field input,
    .c-form-field textarea,
    .c-form-field select {
      padding: var(--space-md);
      /* Padding lebih besar */
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-family: var(--font-main);
      background-color: hsl(var(--input));
      color: hsl(var(--foreground));
      transition: var(--transition-fast);
      box-shadow: var(--shadow-inset);
    }

    .c-form-field textarea {
      resize: vertical;
      min-height: 120px;
    }

    .c-form-field input:focus,
    .c-form-field textarea:focus,
    .c-form-field select:focus {
      border-color: hsl(var(--ring));
      outline: none;
      box-shadow: 0 0 0 3px hsl(var(--ring) / 0.3), var(--shadow-inset);
      background-color: hsl(var(--card));
    }

    .c-form-field input::placeholder,
    .c-form-field textarea::placeholder {
      color: hsl(var(--muted-foreground) / 0.7);
      opacity: 1;
      /* Firefox */
    }

    /* Rating Stars */
    .rating-stars {
      display: flex;
      gap: var(--space-xs);
      margin-bottom: var(--space-md);
      justify-content: center;
      /* Tengah */
    }

    .rating-stars span {
      cursor: pointer;
      font-size: 2.2rem;
      /* Bintang lebih besar */
      color: hsl(var(--muted));
      /* Warna default bintang */
      transition: var(--transition-fast);
    }

    .rating-stars span:hover,
    .rating-stars span.hovered {
      transform: scale(1.2);
      color: hsl(var(--accent) / 0.7);
    }

    .rating-stars span.selected {
      color: hsl(var(--accent));
      transform: scale(1.1);
      /* Sedikit efek saat dipilih */
    }

    /* === MODALS (Fancy) === */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      /* Overlay lebih gelap */
      display: flex;
      /* Defaultnya flex untuk animasi */
      align-items: center;
      justify-content: center;
      z-index: var(--z-modal);
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-normal), visibility var(--transition-normal);
    }

    .modal.open {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background-color: hsl(var(--card));
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      max-width: 550px;
      /* Sedikit lebih lebar */
      width: 90%;
      max-height: 90vh;
      /* Batas tinggi modal */
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-lg);
      transform: scale(0.9) translateY(20px);
      transition: var(--transition-normal), transform var(--transition-normal);
    }

    .modal.open .modal-content {
      transform: scale(1) translateY(0);
    }

    .modal-content h2 {
      margin-top: 0;
      color: hsl(var(--primary));
      text-align: center;
      margin-bottom: var(--space-lg);
    }

    .modal-close {
      position: absolute;
      top: var(--space-md);
      right: var(--space-md);
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.8rem;
      /* Lebih besar */
      color: hsl(var(--muted-foreground));
      transition: var(--transition-fast);
      padding: var(--space-xs);
      line-height: 1;
    }

    .modal-close:hover {
      color: hsl(var(--destructive));
      transform: rotate(90deg) scale(1.1);
    }

    /* Style untuk scrollbar di modal (fancy) */
    .modal-content::-webkit-scrollbar {
      width: 8px;
    }

    .modal-content::-webkit-scrollbar-track {
      background: hsl(var(--muted));
      border-radius: var(--radius-sm);
    }

    .modal-content::-webkit-scrollbar-thumb {
      background: hsl(var(--primary) / 0.6);
      border-radius: var(--radius-sm);
    }

    .modal-content::-webkit-scrollbar-thumb:hover {
      background: hsl(var(--primary));
    }


    /* === NOTIFICATIONS (Fancy) === */
    .notification {
      position: fixed;
      bottom: var(--space-lg);
      right: var(--space-lg);
      padding: var(--space-md) var(--space-lg);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      z-index: var(--z-notification);
      opacity: 0;
      transform: translateY(30px) scale(0.95);
      transition: opacity var(--transition-normal), transform var(--transition-normal);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .notification.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .notification.success {
      background-color: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
    }

    .notification.error {
      background-color: hsl(var(--destructive));
      color: hsl(var(--destructive-foreground));
    }

    .notification.info {
      background-color: hsl(var(--secondary));
      color: hsl(var(--secondary-foreground));
    }

    .notification i {
      font-size: 1.2em;
    }

    /* === FOOTER === */
    footer {
      padding: var(--space-xl) 0;
      background-color: hsl(var(--card-foreground));
      /* Warna gelap untuk kontras */
      color: hsl(var(--muted));
      text-align: center;
      margin-top: var(--space-2xl);
      /* Jarak dari konten terakhir */
      font-size: 0.9rem;
    }

    footer p {
      margin-bottom: 0;
    }

    footer a {
      color: hsl(var(--primary));
    }

    footer a:hover {
      color: hsl(var(--primary-hover));
      text-decoration: underline;
    }


    /* === ANIMATIONS (Reusable) === */
    .animate-fade-in-up {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease-out forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-pop-in {
      opacity: 0;
      transform: scale(0.8);
      animation: popIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    @keyframes popIn {
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* === RESPONSIVE DESIGN === */
    @media (max-width: 1024px) {

      /* Tablet Lanskap & di bawahnya */
      .c-hero h1 {
        font-size: 3rem;
      }

      .c-hero p {
        font-size: 1.2rem;
      }

      .section-title {
        font-size: 2.2rem;
      }
    }

    @media (max-width: 768px) {

      /* Tablet Portrait & di bawahnya */
      html {
        font-size: 15px;
      }

      /* Sedikit kecilkan base font */
      .header-container {
        flex-direction: row;
        /* Tetap row tapi nav akan disembunyikan */
        position: relative;
        /* Untuk menu mobile */
      }

      .nav-toggle {
        display: block;
        /* Tampilkan tombol toggle */
      }

      nav {
        position: absolute;
        top: 100%;
        /* Di bawah header */
        left: 0;
        right: 0;
        background-color: hsl(var(--card));
        box-shadow: var(--shadow-md);
        padding: var(--space-md);
        transform: translateY(-10px) scaleY(0.95);
        opacity: 0;
        visibility: hidden;
        transform-origin: top center;
        transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
      }

      nav.open {
        transform: translateY(0) scaleY(1);
        opacity: 1;
        visibility: visible;
      }

      nav ul {
        flex-direction: column;
        gap: var(--space-sm);
        width: 100%;
        align-items: center;
        /* Teks menu di tengah */
      }

      nav a {
        width: 100%;
        text-align: center;
      }

      nav a::after {
        bottom: 2px;
      }

      /* Sesuaikan posisi garis bawah */

      .c-hero h1 {
        font-size: 2.5rem;
      }

      .c-hero p {
        font-size: 1.1rem;
      }

      .property-list,
      .review-list,
      .dashboard-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        /* Card lebih kecil */
      }

      .section-title {
        font-size: 2rem;
      }

      .section-subtitle {
        font-size: 1rem;
      }

      .modal-content {
        width: 95%;
        padding: var(--space-lg);
      }
    }

    @media (max-width: 480px) {

      /* Mobile */
      html {
        font-size: 14px;
      }

      .container {
        padding: 0 var(--space-md);
      }

      .c-hero h1 {
        font-size: 2rem;
      }

      .c-hero p {
        font-size: 1rem;
      }

      .section-title {
        font-size: 1.8rem;
      }

      .section-subtitle {
        font-size: 0.9rem;
      }

      .c-button {
        padding: var(--space-sm) var(--space-md);
        font-size: 0.9rem;
      }

      .c-card {
        padding: var(--space-md);
      }

      .property-list,
      .review-list {
        grid-template-columns: 1fr;
      }

      /* Satu kolom di mobile */
      .rating-stars span {
        font-size: 2rem;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="container header-container">
      <a href="#home" class="logo"><i class="fas fa-home-lg-alt"></i> Green Valley</a>
      <button class="nav-toggle" aria-label="Buka menu navigasi" aria-expanded="false">
        <i class="fas fa-bars"></i>
      </button>
      <nav id="mainNav">
        <ul>
          <li><a href="#home" class="nav-link active">Beranda</a></li>
          <li><a href="#properti" class="nav-link">Properti</a></li>
          <li><a href="#ulasan" class="nav-link">Ulasan</a></li>
          <li><a href="#kontak" class="nav-link">Kontak</a></li>
          <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
          <!-- Tombol Ganti Tema -->
          <li>
            <button id="themeToggle" class="c-button btn-outline"
              style="padding: var(--space-xs) var(--space-sm); text-transform: none; min-width: 40px;"
              aria-label="Ganti Tema">
              <i class="fas fa-moon"></i>
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="mainContent">
    <!-- Konten SPA akan dimuat di sini oleh JavaScript -->
  </main>

  <!-- Modal Tambah/Edit Properti (Satu modal untuk keduanya, judul dan tombol disesuaikan) -->
  <div class="modal" id="propertyModal">
    <div class="modal-content animate-pop-in">
      <button class="modal-close" aria-label="Tutup modal"><i class="fas fa-times"></i></button>
      <h2 id="propertyModalTitle">Tambah Properti Baru</h2>
      <form id="propertyForm" class="l-flex flex-col">
        <input type="hidden" id="propertyId">
        <div class="c-form-field">
          <label for="propertyName">Nama Properti</label>
          <input type="text" id="propertyName" placeholder="Contoh: Apartemen Cendana Tower A" required>
        </div>
        <div class="c-form-field">
          <label for="propertyType">Tipe Properti</label>
          <select id="propertyType" required>
            <option value="" disabled selected>Pilih tipe...</option>
            <option value="apartemen">Apartemen</option>
            <option value="rumah">Rumah</option>
            <option value="kost">Kost</option>
            <option value="villa">Villa</option>
          </select>
        </div>
        <div class="c-form-field">
          <label for="propertyPrice">Harga Sewa (Rp / bulan)</label>
          <input type="number" id="propertyPrice" placeholder="Contoh: 5000000" min="0" required>
        </div>
        <div class="c-form-field">
          <label for="propertyImage">URL Gambar Properti</label>
          <input type="url" id="propertyImage" placeholder="https://contoh.com/gambar.jpg">
        </div>
        <div class="c-form-field">
          <label for="propertyDescription">Deskripsi Singkat</label>
          <textarea id="propertyDescription" placeholder="Jelaskan tentang properti ini..." required></textarea>
        </div>
        <button type="submit" id="propertySubmitButton" class="c-button"><i class="fas fa-plus-circle"></i> Tambah
          Properti</button>
      </form>
    </div>
  </div>

  <!-- Modal Autentikasi Dashboard -->
  <div class="modal" id="authModal">
    <div class="modal-content animate-pop-in">
      <button class="modal-close" aria-label="Tutup modal"><i class="fas fa-times"></i></button>
      <h2><i class="fas fa-lock"></i> Masuk ke Dashboard</h2>
      <form id="authForm" class="l-flex flex-col">
        <div class="c-form-field">
          <label for="password">Kata Sandi Admin</label>
          <input type="password" id="password" placeholder="Masukkan kata sandi" required>
        </div>
        <button type="submit" class="c-button"><i class="fas fa-sign-in-alt"></i> Masuk</button>
      </form>
    </div>
  </div>

  <!-- Notifikasi Global -->
  <div id="globalNotification" class="notification">
    <!-- Konten notifikasi diisi oleh JavaScript -->
  </div>

  <footer class="container text-center">
    <p>¬© <span id="currentYear"></span> Green Valley. Dirancang dengan <i class="fas fa-heart"
        style="color: hsl(var(--destructive));"></i> sepenuh hati. Semua Hak Dilindungi.</p>
    <p>Ditenagai oleh Vanilla JS & CSS Murni.</p>
  </footer>

  <script>
    (function () {
      'use strict';

      // === STATE APLIKASI ===
      let appState = {
        properties: [],
        reviews: [],
        contacts: [],
        currentPage: 'home',
        currentRating: 0,
        isAuthenticated: false,
        theme: localStorage.getItem('theme') || 'light',
        editingPropertyId: null, // Untuk membedakan mode tambah/edit di modal properti
      };

      // === KONSTANTA & SELEKTOR DOM ===
      const mainContent = document.getElementById('mainContent');
      const navToggle = document.querySelector('.nav-toggle');
      const mainNav = document.getElementById('mainNav');
      const navLinks = document.querySelectorAll('nav .nav-link');
      const propertyModal = document.getElementById('propertyModal');
      const propertyForm = document.getElementById('propertyForm');
      const propertyModalTitle = document.getElementById('propertyModalTitle');
      const propertySubmitButton = document.getElementById('propertySubmitButton');
      const authModal = document.getElementById('authModal');
      const authForm = document.getElementById('authForm');
      const globalNotification = document.getElementById('globalNotification');
      const themeToggleButton = document.getElementById('themeToggle');
      document.getElementById('currentYear').textContent = new Date().getFullYear();


      // === DATA AWAL (Contoh) ===
      const initialProperties = [
        { id: 1, name: 'Apartemen Sky Garden', type: 'apartemen', price: 8500000, description: 'Apartemen mewah 2BR fully furnished dengan pemandangan kota, kolam renang infinity, dan gym.', status: 'available', image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBhcnRtZW50fGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60' },
        { id: 2, name: 'Rumah Asri Minimalis', type: 'rumah', price: 15000000, description: 'Rumah 3KT di lingkungan tenang, taman luas, cocok untuk keluarga. Dekat sekolah internasional.', status: 'available', image: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8aG91c2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60' },
        { id: 3, name: 'Kost Putri Eksklusif "Pelangi"', type: 'kost', price: 2500000, description: 'Kost khusus putri, kamar mandi dalam, AC, Wi-Fi kencang. Keamanan 24 jam, dekat kampus.', status: 'rented', image: 'https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGhvdXNlfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60' },
        { id: 4, name: 'Villa Puncak Sejuk', type: 'villa', price: 25000000, description: 'Villa 4 kamar tidur dengan kolam renang pribadi dan pemandangan gunung yang menakjubkan. Ideal untuk liburan keluarga besar.', status: 'available', image: 'https://images.unsplash.com/photo-1595790384144-cca6f5800152?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8dmlsbGF8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60' }
      ];

      const initialReviews = [
        { id: 1, author: 'Budi Santoso', propertyId: 1, rating: 5, text: 'Pelayanannya sangat memuaskan! Apartemennya bersih dan sesuai dengan foto. Pasti akan sewa di sini lagi.', date: '2024-07-15' },
        { id: 2, author: 'Citra Lestari', propertyId: 2, rating: 4, text: 'Rumahnya nyaman dan lingkungannya aman. Proses sewa juga mudah. Recommended!', date: '2024-07-10' },
      ];

      // === FUNGSI UTILITAS ===
      // Fungsi untuk menyimpan state ke localStorage
      function saveState() {
        localStorage.setItem('greenValleyProperties', JSON.stringify(appState.properties));
        localStorage.setItem('greenValleyReviews', JSON.stringify(appState.reviews));
        localStorage.setItem('greenValleyContacts', JSON.stringify(appState.contacts));
        // isAuthenticated tidak disimpan karena sesi biasanya berakhir saat browser ditutup.
      }

      // Fungsi untuk memuat state dari localStorage
      function loadState() {
        appState.properties = JSON.parse(localStorage.getItem('greenValleyProperties')) || initialProperties;
        appState.reviews = JSON.parse(localStorage.getItem('greenValleyReviews')) || initialReviews;
        appState.contacts = JSON.parse(localStorage.getItem('greenValleyContacts')) || [];
        // Inisialisasi ID unik jika properties kosong
        if (appState.properties.length === 0) {
          initialProperties.forEach(prop => appState.properties.push({ ...prop }));
        }
        if (appState.reviews.length === 0) {
          initialReviews.forEach(rev => appState.reviews.push({ ...rev }));
        }
      }

      // Menampilkan notifikasi
      function showNotification(message, type = 'success', duration = 3000) {
        const iconMap = {
          success: 'fa-check-circle',
          error: 'fa-times-circle',
          info: 'fa-info-circle'
        };
        globalNotification.innerHTML = `<i class="fas ${iconMap[type]}"></i> ${message}`;
        globalNotification.className = `notification ${type} show`;
        setTimeout(() => {
          globalNotification.classList.remove('show');
        }, duration);
      }

      // Validasi form sederhana
      function validateForm(formElement) {
        let isValid = true;
        formElement.querySelectorAll('[required]').forEach(input => {
          if (!input.value.trim()) {
            isValid = false;
            input.style.borderColor = 'hsl(var(--destructive))'; // Sorot field yang error
            // Tambahkan pesan error kecil di bawah input jika perlu
          } else {
            input.style.borderColor = 'hsl(var(--border))'; // Kembalikan border normal
          }
        });
        if (!isValid) {
          showNotification('Mohon isi semua kolom yang wajib diisi.', 'error');
        }
        return isValid;
      }

      // Generate ID unik sederhana
      function generateId() {
        return Date.now() + Math.random().toString(36).substr(2, 9);
      }

      // Format harga ke Rupiah
      function formatCurrency(amount) {
        return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
      }

      // === LOGIKA RENDER HALAMAN (SPA) ===
      function renderPage(pageName) {
        appState.currentPage = pageName;
        mainContent.innerHTML = ''; // Kosongkan konten sebelumnya
        window.scrollTo(0, 0); // Scroll ke atas halaman

        // Update link navigasi aktif
        navLinks.forEach(link => {
          link.classList.toggle('active', link.getAttribute('href') === `#${pageName}`);
        });
        // Tutup menu mobile jika terbuka
        if (mainNav.classList.contains('open')) {
          navToggle.click();
        }

        let pageContent = '';
        switch (pageName) {
          case 'home':
            pageContent = renderHomePage();
            break;
          case 'properti':
            pageContent = renderPropertyPage();
            renderProperties(); // Fungsi spesifik untuk render daftar properti
            break;
          case 'ulasan':
            pageContent = renderReviewPage();
            renderReviews(); // Fungsi spesifik untuk render daftar ulasan
            break;
          case 'kontak':
            pageContent = renderContactPage();
            break;
          case 'dashboard':
            if (!appState.isAuthenticated) {
              openModal(authModal);
              // Redirect ke home jika belum login dan modal ditutup tanpa login
              if (window.location.hash !== '#home') window.location.hash = 'home';
              return; // Hentikan render dashboard
            }
            pageContent = renderDashboardPage();
            break;
          default:
            appState.currentPage = 'home'; // Default ke home jika hash tidak dikenali
            window.location.hash = 'home'; // Update URL
            pageContent = renderHomePage();
        }
        mainContent.innerHTML = pageContent;
        attachPageEventListeners(pageName); // Pasang event listener spesifik halaman
      }

      // === TEMPLATE HTML UNTUK SETIAP HALAMAN ===
      function renderHomePage() {
        return `
          <section class="c-hero">
            <div class="container hero-content">
              <h1>Temukan Hunian <span style="color:hsl(var(--accent));">Impianmu</span> Bersama Kami</h1>
              <p>Green Valley menyediakan platform digital terpercaya untuk mencari apartemen, rumah, atau kost idaman dengan mudah, aman, dan pengalaman yang memanjakan mata.</p>
              <a href="#properti" class="c-button"><i class="fas fa-search"></i> Jelajahi Properti Sekarang</a>
            </div>
          </section>
          <section class="section features">
            <div class="container">
              <h2 class="section-title">Mengapa Memilih Green Valley?</h2>
              <p class="section-subtitle">Kami menawarkan lebih dari sekadar daftar properti. Kami memberikan pengalaman.</p>
              <div class="l-grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-lg);">
                <div class="c-card text-center animate-fade-in-up" style="animation-delay: 0.1s;">
                  <i class="fas fa-shield-alt fa-3x" style="color:hsl(var(--primary)); margin-bottom:var(--space-md);"></i>
                  <h3>Transaksi Aman</h3>
                  <p>Proses verifikasi ketat dan sistem pembayaran yang aman untuk kenyamanan Anda.</p>
                </div>
                <div class="c-card text-center animate-fade-in-up" style="animation-delay: 0.2s;">
                  <i class="fas fa-medal fa-3x" style="color:hsl(var(--primary)); margin-bottom:var(--space-md);"></i>
                  <h3>Kualitas Premium</h3>
                  <p>Pilihan properti terbaik yang telah dikurasi dengan standar kualitas tinggi.</p>
                </div>
                <div class="c-card text-center animate-fade-in-up" style="animation-delay: 0.3s;">
                  <i class="fas fa-headset fa-3x" style="color:hsl(var(--primary)); margin-bottom:var(--space-md);"></i>
                  <h3>Dukungan Responsif</h3>
                  <p>Tim kami siap membantu Anda melalui setiap langkah proses penyewaan.</p>
                </div>
              </div>
            </div>
          </section>
        `;
      }

      function renderPropertyPage() {
        return `
          <section class="section">
            <div class="container">
              <h2 class="section-title">Properti Eksklusif Kami</h2>
              <p class="section-subtitle">Jelajahi beragam pilihan properti premium yang dirancang untuk memenuhi setiap kebutuhan dan gaya hidup Anda.</p>
              <div class="l-flex items-center justify-between flex-wrap" style="margin-bottom: var(--space-lg); gap: var(--space-md);">
                <div class="c-form-field" style="flex-grow:1; margin-bottom: 0;">
                  <input type="text" id="propertySearchInput" placeholder="Cari berdasarkan nama, tipe, atau deskripsi..." style="padding-right: var(--space-2xl);">
                  <!-- Icon search bisa ditambahkan di sini jika diinginkan -->
                </div>
                ${appState.isAuthenticated ? `<button id="openAddPropertyModalBtn" class="c-button"><i class="fas fa-plus"></i> Tambah Properti</button>` : ''}
              </div>
              <div class="property-list" id="propertyListContainer">
                <!-- Daftar properti akan dirender di sini oleh renderProperties() -->
                <p>Memuat properti...</p>
              </div>
            </div>
          </section>
        `;
      }

      function renderProperties(filter = '') {
        const container = document.getElementById('propertyListContainer');
        if (!container) return;

        const filteredProperties = appState.properties.filter(p =>
          p.name.toLowerCase().includes(filter.toLowerCase()) ||
          p.type.toLowerCase().includes(filter.toLowerCase()) ||
          p.description.toLowerCase().includes(filter.toLowerCase())
        );

        if (filteredProperties.length === 0) {
          container.innerHTML = `<p class="text-center" style="grid-column: 1 / -1;">Tidak ada properti yang cocok dengan pencarian Anda.</p>`;
          return;
        }

        container.innerHTML = filteredProperties.map((p, index) => `
          <div class="c-card property-card animate-fade-in-up" style="animation-delay: ${index * 0.1}s;">
            <div class="property-image-container">
                <img src="${p.image || 'https://via.placeholder.com/800x600/E0E0E0/B0B0B0?text=Gambar+Properti'}" alt="Foto ${p.name}" loading="lazy">
            </div>
            <div class="property-status ${p.status}">${p.status === 'available' ? 'Tersedia' : 'Disewa'}</div>
            <h3>${p.name}</h3>
            <p style="color: hsl(var(--muted-foreground)); font-weight: 500;"><i class="fas fa-tag"></i> Tipe: ${p.type.charAt(0).toUpperCase() + p.type.slice(1)}</p>
            <p class="price">${formatCurrency(p.price)} <span style="font-size:0.8em; color:hsl(var(--muted-foreground));">/ bulan</span></p>
            <p class="description" style="min-height: 60px;">${p.description.substring(0, 100)}${p.description.length > 100 ? '...' : ''}</p>
            ${appState.isAuthenticated ? `
            <div class="actions">
              <button class="c-button btn-outline toggle-status-btn" data-id="${p.id}" style="font-size:0.85rem;">
                <i class="fas fa-${p.status === 'available' ? 'lock' : 'unlock'}"></i>
                ${p.status === 'available' ? 'Tandai Disewa' : 'Tandai Tersedia'}
              </button>
              <button class="c-button btn-secondary edit-property-btn" data-id="${p.id}" style="font-size:0.85rem;"><i class="fas fa-edit"></i> Edit</button>
              <button class="c-button btn-danger delete-property-btn" data-id="${p.id}" style="font-size:0.85rem;"><i class="fas fa-trash-alt"></i> Hapus</button>
            </div>
            ` : `<a href="#kontak" class="c-button" style="width:100%; margin-top:var(--space-md);"><i class="fas fa-envelope"></i> Hubungi untuk Sewa</a>`}
          </div>
        `).join('');
      }

      function renderReviewPage() {
        return `
          <section class="section">
            <div class="container">
              <h2 class="section-title">Ulasan Pelanggan Kami</h2>
              <p class="section-subtitle">Dengarkan apa kata mereka yang telah merasakan kenyamanan tinggal di properti pilihan Green Valley.</p>
              <div class="c-card animate-fade-in-up" style="margin-bottom: var(--space-2xl);">
                <h3><i class="fas fa-pen-fancy"></i> Bagikan Pengalaman Anda</h3>
                <form id="reviewForm" class="l-flex flex-col">
                  <div class="c-form-field">
                    <label for="reviewAuthor">Nama Anda</label>
                    <input type="text" id="reviewAuthor" placeholder="Nama lengkap Anda" required>
                  </div>
                  <div class="c-form-field">
                    <label for="reviewPropertyId">Properti yang Diulas (Opsional)</label>
                    <select id="reviewPropertyId">
                      <option value="">Pilih properti (jika spesifik)...</option>
                      ${appState.properties.map(p => `<option value="${p.id}">${p.name}</option>`).join('')}
                    </select>
                  </div>
                  <p style="text-align:center; font-weight:500; margin-bottom:var(--space-xs);">Berikan Rating Anda:</p>
                  <div class="rating-stars" id="reviewRatingStars">
                    ${[1, 2, 3, 4, 5].map(i => `<span data-rating="${i}" role="button" aria-label="Beri ${i} bintang">‚òÖ</span>`).join('')}
                  </div>
                  <div class="c-form-field">
                    <label for="reviewText">Ulasan Anda</label>
                    <textarea id="reviewText" required placeholder="Tuliskan pengalaman Anda di sini..."></textarea>
                  </div>
                  <button type="submit" class="c-button"><i class="fas fa-paper-plane"></i> Kirim Ulasan</button>
                </form>
              </div>
              <h3 style="text-align:center; margin-bottom: var(--space-lg); font-size: 1.8rem;">Semua Ulasan</h3>
              <div class="review-list" id="reviewsListContainer">
                <!-- Daftar ulasan akan dirender di sini -->
                <p>Memuat ulasan...</p>
              </div>
            </div>
          </section>
        `;
      }

      function renderReviews() {
        const container = document.getElementById('reviewsListContainer');
        if (!container) return;

        if (appState.reviews.length === 0) {
          container.innerHTML = `<p class="text-center" style="grid-column: 1 / -1;">Belum ada ulasan. Jadilah yang pertama memberikan ulasan!</p>`;
          return;
        }

        container.innerHTML = [...appState.reviews].reverse().map((r, index) => `
          <div class="c-card review-card animate-fade-in-up" style="animation-delay: ${index * 0.1}s;">
            <div class="rating">${'‚òÖ'.repeat(r.rating)}${'‚òÜ'.repeat(5 - r.rating)}</div>
            <p class="review-text">"${r.text}"</p>
            <p class="review-author">- ${r.author || 'Anonim'}</p>
            ${r.propertyId && appState.properties.find(p => p.id == r.propertyId) ? `<p style="font-size:0.8em; color:hsl(var(--muted-foreground)); text-align:right;">Tentang: ${appState.properties.find(p => p.id == r.propertyId).name}</p>` : ''}
            <time style="font-size:0.8em; color:hsl(var(--muted-foreground)); text-align:right;">${new Date(r.date).toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' })}</time>
          </div>
        `).join('');
      }


      function renderContactPage() {
        return `
          <section class="section">
            <div class="container">
              <h2 class="section-title">Hubungi Kami</h2>
              <p class="section-subtitle">Punya pertanyaan, saran, atau ingin berdiskusi lebih lanjut? Jangan ragu untuk menghubungi tim Green Valley.</p>
              <div class="l-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-2xl); align-items: start;">
                <div class="c-card animate-fade-in-up">
                  <h3><i class="fas fa-paper-plane"></i> Kirim Pesan Langsung</h3>
                  <form id="contactForm" class="l-flex flex-col">
                    <div class="c-form-field">
                      <label for="contactName">Nama Lengkap</label>
                      <input type="text" id="contactName" placeholder="Nama Anda" required>
                    </div>
                    <div class="c-form-field">
                      <label for="contactEmail">Alamat Email</label>
                      <input type="email" id="contactEmail" placeholder="email@anda.com" required>
                    </div>
                     <div class="c-form-field">
                      <label for="contactSubject">Subjek Pesan</label>
                      <input type="text" id="contactSubject" placeholder="Subjek pesan Anda" required>
                    </div>
                    <div class="c-form-field">
                      <label for="contactMessage">Pesan Anda</label>
                      <textarea id="contactMessage" placeholder="Tuliskan pesan Anda di sini..." required></textarea>
                    </div>
                    <button type="submit" class="c-button"><i class="fas fa-envelope"></i> Kirim Pesan</button>
                  </form>
                </div>
                <div class="animate-fade-in-up" style="animation-delay: 0.2s;">
                    <h3><i class="fas fa-info-circle"></i> Informasi Kontak Lainnya</h3>
                    <p>Anda juga bisa menghubungi kami melalui:</p>
                    <ul style="list-style: none; padding-left: 0; margin-top: var(--space-md);">
                        <li style="margin-bottom: var(--space-sm);"><i class="fas fa-phone-alt" style="color:hsl(var(--primary)); margin-right:var(--space-sm);"></i> Telepon: <a href="tel:+62215550123">+62 21 555 0123</a></li>
                        <li style="margin-bottom: var(--space-sm);"><i class="fas fa-envelope-open-text" style="color:hsl(var(--primary)); margin-right:var(--space-sm);"></i> Email: <a href="mailto:info@greenvalley.com">info@greenvalley.com</a></li>
                        <li style="margin-bottom: var(--space-sm);"><i class="fas fa-map-marker-alt" style="color:hsl(var(--primary)); margin-right:var(--space-sm);"></i> Alamat: Jl. Lembah Hijau No. 1, Jakarta Selatan, Indonesia</li>
                    </ul>
                    <div style="margin-top: var(--space-lg);">
                        <h4><i class="fab fa-whatsapp" style="color:hsl(var(--primary)); margin-right:var(--space-sm);"></i> Jam Operasional:</h4>
                        <p>Senin - Jumat: 08:00 - 17:00 WIB<br>Sabtu: 09:00 - 14:00 WIB<br>Minggu & Hari Libur Nasional: Tutup</p>
                    </div>
                </div>
              </div>
            </div>
          </section>
        `;
      }

      function renderDashboardPage() {
        const totalProperties = appState.properties.length;
        const rentedProperties = appState.properties.filter(p => p.status === 'rented').length;
        const availableProperties = totalProperties - rentedProperties;
        const totalReviews = appState.reviews.length;
        const totalContacts = appState.contacts.length;

        return `
          <section class="section">
            <div class="container">
              <div class="l-flex justify-between items-center flex-wrap" style="margin-bottom: var(--space-lg);">
                <h2 class="section-title" style="text-align:left; margin-bottom:0;">Dashboard Admin</h2>
                <button id="logoutButton" class="c-button btn-danger"><i class="fas fa-sign-out-alt"></i> Keluar</button>
              </div>
              <p class="section-subtitle" style="text-align:left; margin-bottom:var(--space-xl);">Selamat datang! Kelola properti, ulasan, dan pesan masuk dari satu tempat.</p>
              
              <div class="l-grid dashboard-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">
                <div class="c-card text-center animate-fade-in-up">
                  <i class="fas fa-building fa-3x" style="color:hsl(var(--primary)); margin-bottom:var(--space-sm);"></i>
                  <h3>${totalProperties}</h3>
                  <p style="margin-bottom:0;">Total Properti</p>
                </div>
                <div class="c-card text-center animate-fade-in-up" style="animation-delay:0.1s;">
                  <i class="fas fa-check-circle fa-3x" style="color:hsl(var(--accent)); margin-bottom:var(--space-sm);"></i>
                  <h3>${availableProperties}</h3>
                  <p style="margin-bottom:0;">Properti Tersedia</p>
                </div>
                <div class="c-card text-center animate-fade-in-up" style="animation-delay:0.2s;">
                  <i class="fas fa-comments fa-3x" style="color:hsl(var(--secondary)); margin-bottom:var(--space-sm);"></i>
                  <h3>${totalReviews}</h3>
                  <p style="margin-bottom:0;">Total Ulasan</p>
                </div>
                <div class="c-card text-center animate-fade-in-up" style="animation-delay:0.3s;">
                  <i class="fas fa-envelope-open-text fa-3x" style="color:hsl(var(--primary)); margin-bottom:var(--space-sm);"></i>
                  <h3>${totalContacts}</h3>
                  <p style="margin-bottom:0;">Total Pesan Masuk</p>
                </div>
              </div>

              <div class="c-card animate-fade-in-up" style="animation-delay:0.4s;">
                <h3><i class="fas fa-mail-bulk"></i> Pesan Masuk Terbaru</h3>
                ${appState.contacts.length === 0 ? '<p>Belum ada pesan masuk.</p>' : `
                  <div style="max-height: 400px; overflow-y: auto; padding-right: var(--space-sm);">
                    ${[...appState.contacts].reverse().map(c => `
                      <div class="c-card" style="margin-bottom: var(--space-md); background-color: hsl(var(--muted));">
                        <p style="margin-bottom:var(--space-xs);"><strong>Dari:</strong> ${c.name} (<a href="mailto:${c.email}">${c.email}</a>)</p>
                        <p style="margin-bottom:var(--space-xs);"><strong>Subjek:</strong> ${c.subject}</p>
                        <p style="margin-bottom:var(--space-xs); font-style:italic;">"${c.message}"</p>
                        <p style="font-size:0.8em; color:hsl(var(--muted-foreground)); text-align:right;">Diterima: ${new Date(c.date).toLocaleString('id-ID')}</p>
                      </div>
                    `).join('')}
                  </div>
                `}
              </div>
            </div>
          </section>
        `;
      }

      // === EVENT LISTENERS ===
      // Event listener global yang dipasang sekali
      function initGlobalEventListeners() {
        // Navigasi SPA
        window.addEventListener('hashchange', handleHashChange);
        window.addEventListener('DOMContentLoaded', () => {
          loadState(); // Muat state dari localStorage
          applyTheme(appState.theme); // Terapkan tema yang tersimpan
          handleHashChange(); // Render halaman awal berdasarkan hash
        });

        // Toggle menu mobile
        navToggle.addEventListener('click', () => {
          const isExpanded = mainNav.classList.toggle('open');
          navToggle.setAttribute('aria-expanded', isExpanded);
          navToggle.innerHTML = isExpanded ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });

        // Tutup modal
        document.querySelectorAll('.modal-close').forEach(btn => {
          btn.addEventListener('click', () => closeModal(btn.closest('.modal')));
        });
        document.querySelectorAll('.modal').forEach(mod => {
          mod.addEventListener('click', (e) => { // Tutup modal jika klik di luar konten
            if (e.target === mod) closeModal(mod);
          });
        });


        // Submit form properti
        propertyForm.addEventListener('submit', handlePropertyFormSubmit);

        // Submit form autentikasi
        authForm.addEventListener('submit', handleAuthFormSubmit);

        // Toggle tema
        themeToggleButton.addEventListener('click', toggleTheme);
      }

      // Event listener yang spesifik untuk tiap halaman (dipasang setelah render halaman)
      function attachPageEventListeners(pageName) {
        if (pageName === 'properti') {
          const searchInput = document.getElementById('propertySearchInput');
          if (searchInput) searchInput.addEventListener('input', (e) => renderProperties(e.target.value));

          if (appState.isAuthenticated) {
            const openAddBtn = document.getElementById('openAddPropertyModalBtn');
            if (openAddBtn) openAddBtn.addEventListener('click', openAddPropertyModal);
          }

          // Event delegation untuk tombol di kartu properti
          const propertyListContainer = document.getElementById('propertyListContainer');
          if (propertyListContainer) {
            propertyListContainer.addEventListener('click', (e) => {
              const targetButton = e.target.closest('button');
              if (!targetButton) return;

              const propertyId = targetButton.dataset.id;
              if (targetButton.classList.contains('toggle-status-btn')) {
                togglePropertyStatus(propertyId);
              } else if (targetButton.classList.contains('edit-property-btn')) {
                openEditPropertyModal(propertyId);
              } else if (targetButton.classList.contains('delete-property-btn')) {
                deleteProperty(propertyId);
              }
            });
          }
        }
        if (pageName === 'ulasan') {
          const reviewForm = document.getElementById('reviewForm');
          if (reviewForm) reviewForm.addEventListener('submit', handleReviewFormSubmit);

          const starsContainer = document.getElementById('reviewRatingStars');
          if (starsContainer) {
            const stars = starsContainer.querySelectorAll('span');
            stars.forEach(star => {
              star.addEventListener('click', () => setRating(parseInt(star.dataset.rating), stars));
              star.addEventListener('mouseover', () => highlightStars(parseInt(star.dataset.rating), stars, true));
              star.addEventListener('mouseout', () => highlightStars(appState.currentRating, stars, false)); // Kembali ke rating terpilih
            });
            setRating(0, stars); // Reset visual bintang
          }
        }
        if (pageName === 'kontak') {
          const contactForm = document.getElementById('contactForm');
          if (contactForm) contactForm.addEventListener('submit', handleContactFormSubmit);
        }
        if (pageName === 'dashboard' && appState.isAuthenticated) {
          const logoutButton = document.getElementById('logoutButton');
          if (logoutButton) logoutButton.addEventListener('click', handleLogout);
        }
      }

      // Handler untuk rating stars
      function setRating(rating, starsNodeList) {
        appState.currentRating = rating;
        highlightStars(rating, starsNodeList, false);
      }

      function highlightStars(rating, starsNodeList, isHover) {
        starsNodeList.forEach((star, index) => {
          star.classList.remove('selected', 'hovered');
          if (index < rating) {
            star.classList.add(isHover ? 'hovered' : 'selected');
          }
        });
      }

      // === HANDLER AKSI ===
      function handleHashChange() {
        const hash = window.location.hash.slice(1) || 'home';
        renderPage(hash);
      }

      // Modal
      function openModal(modalElement) {
        modalElement.classList.add('open');
        document.body.style.overflow = 'hidden'; // Mencegah scroll body
      }
      function closeModal(modalElement) {
        modalElement.classList.remove('open');
        document.body.style.overflow = ''; // Kembalikan scroll body
      }

      // Properti
      function openAddPropertyModal() {
        appState.editingPropertyId = null; // Mode tambah
        propertyModalTitle.innerHTML = '<i class="fas fa-plus-circle"></i> Tambah Properti Baru';
        propertySubmitButton.innerHTML = '<i class="fas fa-plus-circle"></i> Tambah Properti';
        propertyForm.reset(); // Bersihkan form
        document.getElementById('propertyId').value = ''; // Pastikan ID kosong
        openModal(propertyModal);
      }

      function openEditPropertyModal(id) {
        const property = appState.properties.find(p => p.id == id); // Bandingkan sebagai string jika id dari dataset
        if (!property) {
          showNotification('Properti tidak ditemukan.', 'error');
          return;
        }
        appState.editingPropertyId = property.id; // Mode edit
        propertyModalTitle.innerHTML = '<i class="fas fa-edit"></i> Edit Properti';
        propertySubmitButton.innerHTML = '<i class="fas fa-save"></i> Simpan Perubahan';

        document.getElementById('propertyId').value = property.id;
        document.getElementById('propertyName').value = property.name;
        document.getElementById('propertyType').value = property.type;
        document.getElementById('propertyPrice').value = property.price;
        document.getElementById('propertyImage').value = property.image || '';
        document.getElementById('propertyDescription').value = property.description;

        openModal(propertyModal);
      }

      function handlePropertyFormSubmit(e) {
        e.preventDefault();
        if (!validateForm(propertyForm)) return;

        const formData = {
          id: document.getElementById('propertyId').value, // Bisa kosong untuk properti baru
          name: document.getElementById('propertyName').value,
          type: document.getElementById('propertyType').value,
          price: parseInt(document.getElementById('propertyPrice').value),
          image: document.getElementById('propertyImage').value || `https://picsum.photos/seed/${generateId()}/800/600`, // Gambar default jika kosong
          description: document.getElementById('propertyDescription').value,
          status: appState.editingPropertyId ? appState.properties.find(p => p.id == appState.editingPropertyId).status : 'available', // Pertahankan status saat edit
        };

        if (appState.editingPropertyId) { // Mode Edit
          appState.properties = appState.properties.map(p =>
            p.id == appState.editingPropertyId ? { ...p, ...formData, id: appState.editingPropertyId } : p // Pastikan ID tetap
          );
          showNotification('Properti berhasil diperbarui!', 'success');
        } else { // Mode Tambah
          formData.id = generateId(); // Generate ID baru
          appState.properties.push(formData);
          showNotification('Properti berhasil ditambahkan!', 'success');
        }

        saveState();
        closeModal(propertyModal);
        if (appState.currentPage === 'properti') renderProperties(document.getElementById('propertySearchInput')?.value || '');
        if (appState.currentPage === 'dashboard') renderPage('dashboard'); // Re-render dashboard untuk update statistik
      }

      function togglePropertyStatus(id) {
        appState.properties = appState.properties.map(p =>
          p.id == id ? { ...p, status: p.status === 'available' ? 'rented' : 'available' } : p
        );
        saveState();
        const newStatus = appState.properties.find(p => p.id == id).status;
        showNotification(`Status properti diubah menjadi ${newStatus === 'available' ? 'Tersedia' : 'Disewa'}.`, 'info');
        if (appState.currentPage === 'properti') renderProperties(document.getElementById('propertySearchInput')?.value || '');
        if (appState.currentPage === 'dashboard') renderPage('dashboard');
      }

      function deleteProperty(id) {
        if (confirm('Apakah Anda yakin ingin menghapus properti ini? Aksi ini tidak dapat diurungkan.')) {
          appState.properties = appState.properties.filter(p => p.id != id);
          saveState();
          showNotification('Properti berhasil dihapus.', 'success');
          if (appState.currentPage === 'properti') renderProperties(document.getElementById('propertySearchInput')?.value || '');
          if (appState.currentPage === 'dashboard') renderPage('dashboard');
        }
      }

      // Ulasan
      function handleReviewFormSubmit(e) {
        e.preventDefault();
        const form = e.target;
        if (!validateForm(form) || appState.currentRating === 0) {
          showNotification('Mohon isi semua kolom dan berikan rating bintang.', 'error');
          return;
        }

        const newReview = {
          id: generateId(),
          author: document.getElementById('reviewAuthor').value,
          propertyId: document.getElementById('reviewPropertyId').value, // Bisa kosong
          rating: appState.currentRating,
          text: document.getElementById('reviewText').value,
          date: new Date().toISOString(),
        };

        appState.reviews.push(newReview);
        saveState();
        form.reset();
        // Reset rating visual
        const stars = document.getElementById('reviewRatingStars').querySelectorAll('span');
        setRating(0, stars);

        showNotification('Terima kasih atas ulasan Anda!', 'success');
        if (appState.currentPage === 'ulasan') renderReviews();
        if (appState.currentPage === 'dashboard') renderPage('dashboard');
      }

      // Kontak
      function handleContactFormSubmit(e) {
        e.preventDefault();
        const form = e.target;
        if (!validateForm(form)) return;

        const newContact = {
          id: generateId(),
          name: document.getElementById('contactName').value,
          email: document.getElementById('contactEmail').value,
          subject: document.getElementById('contactSubject').value,
          message: document.getElementById('contactMessage').value,
          date: new Date().toISOString(),
        };
        appState.contacts.push(newContact);
        saveState();
        form.reset();
        showNotification('Pesan Anda telah terkirim. Kami akan segera menghubungi Anda.', 'success');
        if (appState.currentPage === 'dashboard') renderPage('dashboard');
      }

      // Autentikasi & Dashboard
      function handleAuthFormSubmit(e) {
        e.preventDefault();
        const passwordInput = document.getElementById('password');
        // Kata sandi sederhana untuk demo, di aplikasi nyata gunakan sistem backend
        if (passwordInput.value === 'admin123') {
          appState.isAuthenticated = true;
          closeModal(authModal);
          passwordInput.value = ''; // Kosongkan field password
          showNotification('Berhasil masuk ke Dashboard!', 'success');
          window.location.hash = 'dashboard'; // Arahkan ke dashboard
        } else {
          showNotification('Kata sandi salah. Silakan coba lagi.', 'error');
          passwordInput.focus();
        }
      }

      function handleLogout() {
        if (confirm('Apakah Anda yakin ingin keluar dari Dashboard?')) {
          appState.isAuthenticated = false;
          showNotification('Anda telah keluar dari Dashboard.', 'info');
          window.location.hash = 'home'; // Arahkan ke beranda
        }
      }

      // Tema
      function applyTheme(themeName) {
        document.documentElement.className = themeName; // Ganti kelas di <html>
        appState.theme = themeName;
        localStorage.setItem('theme', themeName);
        themeToggleButton.innerHTML = themeName === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        themeToggleButton.setAttribute('aria-label', themeName === 'dark' ? 'Ganti ke tema terang' : 'Ganti ke tema gelap');
      }

      function toggleTheme() {
        const newTheme = appState.theme === 'light' ? 'dark' : 'light';
        applyTheme(newTheme);
        showNotification(`Tema diubah ke mode ${newTheme === 'light' ? 'Terang' : 'Gelap'}.`, 'info');
      }

      // === INISIALISASI APLIKASI ===
      initGlobalEventListeners();

    })();
  </script>
</body>

</html>