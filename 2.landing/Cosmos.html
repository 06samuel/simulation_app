<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="PropertiKu - Temukan dan sewa apartemen, rumah, serta properti impian Anda dengan mudah. Pilihan terbaik dengan harga bersaing untuk gaya hidup modern dan mewah.">
    <meta name="keywords"
        content="sewa apartemen, properti, apartemen mewah, rumah, studio, villa, real estate, PropertiKu, cari properti, investasi properti">
    <meta name="author" content="PropertiKu Profesional">
    <meta name="theme-color" content="#1e3a8a"> <!-- Warna tema utama -->
    <meta name="robots" content="index, follow">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PropertiKu - Sewa Properti Impian Anda</title>

    <!-- Favicon (Emoji Gedung 🏢 dikonversi ke PNG base64 - sudah baik, bukan SVG) -->
    <link rel="icon"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACPUlEQVRYR8VXUU7DMAwLTQ82aNq0aROiDXoEHYIHsEN0COIEHYIHSA/QIdAhrBMQ28QkDmxtHEH+z37b8pMkAc49y86KGHgC3AEngStwdRbwDXgC7AGn4HMGfGbfYSSXgI/AGaeAX4ALwBXgCvgGvgHPgBMMwCwAv4bMoAY/gAPgBvA8AnwZMoP8TqZ7k9HvP2gAzwg8zP4zrvn9j0k90+tnAn8Anw2g5vP7vAv4AnxDv3zP8vP5vPA4AvwP4AP4ADAbgB5zPwgv4vP8gTcB9d3gAvACo/sK6HkATDAdgDA7v/sK6K3AD7ADDAF2x2wBdwgA3x0AFn6g8fA4g5x0AzwMXg8A/R1U/gZ+TqZ2TqZXgGfPwCviIVAMdg7c43M8yP8AseBHhT8P48jR/fAK/AdMv5wE3gH7AEdgP4b21/ArsP4F3gGfAr8A/8AV4Av4E2gP2A91+BLwCS78AVgCV34AvAELvwBOAOHfh/AG3QZyT/4V/0AAAAAElFTkSuQmCC"
        type="image/png">

    <!-- Google Fonts: Inter, Montserrat, Poppins (Pilihan font yang baik untuk desain modern) -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@600;700;800&family=Poppins:wght@400;500;600&display=swap"
        rel="stylesheet">

    <!-- Font Awesome Icons (CDN Gratis - sudah baik, bukan SVG) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer">

    <style>
        /* === Variabel Global CSS untuk Tema dan Konsistensi === */
        :root {
            --primary-color: #1e3a8a;
            /* Biru tua elegan, sangat bagus untuk kesan korporat dan mewah */
            --primary-hover: #172554;
            /* Warna hover yang lebih gelap untuk primary */
            --secondary-color: #64748b;
            /* Abu-abu modern, netral dan profesional */
            --secondary-hover: #475569;
            --accent-color: #f59e0b;
            /* Kuning emas/oranye sebagai aksen, memberikan sentuhan premium */
            --accent-hover: #d97706;
            --success-color: #10b981;
            /* Hijau untuk notifikasi sukses */
            --danger-color: #ef4444;
            /* Merah untuk notifikasi error atau bahaya */
            --light-bg: #f8f9fa;
            /* Latar belakang terang, sedikit off-white agar tidak terlalu mencolok */
            --white: #ffffff;
            --dark-text: #1f2937;
            /* Teks gelap, tidak hitam pekat agar lebih nyaman dibaca */
            --muted-text: #6b7280;
            /* Teks sekunder atau deskripsi */
            --border-color: #e5e7eb;
            /* Warna border yang halus */
            --overlay-dark: rgba(17, 24, 39, 0.75);
            /* Overlay untuk hero section atau modal */
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
            --font-main: 'Inter', sans-serif;
            --font-heading: 'Montserrat', sans-serif;
            --font-accent: 'Poppins', sans-serif;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --transition-fast: 0.2s ease-in-out;
            --transition-normal: 0.3s ease-in-out;
            --container-width: 1280px;
            /* Lebar kontainer sedikit diperbesar untuk tampilan modern */
            --section-padding: clamp(60px, 8vw, 100px);
            /* Padding section yang responsif */
        }

        /* === Reset CSS Global dan Pengaturan Dasar === */
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        li{
            list-style: none;
        }
        a{
            text-decoration: none;
        }

        html {
            scroll-behavior: smooth;
            /* Scroll halus antar section */
            font-size: 16px;
            /* Basis font size, memudahkan kalkulasi REM */
            -webkit-text-size-adjust: 100%;
            /* Mencegah auto-zoom font di iOS */
            -webkit-tap-highlight-color: transparent;
            /* Hilangkan highlight saat tap di mobile */
        }

        body {
            font-family: var(--font-main);
            color: var(--dark-text);
            background-color: var(--white);
            line-height: 1.7;
            /* Keterbacaan yang lebih baik */
            -webkit-font-smoothing: antialiased;
            /* Teks lebih halus di Webkit */
            -moz-osx-font-smoothing: grayscale;
            /* Teks lebih halus di Firefox */
            overflow-x: hidden;
            /* Mencegah scroll horizontal yang tidak diinginkan */
            min-height: 100vh;
            /* Pastikan body minimal setinggi viewport */
            display: flex;
            /* Untuk footer menempel di bawah jika konten pendek */
            flex-direction: column;
        }

        main#app-content {
            flex-grow: 1;
            /* Konten utama mengisi ruang tersedia */
        }

        /* === Utilitas Umum (Flexbox, Grid, Spacing, dll.) === */
        .d-flex {
            display: flex;
        }

        .flex-column {
            flex-direction: column;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .align-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-1 {
            gap: 0.5rem;
        }

        .gap-2 {
            gap: 1rem;
        }

        .gap-3 {
            gap: 1.5rem;
        }

        .gap-4 {
            gap: 2rem;
        }

        .w-100 {
            width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .mt-3 {
            margin-top: 1.5rem;
        }

        .mt-4 {
            margin-top: 2rem;
        }

        .mb-3 {
            margin-bottom: 1.5rem;
        }

        .p-3 {
            padding: 1.5rem;
        }

        /* Utility padding */
        .rounded {
            border-radius: var(--radius-md);
        }

        /* Utility border-radius */

        .container {
            width: 100%;
            max-width: var(--container-width);
            margin-left: auto;
            margin-right: auto;
            padding-left: 20px;
            padding-right: 20px;
        }

        /* === Tipografi === */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-heading);
            font-weight: 700;
            color: var(--dark-text);
            margin-bottom: 0.85rem;
            /* Sedikit penyesuaian margin */
            line-height: 1.3;
        }

        h1 {
            font-size: clamp(2.4rem, 5vw, 3.8rem);
        }

        h2 {
            font-size: clamp(2rem, 4vw, 3rem);
        }

        h3 {
            font-size: clamp(1.5rem, 3.2vw, 2.2rem);
        }

        h4,
        .h4 {
            font-size: clamp(1.2rem, 2.8vw, 1.6rem);
        }

        /* Tambah class .h4 untuk fleksibilitas */

        p {
            font-size: 1rem;
            color: var(--muted-text);
            margin-bottom: 1.25rem;
        }

        p.lead {
            font-size: 1.15rem;
            font-weight: 400;
            color: var(--dark-text);
            opacity: 0.9;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-fast), background-color var(--transition-fast);
        }

        a:hover,
        a:focus {
            color: var(--primary-hover);
            text-decoration: underline;
            outline-offset: 2px;
            /* Agar outline fokus terlihat jelas */
        }

        /* === Tombol (Buttons) === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            /* Teks dan ikon di tengah */
            padding: 0.85rem 1.75rem;
            /* Padding tombol sedikit lebih besar */
            font-family: var(--font-accent);
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--radius-md);
            border: 1px solid transparent;
            cursor: pointer;
            transition: var(--transition-normal);
            text-align: center;
            white-space: nowrap;
            /* Mencegah teks tombol wrap */
        }

        .btn i {
            margin-right: 0.6rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background: var(--primary-hover);
            border-color: var(--primary-hover);
            transform: translateY(-3px);
            /* Efek naik sedikit saat hover */
            box-shadow: var(--shadow-md);
            color: var(--white);
            /* Pastikan warna teks tetap */
            text-decoration: none;
        }

        .btn-accent {
            background: var(--accent-color);
            color: var(--dark-text);
            /* Teks gelap di atas aksen kuning agar kontras */
        }

        .btn-accent:hover,
        .btn-accent:focus {
            background: var(--accent-hover);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
            color: var(--dark-text);
            text-decoration: none;
        }

        .btn-outline-primary {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline-primary:hover,
        .btn-outline-primary:focus {
            background: var(--primary-color);
            color: var(--white);
            transform: translateY(-3px);
            text-decoration: none;
        }

        /* === Formulir (Forms) === */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 0.5rem;
            display: block;
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 0.85rem 1.15rem;
            font-size: 1rem;
            font-family: var(--font-main);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
            background-color: var(--white);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(30, 58, 138, 0.15);
            /* Bayangan fokus yang lebih halus */
            outline: none;
        }

        textarea.form-control {
            min-height: 120px;
            /* Tinggi minimal textarea */
            resize: vertical;
            /* Izinkan resize vertikal saja */
        }

        /* Styling untuk Select agar konsisten dan tanpa SVG */
        .form-group .select-container {
            position: relative;
            display: block;
            /* Agar mengambil lebar penuh dari .form-group */
            width: 100%;
        }

        .form-group .select-container select.form-control {
            appearance: none;
            /* Menghilangkan tampilan default browser */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: none;
            /* Hapus gambar latar (termasuk SVG sebelumnya) */
            padding-right: 2.8rem;
            /* Ruang untuk ikon kustom */
            width: 100%;
            cursor: pointer;
        }

        .form-group .select-container::after {
            content: "\f078";
            /* Kode ikon Font Awesome untuk caret-down */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            /* Solid icon */
            position: absolute;
            top: 50%;
            right: 1.15rem;
            /* Posisi ikon di kanan */
            transform: translateY(-50%);
            pointer-events: none;
            /* Agar ikon tidak mengganggu klik pada select */
            color: var(--muted-text);
            font-size: 0.9rem;
            transition: color var(--transition-fast);
        }

        .form-group .select-container:hover::after {
            color: var(--dark-text);
            /* Warna ikon saat select di-hover */
        }

        /* === Header Aplikasi (Navbar) === */
        .app-header {
            background: var(--white);
            box-shadow: var(--shadow-sm);
            position: sticky;
            /* Header menempel di atas saat scroll */
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            transition: background-color var(--transition-normal), box-shadow var(--transition-normal);
            padding: 0.5rem 0;
            /* Padding header dikurangi sedikit */
        }

        .app-header.scrolled {
            /* Style saat header di-scroll */
            background: rgba(255, 255, 255, 0.95);
            /* Sedikit transparan dengan efek blur */
            backdrop-filter: blur(8px);
            /* Efek glassmorphism */
            box-shadow: var(--shadow-md);
        }

        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            /* Padding internal navbar */
        }

        .navbar-brand {
            font-family: var(--font-heading);
            font-size: 1.85rem;
            /* Ukuran brand sedikit diperbesar */
            font-weight: 800;
            color: var(--dark-text);
        }

        .navbar-brand i {
            color: var(--accent-color);
            margin-right: 0.6rem;
            transform: translateY(-2px);
            display: inline-block;
        }

        .navbar-brand strong {
            color: var(--primary-color);
        }

        .navbar-brand:hover,
        .navbar-brand:focus {
            text-decoration: none;
            color: var(--dark-text);
        }

        .navbar-nav {
            display: flex;
            list-style: none;
            gap: 0.5rem;
            /* Jarak antar link navigasi */
        }

        .nav-link {
            font-family: var(--font-accent);
            font-weight: 500;
            color: var(--muted-text);
            padding: 0.6rem 1.1rem;
            /* Padding link navigasi */
            border-radius: var(--radius-sm);
            position: relative;
            transition: color var(--transition-fast), background-color var(--transition-fast);
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-color);
            background-color: rgba(30, 58, 138, 0.05);
            /* Latar hover/aktif yang halus */
            text-decoration: none;
        }

        .nav-link.active {
            font-weight: 600;
        }

        /* Menghilangkan garis bawah default, mengandalkan background dan warna teks */
        .nav-link::after {
            display: none;
        }


        .navbar-toggler {
            display: none;
            /* Sembunyikan di desktop */
            background: none;
            border: none;
            font-size: 1.75rem;
            /* Ukuran ikon toggler */
            color: var(--dark-text);
            cursor: pointer;
            padding: 0.5rem;
        }

        /* === Hero Section === */
        .hero-section {
            min-height: 85vh;
            /* Ketinggian hero section */
            background: linear-gradient(var(--overlay-dark), var(--overlay-dark)), url('https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=1920&q=80') no-repeat center center/cover;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Konten hero di tengah */
            color: var(--white);
            text-align: center;
            padding: var(--section-padding) 0;
            position: relative;
            /* Untuk elemen overlay jika diperlukan */
        }

        .hero-content h1 {
            font-size: clamp(2.8rem, 7vw, 4.5rem);
            /* Judul hero lebih besar */
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
            /* Bayangan teks lebih jelas */
            margin-bottom: 1.25rem;
            color: var(--white);
        }

        .hero-content .subtitle {
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            /* Subtitle responsif */
            font-family: var(--font-accent);
            opacity: 0.95;
            max-width: 700px;
            /* Batasi lebar subtitle */
            margin: 0 auto 2.5rem auto;
            /* Margin untuk subtitle */
        }

        .search-form-hero {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            /* Kolom form pencarian responsif */
            gap: 1rem;
            background: rgba(255, 255, 255, 0.92);
            /* Latar form dengan sedikit transparansi */
            backdrop-filter: blur(6px);
            /* Efek glassmorphism pada form */
            padding: 1.75rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            margin-top: 2rem;
            max-width: 900px;
            /* Lebar maksimum form */
            width: 100%;
        }

        .search-form-hero .form-group {
            margin-bottom: 0;
        }

        /* Hilangkan margin bawah di form hero */
        .search-form-hero button[type="submit"] {
            grid-column: span 1 / -1;
            /* Tombol mengambil sisa ruang jika tidak pas */
            height: 100%;
            /* Tombol sama tinggi dengan input */
        }

        @media (min-width: 769px) {

            /* Penyesuaian untuk layar lebih besar */
            .search-form-hero {
                grid-template-columns: 2fr 1.5fr auto;
            }

            .search-form-hero button[type="submit"] {
                grid-column: auto;
            }
        }


        /* === Section Umum === */
        section {
            padding: var(--section-padding) 0;
        }

        section.bg-light-bg {
            background-color: var(--light-bg);
            /* Latar belakang terang untuk variasi section */
        }

        .section-title {
            /* Utilitas untuk judul section */
            text-align: center;
            margin-bottom: 3.5rem;
            /* Jarak judul ke konten */
        }

        .section-title h2 {
            margin-bottom: 0.75rem;
        }

        .section-title p {
            max-width: 650px;
            /* Batasi lebar deskripsi judul */
            margin-left: auto;
            margin-right: auto;
            color: var(--muted-text);
            font-size: 1.1rem;
        }


        /* === Kartu Properti (Property Card) === */
        .property-grid {
            display: grid;
            /* grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); */
            /* Ukuran kartu sedikit lebih besar */
            grid-template-columns: repeat(auto-fill, minmax(min(100%, 320px), 1fr));
            gap: 2rem;
            /* Jarak antar kartu */
        }

        .property-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            /* Radius kartu lebih besar */
            box-shadow: var(--shadow-md);
            overflow: hidden;
            /* Agar gambar tidak keluar dari radius */
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
            display: flex;
            flex-direction: column;
            /* Untuk konsistensi tinggi tombol */
        }

        .property-card:hover,
        .property-card:focus-within {
            transform: translateY(-10px);
            /* Efek naik lebih dramatis */
            box-shadow: var(--shadow-lg);
        }

        .property-card-image-wrapper {
            position: relative;
            padding-top: 60%;
            /* Rasio aspek gambar (misal 5:3) */
            overflow: hidden;
        }

        .property-card-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Gambar mengisi area tanpa distorsi */
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Transisi zoom gambar lebih smooth */
        }

        .property-card:hover .property-card-image {
            transform: scale(1.1);
            /* Efek zoom pada gambar saat hover */
        }

        .property-card-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: var(--accent-color);
            color: var(--dark-text);
            padding: 0.4rem 0.9rem;
            /* Padding badge */
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: capitalize;
            /* Tipe properti jadi kapital */
        }

        .property-card-badge.featured-badge {
            /* Badge khusus untuk properti unggulan */
            background-color: var(--success-color);
            color: var(--white);
            top: calc(1rem + 2.2rem);
            /* Posisi di bawah badge tipe */
        }

        .property-card-content {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
            /* Jarak antar elemen konten */
            flex-grow: 1;
            /* Agar konten mengisi sisa ruang di kartu */
        }

        .property-card-content h3 {
            margin-bottom: 0.25rem;
        }

        .property-card-price {
            font-size: 1.6rem;
            /* Harga lebih menonjol */
            font-weight: 700;
            color: var(--primary-color);
            margin-top: auto;
            /* Dorong harga dan tombol ke bawah */
            padding-top: 0.5rem;
            /* Jarak dari detail di atasnya */
        }

        .property-card-details {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--muted-text);
            margin-top: 0.25rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            /* Wrap jika tidak cukup ruang */
        }

        .property-card-details span {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            /* Jarak ikon dan teks detail */
        }

        .property-card .btn {
            margin-top: 1rem;
        }

        /* Tombol di kartu */


        /* === Halaman Detail Properti === */
        .property-detail-hero {
            height: 65vh;
            /* Tinggi hero di halaman detail */
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
            /* Konten di bawah hero image */
            padding-bottom: 4.5rem;
            position: relative;
        }

        .property-detail-hero::before {
            /* Overlay gradien gelap di bawah */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(transparent 50%, rgba(0, 0, 0, 0.8) 100%);
        }

        .property-detail-hero .container {
            position: relative;
            /* Konten di atas overlay */
            z-index: 1;
        }

        .property-detail-hero h1 {
            color: var(--white);
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
        }

        .property-detail-hero p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.2rem;
            /* Lokasi lebih jelas */
        }

        .property-detail-body {
            padding: var(--section-padding) 0;
        }

        .property-detail-main {
            display: grid;
            grid-template-columns: 1fr;
            /* Default satu kolom */
            gap: 2.5rem;
            /* Jarak antara deskripsi dan sidebar */
        }

        @media (min-width: 992px) {

            /* Dua kolom di layar besar */
            .property-detail-main {
                grid-template-columns: 2.5fr 1fr;
            }
        }

        .property-features ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            /* Fitur responsif */
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .property-features li {
            background: var(--light-bg);
            padding: 1rem 1.25rem;
            border-radius: var(--radius-md);
            border-left: 4px solid var(--primary-color);
            /* Aksen border kiri */
            font-weight: 500;
        }

        .property-features li i {
            color: var(--primary-color);
            margin-right: 0.5rem;
        }

        .property-agent-card {
            background: var(--light-bg);
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            text-align: center;
            position: sticky;
            /* Sidebar agen menempel saat scroll */
            top: calc(var(--app-header-height, 80px) + 2rem);
            /* Sesuaikan dengan tinggi header */
        }

        .property-agent-card img {
            width: 120px;
            /* Foto agen lebih besar */
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1.25rem;
            border: 4px solid var(--accent-color);
            /* Border aksen pada foto */
            box-shadow: var(--shadow-sm);
        }

        .property-agent-card h4 {
            margin-bottom: 0.5rem;
        }


        /* === Filter Form di Halaman Daftar Properti === */
        .filter-form {
            background-color: var(--white);
            /* Latar form filter */
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            /* Bayangan lebih kuat untuk menonjol */
            margin-bottom: 2.5rem;
        }

        .filter-form .d-flex {
            /* Penyesuaian untuk form filter */
            align-items: flex-end;
            /* Sejajarkan elemen form di bawah */
        }

        .filter-form .form-group {
            flex-grow: 1;
            /* Form group mengisi ruang */
            min-width: 150px;
            /* Lebar minimal untuk setiap input */
        }

        .filter-form button[type="submit"] {
            height: calc(1.7em + 1.7rem + 2px);
            /* Sesuaikan tinggi tombol dengan input */
            padding-top: 0.85rem;
            padding-bottom: 0.85rem;
        }

        /* === Pagination === */
        .pagination .btn {
            min-width: 44px;
            /* Ukuran tombol pagination */
            padding: 0.6rem 0.5rem;
            /* Padding tombol pagination */
            font-size: 0.9rem;
        }

        .pagination .btn.btn-accent {
            /* Tombol halaman aktif */
            box-shadow: var(--shadow-sm);
        }

        /* === Halaman Kontak dan Tentang === */
        .contact-form-container {
            max-width: 750px;
            /* Lebar form kontak */
            margin: 0 auto;
            padding: 2.5rem !important;
            /* Padding lebih besar */
            box-shadow: var(--shadow-lg);
        }

        .about-section .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2.5rem;
            align-items: center;
        }

        .about-section img.feature-image {
            width: 100%;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            object-fit: cover;
            max-height: 400px;
            /* Batasi tinggi gambar fitur */
        }

        /* === Footer === */
        .app-footer {
            background: var(--dark-text);
            color: var(--muted-text);
            padding: 4rem 0 1.5rem;
            /* Padding footer */
            margin-top: auto;
            /* Pastikan footer selalu di bawah jika konten pendek */
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2.5rem;
            /* Jarak antar kolom footer */
            margin-bottom: 3rem;
        }

        .footer-section h4 {
            color: var(--white);
            font-family: var(--font-heading);
            font-size: 1.25rem;
            /* Judul section footer */
            margin-bottom: 1.25rem;
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 0.75rem;
        }

        .footer-section ul li a {
            color: var(--muted-text);
        }

        .footer-section ul li a:hover,
        .footer-section ul li a:focus {
            color: var(--accent-color);
            padding-left: 0.5rem;
            /* Efek indent saat hover */
            text-decoration: none;
        }

        .footer-brand {
            /* Styling brand di footer */
            font-family: var(--font-heading);
            font-size: 1.85rem;
            font-weight: 800;
            color: var(--white);
            display: inline-block;
            margin-bottom: 1rem;
        }

        .footer-brand i {
            color: var(--accent-color);
            margin-right: 0.6rem;
        }

        .footer-brand strong {
            color: var(--primary-color);
        }

        /* Primary color tetap kontras di dark bg */
        .footer-brand:hover,
        .footer-brand:focus {
            text-decoration: none;
            color: var(--white);
        }

        .footer-social-icons a {
            font-size: 1.6rem;
            /* Ukuran ikon sosial */
            color: var(--muted-text);
            margin-right: 1.25rem;
            transition: color var(--transition-fast), transform var(--transition-fast);
        }

        .footer-social-icons a:hover,
        .footer-social-icons a:focus {
            color: var(--accent-color);
            transform: translateY(-4px);
            /* Efek naik ikon sosial */
        }

        .footer-social-icons a:last-child {
            margin-right: 0;
        }

        .footer-bottom {
            border-top: 1px solid var(--secondary-hover);
            text-align: center;
            padding-top: 1.5rem;
            font-size: 0.9rem;
        }

        .footer-bottom .fa-heart {
            transition: color 0.3s ease;
            /* Transisi warna hati */
        }

        .footer-bottom .fa-heart:hover {
            color: var(--accent-color) !important;
            /* Warna hati saat hover */
        }

        /* === Loader Indikator === */
        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.97);
            /* Latar loader sedikit lebih opak */
            display: flex;
            flex-direction: column;
            /* Untuk teks di bawah loader */
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-normal), visibility var(--transition-normal);
        }

        .loader-container.visible {
            opacity: 1;
            visibility: visible;
        }

        .loader {
            width: 60px;
            /* Ukuran loader lebih besar */
            height: 60px;
            border: 6px solid var(--light-bg);
            border-top-color: var(--primary-color);
            /* Warna spin loader */
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .loader-container .sr-only {
            /* Teks untuk screen reader */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        .loader-container::after {
            /* Teks "Memuat..." terlihat di bawah spinner */
            content: "Memuat...";
            margin-top: 1rem;
            font-family: var(--font-accent);
            color: var(--dark-text);
            font-size: 1.1rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* === Halaman Tidak Ditemukan (404) === */
        .not-found-section {
            min-height: 70vh;
            /* Tinggi minimal halaman 404 */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .not-found-section i.fa-exclamation-triangle {
            font-size: 5rem;
            /* Ikon 404 lebih besar */
            margin-bottom: 1.5rem;
        }

        /* === Aksesibilitas: Fokus Terlihat Jelas === */
        *:focus-visible {
            /* Style fokus yang lebih modern dan jelas */
            outline: 3px solid var(--accent-color);
            outline-offset: 3px;
            box-shadow: 0 0 0 5px rgba(245, 158, 11, 0.3);
            /* Bayangan tambahan untuk fokus */
        }

        /* Khusus untuk input, agar tidak bentrok dengan style fokus form-control */
        .form-control:focus-visible {
            outline: none;
            /* Biarkan box-shadow dari .form-control:focus yang menangani */
        }


        /* === Penyesuaian Responsif === */
        @media (max-width: 1200px) {
            .container {
                max-width: 1140px;
            }
        }

        @media (max-width: 992px) {
            .container {
                max-width: 960px;
            }

            .search-form-hero {
                grid-template-columns: 1fr;
            }

            /* Form hero jadi satu kolom */
            .search-form-hero button[type="submit"] {
                grid-column: auto;
            }

            /* Tombol kembali normal */
            .navbar-nav {
                gap: 0.5rem;
            }

            .nav-link {
                padding: 0.5rem 0.8rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                max-width: 720px;
            }

            h1 {
                font-size: 2.2rem;
            }

            /* Ukuran font disesuaikan untuk mobile */
            h2 {
                font-size: 1.8rem;
            }

            .navbar-nav {
                display: none;
                /* Sembunyikan menu navigasi default */
                flex-direction: column;
                position: absolute;
                top: 100%;
                /* Posisi di bawah header */
                left: 0;
                right: 0;
                background: var(--white);
                box-shadow: var(--shadow-md);
                padding: 1rem;
                border-top: 1px solid var(--border-color);
            }

            .navbar-nav.show {
                display: flex;
            }

            /* Tampilkan saat di-toggle */
            .nav-item {
                width: 100%;
            }

            .nav-link {
                padding: 0.8rem 1rem;
                border-bottom: 1px solid var(--border-color);
                width: 100%;
                text-align: left;
            }

            .nav-link:last-child {
                border-bottom: none;
            }

            .nav-item .btn {
                width: 100%;
                margin-top: 0.5rem;
            }

            /* Tombol login di menu mobile */

            .navbar-toggler {
                display: block;
            }

            /* Tampilkan tombol toggler */

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .hero-content .subtitle {
                font-size: 1.1rem;
            }

            .search-form-hero {
                padding: 1.25rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            /* Footer jadi satu kolom */
            .footer-section ul {
                text-align: center;
            }

            .footer-social-icons {
                justify-content: center;
                display: flex;
            }

            .filter-form .d-flex {
                flex-direction: column;
                align-items: stretch;
            }

            /* Filter form jadi vertikal */
            .filter-form .form-group {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .container {
                max-width: 100%;
                padding-left: 15px;
                padding-right: 15px;
            }

            :root {
                --section-padding: clamp(40px, 6vw, 60px);
            }

            /* Padding section lebih kecil di mobile */
            .property-card-price {
                font-size: 1.4rem;
            }
        }
    </style>
</head>

<body>
    <!-- Loader ditampilkan saat navigasi atau pemuatan data -->
    <div class="loader-container" id="loaderContainer" aria-live="assertive" aria-atomic="true">
        <div class="loader" role="status" aria-hidden="true"></div>
        <span class="sr-only">Memuat konten halaman...</span>
    </div>

    <header class="app-header" id="appHeader">
        <div class="container">
            <nav class="navbar">
                <a href="#/" class="navbar-brand" aria-label="PropertiKu Halaman Beranda">
                    <i class="fa-solid fa-building-columns"></i> Properti<strong>Ku</strong>
                </a>
                <button class="navbar-toggler" id="navbarToggler" aria-label="Buka atau tutup menu navigasi"
                    aria-expanded="false" aria-controls="navMenu">
                    <i class="fa-solid fa-bars"></i>
                </button>
                <ul class="navbar-nav" id="navMenu">
                    <li class="nav-item"><a href="#/" class="nav-link">Beranda</a></li>
                    <li class="nav-item"><a href="#/properti" class="nav-link">Properti</a></li>
                    <li class="nav-item"><a href="#/tentang" class="nav-link">Tentang Kami</a></li>
                    <li class="nav-item"><a href="#/kontak" class="nav-link">Hubungi Kami</a></li>
                    <li class="nav-item">
                        <button class="btn btn-primary" id="loginButton">
                            <i class="fa-solid fa-right-to-bracket"></i> Masuk / Daftar
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Konten utama aplikasi akan dirender di sini oleh JavaScript -->
    <main id="app-content"></main>

    <footer class="app-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <a href="#/" class="footer-brand" aria-label="PropertiKu Halaman Beranda">
                        <i class="fa-solid fa-building-columns"></i> Properti<strong>Ku</strong>
                    </a>
                    <p>Membantu Anda menemukan properti impian dengan pengalaman pencarian yang modern, mudah,
                        dan menyenangkan.</p>
                    <div class="footer-social-icons">
                        <a href="#" target="_blank" rel="noopener noreferrer"
                            aria-label="Kunjungi Facebook PropertiKu"><i
                                class="fa-brands fa-facebook-f"></i></a>
                        <a href="#" target="_blank" rel="noopener noreferrer"
                            aria-label="Kunjungi Instagram PropertiKu"><i
                                class="fa-brands fa-instagram"></i></a>
                        <a href="#" target="_blank" rel="noopener noreferrer"
                            aria-label="Kunjungi Twitter PropertiKu"><i class="fa-brands fa-twitter"></i></a>
                        <a href="#" target="_blank" rel="noopener noreferrer"
                            aria-label="Kunjungi LinkedIn PropertiKu"><i
                                class="fa-brands fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Navigasi Cepat</h4>
                    <ul>
                        <li><a href="#/">Beranda</a></li>
                        <li><a href="#/properti">Cari Properti</a></li>
                        <li><a href="#/tentang">Tentang Perusahaan</a></li>
                        <li><a href="#/kontak">Kontak & Dukungan</a></li>
                        <li><a href="#">Syarat & Ketentuan</a></li>
                        <li><a href="#">Kebijakan Privasi</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Hubungi Kami</h4>
                    <p><i class="fa-solid fa-map-marker-alt"></i> Jl. Properti Impian No. 123, Jakarta Pusat,
                        DKI Jakarta, Indonesia</p>
                    <p><i class="fa-solid fa-phone"></i> (021) 555-0123 (Telepon)</p>
                    <p><i class="fa-solid fa-whatsapp"></i> 0812-3456-7890 (WhatsApp)</p>
                    <p><i class="fa-solid fa-envelope"></i> cs@propertiku.com</p>
                </div>
                <div class="footer-section">
                    <h4>Langganan Newsletter</h4>
                    <p>Dapatkan info properti terbaru dan promo menarik langsung ke email Anda.</p>
                    <form id="newsletterForm" class="d-flex flex-column flex-sm-row gap-1">
                        <label for="newsletterEmail" class="sr-only">Alamat Email untuk Newsletter</label>
                        <input type="email" id="newsletterEmail" class="form-control"
                            placeholder="Masukkan email Anda" required aria-label="Email untuk newsletter">
                        <button type="submit" class="btn btn-accent"><i class="fa-solid fa-paper-plane"></i>
                            Langganan</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© <span id="currentYear"></span> PropertiKu. Hak Cipta Dilindungi. Dibuat dengan <i
                        class="fa-solid fa-heart" style="color: var(--danger-color);" title="cinta"></i> oleh
                    Tim PropertiKu.</p>
            </div>
        </div>
    </footer>

    <!-- Templates untuk Setiap Halaman SPA -->
    <template id="page-beranda">
        <section class="hero-section">
            <div class="container hero-content">
                <h1>Temukan Properti Impian Anda Bersama Kami</h1>
                <p class="subtitle">Platform terpercaya untuk mencari, menyewa, atau membeli apartemen, rumah,
                    dan properti lainnya dengan mudah, cepat, dan aman.</p>
                <form class="search-form-hero" id="heroSearchForm">
                    <div class="form-group">
                        <label for="heroLokasi" class="sr-only">Lokasi</label>
                        <input type="text" id="heroLokasi" class="form-control"
                            placeholder="Contoh: Jakarta, Bandung, Bali" aria-label="Masukkan Lokasi Properti">
                    </div>
                    <div class="form-group">
                        <label for="heroTipeProperti" class="sr-only">Tipe Properti</label>
                        <div class="select-container">
                            <select id="heroTipeProperti" class="form-control" aria-label="Pilih Tipe Properti">
                                <option value="">Semua Tipe Properti</option>
                                <option value="apartemen">Apartemen</option>
                                <option value="rumah">Rumah</option>
                                <option value="studio">Studio</option>
                                <option value="villa">Villa</option>
                                <option value="ruko">Ruko</option>
                                <option value="tanah">Tanah</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fa-solid fa-magnifying-glass"></i>
                        Cari Properti</button>
                </form>
            </div>
        </section>
        <section class="featured-properties-section bg-light-bg">
            <div class="container">
                <div class="section-title">
                    <h2>Properti Unggulan Pilihan Kami</h2>
                    <p>Temukan pilihan properti terbaik yang telah kami kurasi khusus untuk memenuhi kebutuhan
                        gaya hidup modern dan investasi Anda.</p>
                </div>
                <div class="property-grid" id="featuredPropertiesGrid" aria-live="polite">
                    <!-- Kartu properti unggulan akan dimuat di sini oleh JavaScript -->
                </div>
                <div class="text-center mt-4">
                    <a href="#/properti" class="btn btn-outline-primary btn-lg">Lihat Semua Properti <i
                            class="fa-solid fa-arrow-right"></i></a>
                </div>
            </div>
        </section>
        <!-- Tambahkan section lain jika perlu, misal: Testimoni, Partner, dll. -->
    </template>

    <template id="page-properti-daftar">
        <section class="property-listing-section">
            <div class="container">
                <div class="section-title">
                    <h1>Daftar Properti Tersedia</h1>
                    <p>Gunakan filter untuk menemukan properti yang paling sesuai dengan preferensi dan anggaran
                        Anda.</p>
                </div>
                <form class="filter-form" id="filterForm">
                    <div class="d-flex flex-wrap gap-2">
                        <div class="form-group">
                            <label for="filterLokasi">Lokasi Properti</label>
                            <input type="text" id="filterLokasi" class="form-control"
                                placeholder="Semua Lokasi">
                        </div>
                        <div class="form-group">
                            <label for="filterTipe">Tipe Properti</label>
                            <div class="select-container">
                                <select id="filterTipe" class="form-control">
                                    <option value="">Semua Tipe</option>
                                    <option value="apartemen">Apartemen</option>
                                    <option value="rumah">Rumah</option>
                                    <option value="studio">Studio</option>
                                    <option value="villa">Villa</option>
                                    <option value="ruko">Ruko</option>
                                    <option value="tanah">Tanah</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="filterHargaMin">Harga Minimum (Rp)</label>
                            <input type="number" id="filterHargaMin" class="form-control" placeholder="0"
                                min="0">
                        </div>
                        <div class="form-group">
                            <label for="filterHargaMax">Harga Maksimum (Rp)</label>
                            <input type="number" id="filterHargaMax" class="form-control"
                                placeholder="Tanpa Batas" min="0">
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fa-solid fa-filter"></i>
                            Terapkan Filter</button>
                    </div>
                </form>
                <div id="propertyListInfo" class="mb-3 text-center" aria-live="polite">
                    <!-- Informasi jumlah properti yang ditampilkan akan dimuat di sini -->
                </div>
                <div class="property-grid" id="allPropertiesGrid" aria-live="polite">
                    <!-- Semua kartu properti akan dimuat di sini -->
                </div>
                <div id="paginationControls" class="mt-4 d-flex justify-center">
                    <!-- Kontrol pagination akan dimuat di sini -->
                </div>
            </div>
        </section>
    </template>

    <template id="page-properti-detail">
        <!-- Konten detail properti akan dimuat di sini oleh JavaScript -->
        <div id="propertyDetailContent" aria-live="polite"></div>
    </template>

    <template id="page-tentang">
        <section class="about-section bg-light-bg">
            <div class="container">
                <div class="section-title">
                    <h1>Tentang PropertiKu</h1>
                    <p>Lebih dari sekadar platform properti, kami adalah partner terpercaya Anda dalam
                        perjalanan menemukan ruang idaman.</p>
                </div>
                <div class="content-grid">
                    <div>
                        <img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?auto=format&fit=crop&w=1000&q=80"
                            alt="Tim PropertiKu sedang berdiskusi" class="feature-image">
                    </div>
                    <div>
                        <h2>Misi Kami: Mempermudah Perjalanan Properti Anda</h2>
                        <p class="lead">Di PropertiKu, kami percaya bahwa setiap orang berhak mendapatkan
                            kemudahan dan transparansi dalam mencari, menyewa, atau memiliki properti. Misi kami
                            adalah menyediakan platform yang inovatif, intuitif, dan informatif, didukung oleh
                            layanan pelanggan yang responsif dan profesional.</p>
                        <p>Kami berkomitmen untuk:</p>
                        <ul>
                            <li>Menyajikan listing properti yang akurat, terverifikasi, dan terkini.</li>
                            <li>Memberikan pengalaman pengguna yang mulus dan menyenangkan di semua perangkat.
                            </li>
                            <li>Menghubungkan pencari properti dengan agen dan pemilik properti yang kredibel.
                            </li>
                            <li>Menjadi sumber informasi terpercaya seputar dunia properti.</li>
                        </ul>
                    </div>
                </div>
                <div class="content-grid mt-4"
                    style="gap: 2.5rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); align-items: start;">
                    <!-- Tambah style inline untuk testing atau pindah ke CSS -->
                    <div>
                        <h3>Visi Kami</h3>
                        <p>Menjadi platform properti nomor satu di Indonesia yang menginspirasi dan
                            memberdayakan setiap individu untuk membuat keputusan properti terbaik dalam hidup
                            mereka.</p>
                    </div>
                    <div>
                        <h3>Nilai-Nilai Kami</h3>
                        <ul>
                            <li><strong>Integritas:</strong> Jujur dan transparan dalam setiap interaksi.</li>
                            <li><strong>Inovasi:</strong> Terus beradaptasi dan menghadirkan solusi teknologi
                                terkini.</li>
                            <li><strong>Pelanggan Utama:</strong> Kepuasan Anda adalah prioritas kami.</li>
                            <li><strong>Kolaborasi:</strong> Bekerja sama untuk mencapai hasil terbaik.</li>
                            <li><strong>Keunggulan:</strong> Selalu berusaha memberikan yang terbaik.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <template id="page-kontak">
        <section class="contact-section">
            <div class="container">
                <div class="section-title">
                    <h1>Hubungi Tim Dukungan Kami</h1>
                    <p>Ada pertanyaan, masukan, atau butuh bantuan? Jangan ragu untuk menghubungi kami. Tim kami
                        siap membantu Anda.</p>
                </div>
                <form id="contactForm" class="contact-form-container bg-light-bg">
                    <div class="form-group">
                        <label for="contactNama">Nama Lengkap Anda</label>
                        <input type="text" id="contactNama" class="form-control" required
                            placeholder="Masukkan nama lengkap">
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">Alamat Email Aktif</label>
                        <input type="email" id="contactEmail" class="form-control" required
                            placeholder="Contoh: nama@domain.com">
                    </div>
                    <div class="form-group">
                        <label for="contactSubjek">Subjek Pesan</label>
                        <input type="text" id="contactSubjek" class="form-control" required
                            placeholder="Contoh: Pertanyaan tentang properti, Kerjasama, dll.">
                    </div>
                    <div class="form-group">
                        <label for="contactPesan">Isi Pesan Anda</label>
                        <textarea id="contactPesan" class="form-control" rows="6" required
                            placeholder="Tuliskan detail pesan Anda di sini..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100 btn-lg"><i
                            class="fa-solid fa-paper-plane"></i> Kirim Pesan Sekarang</button>
                    <div id="contactFormStatus" class="mt-3 text-center" aria-live="polite">
                        <!-- Status pengiriman form akan ditampilkan di sini -->
                    </div>
                </form>
            </div>
        </section>
    </template>

    <template id="page-not-found">
        <section class="not-found-section">
            <div class="container">
                <i class="fa-solid fa-compass fa-beat"
                    style="font-size: 5rem; color: var(--accent-color); --fa-animation-duration: 2s;"></i>
                <h1 class="mt-3">404 - Halaman Hilang Arah</h1>
                <p class="lead">Maaf, halaman yang Anda tuju sepertinya tidak ada atau telah dipindahkan.</p>
                <p>Mungkin Anda bisa mencoba kembali ke halaman utama atau menggunakan pencarian.</p>
                <a href="#/" class="btn btn-primary btn-lg mt-3"><i class="fa-solid fa-house"></i> Kembali ke
                    Beranda</a>
            </div>
        </section>
    </template>

    <script>
        // === Aplikasi SPA PropertiKu (Vanilla JavaScript) ===
        (function () {
            "use strict"; // Mengaktifkan mode ketat JavaScript untuk kualitas kode yang lebih baik

            // === State Aplikasi (Pusat Data) ===
            // Objek ini menyimpan semua data dinamis dan status aplikasi.
            // Bertindak sebagai "single source of truth".
            const state = {
                currentPage: '/', // Path halaman yang sedang aktif
                properties: [ // Data properti (contoh, idealnya dari API)
                    { id: 1, title: 'Apartemen Mewah Pusat Kota', slug: 'apartemen-mewah-pusat-kota', location: 'Jakarta Pusat', price: 3200000000, image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHxhcGFydG1lbnQlMjBpbnRlcmlvcnxlbnwwfHx8fDE2NzI4NzQwMDA&ixlib=rb-4.0.3&q=80&w=800', type: 'apartemen', featured: true, beds: 3, baths: 2, area: 150, description: 'Apartemen luas dan mewah di jantung kota Jakarta, dengan pemandangan kota yang menakjubkan dan akses mudah ke pusat bisnis dan hiburan.', agent: { name: 'Rina Wijaya', phone: '081122334455', avatar: 'https://randomuser.me/api/portraits/women/30.jpg' } },
                    { id: 2, title: 'Rumah Klasik Elegan', slug: 'rumah-klasik-elegan-bandung', location: 'Bandung Utara', price: 5500000000, image: 'https://images.unsplash.com/photo-1580587771525-78b9dba3b914?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHxob3VzZSUyMGV4dGVyaW9yfGVufDB8fHx8MTY3Mjg3NDAwMQ&ixlib=rb-4.0.3&q=80&w=800', type: 'rumah', featured: true, beds: 5, baths: 4, area: 400, description: 'Rumah bergaya klasik dengan taman luas di area elit Bandung Utara. Cocok untuk keluarga besar yang mencari ketenangan dan kemewahan.', agent: { name: 'Agus Setiawan', phone: '082233445566', avatar: 'https://randomuser.me/api/portraits/men/31.jpg' } },
                    { id: 3, title: 'Studio Modern Minimalis', slug: 'studio-modern-minimalis-surabaya', location: 'Surabaya Barat', price: 850000000, image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHxzdHVkaW8lMjBhcGFydG1lbnR8ZW58MHx8fHwxNjcyODc0MDAy&ixlib=rb-4.0.3&q=80&w=800', type: 'studio', featured: false, beds: 1, baths: 1, area: 40, description: 'Studio baru dengan desain modern dan perabotan lengkap. Ideal untuk profesional muda atau mahasiswa.', agent: { name: 'Dewi Lestari', phone: '083344556677', avatar: 'https://randomuser.me/api/portraits/women/32.jpg' } },
                    { id: 4, title: 'Villa Eksklusif Tepi Pantai', slug: 'villa-eksklusif-tepi-pantai-bali', location: 'Bali, Seminyak', price: 12000000000, image: 'https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHx beachfront%MjB2aWxsYXxlbnwwfHx8fDE2NzI4NzQwMDM&ixlib=rb-4.0.3&q=80&w=800', type: 'villa', featured: true, beds: 4, baths: 5, area: 600, description: 'Villa mewah dengan kolam renang pribadi dan akses langsung ke pantai Seminyak. Nikmati matahari terbenam yang spektakuler setiap hari.', agent: { name: 'Made Putra', phone: '084455667788', avatar: 'https://randomuser.me/api/portraits/men/33.jpg' } },
                    { id: 5, title: 'Apartemen Nyaman di BSD', slug: 'apartemen-nyaman-bsd', location: 'Tangerang, BSD', price: 1200000000, image: 'https://images.unsplash.com/photo-1616047006789-b7af52592229?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHxjb3p5JTIwYXBhcnRtZW50fGVufDB8fHx8MTY3Mjg3NDAwNA&ixlib=rb-4.0.3&q=80&w=800', type: 'apartemen', featured: false, beds: 2, baths: 1, area: 65, description: 'Apartemen dua kamar tidur yang nyaman di kawasan berkembang BSD City. Fasilitas lengkap dan lingkungan yang asri.', agent: { name: 'Sari Indah', phone: '085566778899', avatar: 'https://randomuser.me/api/portraits/women/34.jpg' } },
                    { id: 6, title: 'Rumah Townhouse Modern', slug: 'rumah-townhouse-modern-jaksel', location: 'Jakarta Selatan', price: 2800000000, image: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHxob3VzZSUyMG1vZGVybnxlbnwwfHx8fDE2NzI4NzQwMDU&ixlib=rb-4.0.3&q=80&w=800', type: 'rumah', featured: true, beds: 3, baths: 3, area: 180, description: 'Townhouse modern dengan desain kontemporer di lokasi strategis Jakarta Selatan. Keamanan 24 jam dan fasilitas komunitas.', agent: { name: 'Bambang Hermanto', phone: '086677889900', avatar: 'https://randomuser.me/api/portraits/men/35.jpg' } },
                    { id: 7, title: 'Apartemen Studio Compact', slug: 'apartemen-studio-compact-bekasi', location: 'Bekasi', price: 450000000, image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHxzbWFsbCUyMHN0dWRpbyUyMGFwYXJ0bWVudHxlbnwwfHx8fDE2NzI4NzQwMDY&ixlib=rb-4.0.3&q=80&w=800', type: 'studio', featured: false, beds: 1, baths: 1, area: 30, description: 'Studio mungil namun fungsional, cocok untuk investasi atau tempat tinggal pertama. Terhubung dengan transportasi publik.', agent: { name: 'Putri Amelia', phone: '087788990011', avatar: 'https://randomuser.me/api/portraits/women/36.jpg' } },
                    { id: 8, title: 'Villa Asri di Ubud', slug: 'villa-asri-ubud-bali', location: 'Bali, Ubud', price: 7000000000, image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg4MDd8MHwxfHNlYXJjaHwxfHx1YnVkJTIwdmlsbGF8ZW58MHx8fHwxNjcyODc0MDA3&ixlib=rb-4.0.3&q=80&w=800', type: 'villa', featured: false, beds: 3, baths: 3, area: 350, description: 'Villa dengan pemandangan sawah yang menenangkan di Ubud. Desain tradisional Bali dengan sentuhan modern.', agent: { name: 'Wayan Suartama', phone: '088899001122', avatar: 'https://randomuser.me/api/portraits/men/37.jpg' } }
                ],
                filteredProperties: [], // Menyimpan hasil properti setelah difilter
                filters: { // Menyimpan kriteria filter yang sedang aktif
                    location: '',
                    type: '',
                    priceMin: null,
                    priceMax: null
                },
                pagination: { // Menyimpan status pagination saat ini
                    currentPage: 1,
                    itemsPerPage: 6, // Jumlah properti per halaman
                    totalPages: 1
                }
            };

            // === Elemen DOM yang Sering Digunakan ===
            // Menyimpan referensi ke elemen DOM agar tidak perlu query berulang kali.
            const elements = {
                appContent: document.getElementById('app-content'),
                navMenu: document.getElementById('navMenu'),
                navLinks: document.querySelectorAll('#navMenu .nav-link'),
                navbarToggler: document.getElementById('navbarToggler'),
                appHeader: document.getElementById('appHeader'),
                loader: document.getElementById('loaderContainer'),
                currentYear: document.getElementById('currentYear')
            };

            // === Utilitas (Fungsi Bantuan) ===
            // Kumpulan fungsi kecil yang sering digunakan di berbagai bagian aplikasi.
            const utils = {
                /**
                 * Memformat angka menjadi format mata uang Rupiah (IDR).
                 * @param {number} num - Angka yang akan diformat.
                 * @returns {string} String mata uang yang sudah diformat (misal: "Rp 1.000.000").
                 */
                formatCurrency: num => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(num),

                /**
                 * Membersihkan (sanitize) string dari potensi kode berbahaya (dasar XSS prevention).
                 * Mengubah karakter HTML spesial menjadi entitas HTML.
                 * @param {string} str - String input yang akan disanitasi.
                 * @returns {string} String yang sudah bersih dan aman untuk ditampilkan.
                 */
                sanitize: str => {
                    if (typeof str !== 'string') return ''; // Hanya proses string
                    const temp = document.createElement('div');
                    temp.textContent = str; // Menggunakan textContent untuk sanitasi otomatis oleh browser
                    return temp.innerHTML; // Mengambil versi HTML yang sudah disanitasi
                },

                /**
                 * Fungsi debounce untuk menunda eksekusi sebuah fungsi hingga jeda waktu tertentu
                 * setelah event terakhir berhenti dipicu. Berguna untuk optimasi event seperti scroll atau input.
                 * @param {Function} func - Fungsi yang akan dieksekusi setelah debounce.
                 * @param {number} delay - Waktu tunda dalam milidetik (ms).
                 * @returns {Function} Fungsi baru yang sudah memiliki kemampuan debounce.
                 */
                debounce: (func, delay) => {
                    let timeout; // Variabel untuk menyimpan ID timeout
                    return (...args) => { // Mengembalikan fungsi baru
                        clearTimeout(timeout); // Batalkan timeout sebelumnya jika ada
                        timeout = setTimeout(() => func.apply(this, args), delay); // Set timeout baru
                    };
                },
                showLoader: () => elements.loader.classList.add('visible'),
                hideLoader: () => elements.loader.classList.remove('visible'),
                scrollToTop: () => window.scrollTo({ top: 0, behavior: 'smooth' })
            };

            // === Renderers (Fungsi untuk Membuat HTML) ===
            // Kumpulan fungsi yang bertanggung jawab untuk menghasilkan markup HTML dinamis.
            const renderers = {
                /**
                 * Membuat markup HTML untuk sebuah kartu properti.
                 * @param {object} p - Objek data properti.
                 * @returns {string} String HTML yang merepresentasikan kartu properti.
                 */
                propertyCard: p => `
                    <article class="property-card" data-id="${p.id}" tabindex="0" aria-labelledby="property-title-${p.id}">
                        <div class="property-card-image-wrapper">
                            <img loading="lazy" src="${utils.sanitize(p.image)}" alt="Gambar eksterior ${utils.sanitize(p.title)}" class="property-card-image">
                            <span class="property-card-badge">${utils.sanitize(p.type)}</span>
                            ${p.featured ? '<span class="property-card-badge featured-badge" style="top: calc(1rem + 2.2rem + 0.2rem);">Unggulan</span>' : ''}
                        </div>
                        <div class="property-card-content">
                            <h3 id="property-title-${p.id}" class="h4">${utils.sanitize(p.title)}</h3>
                            <p><i class="fa-solid fa-location-dot"></i> ${utils.sanitize(p.location)}</p>
                            <div class="property-card-details">
                                <span><i class="fa-solid fa-bed"></i> ${p.beds} KT</span>
                                <span><i class="fa-solid fa-bath"></i> ${p.baths} KM</span>
                                <span><i class="fa-solid fa-ruler-combined"></i> ${p.area} m²</span>
                            </div>
                            <p class="property-card-price">${utils.formatCurrency(p.price)}</p>
                            <a href="#/properti/${p.slug}" class="btn btn-primary w-100">Lihat Detail Properti</a>
                        </div>
                    </article>
                `,

                /**
                 * Membuat markup HTML untuk halaman detail sebuah properti.
                 * @param {object} p - Objek data properti.
                 * @returns {string} String HTML yang merepresentasikan halaman detail properti.
                 */
                propertyDetail: p => `
                    <section class="property-detail-hero" style="background-image: url('${utils.sanitize(p.image)}');" aria-label="Foto utama ${utils.sanitize(p.title)}">
                        <div class="container">
                            <h1>${utils.sanitize(p.title)}</h1>
                            <p><i class="fa-solid fa-location-dot"></i> ${utils.sanitize(p.location)}</p>
                        </div>
                    </section>
                    <section class="property-detail-body">
                        <div class="container">
                            <div class="property-detail-main">
                                <article class="property-detail-description">
                                    <h2>Deskripsi Lengkap Properti</h2>
                                    <p class="lead">${utils.sanitize(p.description)}</p>
                                    
                                    <h3 class="mt-4">Harga Penawaran: <span style="color:var(--primary-color); font-weight:800;">${utils.formatCurrency(p.price)}</span></h3>
                                    
                                    <h4 class="mt-3">Fasilitas & Fitur Utama:</h4>
                                    <div class="property-features">
                                        <ul>
                                            <li><i class="fa-solid fa-bed"></i> ${p.beds} Kamar Tidur</li>
                                            <li><i class="fa-solid fa-bath"></i> ${p.baths} Kamar Mandi</li>
                                            <li><i class="fa-solid fa-ruler-combined"></i> Luas Bangunan ${p.area} m²</li>
                                            <li><i class="fa-solid fa-house-chimney-window"></i> Tipe: ${utils.sanitize(p.type)}</li>
                                            <!-- Tambahkan fitur lain jika ada di data -->
                                        </ul>
                                    </div>
                                    <!-- Bisa ditambahkan galeri foto, peta lokasi, dll. -->
                                </article>
                                <aside class="property-detail-sidebar">
                                    <div class="property-agent-card">
                                        <img loading="lazy" src="${utils.sanitize(p.agent.avatar)}" alt="Foto agen properti ${utils.sanitize(p.agent.name)}">
                                        <h4>Agen Pemasaran</h4>
                                        <p style="font-weight:600; font-size:1.1rem; color:var(--dark-text);">${utils.sanitize(p.agent.name)}</p>
                                        <p><i class="fa-solid fa-phone-volume"></i> ${utils.sanitize(p.agent.phone)}</p>
                                        <a href="https://wa.me/${p.agent.phone.replace(/\D/g, '')}?text=Halo%20${utils.sanitize(p.agent.name)},%20saya%20tertarik%20dengan%20properti%20${encodeURIComponent(p.title)}%20di%20PropertiKu." target="_blank" rel="noopener noreferrer" class="btn btn-success w-100 mt-3" style="background-color:#25D366;">
                                            <i class="fa-brands fa-whatsapp"></i> Hubungi via WhatsApp
                                        </a>
                                        <button class="btn btn-accent w-100 mt-3"><i class="fa-solid fa-envelope-open-text"></i> Kirim Pesan ke Agen</button>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </section>
                `,

                /**
                 * Membuat markup HTML untuk kontrol pagination.
                 * @param {number} totalPages - Jumlah total halaman.
                 * @param {number} currentPage - Halaman yang sedang aktif.
                 * @returns {string} String HTML yang merepresentasikan kontrol pagination.
                 */
                paginationControls: (totalPages, currentPage) => {
                    let html = '<nav aria-label="Navigasi halaman daftar properti"><ul class="pagination d-flex justify-center flex-wrap gap-1">';
                    for (let i = 1; i <= totalPages; i++) {
                        html += `<li class="page-item"><a href="#" class="btn ${i === currentPage ? 'btn-accent' : 'btn-outline-primary'}" data-page="${i}" aria-label="Ke halaman ${i}" ${i === currentPage ? 'aria-current="page"' : ''}>${i}</a></li>`;
                    }
                    html += '</ul></nav>';
                    return html;
                }
            };

            // === Logika Inti Aplikasi ===

            /**
             * Memperbarui tampilan daftar properti di halaman properti.
             * Fungsi ini menangani filtering data properti berdasarkan kriteria di `state.filters`,
             * kemudian melakukan pagination, dan akhirnya me-render hasilnya ke DOM.
             */
            function updatePropertiesListView() {
                const { properties, pagination, filters } = state;
                let currentProperties = [...properties]; // Salin array agar tidak mengubah data asli di state

                // 1. Proses Filtering Data Properti
                if (filters.location && filters.location.trim() !== '') {
                    currentProperties = currentProperties.filter(p => p.location.toLowerCase().includes(filters.location.toLowerCase().trim()));
                }
                if (filters.type && filters.type.trim() !== '') {
                    currentProperties = currentProperties.filter(p => p.type === filters.type);
                }
                if (filters.priceMin !== null && !isNaN(filters.priceMin)) {
                    currentProperties = currentProperties.filter(p => p.price >= parseFloat(filters.priceMin));
                }
                if (filters.priceMax !== null && !isNaN(filters.priceMax)) {
                    currentProperties = currentProperties.filter(p => p.price <= parseFloat(filters.priceMax));
                }
                state.filteredProperties = [...currentProperties]; // Simpan hasil filter ke state untuk referensi

                // 2. Pengaturan dan Kalkulasi Pagination
                pagination.totalPages = Math.ceil(currentProperties.length / pagination.itemsPerPage);
                // Koreksi halaman saat ini jika melebihi total halaman (misalnya setelah filter mengurangi jumlah properti)
                if (pagination.currentPage > pagination.totalPages && pagination.totalPages > 0) {
                    pagination.currentPage = pagination.totalPages;
                } else if (pagination.totalPages === 0 && currentProperties.length === 0) {
                    pagination.currentPage = 1; // Reset ke halaman 1 jika tidak ada hasil
                }

                const startIndex = (pagination.currentPage - 1) * pagination.itemsPerPage;
                const endIndex = startIndex + pagination.itemsPerPage;
                const paginatedProperties = currentProperties.slice(startIndex, endIndex);

                // 3. Render Hasil ke DOM
                const gridElement = document.getElementById('allPropertiesGrid');
                const listInfoElement = document.getElementById('propertyListInfo');
                const paginationControlsContainer = document.getElementById('paginationControls');

                if (gridElement) {
                    if (paginatedProperties.length > 0) {
                        gridElement.innerHTML = paginatedProperties.map(renderers.propertyCard).join('');
                    } else {
                        gridElement.innerHTML = '<p class="text-center w-100 lead" style="grid-column: 1 / -1;">Maaf, tidak ada properti yang cocok dengan kriteria pencarian Anda saat ini.</p>';
                    }
                }
                if (listInfoElement) {
                    listInfoElement.innerHTML = `<p class="lead text-center">Menampilkan ${paginatedProperties.length} dari total ${currentProperties.length} properti yang ditemukan.</p>`;
                }
                if (paginationControlsContainer) {
                    if (pagination.totalPages > 1) {
                        paginationControlsContainer.innerHTML = renderers.paginationControls(pagination.totalPages, pagination.currentPage);
                        // Tambahkan event listener ke tombol-tombol pagination yang baru dibuat
                        paginationControlsContainer.querySelectorAll('.pagination a.btn').forEach(button => {
                            button.addEventListener('click', e => {
                                e.preventDefault();
                                state.pagination.currentPage = parseInt(e.target.dataset.page, 10);
                                updatePropertiesListView(); // Perbarui tampilan daftar properti
                                utils.scrollToTop(); // Gulir ke atas halaman setelah ganti halaman pagination
                            });
                        });
                    } else {
                        paginationControlsContainer.innerHTML = ''; // Kosongkan jika hanya 1 halaman atau tidak ada hasil
                    }
                }
            }

            /**
             * Mengatur event listener untuk berbagai formulir di aplikasi.
             * Fungsi ini dipanggil setiap kali konten halaman baru dirender oleh router.
             */
            function setupFormHandlers() {
                // Form pencarian di Hero Section (Beranda)
                const heroSearchForm = document.getElementById('heroSearchForm');
                if (heroSearchForm) {
                    heroSearchForm.addEventListener('submit', e => {
                        e.preventDefault();
                        const lokasi = document.getElementById('heroLokasi').value;
                        const tipe = document.getElementById('heroTipeProperti').value;
                        // Atur filter di state berdasarkan input form hero
                        state.filters = { location: lokasi, type: tipe, priceMin: null, priceMax: null };
                        state.pagination.currentPage = 1; // Selalu reset ke halaman pertama saat pencarian baru
                        window.location.hash = '#/properti'; // Arahkan ke halaman daftar properti
                        // Router akan menangani render ulang halaman properti dengan filter baru
                    });
                }

                // Form filter di halaman Daftar Properti
                const filterForm = document.getElementById('filterForm');
                if (filterForm) {
                    // Isi form filter dengan nilai dari state jika ada (misalnya setelah navigasi dari hero search atau filter sebelumnya)
                    document.getElementById('filterLokasi').value = state.filters.location || '';
                    document.getElementById('filterTipe').value = state.filters.type || '';
                    document.getElementById('filterHargaMin').value = state.filters.priceMin || '';
                    document.getElementById('filterHargaMax').value = state.filters.priceMax || '';

                    filterForm.addEventListener('submit', e => {
                        e.preventDefault();
                        state.filters.location = document.getElementById('filterLokasi').value;
                        state.filters.type = document.getElementById('filterTipe').value;
                        const priceMinVal = document.getElementById('filterHargaMin').value;
                        const priceMaxVal = document.getElementById('filterHargaMax').value;
                        // Pastikan konversi ke float atau null jika kosong
                        state.filters.priceMin = priceMinVal ? parseFloat(priceMinVal) : null;
                        state.filters.priceMax = priceMaxVal ? parseFloat(priceMaxVal) : null;
                        state.pagination.currentPage = 1; // Reset ke halaman pertama setiap kali filter baru diterapkan
                        updatePropertiesListView(); // Perbarui tampilan daftar properti dengan filter baru
                    });
                }

                // Form Newsletter di Footer (pastikan listener tidak ditambah berulang kali)
                const newsletterForm = document.getElementById('newsletterForm');
                if (newsletterForm && !newsletterForm.dataset.listenerAttachedNewsletter) {
                    newsletterForm.addEventListener('submit', e => {
                        e.preventDefault();
                        const emailInput = newsletterForm.querySelector('input[type="email"]');
                        alert(`Terima kasih! Email ${utils.sanitize(emailInput.value)} telah berhasil didaftarkan untuk menerima update terbaru dari PropertiKu.`);
                        emailInput.value = ''; // Kosongkan input setelah submit
                    });
                    newsletterForm.dataset.listenerAttachedNewsletter = 'true'; // Tandai bahwa listener sudah ditambahkan
                }

                // Form Kontak di Halaman Kontak
                const contactForm = document.getElementById('contactForm');
                if (contactForm && !contactForm.dataset.listenerAttachedContact) {
                    contactForm.addEventListener('submit', e => {
                        e.preventDefault();
                        const statusDiv = document.getElementById('contactFormStatus');
                        statusDiv.textContent = 'Sedang mengirim pesan Anda... Mohon tunggu sebentar.';
                        statusDiv.style.color = 'var(--secondary-color)';
                        // Simulasi proses pengiriman pesan (di aplikasi nyata, ini akan melibatkan AJAX/fetch ke server)
                        setTimeout(() => {
                            statusDiv.textContent = 'Pesan Anda telah berhasil terkirim! Tim kami akan segera menghubungi Anda kembali.';
                            statusDiv.style.color = 'var(--success-color)';
                            contactForm.reset(); // Kosongkan semua field form setelah berhasil
                        }, 1500); // Jeda 1.5 detik untuk simulasi
                    });
                    contactForm.dataset.listenerAttachedContact = 'true'; // Tandai bahwa listener sudah ditambahkan
                }
            }

            /**
             * Memperbarui status 'active' pada link navigasi di header.
             * Menandai link yang sesuai dengan halaman yang sedang aktif secara visual dan untuk aksesibilitas.
             * @param {string} currentPath - Path URL halaman yang sedang aktif (misal: '/', '/properti').
             */
            function updateActiveNavLink(currentPath) {
                elements.navLinks.forEach(link => {
                    // Normalisasi path dari href link dan path saat ini untuk perbandingan yang konsisten
                    const linkPath = link.getAttribute('href').replace(/^#\/?/, '') || '/'; // Jika hanya "#/" atau "#", anggap "/"
                    const cleanCurrentPath = currentPath.replace(/^\/?/, '') || '/'; // Sama untuk currentPath

                    if (linkPath === cleanCurrentPath) {
                        link.classList.add('active');
                        link.setAttribute('aria-current', 'page'); // Penting untuk aksesibilitas
                    } else {
                        link.classList.remove('active');
                        link.removeAttribute('aria-current');
                    }
                });
            }

            // === Router Aplikasi (Pengatur Navigasi Halaman) ===
            // Mendefinisikan rute-rute aplikasi, template HTML yang sesuai, judul halaman, dan handler (fungsi) khusus.
            const routes = {
                '/': {
                    templateId: 'page-beranda',
                    title: 'Beranda - Temukan Properti Impian Anda',
                    handler: () => { // Handler khusus untuk halaman beranda
                        const grid = document.getElementById('featuredPropertiesGrid');
                        if (grid) {
                            // Ambil maksimal 3 properti yang ditandai 'featured'
                            grid.innerHTML = state.properties
                                .filter(p => p.featured)
                                .slice(0, 3)
                                .map(renderers.propertyCard)
                                .join('');
                        }
                    }
                },
                '/properti': {
                    templateId: 'page-properti-daftar',
                    title: 'Daftar Properti - Semua Pilihan Terbaik Untuk Anda',
                    handler: () => { // Handler untuk halaman daftar properti
                        // Filter dan pagination akan di-handle oleh updatePropertiesListView()
                        // State filter mungkin sudah diisi oleh hero search atau form filter sebelumnya, fungsi ini akan menggunakannya.
                        updatePropertiesListView();
                    }
                },
                '/properti/:slug': { // Rute dinamis dengan parameter 'slug'
                    templateId: 'page-properti-detail',
                    titlePrefix: 'Detail: ', // Judul halaman akan ditambahi nama properti
                    handler: params => { // Handler untuk halaman detail properti, menerima 'params'
                        const property = state.properties.find(p => p.slug === params.slug); // Cari properti berdasarkan slug
                        const contentElement = document.getElementById('propertyDetailContent');
                        if (contentElement) {
                            if (property) {
                                contentElement.innerHTML = renderers.propertyDetail(property);
                                // Set judul halaman secara dinamis dengan nama properti
                                document.title = `PropertiKu - ${routes['/properti/:slug'].titlePrefix}${property.title}`;
                            } else {
                                // Jika properti tidak ditemukan, tampilkan pesan error
                                contentElement.innerHTML = '<div class="container text-center section"><p class="lead">Maaf, properti yang Anda cari tidak ditemukan.</p><a href="#/properti" class="btn btn-primary mt-3"><i class="fa-solid fa-arrow-left"></i> Kembali ke Daftar Properti</a></div>';
                                document.title = `PropertiKu - Properti Tidak Ditemukan`;
                            }
                        }
                    }
                },
                '/tentang': {
                    templateId: 'page-tentang',
                    title: 'Tentang Kami - Mengenal PropertiKu Lebih Dekat'
                },
                '/kontak': {
                    templateId: 'page-kontak',
                    title: 'Hubungi Kami - Tim PropertiKu Siap Membantu'
                },
                '/404': { // Rute khusus untuk halaman yang tidak ditemukan (404 error)
                    templateId: 'page-not-found',
                    title: '404 - Halaman Tidak Ditemukan'
                }
            };

            /**
             * Fungsi utama router. Bertanggung jawab untuk:
             * 1. Mendapatkan path URL saat ini dari hash.
             * 2. Mencocokkan path dengan definisi rute di `routes`.
             * 3. Me-render template HTML yang sesuai ke dalam `elements.appContent`.
             * 4. Mengatur judul halaman.
             * 5. Menjalankan handler khusus rute jika ada.
             * 6. Mengelola tampilan loader.
             */
            function router() {
                utils.showLoader(); // Tampilkan loader saat mulai navigasi

                // Dapatkan path dari hash URL, default ke '/' jika kosong
                const rawPath = window.location.hash.slice(1) || '/';
                const pathSegments = rawPath.split('/').filter(Boolean); // Pecah path menjadi segmen, buang segmen kosong

                let currentRouteConfig = null;
                let params = {}; // Objek untuk menyimpan parameter dari URL (misal: slug)

                // Cari rute yang cocok dengan path saat ini, termasuk rute dinamis dengan parameter
                const matchedRouteKey = Object.keys(routes).find(routeKey => {
                    const routeKeySegments = routeKey.split('/').filter(Boolean);
                    if (routeKeySegments.length !== pathSegments.length && !routeKey.includes('*')) { // '*' bisa untuk wildcard nanti
                        return false; // Jumlah segmen tidak cocok
                    }

                    return routeKeySegments.every((segment, i) => {
                        if (segment.startsWith(':')) { // Jika segmen rute adalah parameter (diawali ':')
                            params[segment.slice(1)] = pathSegments[i]; // Tangkap nilai parameter
                            return true;
                        }
                        return segment === pathSegments[i]; // Segmen statis harus cocok persis
                    });
                });

                if (matchedRouteKey) {
                    currentRouteConfig = routes[matchedRouteKey]; // Rute ditemukan
                } else {
                    currentRouteConfig = routes['/404']; // Jika tidak ada rute cocok, alihkan ke halaman 404
                    if (rawPath !== '/404') { // Hindari loop jika sudah di /404
                        window.location.hash = '#/404'; // Update hash URL ke /404, ini akan memicu router lagi
                        return; // Hentikan eksekusi saat ini karena router akan dipanggil lagi
                    }
                }

                state.currentPage = rawPath.startsWith('/') ? rawPath : '/' + rawPath; // Simpan path saat ini ke state

                const template = document.getElementById(currentRouteConfig.templateId);
                if (template) {
                    elements.appContent.innerHTML = template.innerHTML; // Render konten halaman dari template

                    // Atur judul halaman (default jika judul dinamis belum siap, misal properti belum dimuat)
                    document.title = currentRouteConfig.titlePrefix ?
                        `PropertiKu - ${currentRouteConfig.titlePrefix}...` :
                        `${currentRouteConfig.title} | PropertiKu`;

                    if (currentRouteConfig.handler) {
                        currentRouteConfig.handler(params); // Jalankan handler khusus rute jika ada, kirim parameter
                    }
                    setupFormHandlers(); // Selalu setup ulang form handler setelah konten halaman baru dirender
                    updateActiveNavLink(state.currentPage); // Perbarui link navigasi yang aktif
                }

                utils.scrollToTop(); // Selalu gulir ke atas halaman setelah pindah halaman
                // Sembunyikan loader setelah jeda singkat agar transisi perubahan halaman terlihat lebih mulus
                setTimeout(utils.hideLoader, 150); // Jeda 150ms
            }

            // === Inisialisasi Aplikasi ===

            /**
             * Menginisialisasi semua event listener global yang dibutuhkan aplikasi.
             * Fungsi ini dipanggil sekali saat aplikasi pertama kali dimuat.
             */
            function initializeEventListeners() {
                // Listener untuk perubahan hash URL (memicu navigasi SPA)
                window.addEventListener('hashchange', router);

                // Listener untuk tombol toggle menu mobile
                elements.navbarToggler.addEventListener('click', () => {
                    const isExpanded = elements.navbarToggler.getAttribute('aria-expanded') === 'true';
                    elements.navMenu.classList.toggle('show');
                    elements.navbarToggler.setAttribute('aria-expanded', String(!isExpanded));
                    // Ubah ikon toggler antara bars (menu) dan times (tutup)
                    elements.navbarToggler.innerHTML = !isExpanded ? '<i class="fa-solid fa-times"></i>' : '<i class="fa-solid fa-bars"></i>';
                });

                // Listener untuk menutup menu mobile saat sebuah link di dalamnya diklik
                elements.navLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (elements.navMenu.classList.contains('show')) { // Hanya jika menu mobile terbuka
                            elements.navMenu.classList.remove('show');
                            elements.navbarToggler.setAttribute('aria-expanded', 'false');
                            elements.navbarToggler.innerHTML = '<i class="fa-solid fa-bars"></i>';
                        }
                    });
                });

                // Listener untuk efek scroll pada header (memberi bayangan atau mengubah tampilan)
                // Menggunakan debounce untuk optimasi performa
                window.addEventListener('scroll', utils.debounce(() => {
                    if (window.scrollY > 50) { // Jika scroll lebih dari 50px
                        elements.appHeader.classList.add('scrolled');
                    } else {
                        elements.appHeader.classList.remove('scrolled');
                    }
                    // Dinamis set tinggi header untuk sticky sidebar agen
                    document.documentElement.style.setProperty('--app-header-height', `${elements.appHeader.offsetHeight}px`);

                }, 50)); // Debounce 50ms

                // Global click listener untuk link navigasi internal (delegasi event ke body)
                // Ini memastikan link yang dibuat dinamis (misal di kartu properti) juga berfungsi.
                if (!document.body.dataset.globalLinkListenerAttached) { // Cegah listener ditambah berulang kali
                    document.body.addEventListener('click', e => {
                        // Cek apakah yang diklik adalah link internal SPA (dimulai dengan "#/")
                        const spaLink = e.target.closest('a[href^="#/"]');
                        if (spaLink) {
                            e.preventDefault(); // Mencegah perilaku default link (reload halaman)
                            const targetHash = spaLink.getAttribute('href');
                            if (window.location.hash !== targetHash) {
                                window.location.hash = targetHash; // Ubah hash untuk memicu router
                            } else {
                                // Jika hash sama (misal, klik link halaman aktif lagi), panggil router untuk refresh jika perlu
                                router();
                            }
                        }
                        // Penanganan untuk tombol login/daftar
                        const loginButton = e.target.closest('#loginButton');
                        if (loginButton) {
                            alert('Fitur Masuk / Pendaftaran Pengguna akan segera hadir. Terima kasih atas kesabaran Anda!');
                        }
                    });
                    document.body.dataset.globalLinkListenerAttached = 'true'; // Tandai listener sudah ditambahkan
                }
            }

            /**
             * Fungsi utama untuk memulai aplikasi PropertiKu.
             * Dipanggil saat DOM sudah siap dimanipulasi.
             */
            function initializeApp() {
                elements.currentYear.textContent = new Date().getFullYear(); // Set tahun saat ini di footer
                initializeEventListeners(); // Siapkan semua event listener global
                document.documentElement.style.setProperty('--app-header-height', `${elements.appHeader.offsetHeight}px`); // Set tinggi header awal
                router(); // Jalankan router untuk memuat halaman awal berdasarkan URL saat ini
            }

            // Mulai aplikasi saat seluruh konten HTML (DOM) sudah dimuat dan siap
            if (document.readyState === 'loading') { // Jika DOM belum siap
                document.addEventListener('DOMContentLoaded', initializeApp);
            } else { // Jika DOM sudah siap
                initializeApp();
            }

        })();
    </script>
</body>

</html>