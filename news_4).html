<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Green Valley: Platform penyewaan apartemen premium dengan pencarian canggih dan UI yang memukau.">
    <title>Green Valley | Sewa Apartemen Premium</title>

    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">


    <style>
        /* --- CSS: Core & Theming (Conceptually: assets/css/theme.css) --- */
        :root {
            --gv-primary: #2a9d8f;
            /* Tealish Green */
            --gv-primary-rgb: 42, 157, 143;
            --gv-secondary: #e9c46a;
            /* Sandy Yellow */
            --gv-accent: #f4a261;
            /* Orange-ish */
            --gv-dark: #264653;
            /* Dark Blue-Green */
            --gv-dark-rgb: 38, 70, 83;
            /* For rgba() */
            --gv-light: #f1faee;
            /* Very Light Greenish White */
            --gv-text: #333;
            --gv-text-muted: #6c757d;
            --gv-bg: #ffffff;
            --gv-card-bg: #ffffff;
            --gv-border-color: #dee2e6;
            --gv-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            --gv-radius: 0.5rem;
            --font-primary: 'Poppins', 'Inter', sans-serif;
            --font-secondary: 'Inter', sans-serif;
        }

        .dark-theme {
            --gv-primary: #38c1ad;
            --gv-primary-rgb: 56, 193, 173;
            --gv-secondary: #f0c059;
            --gv-accent: #f6a96e;
            --gv-dark: #a7d5e0;
            /* Lightened for dark theme text contrast if used as bg */
            --gv-dark-rgb: 167, 213, 224;
            --gv-light: #1e2a30;
            /* Darker for dark theme bg elements */
            --gv-text: #f8f9fa;
            --gv-text-muted: #adb5bd;
            --gv-bg: #121212;
            --gv-card-bg: #1e1e1e;
            --gv-border-color: #495057;
            --gv-shadow: 0 0.5rem 1rem rgba(255, 255, 255, 0.05);
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--gv-bg);
            color: var(--gv-text);
            transition: background-color 0.3s ease, color 0.3s ease;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex-grow: 1;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-secondary);
            font-weight: 700;
            color: var(--gv-primary);
        }

        .h1,
        .h2,
        .h3,
        .h4,
        .h5,
        .h6 {
            /* Bootstrap override */
            color: var(--gv-primary);
        }

        a {
            color: var(--gv-accent);
            text-decoration: none;
        }

        a:hover {
            color: var(--gv-primary);
        }

        .btn-primary {
            background-color: var(--gv-primary);
            border-color: var(--gv-primary);
            color: var(--gv-light);
            /* Ensuring text contrast on primary button */
        }

        .btn-primary:hover {
            background-color: var(--gv-dark);
            border-color: var(--gv-dark);
            color: var(--gv-light);
        }

        .dark-theme .btn-primary {
            color: #000;
            /* Dark text on light primary for dark theme */
        }

        .dark-theme .btn-primary:hover {
            color: #000;
        }


        .btn-secondary {
            background-color: var(--gv-secondary);
            border-color: var(--gv-secondary);
            color: var(--gv-dark);
        }

        .btn-secondary:hover {
            background-color: #dcaf4a;
            /* Slightly darker shade of secondary */
            border-color: #dcaf4a;
        }

        .dark-theme .btn-secondary {
            color: #333;
            /* Ensure contrast for dark theme */
        }

        /* --- CSS: Layout & Global Components (Conceptually: assets/css/main.css) --- */
        .page-section {
            display: none;
            /* Hidden by default, JS will show active page */
            padding-top: 70px;
            /* Account for fixed navbar */
            /* Navbar + Footer can vary, so this is an estimate. Flexbox on body handles overall layout. */
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .navbar {
            background-color: rgba(var(--gv-primary-rgb), 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* Safari */
            box-shadow: var(--gv-shadow);
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }

        .dark-theme .navbar {
            background-color: rgba(0, 0, 0, 0.8);
            /* Darker for dark theme */
        }

        .navbar .navbar-brand,
        .navbar .nav-link {
            color: var(--gv-light) !important;
        }

        .navbar .nav-link:hover,
        .navbar .nav-link.active {
            color: var(--gv-secondary) !important;
        }

        .navbar-brand {
            font-weight: 800;
            font-size: 1.75rem;
        }

        .navbar-brand .fa-leaf {
            color: var(--gv-secondary);
        }

        footer {
            background-color: var(--gv-dark);
            color: var(--gv-light);
            padding: 2rem 0;
            text-align: center;
            margin-top: auto;
            /* Pushes footer to bottom if content is short */
        }

        .dark-theme footer {
            background-color: #101010;
        }

        /* --- CSS: Components (Conceptually: components/*.css) --- */

        /* Property Card (Conceptually: components/PropertyCard.css) */
        .property-card {
            background-color: var(--gv-card-bg);
            border: 1px solid var(--gv-border-color);
            border-radius: var(--gv-radius);
            box-shadow: var(--gv-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            display: flex;
            /* Added for consistent card height */
            flex-direction: column;
            /* Added for consistent card height */
        }

        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 1rem 1.5rem rgba(0, 0, 0, 0.15);
        }

        .dark-theme .property-card:hover {
            box-shadow: 0 1rem 1.5rem rgba(255, 255, 255, 0.08);
        }

        .property-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .property-card .card-body {
            padding: 1.25rem;
            flex-grow: 1;
            /* Allows card body to expand */
            display: flex;
            flex-direction: column;
        }

        .property-card .card-body .property-description {
            flex-grow: 1;
            /* Pushes price/button to bottom */
        }

        .property-card .card-title {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: var(--gv-primary);
        }

        .dark-theme .property-card .card-title {
            color: var(--gv-primary);
        }

        .property-card .card-text {
            color: var(--gv-text-muted);
            font-size: 0.9rem;
        }

        .property-card .price {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--gv-accent);
            margin-top: 0.5rem;
            /* Original */
        }

        .property-card .features span {
            margin-right: 10px;
            font-size: 0.85rem;
        }

        .property-card .features .fa-solid {
            margin-right: 4px;
            color: var(--gv-secondary);
        }

        /* Search Form (Conceptually: components/SearchForm.css) */
        .search-form-container {
            background-color: rgba(var(--gv-primary-rgb), 0.1);
            padding: 2rem;
            border-radius: var(--gv-radius);
            margin-bottom: 2rem;
        }

        .dark-theme .search-form-container {
            background-color: rgba(var(--gv-primary-rgb), 0.2);
        }

        .search-form-container .form-label {
            font-weight: 600;
            color: var(--gv-dark);
        }

        .dark-theme .search-form-container .form-label {
            color: var(--gv-text);
        }

        .search-form-container .form-control,
        .search-form-container .form-select {
            background-color: var(--gv-bg);
            color: var(--gv-text);
            border: 1px solid var(--gv-border-color);
        }

        .dark-theme .search-form-container .form-control,
        .dark-theme .search-form-container .form-select {
            background-color: var(--gv-card-bg);
            color: var(--gv-text);
            border: 1px solid var(--gv-border-color);
        }

        .search-form-container .form-control:focus,
        .search-form-container .form-select:focus {
            border-color: var(--gv-primary);
            box-shadow: 0 0 0 0.25rem rgba(var(--gv-primary-rgb), 0.25);
        }


        /* --- CSS: Page Specific (Conceptually: pages/*.css) --- */
        /* Home Page (Conceptually: pages/Home.css) */
        #page-home .hero-section {
            background: linear-gradient(rgba(var(--gv-dark-rgb), 0.7), rgba(var(--gv-dark-rgb), 0.7)), url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80') no-repeat center center;
            background-size: cover;
            color: var(--gv-light);
            padding: 6rem 1rem;
            text-align: center;
            min-height: 70vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #page-home .hero-section h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--gv-light);
            /* Override default h1 color for hero */
        }

        #page-home .hero-section p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            max-width: 700px;
        }

        .dark-theme #page-home .hero-section {
            /* Dark theme overlay might be slightly different if base --gv-dark-rgb changes significantly */
        }

        .dark-theme #page-home .hero-section h1 {
            color: var(--gv-light);
        }


        /* Listings Page (Conceptually: pages/Listings.css) */
        #page-listings .filter-sort-bar {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: rgba(var(--gv-primary-rgb), 0.05);
            border-radius: var(--gv-radius);
        }

        .dark-theme #page-listings .filter-sort-bar {
            background-color: rgba(var(--gv-primary-rgb), 0.1);
        }

        /* Dashboard Page (Conceptually: pages/Dashboard.css) */
        #page-dashboard .stat-card {
            background-color: var(--gv-card-bg);
            border: 1px solid var(--gv-border-color);
            border-left: 5px solid var(--gv-primary);
            padding: 1.5rem;
            border-radius: var(--gv-radius);
            margin-bottom: 1rem;
            position: relative;
            /* For icon positioning */
        }

        #page-dashboard .stat-card .stat-value {
            font-size: 2rem;
            font-weight: bold;
        }

        #page-dashboard .stat-card .stat-label {
            font-size: 0.9rem;
            color: var(--gv-text-muted);
        }

        #page-dashboard .stat-card .fa-2x {
            /* Icon styling */
            opacity: 0.15;
            position: absolute;
            top: 50%;
            right: 1.5rem;
            transform: translateY(-50%);
            color: var(--gv-primary);
            /* Default icon color */
        }

        #page-dashboard .stat-card.border-secondary .fa-2x {
            color: var(--gv-secondary);
        }

        #page-dashboard .stat-card.border-accent .fa-2x {
            color: var(--gv-accent);
        }


        /* CRUD Page (Conceptually: pages/Crud.css) */
        #page-crud .form-section {
            background-color: var(--gv-card-bg);
            padding: 2rem;
            border-radius: var(--gv-radius);
            box-shadow: var(--gv-shadow);
        }

        /* Theme toggle button */
        #theme-toggle {
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--gv-light);
            /* Matches navbar link color */
            background: none;
            border: none;
            padding: 0.5rem;
            /* Make it easier to click */
            line-height: 1;
        }

        #theme-toggle:hover {
            color: var(--gv-secondary);
            /* Matches navbar link hover color */
        }

        /* Ensure navbar toggler icon is visible in dark theme */
        .navbar-toggler-icon {
            background-image: var(--bs-navbar-toggler-icon-bg);
            /* Bootstrap 5.3 variable */
        }

        .dark-theme .navbar-toggler-icon {
            /* Bootstrap's default dark theme toggler icon should work if data-bs-theme="dark" is on html */
            /* If not, force a light icon on dark background */
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
    </style>
</head>

<body>

    <!-- Header/Navbar (Conceptually: components/Navbar.html) -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <i class="fas fa-leaf me-2"></i>Green Valley
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#listings">Apartemen</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#dashboard">Dasbor</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#crud">Manajemen Properti</a>
                    </li>
                    <li class="nav-item ms-lg-3">
                        <button id="theme-toggle" aria-label="Toggle theme">
                            <i class="fas fa-moon"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content Area - Pages will be loaded here by JS -->
    <main id="main-content">
        <!-- Home Page (Conceptually: pages/Home.html) -->
        <section id="page-home" class="page-section">
            <div class="hero-section">
                <h1>Temukan Hunian Impian Anda di Green Valley</h1>
                <p>Apartemen premium dengan fasilitas lengkap dan lokasi strategis. Kenyamanan dan kemewahan dalam satu
                    genggaman.</p>
                <a href="#listings" class="btn btn-primary btn-lg">Lihat Properti <i
                        class="fas fa-arrow-right ms-2"></i></a>
            </div>
            <div class="container py-5">
                <h2 class="text-center mb-5">Kenapa Memilih Green Valley?</h2>
                <div class="row text-center">
                    <div class="col-md-4 mb-4">
                        <div class="p-4 h-100"
                            style="background-color: rgba(var(--gv-primary-rgb), 0.05); border-radius: var(--gv-radius);">
                            <i class="fas fa-map-marked-alt fa-3x mb-3" style="color: var(--gv-primary);"></i>
                            <h3>Lokasi Strategis</h3>
                            <p class="text-muted">Akses mudah ke pusat bisnis, perbelanjaan, dan hiburan.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="p-4 h-100"
                            style="background-color: rgba(var(--gv-primary-rgb), 0.05); border-radius: var(--gv-radius);">
                            <i class="fas fa-concierge-bell fa-3x mb-3" style="color: var(--gv-primary);"></i>
                            <h3>Fasilitas Premium</h3>
                            <p class="text-muted">Kolam renang, gym, keamanan 24 jam, dan banyak lagi.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="p-4 h-100"
                            style="background-color: rgba(var(--gv-primary-rgb), 0.05); border-radius: var(--gv-radius);">
                            <i class="fas fa-shield-alt fa-3x mb-3" style="color: var(--gv-primary);"></i>
                            <h3>Kenyamanan Terjamin</h3>
                            <p class="text-muted">Lingkungan asri, tenang, dan desain modern yang memukau.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Listings Page (Conceptually: pages/Listings.html) -->
        <section id="page-listings" class="page-section">
            <div class="container py-5">
                <h2 class="text-center mb-4">Daftar Apartemen Tersedia</h2>

                <!-- Search Form Component -->
                <div class="search-form-container mb-5">
                    <form id="apartment-search-form" class="row g-3 align-items-end">
                        <div class="col-lg-3 col-md-6">
                            <label for="search-location" class="form-label">Lokasi</label>
                            <input type="text" class="form-control" id="search-location"
                                placeholder="cth: Jakarta Selatan">
                        </div>
                        <div class="col-lg-2 col-md-6">
                            <label for="search-type" class="form-label">Tipe</label>
                            <select id="search-type" class="form-select">
                                <option selected value="">Semua Tipe</option>
                                <option value="1BR">1 BR</option>
                                <option value="2BR">2 BR</option>
                                <option value="3BR+">3 BR+</option>
                                <option value="Studio">Studio</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <label for="search-checkin" class="form-label">Tanggal Check-in</label>
                            <input type="text" class="form-control datepicker" id="search-checkin"
                                placeholder="Pilih tanggal">
                        </div>
                        <div class="col-lg-2 col-md-6">
                            <label for="search-price" class="form-label">Harga Maks (Juta)</label>
                            <input type="number" class="form-control" id="search-price" placeholder="cth: 15" min="0">
                        </div>
                        <div class="col-lg-2 col-md-12">
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="fas fa-search me-2"></i>Cari
                            </button>
                        </div>
                    </form>
                </div>

                <div class="filter-sort-bar d-flex flex-wrap justify-content-between align-items-center">
                    <p class="mb-2 mb-md-0" id="listing-count">Menampilkan 0 properti</p>
                    <div class="d-flex align-items-center">
                        <label for="sort-by" class="me-2 form-label mb-0">Urutkan:</label>
                        <select id="sort-by" class="form-select form-select-sm d-inline-block w-auto">
                            <option value="default">Default</option>
                            <option value="price-asc">Harga Terendah</option>
                            <option value="price-desc">Harga Tertinggi</option>
                            <option value="name-asc">Nama A-Z</option>
                        </select>
                    </div>
                </div>

                <div id="property-listings-container" class="row g-4 mt-3">
                    <!-- Property cards will be injected here by JavaScript -->
                    <p id="no-results-message" class="text-center text-muted d-none col-12">Tidak ada properti yang
                        sesuai
                        dengan kriteria pencarian Anda.</p>
                </div>
            </div>
        </section>

        <!-- Dashboard Page (Conceptually: pages/Dashboard.html) -->
        <section id="page-dashboard" class="page-section">
            <div class="container py-5">
                <h2 class="text-center mb-5">Dasbor Pengguna</h2>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="stat-card">
                            <div class="stat-value">12</div>
                            <div class="stat-label">Properti Dilihat</div>
                            <i class="fas fa-eye fa-2x"></i>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="stat-card border-secondary"
                            style="border-left-color: var(--gv-secondary) !important;">
                            <div class="stat-value">3</div>
                            <div class="stat-label">Favorit Saya</div>
                            <i class="fas fa-heart fa-2x"></i>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="stat-card border-accent" style="border-left-color: var(--gv-accent) !important;">
                            <div class="stat-value">1</div>
                            <div class="stat-label">Pemesanan Aktif</div>
                            <i class="fas fa-calendar-check fa-2x"></i>
                        </div>
                    </div>
                </div>
                <div class="mt-5">
                    <h4>Aktivitas Terbaru</h4>
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            style="background-color: var(--gv-card-bg); color: var(--gv-text); border-color: var(--gv-border-color);">
                            Anda melihat "Apartemen Serene Heights"
                            <span class="badge bg-primary rounded-pill">2 jam lalu</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            style="background-color: var(--gv-card-bg); color: var(--gv-text); border-color: var(--gv-border-color);">
                            Menambahkan "Villa Evergreen" ke favorit
                            <span class="badge bg-success rounded-pill">Kemarin</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- CRUD Page (Conceptually: pages/Crud.html) -->
        <section id="page-crud" class="page-section">
            <div class="container py-5">
                <h2 class="text-center mb-5">Manajemen Properti</h2>
                <div class="form-section">
                    <h3 class="mb-4" id="crud-form-title">Tambah Properti Baru</h3>
                    <form id="crud-property-form">
                        <input type="hidden" id="crud-editing-id">
                        <div class="mb-3">
                            <label for="prop-name" class="form-label">Nama Properti</label>
                            <input type="text" class="form-control" id="prop-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="prop-location" class="form-label">Lokasi</label>
                            <input type="text" class="form-control" id="prop-location" required>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="prop-price" class="form-label">Harga (per bulan, Juta Rp)</label>
                                <input type="number" class="form-control" id="prop-price" step="0.1" min="0" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="prop-type-crud" class="form-label">Tipe</label>
                                <select id="prop-type-crud" class="form-select" required>
                                    <option value="Studio">Studio</option>
                                    <option value="1BR">1 BR</option>
                                    <option value="2BR">2 BR</option>
                                    <option value="3BR+">3 BR+</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="prop-beds" class="form-label">Jumlah Kamar Tidur</label>
                                <input type="number" class="form-control" id="prop-beds" min="0" value="1" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="prop-baths" class="form-label">Jumlah Kamar Mandi</label>
                                <input type="number" class="form-control" id="prop-baths" min="1" value="1" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="prop-image-url" class="form-label">URL Gambar</label>
                            <input type="url" class="form-control" id="prop-image-url"
                                placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="mb-3">
                            <label for="prop-description" class="form-label">Deskripsi Singkat</label>
                            <textarea class="form-control" id="prop-description" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" id="crud-submit-btn">
                            <i class="fas fa-plus-circle me-2"></i>Tambah Properti
                        </button>
                        <button type="button" class="btn btn-outline-secondary d-none" id="crud-cancel-edit-btn">
                            Batal Edit
                        </button>
                    </form>
                </div>

                <h3 class="mt-5 mb-3">Daftar Properti Saya</h3>
                <div id="crud-property-list" class="list-group">
                    <!-- CRUD items will be listed here -->
                    <p class="text-muted">Belum ada properti yang ditambahkan.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer (Conceptually: components/Footer.html) -->
    <footer class="mt-auto">
        <div class="container">
            <p>© <span id="current-year"></span> Green Valley. Hak Cipta Dilindungi.</p>
            <p>
                <a href="#" class="text-light me-2"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-light me-2"><i class="fab fa-twitter"></i></a>
                <a href="#" class="text-light"><i class="fab fa-instagram"></i></a>
            </p>
        </div>
    </footer>

    <!-- Templates (Conceptually: components/*.template.html) -->
    <template id="property-card-template">
        <div class="col-md-6 col-lg-4">
            <div class="property-card h-100"> {/* h-100 for consistent height if using flex */}
                <img src="https://via.placeholder.com/300x200.png?text=Apartemen" alt="Gambar Properti"
                    class="property-image">
                <div class="card-body">
                    <h5 class="card-title property-name">Nama Properti</h5>
                    <p class="card-text property-location mb-2"><i class="fas fa-map-marker-alt me-1"></i> Lokasi</p>
                    <div class="features text-muted mb-2">
                        <span class="property-type"><i class="fas fa-door-open"></i> Tipe</span>
                        <span class="property-beds"><i class="fas fa-bed"></i> - Kamar</span>
                        <span class="property-baths"><i class="fas fa-bath"></i> - K.Mandi</span>
                    </div>
                    <p class="card-text property-description small mb-3">Deskripsi singkat properti...</p>
                    <div class="d-flex justify-content-between align-items-center mt-auto"> {/* mt-auto pushes to bottom
                        */}
                        <p class="price property-price mb-0">Rp X.XXX.XXX</p>
                        <a href="#" class="btn btn-sm btn-outline-primary property-details-link">Detail</a>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="crud-list-item-template">
        <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            style="background-color: var(--gv-card-bg); color: var(--gv-text); border-color: var(--gv-border-color);">
            <div>
                <h6 class="mb-1 crud-item-name">Nama Properti</h6>
                <small class="crud-item-location text-muted">Lokasi</small>
                <small class="crud-item-price text-muted d-block">Harga: Rp X.XXX.XXX</small>
            </div>
            <div>
                <button class="btn btn-sm btn-outline-secondary me-2 crud-edit-btn" title="Edit">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-sm btn-outline-danger crud-delete-btn" title="Hapus">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
    </template>


    <!-- External JS Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/id.js"></script> <!-- Indonesian locale for flatpickr -->

    <script>
        // --- JavaScript: Main Application Logic (Conceptually: assets/js/app.js) ---
        document.addEventListener('DOMContentLoaded', () => {

            // --- Core: Theme Management ---
            const themeToggle = document.getElementById('theme-toggle');
            const htmlElement = document.documentElement;

            function applyTheme(theme) {
                htmlElement.setAttribute('data-bs-theme', theme); // For Bootstrap components
                if (theme === 'dark') {
                    document.body.classList.add('dark-theme');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    document.body.classList.remove('dark-theme');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }
            }

            const savedTheme = localStorage.getItem('theme') || 'light';
            applyTheme(savedTheme);

            themeToggle.addEventListener('click', () => {
                let newTheme = document.body.classList.contains('dark-theme') ? 'light' : 'dark';
                applyTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            });

            // --- Core: SPA Router ---
            const pages = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('.navbar .nav-link[href^="#"]'); // Select only SPA links

            function activatePage(pageId) {
                pages.forEach(page => {
                    page.classList.toggle('active', page.id === pageId);
                });

                navLinks.forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === `#${pageId.replace('page-', '')}`);
                });
                window.scrollTo(0, 0); // Scroll to top on page change
            }

            function handleRouteChange() {
                const hash = window.location.hash.substring(1) || 'home';
                activatePage(`page-${hash}`);
            }

            window.addEventListener('hashchange', handleRouteChange);
            handleRouteChange(); // Initial page load

            // Close navbar on mobile after link click
            const navbarNav = document.getElementById('navbarNav');
            if (navbarNav) {
                navbarNav.addEventListener('click', (event) => {
                    if (event.target.classList.contains('nav-link') && navbarNav.classList.contains('show')) {
                        const toggler = document.querySelector('.navbar-toggler');
                        // Check if the navbar toggler is visible (i.e., we are on a small screen)
                        if (getComputedStyle(toggler).display !== 'none') {
                            bootstrap.Collapse.getInstance(navbarNav)?.hide();
                        }
                    }
                });
            }


            // --- Component: Property Card Logic ---
            const propertyCardTemplate = document.getElementById('property-card-template');
            const listingsContainer = document.getElementById('property-listings-container');
            const noResultsMessage = document.getElementById('no-results-message');
            const listingCountElement = document.getElementById('listing-count');

            // Dummy Data (Conceptually: assets/js/data.js)
            let apartments = [
                { id: 1, name: 'Apartemen Serene Heights', location: 'Jakarta Selatan', type: '2BR', beds: 2, baths: 1, price: 12000000, imageUrl: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', description: 'Pemandangan kota yang menakjubkan dengan interior modern dan akses mudah ke pusat bisnis.' },
                { id: 2, name: 'Green Valley Residence', location: 'BSD City', type: '3BR+', beds: 3, baths: 2, price: 18000000, imageUrl: 'https://images.unsplash.com/photo-1560185007-c5ca91ba2960?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', description: 'Lingkungan hijau asri, sangat cocok untuk keluarga yang mendambakan ketenangan dan fasilitas lengkap.' },
                { id: 3, name: 'Urban Oasis Loft', location: 'Jakarta Pusat', type: 'Studio', beds: 1, baths: 1, price: 8000000, imageUrl: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', description: 'Desain industrial chic di jantung kota, dekat dengan berbagai moda transportasi publik.' },
                { id: 4, name: 'Skyline View Apartment', location: 'Surabaya Barat', type: '1BR', beds: 1, baths: 1, price: 7500000, imageUrl: 'https://images.unsplash.com/photo-1480074568708-e7b720bb3f09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', description: 'Nikmati pemandangan cakrawala kota yang spektakuler setiap hari dari apartemen Anda.' },
                { id: 5, name: 'Cozy Nest Studio', location: 'Bandung Kota', type: 'Studio', beds: 1, baths: 1, price: 5000000, imageUrl: 'https://images.unsplash.com/photo-1501183638710-841dd1904471?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', description: 'Apartemen studio yang kecil namun sangat nyaman, terletak strategis di pusat kota Bandung.' },
                { id: 6, name: 'Riverside Retreat', location: 'Jakarta Timur', type: '2BR', beds: 2, baths: 2, price: 10000000, imageUrl: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80', description: 'Hunian tenang di tepi sungai, menawarkan pelarian sempurna dari hiruk pikuk kota metropolitan.' },
            ];

            function formatPrice(price) {
                return `Rp ${price.toLocaleString('id-ID')}`;
            }

            function renderPropertyCard(property) {
                const cardClone = propertyCardTemplate.content.cloneNode(true);
                cardClone.querySelector('.property-image').src = property.imageUrl || 'https://via.placeholder.com/300x200.png?text=Apartemen';
                cardClone.querySelector('.property-image').alt = `Gambar ${property.name}`;
                cardClone.querySelector('.property-name').textContent = property.name;
                cardClone.querySelector('.property-location').innerHTML = `<i class="fas fa-map-marker-alt me-1 text-muted"></i> ${property.location}`;
                cardClone.querySelector('.property-type').innerHTML = `<i class="fas fa-door-open"></i> ${property.type}`;
                cardClone.querySelector('.property-beds').innerHTML = `<i class="fas fa-bed"></i> ${property.beds} Kamar`;
                cardClone.querySelector('.property-baths').innerHTML = `<i class="fas fa-bath"></i> ${property.baths} K.Mandi`;
                cardClone.querySelector('.property-price').textContent = formatPrice(property.price);
                cardClone.querySelector('.property-description').textContent = property.description || 'Tidak ada deskripsi tambahan.';
                cardClone.querySelector('.property-details-link').href = `#property-details?id=${property.id}`; // Conceptual link
                return cardClone;
            }

            function displayProperties(propertiesToDisplay) {
                listingsContainer.innerHTML = ''; // Clear existing
                if (propertiesToDisplay.length === 0) {
                    noResultsMessage.classList.remove('d-none');
                } else {
                    noResultsMessage.classList.add('d-none');
                    propertiesToDisplay.forEach(prop => {
                        listingsContainer.appendChild(renderPropertyCard(prop));
                    });
                }
                listingCountElement.textContent = `Menampilkan ${propertiesToDisplay.length} properti`;
            }

            // Initial display
            displayProperties(apartments);

            // --- Component: Search & Filter Logic ---
            const searchForm = document.getElementById('apartment-search-form');
            const sortBySelect = document.getElementById('sort-by');

            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                filterAndSortProperties();
            });

            sortBySelect.addEventListener('change', filterAndSortProperties);

            function filterAndSortProperties() {
                const locationQuery = document.getElementById('search-location').value.toLowerCase().trim();
                const typeQuery = document.getElementById('search-type').value;
                const priceVal = document.getElementById('search-price').value;
                const priceQuery = priceVal ? parseFloat(priceVal) * 1000000 : null;
                // const checkinQuery = document.getElementById('search-checkin').value; // For future use

                let filtered = apartments.filter(apt => {
                    const matchesLocation = locationQuery ? apt.location.toLowerCase().includes(locationQuery) : true;
                    const matchesType = typeQuery ? apt.type === typeQuery : true;
                    const matchesPrice = (priceQuery !== null && !isNaN(priceQuery)) ? apt.price <= priceQuery : true;
                    return matchesLocation && matchesType && matchesPrice;
                });

                const sortBy = sortBySelect.value;
                if (sortBy === 'price-asc') {
                    filtered.sort((a, b) => a.price - b.price);
                } else if (sortBy === 'price-desc') {
                    filtered.sort((a, b) => b.price - a.price);
                } else if (sortBy === 'name-asc') {
                    filtered.sort((a, b) => a.name.localeCompare(b.name));
                }
                // 'default' sort is by original order (or ID if explicitly sorted initially)

                displayProperties(filtered);
            }

            // Initialize Flatpickr
            flatpickr(".datepicker", {
                dateFormat: "d-m-Y",
                locale: "id" // Indonesian locale
            });

            // --- Page: CRUD Logic ---
            const crudForm = document.getElementById('crud-property-form');
            const crudListContainer = document.getElementById('crud-property-list');
            const crudListItemTemplate = document.getElementById('crud-list-item-template');
            const crudFormTitle = document.getElementById('crud-form-title');
            const crudSubmitBtn = document.getElementById('crud-submit-btn');
            const crudCancelEditBtn = document.getElementById('crud-cancel-edit-btn');
            const crudEditingIdInput = document.getElementById('crud-editing-id');

            let crudProperties = [...apartments]; // Initialize CRUD list with existing apartments for demo purposes. 
            // Or start with empty: let crudProperties = [];

            function renderCrudListItem(property) { // Index is no longer needed if using ID
                const itemClone = crudListItemTemplate.content.cloneNode(true);
                const listItemElement = itemClone.firstElementChild;
                listItemElement.dataset.id = property.id; // Use ID for identification

                itemClone.querySelector('.crud-item-name').textContent = property.name;
                itemClone.querySelector('.crud-item-location').textContent = property.location;
                itemClone.querySelector('.crud-item-price').textContent = `Harga: ${formatPrice(property.price)}`;


                itemClone.querySelector('.crud-edit-btn').addEventListener('click', () => {
                    const propToEdit = crudProperties.find(p => p.id === property.id);
                    if (!propToEdit) return;

                    crudFormTitle.textContent = 'Edit Properti';
                    crudSubmitBtn.innerHTML = '<i class="fas fa-save me-2"></i>Simpan Perubahan';
                    crudCancelEditBtn.classList.remove('d-none');
                    crudEditingIdInput.value = propToEdit.id;

                    document.getElementById('prop-name').value = propToEdit.name;
                    document.getElementById('prop-location').value = propToEdit.location;
                    document.getElementById('prop-price').value = propToEdit.price / 1000000;
                    document.getElementById('prop-type-crud').value = propToEdit.type;
                    document.getElementById('prop-beds').value = propToEdit.beds;
                    document.getElementById('prop-baths').value = propToEdit.baths;
                    document.getElementById('prop-image-url').value = propToEdit.imageUrl;
                    document.getElementById('prop-description').value = propToEdit.description;

                    crudForm.scrollIntoView({ behavior: 'smooth' });
                    document.getElementById('prop-name').focus();
                });

                itemClone.querySelector('.crud-delete-btn').addEventListener('click', () => {
                    if (confirm(`Anda yakin ingin menghapus properti "${property.name}"?`)) {
                        crudProperties = crudProperties.filter(p => p.id !== property.id);
                        apartments = apartments.filter(apt => apt.id !== property.id); // Sync with main list

                        renderCrudList();
                        filterAndSortProperties(); // Update main listings page
                    }
                });
                return itemClone;
            }

            function resetCrudForm() {
                crudForm.reset();
                crudFormTitle.textContent = 'Tambah Properti Baru';
                crudSubmitBtn.innerHTML = '<i class="fas fa-plus-circle me-2"></i>Tambah Properti';
                crudCancelEditBtn.classList.add('d-none');
                crudEditingIdInput.value = '';
            }

            crudCancelEditBtn.addEventListener('click', resetCrudForm);


            function renderCrudList() {
                crudListContainer.innerHTML = '';
                if (crudProperties.length === 0) {
                    crudListContainer.innerHTML = '<p class="text-muted">Belum ada properti yang ditambahkan.</p>';
                } else {
                    // Sort by name for consistent display in CRUD list
                    const sortedCrudProperties = [...crudProperties].sort((a, b) => a.name.localeCompare(b.name));
                    sortedCrudProperties.forEach((prop) => {
                        crudListContainer.appendChild(renderCrudListItem(prop));
                    });
                }
            }

            crudForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const editingId = parseInt(crudEditingIdInput.value);

                const propertyData = {
                    name: document.getElementById('prop-name').value.trim(),
                    location: document.getElementById('prop-location').value.trim(),
                    price: parseFloat(document.getElementById('prop-price').value) * 1000000,
                    type: document.getElementById('prop-type-crud').value,
                    beds: parseInt(document.getElementById('prop-beds').value) || 1,
                    baths: parseInt(document.getElementById('prop-baths').value) || 1,
                    imageUrl: document.getElementById('prop-image-url').value.trim() || `https://via.placeholder.com/300x200.png?text=${encodeURIComponent(document.getElementById('prop-name').value.trim() || 'Properti Baru')}`,
                    description: document.getElementById('prop-description').value.trim(),
                };

                if (isNaN(propertyData.price) || propertyData.price <= 0) {
                    alert("Harga properti tidak valid.");
                    return;
                }

                if (editingId) { // Editing existing property
                    const indexInCrud = crudProperties.findIndex(p => p.id === editingId);
                    const indexInMain = apartments.findIndex(apt => apt.id === editingId);

                    if (indexInCrud !== -1) {
                        crudProperties[indexInCrud] = { ...crudProperties[indexInCrud], ...propertyData };
                    }
                    if (indexInMain !== -1) {
                        apartments[indexInMain] = { ...apartments[indexInMain], ...propertyData };
                    }
                } else { // Adding new property
                    const newProperty = {
                        id: Date.now(), // Simple unique ID
                        ...propertyData
                    };
                    crudProperties.push(newProperty);
                    apartments.push(newProperty); // Also add to main listings
                }

                renderCrudList();
                filterAndSortProperties(); // Update main listings if it was added/edited there
                resetCrudForm();
            });

            renderCrudList(); // Initial render for CRUD list

            // --- Footer: Current Year ---
            document.getElementById('current-year').textContent = new Date().getFullYear();

        });
    </script>

</body>

</html>